(self.webpackChunk_deriv_cashier=self.webpackChunk_deriv_cashier||[]).push([["cashier-app"],{"./App.jsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>kr});var r,a,i,o,s,l=n("react"),c=n.n(l),u=n("@deriv/shared"),d=n("../../../node_modules/moment/moment.js"),p=n.n(d),h=!1,f=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,n){t.reject=n,t.resolve=e}))},m=function(){a=performance.now(),u.WS.send({time:1}).then(y)},_=function(e){h||(s=e,m(),clearInterval(i),i=setInterval(m,3e4),h=!0)},y=function(e){if(!e.error)if(h){clearInterval(o);var t=e.time,n=performance.now(),i=1e3*t+(n-a),l=function(){var e=performance.now()-n;r=p()(i+e).utc(),"function"==typeof s&&s()};l(),f.resolve(),o=setInterval(l,1e3)}else _()},g=f.promise,v=function(){return r?r.clone():void 0},b=n("mobx-react"),E=n("../../../node_modules/prop-types/index.js"),w=n.n(E),C=n("react-router");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=c().createContext(null),O=function(e){var t=e.store,n=e.children;return c().createElement(N.Provider,{value:k(k({},t),{},{mobxStores:t})},n)},T=function(e){return function(t){return function(e,t){var n=function(n){var r=c().useContext(N),a=t;return function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(t)&&(a=function(e){return c().createElement(t,e)}),(0,b.useObserver)((function(){return a(k(k({},n),e(r,n)))}))};return n.displayName=t.name,n}(e,t)}},I=n("react-router-dom"),x=n("@deriv/translations"),D=n("@deriv/components");const P=T((function(e){var t=e.ui,n=e.client;return{toggleAccountsDialog:t.toggleAccountsDialog,is_dxtrade_allowed:n.is_dxtrade_allowed}}))((function(e){var t=e.toggleAccountsDialog,n=e.is_dxtrade_allowed;return c().createElement("div",{className:"cashier__wrapper cashier__no-balance"},c().createElement(D.Icon,{icon:"IcCashierNoBalance",className:"cashier__no-balance-icon",size:116}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"withdraw__header"},c().createElement(x.Localize,{i18n_default_text:"You need at least two accounts"})),c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"cashier__text"},n?c().createElement(x.Localize,{i18n_default_text:"Please create another Deriv, DMT5, or Deriv X account."}):c().createElement(x.Localize,{i18n_default_text:"Please create another Deriv or DMT5 account."})),c().createElement(D.Button,{className:"cashier__button",primary:!0,large:!0,onClick:t},c().createElement(x.Localize,{i18n_default_text:"Create account"})))}));var M=function(e){var t=e.header,n=e.message,r=e.button_link,a=e.onClickButton,i=e.button_text,o=e.footer;return c().createElement("div",{className:"cashier__wrapper cashier__wrapper-error"},c().createElement(D.Icon,{icon:"IcCashierError",className:"cashier-error__icon"}),t&&c().createElement(D.Text,{as:"h2",color:"loss-danger",weight:"bold",align:"center",className:"cashier-error__header"},t),n&&c().createElement(D.Text,{as:"p",align:"center",size:"xs",line_height:"s",className:"cashier__paragraph"},n),r&&c().createElement(D.ButtonLink,{className:"cashier-error__button",to:r,onClick:a,primary:!0,large:!0},c().createElement("span",{className:"dc-btn__text"},i)),!r&&i&&c().createElement(D.Button,{className:"cashier-error__button",onClick:a,text:i,primary:!0,large:!0}),o&&c().createElement(D.Text,{as:"h2",size:"xxs"},o))},R=function(e){var t,n=e.error,r=e.setErrorMessage,a={address_city:(0,x.localize)("Town/City"),address_line_1:(0,x.localize)("First line of home address"),address_postcode:(0,x.localize)("Postal Code/ZIP"),address_state:(0,x.localize)("State/Province"),email:(0,x.localize)("Email address"),phone:(0,x.localize)("Telephone"),residence:(0,x.localize)("Country of Residence")},i=function(){"function"==typeof n.onClickButton&&n.onClickButton(),o()},o=function(){r("")};switch(n.code){case"InvalidToken":t=c().createElement(M,{header:(0,x.localize)("Email verification failed"),message:c().createElement(x.Localize,{i18n_default_text:"The verification link you used is invalid or expired. Please request for a new one."}),onClickButton:i,button_text:(0,x.localize)("Resend email")});break;case"ASK_FIX_DETAILS":t=c().createElement(M,{header:(0,x.localize)("Update your personal details"),message:c().createElement(c().Fragment,null,c().createElement(x.Localize,{i18n_default_text:"We can't validate your personal details because there is some information missing."})," ",n.fields?c().createElement(x.Localize,{i18n_default_text:"Please update your {{details}} to continue.",values:{details:n.fields.map((function(e){return a[e]||e})).join(", "),interpolation:{escapeValue:!1}}}):c().createElement(x.Localize,{i18n_default_text:"Please update your details to continue."})),button_link:"/account/personal-details",onClickButton:i,button_text:(0,x.localize)("Update my details"),footer:c().createElement(x.Localize,{i18n_default_text:"Need help? <0>Contact us</0>.",components:[c().createElement(D.StaticUrl,{key:0,className:"link",href:"help-centre"})]})});break;case"WrongResponse":t=c().createElement(M,{header:n.message,onClickButton:i,button_text:(0,x.localize)("Try again")});break;case"PaymentAgentWithdrawError":t=c().createElement(M,{header:n.message,onClickButton:i,button_text:(0,x.localize)("Back to payment agents")});break;default:t=c().createElement(M,{header:n.message})}return t};R.propTypes={error:w().object,setErrorMessage:w().func};const U=T((function(e){return{setErrorMessage:e.modules.cashier.setErrorMessage}}))(R);var L=function(e){var t=e.currency,n=e.history,r=e.is_deposit_locked,a=e.setTabIndex;return c().createElement("div",{className:"cashier__wrapper cashier__no-balance"},c().createElement(D.Icon,{icon:"IcCashierNoBalance",className:"cashier__no-balance-icon",size:116}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"withdraw__header"},c().createElement(x.Localize,{i18n_default_text:"You have no funds in your {{currency}} account",values:{currency:(0,u.getCurrencyDisplayCode)(t)}})),!r&&c().createElement(c().Fragment,null,c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"cashier__text"},c().createElement(x.Localize,{i18n_default_text:"Please make a deposit to use this feature."})),c().createElement(D.Button,{className:"cashier__no-balance-button",has_effect:!0,text:(0,x.localize)("Deposit now"),onClick:function(){a(0),n.push(u.routes.cashier_deposit)},primary:!0,large:!0})))};L.propTypes={currency:w().string,history:w().object,is_deposit_locked:w().bool,setTabIndex:w().func};const F=T((function(e){var t=e.client,n=e.modules;return{currency:t.currency,is_deposit_locked:n.cashier.is_deposit_locked,setTabIndex:n.cashier.setCashierTabIndex}}))((0,I.withRouter)(L));var j=n("../../../node_modules/classnames/index.js"),z=n.n(j),H=function(e){var t=e.has_real_account,n=e.history,r=e.is_dark_mode_on,a=e.openRealAccountSignup,i=e.toggleAccountsDialog;return c().createElement("div",{className:"cashier__wrapper"},t?c().createElement(c().Fragment,null,c().createElement("div",{className:z()("cashier__account-switch-icon",r?"cashier__account-switch-icon--dark":"cashier__account-switch-icon--light")}),c().createElement(D.Text,{as:"h2",align:"center",weight:"bold",color:"prominent",className:"cashier__virtual-header"},c().createElement(x.Localize,{i18n_default_text:"You are using a demo account"})),c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"cashier__paragraph cashier__text cashier__text--full-width"},c().createElement(x.Localize,{i18n_default_text:"You need to switch to a real money account to use this feature.<0/>You can do this by selecting a real account from the <1>Account Switcher.</1>",components:[c().createElement("br",{key:0}),c().createElement("span",{key:1,className:"cashier__account-switch-text",onClick:i})]}))):c().createElement(c().Fragment,null,c().createElement("div",{className:"cashier-locked"},c().createElement(D.Icon,{icon:"IcCashierLocked",className:"cashier-locked__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"cashier-locked__title"},c().createElement(x.Localize,{i18n_default_text:"Cashier is locked"})),c().createElement(D.Text,{as:"p",size:"xs",align:"center",className:"cashier-locked__desc"},c().createElement(x.Localize,{i18n_default_text:"You are using a demo account. Please <0>switch</0> to your real account or <1>create</1> one to access Cashier.",components:[c().createElement("span",{key:0,className:"cashier__account-switch-text",onClick:i}),c().createElement("span",{key:1,className:"cashier__account-switch-text",onClick:function(){n.push(u.routes.trade),a()}})]})))))};H.propTypes={is_dark_mode_on:w().bool,has_real_account:w().bool,history:w().object,openRealAccountSignup:w().func,toggleAccountsDialog:w().func};const B=T((function(e){var t=e.client,n=e.ui;return{is_dark_mode_on:n.is_dark_mode_on,has_real_account:t.has_any_real_account,openRealAccountSignup:n.openRealAccountSignup,toggleAccountsDialog:n.toggleAccountsDialog}}))((0,I.withRouter)(H));var G=function(e){var t=e.account_status,n=e.accounts,r=e.current_currency_type,a=e.is_deposit_lock,i=e.is_system_maintenance,o=e.is_withdrawal_lock,s=e.loginid,l=t.cashier_validation,d=null==l?void 0:l.includes("no_residence"),p=null==l?void 0:l.includes("unwelcome_status"),h=null==l?void 0:l.includes("SelfExclusion"),f=null==l?void 0:l.includes("no_withdrawal_or_trading_status"),m=null==l?void 0:l.includes("only_pa_withdrawals_allowed_status"),_=null==l?void 0:l.includes("withdrawal_locked_status"),y=null==l?void 0:l.includes("documents_expired"),g=null==l?void 0:l.includes("cashier_locked_status"),v=null==l?void 0:l.includes("disabled_status"),b=null==l?void 0:l.includes("FinancialAssessmentRequired"),E=null==l?void 0:l.includes("ASK_CURRENCY"),w=null==l?void 0:l.includes("ASK_AUTHENTICATE"),C=null==l?void 0:l.includes("ASK_FINANCIAL_RISK_APPROVAL"),A=null==l?void 0:l.includes("ASK_TIN_INFORMATION"),k=null==l?void 0:l.includes("ASK_SELF_EXCLUSION_MAX_TURNOVER_SET"),S=null==l?void 0:l.includes("ASK_FIX_DETAILS"),N=null==l?void 0:l.includes("ASK_UK_FUNDS_PROTECTION"),O="IcCashierLocked",T=(0,x.localize)("Cashier is locked"),I=(0,x.localize)("Your cashier is currently locked. Please contact us via live chat to find out how to unlock it.");return i?"crypto"===r?o?(T=(0,x.localize)("Withdrawals are locked"),I=(0,x.localize)("Withdrawals are temporarily unavailable due to system maintenance. You can make your withdrawals when the maintenance is complete.")):a?(T="Deposits are locked",I=(0,x.localize)("Deposits are temporarily unavailable due to system maintenance. You can make your deposits when the maintenance is complete.")):I=(0,x.localize)("Our cryptocurrency cashier is temporarily down due to system maintenance. You can access the Cashier in a few minutes when the maintenance is complete."):I=(0,x.localize)("Our cashier is temporarily down due to system maintenance. You can access the Cashier in a few minutes when the maintenance is complete."):d?I=(0,x.localize)("You’ve not set your country of residence. To access Cashier, please update your country of residence in the Personal details section in your account settings."):y?I=(0,x.localize)("The identification documents you submitted have expired. Please submit valid identity documents to unlock Cashier. "):g?I=(0,x.localize)("Your cashier is currently locked. Please contact us via live chat to find out how to unlock it."):v?I=(0,x.localize)("Your account is temporarily disabled. Please contact us via live chat to enable deposits and withdrawals again."):E?I=(0,x.localize)("Please set your account currency to enable deposits and withdrawals."):w?o?(O="IcCashierWithdrawalLock",T=(0,x.localize)("Withdrawals are locked"),I=c().createElement(x.Localize,{i18n_default_text:"Your account has not been authenticated. Please submit your <0>proof of identity</0> and <1>proof of address</1> to authenticate your account and request for withdrawals.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-identity"}),c().createElement("a",{key:1,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-address"})]})):I=c().createElement(x.Localize,{i18n_default_text:"Your account has not been authenticated. Please submit your <0>proof of identity</0> and <1>proof of address</1> to authenticate your account and access your cashier.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-identity"}),c().createElement("a",{key:1,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-address"})]}):C?I=c().createElement(x.Localize,{i18n_default_text:"Please complete the <0>Appropriateness Test</0> to access your cashier.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/financial-assessment"})]}):b?I=c().createElement(x.Localize,{i18n_default_text:"Your cashier is locked. Please complete the <0>financial assessment</0> to unlock it.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/financial-assessment"})]}):A?I=c().createElement(x.Localize,{i18n_default_text:"You have not provided your tax identification number. This information is necessary for legal and regulatory requirements. Please go to <0>Personal details</0> in your account settings, and fill in your latest tax identification number.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]}):N?I=c().createElement(x.Localize,{i18n_default_text:"Your cashier is locked. See <0>how we protect your funds</0> before you proceed.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/cashier/deposit"})]}):k?I=c().createElement(x.Localize,{i18n_default_text:"Your access to Cashier has been temporarily disabled as you have not set your 30-day turnover limit. Please go to <0>Self-exclusion</0> and set your 30-day turnover limit.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/self-exclusion"})]}):S?a?(O="IcCashierDepositLock",T=(0,x.localize)("Deposits are locked"),I=c().createElement(x.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable deposits.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})):o?(O="IcCashierWithdrawalLock",T=(0,x.localize)("Withdrawals are locked"),I=c().createElement(x.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable withdrawals.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})):I=c().createElement(x.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable deposits and withdrawals.",components:[c().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]}):a&&h?(O="IcCashierDepositLock",T=(0,x.localize)("Deposits are locked"),I=(0,x.localize)("You have chosen to exclude yourself from trading on our website until {{exclude_until}}. If you are unable to place a trade or deposit after your self-exclusion period, please contact us via live chat.",{exclude_until:(0,u.formatDate)(n[s].excluded_until,"DD MMM, YYYY")})):a&&p?(O="IcCashierDepositLock",T=(0,x.localize)("Deposits are locked"),I=(0,x.localize)("Please contact us via live chat.")):o&&f||o&&_?(O="IcCashierWithdrawalLock",T=(0,x.localize)("Withdrawals are locked"),I=(0,x.localize)("Unfortunately, you can only make deposits. Please contact us via live chat to enable withdrawals.")):o&&m&&(O="IcCashierWithdrawalLock",T=(0,x.localize)("Withdrawals are locked"),I=(0,x.localize)("You can only make deposits. Please contact us via live chat for more information.")),c().createElement("div",{className:"cashier-locked"},c().createElement(D.Icon,{icon:O,className:"cashier-locked__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"cashier-locked__title"},T),c().createElement(D.Text,{as:"p",size:"xs",align:"center",className:"cashier-locked__desc"},I))};G.propTypes={account_status:w().object,accounts:w().object,current_currency_type:w().string,is_deposit_lock:w().bool,is_system_maintenance:w().bool,is_withdrawal_lock:w().bool,loginid:w().string};const V=T((function(e){var t=e.client,n=e.modules;return{account_status:t.account_status,accounts:t.accounts,current_currency_type:t.current_currency_type,is_deposit_lock:t.is_deposit_lock,is_system_maintenance:n.cashier.is_system_maintenance,is_withdrawal_lock:t.is_withdrawal_lock,loginid:t.loginid}}))(G);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.is_financial_account,n=e.is_financial_information_incomplete,r=e.is_trading_experience_incomplete,a=(0,I.useHistory)(),i=function(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t&&(n||r)?[{content:(0,x.localize)("Complete the financial assessment form"),status:"action",onClick:function(){return a.push(u.routes.financial_assessment)}}]:[]);return c().createElement("div",{className:"cashier-locked"},c().createElement(D.Icon,{icon:"IcMoneyTransfer",className:"cashier-locked__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"cashier-locked__title"},(0,x.localize)("Transfers are locked")),c().createElement(c().Fragment,null,c().createElement("p",{className:"cashier-locked__desc"},(0,x.localize)("To enable this feature you must complete the following:")),c().createElement(D.Checklist,{className:"cashier-locked__checklist",items:i})))};K.propTypes={is_financial_account:w().bool,is_financial_information_incomplete:w().bool,is_trading_experience_incomplete:w().bool};const W=T((function(e){var t=e.client;return{is_financial_account:t.is_financial_account,is_financial_information_incomplete:t.is_financial_information_incomplete,is_trading_experience_incomplete:t.is_trading_experience_incomplete}}))(K);var Y=n("../../../node_modules/formik/dist/formik.esm.js"),Q=n("@deriv/components/src/hooks");function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=X(c().useState(60),2),n=t[0],r=t[1];return(0,Q.useInterval)((function(){n>0&&r(n-1)}),1e3),c().useEffect((function(){0===n&&(e.onComplete(),r(60))})),c().createElement(D.Text,{as:"p",size:"xs",className:"timer"},c().createElement(x.Localize,{i18n_default_text:"{{remaining_time}}s",values:{remaining_time:n}}))},ee=function(e){var t=e.children,n=e.className;return c().createElement("fieldset",null,c().createElement("div",{className:n},t))},te=function(e){var t=e.converter_from_amount,n=e.converter_from_error,r=e.converter_to_error,a=e.converter_to_amount,i=e.from_currency,o=e.hint,s=e.is_timer_visible,l=e.onChangeConverterFromAmount,d=e.onChangeConverterToAmount,p=e.resetConverter,h=e.to_currency,f=e.validateFromAmount,m=e.validateToAmount,_=(0,Y.useFormikContext)().handleChange,y=X(c().useState("right"),2),g=y[0],v=y[1];return c().useEffect((function(){return function(){return p()}}),[]),c().useEffect((function(){v("right")}),[i]),c().createElement("div",{className:"crypto-fiat-converter-form"},c().createElement(Y.Field,{name:"converter_from_amount",validate:f},(function(e){var r=e.field;return c().createElement(D.Input,J({},r,{onFocus:function(){v("right")},onChange:function(e){l(e,i,h),_(e)},type:"text",error:n,label:(0,x.localize)("Amount ({{currency}})",{currency:(0,u.getCurrencyDisplayCode)(i)}),value:t,autoComplete:"off",required:!0,hint:o}))})),c().createElement(D.MobileWrapper,null,"right"===g?c().createElement(D.Icon,{icon:"IcArrowDownBold"}):c().createElement(D.Icon,{icon:"IcArrowUpBold"})),c().createElement(D.DesktopWrapper,null,"right"===g?c().createElement(D.Icon,{icon:"IcArrowRightBold"}):c().createElement(D.Icon,{icon:"IcArrowLeftBold"})),c().createElement(Y.Field,{name:"converter_to_amount",validate:m},(function(e){var n=e.field;return c().createElement(ee,{className:"input-group"},c().createElement(D.Input,J({},n,{onFocus:function(){v("left")},onChange:function(e){d(e,h,i),_(e)},type:"text",error:r,label:(0,x.localize)("Amount ({{currency}})",{currency:(0,u.getCurrencyDisplayCode)(h)}),value:a,autoComplete:"off",hint:(0,x.localize)("Approximate value")})),s&&c().createElement(Z,{onComplete:function(){l({target:{value:t}},i,h)}}))})))};te.propTypes={converter_from_amount:w().string,converter_from_error:w().string,converter_to_error:w().string,converter_to_amount:w().string,from_currency:w().string,is_timer_visible:w().bool,onChangeConverterFromAmount:w().func,onChangeConverterToAmount:w().func,resetConverter:w().func,to_currency:w().string,validateFromAmount:w().func,validateToAmount:w().func};const ne=T((function(e){var t=e.modules;return{converter_from_amount:t.cashier.converter_from_amount,converter_from_error:t.cashier.converter_from_error,converter_to_error:t.cashier.converter_to_error,converter_to_amount:t.cashier.converter_to_amount,is_timer_visible:t.cashier.is_timer_visible,onChangeConverterFromAmount:t.cashier.onChangeConverterFromAmount,onChangeConverterToAmount:t.cashier.onChangeConverterToAmount,resetConverter:t.cashier.resetConverter}}))(te);function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.disableApp,n=e.enableApp,r=e.setErrorMessage,a=e.error,i=void 0===a?{}:a,o=(0,I.useHistory)(),s=re(c().useState(!1),2),l=s[0],d=s[1],p=re(c().useState({title:"",cancel_button_text:void 0,confirm_button_text:"",onConfirm:void 0,message:""}),2),h=p[0],f=p[1];c().useEffect((function(){i.message&&m(i.code,i.message)}),[i.code]),c().useEffect((function(){_(!!i.message)}),[i.message]);var m=function(e,t){f("Fiat2CryptoTransferOverLimit"===e?{title:(0,x.localize)("Please verify your identity"),cancel_button_text:(0,x.localize)("Cancel"),confirm_button_text:(0,x.localize)("Verify identity"),onConfirm:function(){return o.push(u.routes.proof_of_identity)},message:t}:{title:(0,x.localize)("Cashier Error"),cancel_button_text:void 0,confirm_button_text:(0,x.localize)("OK"),onConfirm:void 0,message:t})},_=function(e){d(e)},y=function(){r(""),_(!1)};return c().createElement(D.Dialog,{title:h.title,confirm_button_text:h.confirm_button_text,cancel_button_text:h.cancel_button_text,onConfirm:function(){"function"==typeof h.onConfirm&&h.onConfirm(),y()},onCancel:h.cancel_button_text?y:void 0,disableApp:t,enableApp:n,is_visible:l,portal_element_id:"modal_root"},h.message)};ie.propTypes={error:w().object,disableApp:w().func,enableApp:w().func,setErrorMessage:w().func};const oe=T((function(e){var t=e.modules,n=e.ui;return{disableApp:n.disableApp,enableApp:n.enableApp,setErrorMessage:t.cashier.setErrorMessage}}))(ie);function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.amount,n=e.currency,r=e.from_account,a=e.getCalculatedAmount,i=e.percentage,o=e.should_percentage_reset,s=e.to_account,l=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState("0"),2),d=l[0],p=l[1];c().useEffect((function(){if(o)for(var e=1;e<=4;e++)document.getElementById(e).style.backgroundColor="var(--general-section-1)"}),[o]),c().useEffect((function(){p(i||0)}),[i]),c().useEffect((function(){h({target:{id:0}},0)}),[r,s]);var h=function(e,r){var i=r,o=r>0&&r<=d;o&&(i-=25),p(i||0),a((t*(i/100)).toFixed((0,u.getDecimalPlaces)(n)));for(var s=1;s<=4;s++)s<e.target.id||s===+e.target.id&&!o?document.getElementById(s).style.backgroundColor="var(--status-success)":document.getElementById(s).style.backgroundColor="var(--general-section-1)"},f=(0,u.formatMoney)(n,t,!0),m=(0,u.getCurrencyDisplayCode)(n);return c().createElement(c().Fragment,null,c().createElement("div",{className:"percentage-selector"},c().createElement("div",{className:"percentage-selector__block-container"},c().createElement(D.Text,{color:"prominent",size:"xs"},"25%"),c().createElement("div",{id:"1",className:"percentage-selector-block",onClick:function(e){return h(e,25)}})),c().createElement("div",{className:"percentage-selector__block-container"},c().createElement(D.Text,{color:"prominent",size:"xs"},"50%"),c().createElement("div",{id:"2",className:"percentage-selector-block",onClick:function(e){return h(e,50)}})),c().createElement("div",{className:"percentage-selector__block-container"},c().createElement(D.Text,{color:"prominent",size:"xs"},"75%"),c().createElement("div",{id:"3",className:"percentage-selector-block",onClick:function(e){return h(e,75)}})),c().createElement("div",{className:"percentage-selector__block-container"},c().createElement(D.Text,{color:"prominent",size:"xs"},c().createElement(x.Localize,{i18n_default_text:"All"})),c().createElement("div",{id:"4",className:"percentage-selector-block",onClick:function(e){return h(e,100)}}))),c().createElement(D.Text,{color:"less-prominent",size:"xxs",line_height:"l"},c().createElement(x.Localize,{i18n_default_text:"{{selected_percentage}}% of available balance ({{format_amount}} {{currency__display_code}})",values:{selected_percentage:d,format_amount:f,currency__display_code:m}})))};le.propTypes={amount:w().number,currency:w().string,getCalculatedAmount:w().func,percentage:w().number,should_percentage_reset:w().bool};const ce=le;var ue=function(e,t,n){var r=n.toLowerCase(),a=e?"".concat(e.substring(0,4),"....").concat(e.substring(e.length-4)):(0,x.localize)("Pending");return{deposit:{confirmed:{name:(0,x.localize)("Successful"),description:(0,x.localize)("Your deposit is successful."),renderer:"successful",transaction_hash:a},error:{name:(0,x.localize)("Unsuccessful"),description:(0,x.localize)("Your deposit is unsuccessful due to an error on the blockchain. Please contact your crypto wallet service provider for more info."),renderer:"unsuccessful",transaction_hash:(0,x.localize)("NA")},pending:{name:(0,x.localize)("In process"),description:(0,x.localize)("We’ve received your request and are waiting for more blockchain confirmations."),renderer:"in-process",transaction_hash:a}},withdrawal:{cancelled:{name:(0,x.localize)("Cancelled"),description:(0,x.localize)("You’ve cancelled your withdrawal request."),renderer:"unsuccessful",transaction_hash:(0,x.localize)("NA")},error:{name:(0,x.localize)("Unsuccessful"),description:c().createElement(x.Localize,{i18n_default_text:"Your withdrawal is unsuccessful due to an error on the blockchain. Please <0>contact us</0> via live chat for more info.",values:{interpolation:{escapeValue:!1}},components:[c().createElement(D.StaticUrl,{key:0,className:"link",href:"contact-us/?is_livechat_open=true"})]}),renderer:"unsuccessful",transaction_hash:(0,x.localize)("NA")},locked:{name:(0,x.localize)("In review"),description:(0,x.localize)("We're reviewing your withdrawal request. You may still cancel this transaction if you wish. Once we start processing, you won't be able to cancel."),renderer:"in-review",transaction_hash:a},performing_blockchain_txn:{name:(0,x.localize)("In process"),description:(0,x.localize)("We’re sending your request to the blockchain."),renderer:"in-process",transaction_hash:a},processing:{name:(0,x.localize)("In process"),description:(0,x.localize)("We’re awaiting confirmation from the blockchain."),renderer:"in-process",transaction_hash:a},rejected:{name:(0,x.localize)("Unsuccessful"),description:(0,x.localize)("Your withdrawal is unsuccessful. We've sent you an email with more information."),renderer:"unsuccessful",transaction_hash:(0,x.localize)("NA")},sent:{name:(0,x.localize)("Successful"),description:(0,x.localize)("Your withdrawal is successful."),renderer:"successful",transaction_hash:a},verified:{name:(0,x.localize)("In process"),description:(0,x.localize)("We’re processing your withdrawal."),renderer:"in-process",transaction_hash:a}}}[t][r]},de=function(e){var t=e.crypto_transactions,n=e.currency,r=e.onMount,a=e.setIsCryptoTransactionsVisible;if(c().useEffect((function(){r()}),[r]),!t.length)return null;var i=t[0],o=i.address_hash,s=i.submit_date,l=i.transaction_type,d=t[0],p=d.status_code,h=d.transaction_hash,f=ue(h,l,p);s=(0,u.epochToMoment)(s).format("MMM D, YYYY"),l=l[0].toUpperCase()+l.slice(1),o="".concat(o.substring(0,4),"....").concat(o.substring(o.length-4));var m=t[0].amount;return c().createElement("div",{className:"cashier-recent-transaction-wrapper"},c().createElement("div",{className:"cashier-recent-transaction"},c().createElement(D.Text,{weight:"bold",as:"p",line_height:"s",size:"xs"},c().createElement(x.Localize,{i18n_default_text:"Recent transactions"})),c().createElement("div",{className:"cashier-recent-transaction__data-wrapper"},c().createElement(D.Icon,{className:"cashier-recent-transaction__icon",icon:"deposit"===l?"IcCashierAdd":"IcCashierMinus",size:32}),c().createElement("div",null,c().createElement("div",{className:"cashier-recent-transaction__status-wrapper"},c().createElement(D.Text,{as:"p",size:"xxs"},c().createElement(x.Localize,{i18n_default_text:"{{transaction_type}} {{currency}}",values:{transaction_type:l,currency:n}})),c().createElement("div",{className:"cashier-recent-transaction__status"},c().createElement("span",{className:z()("cashier-recent-transaction__status-indicator","cashier-recent-transaction__status-indicator-".concat(f.renderer))}),c().createElement(D.Text,{as:"p",size:"xxxs"},f.name))),c().createElement(D.Text,{as:"p",size:"xxxs",color:"less-prominent",line_height:"s"},c().createElement(x.Localize,{i18n_default_text:"{{amount}} {{currency}} on {{submit_date}}",values:{amount:m,currency:n,submit_date:s}})),c().createElement("div",{className:"cashier-recent-transaction__hash-wrapper"},c().createElement("div",{className:"cashier-recent-transaction__hash"},c().createElement(D.Text,{as:"p",size:"xxxs",line_height:"s"},c().createElement(x.Localize,{i18n_default_text:"Address:"})," "),c().createElement(D.Text,{as:"p",size:"xxxs",color:"red",line_height:"s"},o)),c().createElement("div",{className:"cashier-recent-transaction__hash"},c().createElement(D.Text,{as:"p",size:"xxxs",line_height:"xs"},c().createElement(x.Localize,{i18n_default_text:"Transaction hash:"})," "),c().createElement(D.Text,{as:"p",size:"xxxs",color:"red",line_height:"s"},f.transaction_hash))))),c().createElement(D.ButtonLink,{to:"#",className:"dc-btn--secondary cashier-recent-transaction__view-all-button",onClick:function(){a(!0)}},c().createElement(D.Text,{weight:"bold",as:"p",size:"xxs"},c().createElement(x.Localize,{i18n_default_text:"View all"})))))};de.propTypes={crypto_transactions:w().array,currency:w().string,onMount:w().func,setIsCryptoTransactionsVisible:w().func};const pe=T((function(e){var t=e.modules,n=e.client;return{crypto_transactions:t.cashier.transaction_history.crypto_transactions,currency:n.currency,onMount:t.cashier.transaction_history.onMount,setIsCryptoTransactionsVisible:t.cashier.transaction_history.setIsCryptoTransactionsVisible}}))(de);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve,be=function(e){var t,n,r,a=e.mt5_login_list,i=e.account,o=e.idx,s=e.is_dark_mode_on;return i.is_mt&&(r=a.find((function(e){return e.login===i.value}))),c().createElement(c().Fragment,{key:o},(i.currency||i.platform_icon)&&c().createElement("div",null,c().createElement(D.Icon,{icon:i.platform_icon||"IcCurrency-".concat(i.currency.toLowerCase()),className:"account-transfer__currency-icon"})),c().createElement("div",{className:"account-transfer__currency-wrapper"},c().createElement(D.Text,{size:"xxs",line_height:"xs",styles:{color:"inherit",fontWeight:"inherit"}},i.is_dxtrade||i.is_mt?i.text:(0,u.getCurrencyName)(i.currency)),c().createElement(D.Text,{size:"xxxs",align:"left",color:"less-prominent"},i.value)),("gaming"===(null===(t=r)||void 0===t?void 0:t.market_type)||"synthetic"===(null===(n=r)||void 0===n?void 0:n.market_type))&&c().createElement(D.Text,{color:s?"general":"colored-background",size:"xxs",className:"badge-server"},r.server_info.geolocation.region," ",1!==r.server_info.geolocation.sequence?r.server_info.geolocation.sequence:""),c().createElement("span",{className:"account-transfer__balance"},c().createElement(D.Money,{amount:i.balance,currency:i.currency,has_sign:i.balance<0,show_currency:!0})))},Ee=function(e){var t=e.children;return c().createElement("div",{className:"account-transfer__bullet-wrapper"},c().createElement("div",{className:"account-transfer__bullet"}),c().createElement("span",null,t))},we=function(e){var t=e.currency,n=e.transfer_fee,r=e.minimum_fee,a=e.is_dxtrade_allowed;return c().createElement("div",{className:"account-transfer__notes"},c().createElement(D.DesktopWrapper,null,c().createElement(D.Text,{as:"h2",color:"prominent",weight:"bold",className:"cashier__header account-transfer__notes-header"},c().createElement(x.Localize,{i18n_default_text:"Notes"}))),c().createElement(Ee,null,c().createElement(x.Localize,{i18n_default_text:"Transfer limits may vary depending on changes in exchange rates."})),c().createElement(Ee,null,c().createElement(x.Localize,{i18n_default_text:"Transfers are subject to a {{transfer_fee}}% transfer fee or {{minimum_fee}} {{currency}}, whichever is higher.",values:{transfer_fee:n,minimum_fee:r,currency:(0,u.getCurrencyDisplayCode)(t)}})),c().createElement(Ee,null,a?c().createElement(x.Localize,{i18n_default_text:"Transfers are possible only between your fiat and cryptocurrency accounts, your Deriv account and Deriv MT5 (DMT5) account, or your Deriv account and Deriv X account."}):c().createElement(x.Localize,{i18n_default_text:"Transfers are possible only between your fiat and cryptocurrency accounts, or your Deriv account and Deriv MT5 (DMT5) account."})),c().createElement(Ee,null,c().createElement(x.Localize,{i18n_default_text:"Transfers may be unavailable when the market is closed (weekends or holidays), periods of high volatility, or when there are technical issues."})))},Ce=[],Ae=[],ke=[],Se=[],Ne=[],Oe=[],Te=function(e){var t=e.account_limits,n=e.accounts_list,r=e.account_transfer_amount,a=e.converter_from_amount,i=e.converter_from_error,o=e.converter_to_amount,s=e.converter_to_error,l=e.crypto_transactions,d=e.error,p=e.is_crypto,h=e.is_dxtrade_allowed,f=e.is_dark_mode_on,m=e.minimum_fee,_=e.mt5_login_list,y=e.onChangeTransferFrom,g=e.onChangeTransferTo,v=e.onMount,b=e.percentage,E=e.resetConverter,w=e.recentTransactionOnMount,C=e.requestTransferBetweenAccounts,A=e.setErrorMessage,k=e.setTransferPercentageSelectorResult,S=e.selected_from,N=e.selected_to,O=e.setAccountTransferAmount,T=e.setSideNotes,I=e.should_percentage_reset,P=e.transfer_fee,M=e.transfer_limit,R=e.validateTransferFromAmount,U=e.validateTransferToAmount,L=ye(c().useState({}),2),F=L[0],j=L[1],H=ye(c().useState({}),2),B=H[0],G=H[1],V=ye(c().useState(),2),q=V[0],K=V[1];c().useEffect((function(){w()}),[w]);var W=function(e){if(!e)return(0,x.localize)("This field is required.");var t=(0,u.validNumber)(e,{type:"float",decimals:(0,u.getDecimalPlaces)(S.currency),min:M.min,max:M.max}),n=t.is_ok,r=t.message;return n?+S.balance<+e?(0,x.localize)("Insufficient balance"):void 0:r},Q=function(e,t){var n=t.is_mt,r=t.is_dxtrade;return"from"===e?n?Ae:r?ke:Ce:"to"===e?n?Ne:r?Oe:Se:[]};return c().useEffect((function(){v()}),[v]),c().useEffect((function(){Ce=[],Ae=[],ke=[],Se=[],Ne=[],Oe=[],n.forEach((function(e,t){var n=c().createElement(be,{mt5_login_list:_,idx:t,account:e,is_dark_mode_on:f}),r=e.value,a=_.find((function(t){return t.login===e.value})),i=e.is_mt||e.is_dxtrade,o="";"gaming"!==(null==a?void 0:a.market_type)&&"synthetic"!==(null==a?void 0:a.market_type)||(o="[".concat(a.server_info.geolocation.region).concat(1!==a.server_info.geolocation.sequence?a.server_info.geolocation.sequence:"","]")),Q("from",e).push({text:n,value:r,is_mt:e.is_mt,is_dxtrade:e.is_dxtrade,nativepicker_text:"".concat(i?e.market_type:(0,u.getCurrencyName)(e.currency)," ").concat(o," (").concat(e.balance," ").concat(i?e.currency:e.text,")")});var s=e.value===S.value;if(!(S.is_mt&&e.is_dxtrade||S.is_dxtrade&&e.is_mt||s)){var l=S.is_mt&&e.is_mt,d=S.is_dxtrade&&e.is_dxtrade,p=S.is_crypto&&e.is_crypto,h=l||p||d;Q("to",e).push({text:n,value:r,is_mt:e.is_mt,is_dxtrade:e.is_dxtrade,disabled:h,nativepicker_text:"".concat(i?e.market_type:(0,u.getCurrencyName)(e.currency)," ").concat(o," (").concat(e.balance," ").concat(i?e.currency:e.text,")")})}})),j(me(me(me({},Ae.length&&_e({},(0,x.localize)("DMT5 accounts"),Ae)),ke.length&&_e({},(0,x.localize)("Deriv X accounts"),ke)),Ce.length&&_e({},(0,x.localize)("Deriv accounts"),Ce))),G(me(me(me({},Ne.length&&_e({},(0,x.localize)("DMT5 accounts"),Ne)),Oe.length&&_e({},(0,x.localize)("Deriv X accounts"),Oe)),Se.length&&_e({},(0,x.localize)("Deriv accounts"),Se)))}),[n,N,S]),c().useEffect((function(){if(Object.keys(F).length&&"function"==typeof T){var e=[];p&&null!=l&&l.length&&e.push(c().createElement(pe,{key:2})),e.push(c().createElement(we,{transfer_fee:P,currency:S.currency,minimum_fee:m,key:0,is_dxtrade_allowed:h})),T(e)}}),[P,S,m,F,h,l]),c().useEffect((function(){var e,n,r,a=t.daily_transfers,i=null==a||null===(e=a.mt5)||void 0===e?void 0:e.available,o=null==a||null===(n=a.dxtrade)||void 0===n?void 0:n.available,s=null==a||null===(r=a.internal)||void 0===r?void 0:r.available,l=N.is_mt||S.is_mt,c=N.is_dxtrade||S.is_dxtrade,u=1==+(ve=l?i:c?o:s)?(0,x.localize)("You have {{number}} transfer remaining for today.",{number:ve}):(0,x.localize)("You have {{number}} transfers remaining for today.",{number:ve});K(u),E()}),[N,S,t]),c().createElement("div",{className:"cashier__wrapper account-transfer__wrapper"},c().createElement(D.Text,{as:"h2",color:"prominent",weight:"bold",align:"center",className:"cashier__header cashier__content-header"},(0,x.localize)("Transfer between your accounts in Deriv")),c().createElement(Y.Formik,{initialValues:{amount:r||"",converter_from_amount:a||"",converter_to_amount:o||""},onSubmit:function(){C({amount:+r})},validateOnBlur:!1,enableReinitialize:!0},(function(e){var t=e.errors,r=e.handleChange,a=e.isSubmitting,o=e.touched,f=e.setFieldValue,_=e.setFieldTouched,v=e.setFieldError;return c().createElement(c().Fragment,null,a||0===n.length?c().createElement("div",{className:"cashier__loader-wrapper"},c().createElement(D.Loading,{className:"cashier__loader",is_fullscreen:!1})):c().createElement(Y.Form,null,c().createElement("div",{className:"cashier__drop-down-wrapper account-transfer__drop-down-wrapper"},c().createElement(D.Dropdown,{id:"transfer_from",className:"cashier__drop-down account-transfer__drop-down",classNameDisplay:"cashier__drop-down-display",classNameDisplaySpan:"cashier__drop-down-display-span",classNameItems:"cashier__drop-down-items",classNameLabel:"cashier__drop-down-label",is_large:!0,label:(0,x.localize)("From"),list:F,list_height:"404",name:"transfer_from",value:S.value,onChange:function(e){y(e),r(e),f("amount",""),v("amount",""),_("amount",!1)},error:S.error}),c().createElement(D.Dropdown,{id:"transfer_to",className:"cashier__drop-down account-transfer__drop-down account-transfer__drop-down--to-dropdown",classNameDisplay:"cashier__drop-down-display",classNameDisplaySpan:"cashier__drop-down-display-span",classNameItems:"cashier__drop-down-items",classNameLabel:"cashier__drop-down-label",classNameHint:"cashier__hint",is_large:!0,label:(0,x.localize)("To"),list:B,list_height:"404",name:"transfer_to",value:N.value,onChange:function(e){g(e),f("amount",""),v("amount",""),_("amount",!1)},hint:q,error:N.error})),S.currency===N.currency?c().createElement(Y.Field,{name:"amount",validate:W},(function(e){var n=e.field;return c().createElement(D.Input,he({},n,{onChange:function(e){A(""),r(e),O(e.target.value),_("amount",!0,!1)},className:"cashier__input dc-input--no-placeholder account-transfer__input",classNameHint:"cashier__hint",type:"text",label:(0,x.localize)("Amount"),error:o.amount&&t.amount?t.amount:"",required:!0,trailing_icon:S.currency?c().createElement("span",{className:z()("symbols","symbols--".concat(S.currency.toLowerCase()))},(0,u.getCurrencyDisplayCode)(S.currency)):void 0,autoComplete:"off",maxLength:"30",hint:M.max?c().createElement(x.Localize,{i18n_default_text:"Transfer limits: <0 /> - <1 />",components:[c().createElement(D.Money,{key:0,amount:M.min,currency:S.currency,show_currency:!0}),c().createElement(D.Money,{key:1,amount:M.max,currency:S.currency,show_currency:!0})]}):""}))})):c().createElement("div",null,c().createElement("div",{className:"crypto-account-transfer__percentage-selector"},c().createElement(ce,{amount:+S.balance,currency:S.currency,from_account:S.value,getCalculatedAmount:k,percentage:b,should_percentage_reset:I,to_account:N.value})),c().createElement(ne,{from_currency:S.currency,to_currency:N.currency,hint:M.max?c().createElement(x.Localize,{i18n_default_text:"Transfer limits: <0 /> - <1 />",components:[c().createElement(D.Money,{key:0,amount:M.min,currency:S.currency,show_currency:!0}),c().createElement(D.Money,{key:1,amount:M.max,currency:S.currency,show_currency:!0})]}):"",validateFromAmount:R,validateToAmount:U})),c().createElement("div",{className:"cashier__form-submit cashier__form-submit--align-end account-transfer__form-submit"},c().createElement(D.Button,{className:z()({"cashier__form-submit-button":S.currency===N.currency,"cashier__account-transfer__form-submit-button":S.currency!==N.currency}),type:"submit",is_disabled:a||!+ve||!!S.error||!!N.error||!+S.balance||!!i||!!s,primary:!0,large:!0},c().createElement(x.Localize,{i18n_default_text:"Transfer"}))),c().createElement(D.MobileWrapper,null,p&&null!=l&&l.length?c().createElement(pe,null):null,c().createElement(we,{transfer_fee:P,currency:S.currency,minimum_fee:m,is_dxtrade_allowed:h})),c().createElement(oe,{error:d})))})))};Te.propTypes={account_limits:w().object,accounts_list:w().array,account_transfer_amount:w().string,converter_from_amount:w().string,converter_from_error:w().string,converter_to_error:w().string,converter_to_amount:w().string,crypto_transactions:w().array,error:w().object,is_crypto:w().bool,minimum_fee:w().string,onChangeTransferFrom:w().func,onChangeTransferTo:w().func,onMount:w().func,percentage:w().number,resetConverter:w().func,recentTransactionOnMount:w().func,requestTransferBetweenAccounts:w().func,selected_from:w().object,setErrorMessage:w().func,selected_to:w().object,setTransferPercentageSelectorResult:w().func,setSideNotes:w().func,should_percentage_reset:w().bool,transfer_fee:w().number,transfer_limit:w().object,validateTransferFromAmount:w().func,validateTransferToAmount:w().func};const Ie=T((function(e){var t=e.client,n=e.modules,r=e.ui;return{account_limits:t.account_limits,accounts_list:n.cashier.config.account_transfer.accounts_list,account_transfer_amount:n.cashier.config.account_transfer.account_transfer_amount,converter_from_amount:n.cashier.converter_from_amount,converter_from_error:n.cashier.converter_from_error,converter_to_amount:n.cashier.converter_to_amount,converter_to_error:n.cashier.converter_to_error,crypto_transactions:n.cashier.transaction_history.crypto_transactions,is_crypto:n.cashier.is_crypto,is_dark_mode_on:r.is_dark_mode_on,is_dxtrade_allowed:t.is_dxtrade_allowed,minimum_fee:n.cashier.config.account_transfer.minimum_fee,mt5_login_list:t.mt5_login_list,onChangeTransferFrom:n.cashier.onChangeTransferFrom,onChangeTransferTo:n.cashier.onChangeTransferTo,onMount:t.getLimits,percentage:n.cashier.percentage,resetConverter:n.cashier.resetConverter,recentTransactionOnMount:n.cashier.transaction_history.onMount,requestTransferBetweenAccounts:n.cashier.requestTransferBetweenAccounts,setAccountTransferAmount:n.cashier.setAccountTransferAmount,setErrorMessage:n.cashier.setErrorMessage,selected_from:n.cashier.config.account_transfer.selected_from,selected_to:n.cashier.config.account_transfer.selected_to,setTransferPercentageSelectorResult:n.cashier.setTransferPercentageSelectorResult,should_percentage_reset:n.cashier.should_percentage_reset,transfer_fee:n.cashier.config.account_transfer.transfer_fee,transfer_limit:n.cashier.config.account_transfer.transfer_limit,validateTransferFromAmount:n.cashier.validateTransferFromAmount,validateTransferToAmount:n.cashier.validateTransferToAmount}}))(Te);function xe(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Me=function(e){var t,n,r=e.disableApp,a=e.enableApp,i=e.history,o=e.loginid,s=e.receipt,l=e.resetAccountTransfer,d=e.selected_from,p=e.selected_to,h=e.switchAccount,f=De(c().useState(!1),2),m=f[0],_=f[1],y=De(c().useState({}),2),g=y[0],v=y[1];c().useEffect((function(){return function(){l()}}),[l]);var b=function(){i.push(u.routes.statement),l()},E=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(g.value);case 2:b();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){xe(i,r,a,o,s,"next",e)}function s(e){xe(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),w=function(){_(!m)};return c().createElement("div",{className:"cashier__crypto-account-transfer__receipt"},c().createElement(D.Text,{as:"h2",color:"prominent",align:"center",weight:"bold",className:"cashier__header"},c().createElement(x.Localize,{i18n_default_text:"Your funds have been transferred"})),c().createElement("div",{className:"cashier__crypto-transferred-amount cashier__text--bold"},c().createElement(D.Text,{as:"p",size:"l",weight:"bold",color:"profit-success"},c().createElement(x.Localize,{i18n_default_text:"{{amount}} {{currency}}",values:{amount:(0,u.formatMoney)(d.currency,s.amount_transferred,!0),currency:(0,u.getCurrencyDisplayCode)(d.currency)}}))),c().createElement("div",{className:"cashier__crypto-transferred-details-wrapper"},c().createElement("div",{className:"crypto-transfer-from"},c().createElement("div",{className:"crypto-transfer-from-details"},c().createElement(D.Icon,{icon:d.platform_icon||"IcCurrency-".concat(null===(t=d.currency)||void 0===t?void 0:t.toLowerCase()),size:32}),c().createElement(D.Text,{as:"p",size:"s",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:d.text}))),c().createElement(D.Text,{as:"p",size:"s",color:"less-prominent",align:"center"},d.value)),c().createElement(D.Icon,{className:"crypto-transferred-icon",icon:"IcArrowDownBold"}),c().createElement("div",{className:"crypto-transfer-to"},c().createElement("div",{className:"crypto-transfer-to-details"},c().createElement(D.Icon,{icon:p.platform_icon||"IcCurrency-".concat(null===(n=p.currency)||void 0===n?void 0:n.toLowerCase()),size:32}),c().createElement(D.Text,{as:"p",size:"s",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:p.text}))),c().createElement(D.Text,{as:"p",size:"s",color:"less-prominent",align:"center"},p.value))),c().createElement("div",{className:"crypto-transfer__receipt-form-submit"},c().createElement(D.Button,{className:"account-transfer__button",has_effect:!0,text:(0,x.localize)("View transaction details"),onClick:function(){p.value===o||(p.is_mt||p.is_dxtrade)&&d.value===o?b():(v(p.is_mt?d:p),w())},secondary:!0,large:!0}),c().createElement(D.Button,{className:"account-transfer__button",has_effect:!0,text:(0,x.localize)("Make a new transfer"),onClick:l,primary:!0,large:!0})),c().createElement(D.Modal,{is_open:m,toggleModal:w,enableApp:a,disableApp:r,has_close_icon:(0,u.isMobile)(),id:"account_transfer_switch_modal",small:!0,title:(0,x.localize)("Switch to ".concat(g.currency," account?"))},c().createElement(D.Modal.Body,null,c().createElement(x.Localize,{i18n_default_text:"We’re switching over to your {{currency}} account to view the transaction.",values:{currency:g.currency}})),c().createElement(D.Modal.Footer,null,c().createElement(D.Button,{has_effect:!0,text:(0,x.localize)("Cancel"),onClick:w,secondary:!0,large:!0}),c().createElement(D.Button,{has_effect:!0,text:(0,x.localize)("Switch to ".concat(g.currency," account")),onClick:E,primary:!0,large:!0}))))};Me.propTypes={disableApp:w().func,enableApp:w().func,loginid:w().string,receipt:w().object,resetAccountTransfer:w().func,selected_from:w().object,selected_to:w().object,switchAccount:w().func};const Re=(0,C.withRouter)(T((function(e){var t=e.client,n=e.modules,r=e.ui;return{loginid:t.loginid,switchAccount:t.switchAccount,receipt:n.cashier.config.account_transfer.receipt,resetAccountTransfer:n.cashier.resetAccountTransfer,selected_from:n.cashier.config.account_transfer.selected_from,selected_to:n.cashier.config.account_transfer.selected_to,disableApp:r.disableApp,enableApp:r.enableApp}}))(Me));var Ue=function(e){var t=e.cancelCryptoTransaction,n=e.hideCryptoTransactionsCancelModal,r=e.is_cancel_modal_visible,a=e.selected_crypto_transaction_id;return c().createElement(c().Fragment,null,c().createElement(D.Modal,{small:!0,title:(0,x.localize)("Cancel transaction"),is_open:r,toggleModal:n,has_close_icon:!0},c().createElement(D.Modal.Body,null,c().createElement(x.Localize,{i18n_default_text:"Are you sure you want to cancel this transaction?"})),c().createElement(D.Modal.Footer,null,c().createElement(D.Button,{text:(0,x.localize)("No"),onClick:n,large:!0,secondary:!0}),c().createElement(D.Button,{text:(0,x.localize)("Yes"),onClick:function(){t(a)},large:!0,primary:!0}))))};Ue.propTypes={cancelCryptoTransaction:w().func,hideCryptoTransactionsCancelModal:w().func,is_cancel_modal_visible:w().bool,selected_crypto_transaction_id:w().string};const Le=T((function(e){var t=e.modules;return{cancelCryptoTransaction:t.cashier.transaction_history.cancelCryptoTransaction,hideCryptoTransactionsCancelModal:t.cashier.transaction_history.hideCryptoTransactionsCancelModal,is_cancel_modal_visible:t.cashier.transaction_history.is_crypto_transactions_cancel_modal_visible,selected_crypto_transaction_id:t.cashier.transaction_history.selected_crypto_transaction_id}}))(Ue);var Fe=function(e){var t=e.hideCryptoTransactionsStatusModal,n=e.is_status_modal_visible,r=e.selected_crypto_status,a=e.selected_crypto_status_description;return c().createElement(c().Fragment,null,c().createElement(D.Modal,{small:!0,title:r,is_open:n,toggleModal:t,has_close_icon:!1},c().createElement(D.Modal.Body,null,a),c().createElement(D.Modal.Footer,null,c().createElement(D.Button,{text:(0,x.localize)("OK"),onClick:t,large:!0,primary:!0}))))};Fe.propTypes={hideCryptoTransactionsStatusModal:w().func,is_status_modal_visible:w().bool,selected_crypto_status:w().string,selected_crypto_status_description:w().string};const je=T((function(e){var t=e.modules;return{hideCryptoTransactionsStatusModal:t.cashier.transaction_history.hideCryptoTransactionsStatusModal,is_status_modal_visible:t.cashier.transaction_history.is_crypto_transactions_status_modal_visible,selected_crypto_status:t.cashier.transaction_history.selected_crypto_status,selected_crypto_status_description:t.cashier.transaction_history.selected_crypto_status_description}}))(Fe);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He=function(e){var t=e.row,n=e.cancelCryptoTransaction,r=e.currency,a=e.showCryptoTransactionsCancelModal,i=e.showCryptoTransactionsStatusModal,o=t.address_hash,s=t.address_url,l=t.amount,d=t.id,p=t.is_valid_to_cancel,h=t.status_code,f=t.submit_date,m=t.transaction_hash,_=t.transaction_url,y=t.transaction_type,g=o?"".concat(o.substring(0,4),"....").concat(o.substring(o.length-4)):"",v="withdrawal"===y?"-".concat(l):"+".concat(l),b=(0,u.isMobile)()?(0,u.epochToMoment)(f).format("DD MMM YYYY"):(0,u.epochToMoment)(f).format("DD MMM YYYY HH:mm:ss [GMT]"),E=(0,u.epochToMoment)(f).format("HH:mm:ss [GMT]"),w=ue(m,y,h),C=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState(!1),2),A=C[0],k=C[1];return(0,u.isMobile)()?c().createElement("div",null,c().createElement(D.Table.Row,{className:"crypto-transactions-history__table-row"},c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-cell"},c().createElement(D.Icon,{icon:"withdrawal"===y?"IcCashierWithdrawal":"IcCashierDeposit",size:32}),c().createElement(D.Text,{as:"p",size:"xs",weight:"bold",className:"crypto-transactions-history__table-type"},c().createElement(x.Localize,{i18n_default_text:y})),c().createElement("div",{className:"crypto-transactions-history__table-status",onClick:function(){var e=w.description,t=w.name;i(e,t)}},c().createElement("div",{className:z()("crypto-transactions-history__table-status-code","crypto-transactions-history__table-status-code-".concat(w.renderer))}),c().createElement(D.Text,{as:"p",size:"xxs"},w.name))),c().createElement(D.Table.Cell,null,c().createElement(D.Text,{as:"p",color:"prominent",size:"xxs",weight:"bold"},(0,x.localize)("Amount"))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-amount"},c().createElement(D.Text,{as:"p",size:"xxs",weight:"bold",color:"successful"===w.renderer?"profit-success":"red"},c().createElement(D.Money,{currency:r,amount:(0,u.formatMoney)(r,v,!0),should_format:!1,show_currency:!0}))),c().createElement(D.Table.Cell,null,c().createElement(D.Text,{as:"p",color:"prominent",size:"xxs",weight:"bold"},(0,x.localize)("Address"))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-hash"},c().createElement("a",{className:"crypto-transactions-history__table-link",href:s,rel:"noopener noreferrer",target:"_blank"},c().createElement(D.Text,{as:"p",size:"xxs",color:"red"},o))),c().createElement(D.Table.Cell,null,c().createElement(D.Text,{as:"p",color:"prominent",size:"xxs",weight:"bold"},(0,x.localize)("Transaction hash"))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-hash"},c().createElement("a",{className:"crypto-transactions-history__table-link",href:_,rel:"noopener noreferrer",target:"_blank"},c().createElement(D.Text,{as:"p",size:"xxs",color:"red"},w.transaction_hash))),c().createElement(D.Table.Cell,null,c().createElement(D.Text,{as:"p",color:"prominent",size:"xxs",weight:"bold"},(0,x.localize)("Time"))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-time"},c().createElement(D.Text,{as:"p",size:"xxs"},b),c().createElement("div",{className:"crypto-transactions-history__bullet"}),c().createElement(D.Text,{as:"p",size:"xxs"},E)),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-action"},1===p&&c().createElement(D.Button,{onClick:function(){a(d)},small:!0,secondary:!0},c().createElement(D.Text,{as:"p",size:"xxxs",weight:"bolder"},c().createElement(x.Localize,{i18n_default_text:"Cancel transaction"})))))):c().createElement("div",null,c().createElement(D.Table.Row,{className:"crypto-transactions-history__table-row"},c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-type"},c().createElement(D.Icon,{icon:"withdrawal"===y?"IcCashierWithdrawal":"IcCashierDeposit",size:32}),c().createElement(D.Text,{as:"p",size:"xs",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:y}))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-amount"},c().createElement(D.Text,{as:"p",size:"xs",weight:"bold",color:"successful"===w.renderer?"profit-success":"red"},c().createElement(D.Money,{currency:r,amount:(0,u.formatMoney)(r,v,!0),should_format:!1,show_currency:!0}))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-hash"},c().createElement(D.Popover,{alignment:"right",className:"crypto-transactions-history__table-popover",message:(0,x.localize)("View address on Blockchain")},c().createElement("a",{className:"crypto-transactions-history__table-link",href:s,rel:"noopener noreferrer",target:"_blank"},c().createElement(D.Text,{as:"p",size:"xs",color:"red"},g)))),c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-hash"},_?c().createElement(D.Popover,{alignment:"right",className:"crypto-transactions-history__table-popover",message:(0,x.localize)("View transaction on Blockchain")},c().createElement("a",{className:"crypto-transactions-history__table-link",href:_,rel:"noopener noreferrer",target:"_blank"},c().createElement(D.Text,{as:"p",size:"xs",color:"red"},w.transaction_hash))):c().createElement(D.Text,{as:"p",size:"xs",color:"red"},w.transaction_hash)),!A&&c().createElement(D.Table.Cell,null,c().createElement(D.Text,{as:"p",size:"xs"},b)),!A&&c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-status"},c().createElement(D.Popover,{alignment:"left",className:"crypto-transactions-history__table-popover",message:w.description},c().createElement("div",{className:z()("crypto-transactions-history__table-status-code","crypto-transactions-history__table-status-code-".concat(w.renderer))}),c().createElement(D.Text,{as:"p",size:"xs"},w.name))),A?c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-confirm"},c().createElement("div",null,c().createElement(D.Text,{as:"p",color:"prominent",size:"xxs"},(0,x.localize)("Are you sure you want to cancel this transaction?")),c().createElement(D.Button,{onClick:function(){k(!1),n(d)},primary:!0,text:(0,x.localize)("Yes")}),c().createElement(D.Button,{onClick:function(){k(!1)},secondary:!0,text:(0,x.localize)("No")}))):c().createElement(D.Table.Cell,{className:"crypto-transactions-history__table-action"},1===p&&c().createElement("div",{onClick:function(){k(!0)}},c().createElement(D.Popover,{alignment:"left",className:"crypto-transactions-history__table-popover",message:(0,x.localize)("Cancel transaction")},c().createElement(D.Icon,{icon:"IcCrossLight",size:10}))))))};He.propTypes={crypto:w().object,currency:w().string,cancelCryptoTransaction:w().func,showCryptoTransactionsCancelModal:w().func,showCryptoTransactionsStatusModal:w().func};const Be=T((function(e){var t=e.client,n=e.modules;return{currency:t.currency,cancelCryptoTransaction:n.cashier.transaction_history.cancelCryptoTransaction,showCryptoTransactionsCancelModal:n.cashier.transaction_history.showCryptoTransactionsCancelModal,showCryptoTransactionsStatusModal:n.cashier.transaction_history.showCryptoTransactionsStatusModal}}))(He);var Ge=function(e){var t=e.crypto_transactions,n=e.currency,r=e.is_loading,a=e.setIsCryptoTransactionsVisible,i=e.setIsDeposit;return c().useEffect((function(){return function(){return a(!1)}}),[a,n]),c().createElement(c().Fragment,null,c().createElement("div",{className:"crypto-transactions-history"},c().createElement("div",{className:"crypto-transactions-history__header"},c().createElement("div",{className:"crypto-transactions-history__back",onClick:function(){a(!1),window.location.pathname.endsWith(u.routes.cashier_deposit)&&i(!0)}},c().createElement(D.Icon,{icon:(0,u.isMobile)()?"IcChevronLeftBold":"IcArrowLeftBold"}),c().createElement(D.Text,{as:"p",size:"xs",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:" ".concat(n," recent transactions")})))),c().createElement(D.MobileWrapper,null,c().createElement(Le,null),c().createElement(je,null)),t.length>0?c().createElement(D.Table,{className:"crypto-transactions-history__table"},(0,u.isDesktop)()&&c().createElement(D.Table.Header,{className:"crypto-transactions-history__table-header"},c().createElement(D.Table.Row,{className:"crypto-transactions-history__table-row"},[{text:(0,x.localize)("Transaction")},{text:(0,x.localize)("Amount")},{text:(0,x.localize)("Address")},{text:(0,x.localize)("Transaction hash")},{text:(0,x.localize)("Time")},{text:(0,x.localize)("Status")},{text:(0,x.localize)("Action")}].map((function(e){return c().createElement(D.Table.Head,{key:e.text},e.text)})))),c().createElement(D.Table.Body,{className:"crypto-transactions-history__table-body"},r?c().createElement(D.Loading,{is_fullscreen:!0}):c().createElement(D.DataList,{data_list_className:"crypto-transactions-history__data-list",data_source:t,rowRenderer:function(e){return c().createElement(Be,e)},keyMapper:function(e){return e.id},row_gap:(0,u.isMobile)()?8:0}))):c().createElement("div",{className:"crypto-transactions-history__empty-text"},c().createElement(D.Text,{as:"p",size:"xs",color:"disabled",align:"center"},c().createElement(x.Localize,{i18n_default_text:"No current transactions available"})))))};Ge.propTypes={crypto_transactions:w().array,currency:w().string,is_loading:w().bool,setIsCryptoTransactionsVisible:w().func};const Ve=T((function(e){var t=e.client,n=e.modules;return{crypto_transactions:n.cashier.transaction_history.crypto_transactions,currency:t.currency,is_loading:n.cashier.transaction_history.is_loading,setIsCryptoTransactionsVisible:n.cashier.transaction_history.setIsCryptoTransactionsVisible,setIsDeposit:n.cashier.setIsDeposit}}))(Ge);function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=function(e){var t=e.accounts_list,n=e.container,r=e.error,a=e.has_no_account,i=e.has_no_accounts_balance,o=e.is_cashier_locked,s=e.is_crypto_transactions_visible,l=e.is_loading,d=e.is_switching,p=e.is_transfer_confirm,h=e.is_transfer_lock,f=e.is_virtual,m=e.onMount,_=e.recentTransactionOnMount,y=e.setAccountTransferAmount,g=e.setActiveTab,v=e.setIsTransferConfirm,b=e.setSideNotes,E=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState(!0),2),w=E[0],C=E[1];return c().useEffect((function(){s||_()}),[d]),c().useEffect((function(){return g(n),m(),u.WS.wait("authorize","website_status","get_settings","paymentagent_list").then((function(){C(!1)})),function(){y(""),v(!1)}}),[]),c().useEffect((function(){"function"==typeof b&&(i||d)&&b(null)}),[b,i]),f?c().createElement(B,null):l||d||w?c().createElement(D.Loading,{className:"cashier__loader",is_fullscreen:!1}):o?c().createElement(V,null):h?c().createElement(W,null):r.is_show_full_page||r.message&&!t.length?c().createElement(U,{error:r}):a?c().createElement(P,null):i?c().createElement(F,null):p?c().createElement(Re,null):s?c().createElement(Ve,null):c().createElement(Ie,{error:r,setSideNotes:b})};Ke.propTypes={accounts_list:w().array,container:w().string,error:w().object,has_no_account:w().bool,has_no_accounts_balance:w().bool,is_cashier_locked:w().bool,is_crypto_transactions_visible:w().bool,is_loading:w().bool,is_switching:w().bool,is_transfer_confirm:w().bool,is_transfer_lock:w().bool,is_virtual:w().bool,onMount:w().func,recentTransactionOnMount:w().func,setAccountTransferAmount:w().func,setActiveTab:w().func,setIsTransferConfirm:w().func,setSideNotes:w().func};const We=T((function(e){var t=e.client,n=e.modules;return{is_virtual:t.is_virtual,is_switching:t.is_switching,accounts_list:n.cashier.config.account_transfer.accounts_list,container:n.cashier.config.account_transfer.container,error:n.cashier.config.account_transfer.error,has_no_account:n.cashier.config.account_transfer.has_no_account,has_no_accounts_balance:n.cashier.config.account_transfer.has_no_accounts_balance,is_cashier_locked:n.cashier.is_cashier_locked,is_crypto_transactions_visible:n.cashier.transaction_history.is_crypto_transactions_visible,is_loading:n.cashier.is_loading,is_transfer_confirm:n.cashier.config.account_transfer.is_transfer_confirm,is_transfer_lock:n.cashier.is_transfer_lock,onMount:n.cashier.onMountAccountTransfer,recentTransactionOnMount:n.cashier.transaction_history.onMount,setActiveTab:n.cashier.setActiveTab,setAccountTransferAmount:n.cashier.setAccountTransferAmount,setIsTransferConfirm:n.cashier.setIsTransferConfirm}}))(Ke);var Ye=function(e){var t=e.item_key,n=e.label,r=e.value;return c().createElement("div",{className:"cashier__confirm-row"},c().createElement("span",null,n),Array.isArray(r)?c().createElement("span",null,r.map((function(e,t){return c().createElement("div",{key:t},c().createElement("strong",null,e))}))):c().createElement("strong",{className:z()({description:"description"===t})},r))},Qe=function(e){var t=e.data,n=e.error,r=e.header,a=e.onClickBack,i=e.onClickConfirm;return c().createElement("div",{className:"cashier__wrapper cashier__wrapper--confirm"},c().createElement(D.Icon,{icon:"IcConfirmDetails",width:"128",height:"128"}),c().createElement(D.Text,{as:"h2",color:"prominent",align:"center",weight:"bold",className:"cashier__header cashier__confirm-header"},r),c().createElement("div",{className:"cashier__confirm-column-wrapper"},c().createElement("div",{className:"cashier__confirm-column"},t.map((function(e,t){return c().createElement(Ye,{item_key:t,label:e.label,value:e.value,key:t})})))),c().createElement("div",{className:"cashier__confirm-submit"},c().createElement(D.Button,{large:!0,text:(0,x.localize)("Back"),onClick:a,secondary:!0}),c().createElement(D.Button,{large:!0,text:(0,x.localize)("Confirm"),onClick:i,primary:!0})),c().createElement(oe,{error:n}))};Qe.propTypes={data:w().arrayOf(w().shape({label:w().string,value:w().oneOfType([w().string,w().arrayOf(w().string),w().node])})),error:w().object,header:w().string,onClickBack:w().func,onClickConfirm:w().func};const Je=Qe;var Xe=function(e){var t=e.amount,n=e.currency,r=e.description,a=e.error,i=e.loginid,o=e.requestPaymentAgentTransfer,s=e.setIsTryTransferSuccessful,l=e.transfer_to,u=e.transfer_to_name;return c().createElement(Je,{data:[{label:(0,x.localize)("Transfer from"),value:i,key:"transfer_from"},{label:(0,x.localize)("Transfer to"),value:[l.toUpperCase(),u],key:"transfer_to"},{label:(0,x.localize)("Amount"),value:c().createElement(D.Money,{currency:n,amount:t,show_currency:!0}),key:"amount"},{label:(0,x.localize)("Description"),value:r,key:"description"}],error:a,header:(0,x.localize)("Please confirm the transaction details in order to complete the transfer:"),onClickBack:function(){s(!1)},onClickConfirm:function(){o({amount:t,currency:n,description:r,transfer_to:l})}})};Xe.propTypes={amount:w().number,currency:w().string,description:w().string,error:w().object,loginid:w().string,requestPaymentAgentTransfer:w().func,setIsTryTransferSuccessful:w().func,transfer_to:w().string,transfer_to_name:w().string};const $e=T((function(e){var t=e.client,n=e.modules;return{currency:t.currency,loginid:t.loginid,amount:n.cashier.config.payment_agent_transfer.confirm.amount,description:n.cashier.config.payment_agent_transfer.confirm.description,error:n.cashier.config.payment_agent_transfer.error,requestPaymentAgentTransfer:n.cashier.requestPaymentAgentTransfer,setIsTryTransferSuccessful:n.cashier.setIsTryTransferSuccessful,transfer_to:n.cashier.config.payment_agent_transfer.confirm.client_id,transfer_to_name:n.cashier.config.payment_agent_transfer.confirm.client_name}}))(Xe);function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function et(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=function(e){var t=e.amount,n=e.balance,r=e.currency,a=e.description,i=e.error,o=e.requestTryPaymentAgentTransfer,s=e.setErrorMessage,l=e.transfer_limit,d=e.transfer_to,p=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({amount:t.amount,currency:r,description:t.description.replace(/\n/g," "),transfer_to:t.loginid});case 2:e.sent.error&&n.setSubmitting(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){et(i,r,a,o,s,"next",e)}function s(e){et(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return c().createElement("div",{className:"cashier__wrapper payment-agent-transfer__container"},c().createElement(D.DesktopWrapper,null,c().createElement(D.Text,{as:"h2",color:"prominent",weight:"bold",align:"center",className:"cashier__header cashier__content-header"},c().createElement(x.Localize,{i18n_default_text:"Transfer to client"}))),c().createElement(Y.Formik,{initialValues:{loginid:d||"",amount:t||"",description:a||""},validate:function(e){return function(e,t){var n=t.balance,r=t.currency,a=t.transfer_limit,i={};e.loginid&&/^[A-Za-z]+[0-9]+$/.test(e.loginid)||(i.loginid=(0,x.localize)("Please enter a valid client login ID."));var o=(0,u.validNumber)(e.amount,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"float",decimals:(0,u.getDecimalPlaces)(r)},a.min&&{min:a.min,max:+n>=a.min&&+n<a.max?n:a.max})),s=o.is_ok,l=o.message;return e.amount?+n<+e.amount?i.amount=(0,x.localize)("Insufficient balance."):s||(i.amount=l):i.amount=(0,x.localize)("This field is required."),e.description&&!/^[0-9A-Za-z .,'-]{0,250}$/.test(e.description.replace(/\n/g," "))&&(i.description=(0,x.localize)("Please enter a valid description.")),i}(e,{balance:n,currency:r,transfer_limit:l})},onSubmit:p},(function(e){var t=e.errors,n=e.isSubmitting,a=e.isValid,o=e.touched,l=e.handleChange;return c().createElement(Y.Form,{noValidate:!0},c().createElement(Y.Field,{name:"loginid"},(function(e){var n=e.field;return c().createElement(D.Input,Ze({},n,{onChange:function(e){s(""),l(e)},className:"payment-agent-transfer__input",type:"text",label:(0,x.localize)("Client login ID"),error:o.loginid&&t.loginid,required:!0,autoComplete:"off",maxLength:20}))})),c().createElement(Y.Field,{name:"amount"},(function(e){var n=e.field;return c().createElement(D.Input,Ze({},n,{onChange:function(e){s(""),l(e)},className:"payment-agent-transfer__input dc-input--no-placeholder",type:"text",label:(0,x.localize)("Amount"),error:o.amount&&t.amount,required:!0,trailing_icon:c().createElement("span",{className:z()("symbols","symbols--".concat((r||"").toLowerCase()))},(0,u.getCurrencyDisplayCode)(r)),autoComplete:"off",maxLength:"30"}))})),c().createElement(Y.Field,{name:"description"},(function(e){var n=e.field;return c().createElement(D.Input,Ze({},n,{onChange:function(e){s(""),l(e)},className:"payment-agent-transfer__input-area",type:"textarea",label:(0,x.localize)("Description"),error:t.description,required:!0,autoComplete:"off",has_character_counter:!0,max_characters:"250"}))})),c().createElement("div",{className:"cashier__form-submit"},c().createElement(D.Button,{className:"cashier__form-submit-button",type:"submit",is_disabled:!a||n,primary:!0,large:!0},c().createElement(x.Localize,{i18n_default_text:"Transfer"}))),c().createElement(oe,{error:i}))})))};rt.propTypes={amount:w().string,balance:w().string,currency:w().string,description:w().string,error:w().object,requestTryPaymentAgentTransfer:w().func,setErrorMessage:w().func,transfer_limit:w().object,transfer_to:w().string};const at=T((function(e){var t=e.client,n=e.modules;return{balance:t.balance,currency:t.currency,amount:n.cashier.config.payment_agent_transfer.confirm.amount,description:n.cashier.config.payment_agent_transfer.confirm.description,error:n.cashier.config.payment_agent_transfer.error,requestTryPaymentAgentTransfer:n.cashier.requestTryPaymentAgentTransfer,setErrorMessage:n.cashier.setErrorMessage,transfer_limit:n.cashier.config.payment_agent_transfer.transfer_limit,transfer_to:n.cashier.config.payment_agent_transfer.confirm.client_id}}))(rt);var it=function(e){var t=e.currency,n=e.history,r=e.loginid,a=e.receipt,i=e.resetPaymentAgentTransfer;return c().createElement("div",{className:"cashier__wrapper payment-agent-transfer__wrapper"},c().createElement("div",{className:"cashier__success"},c().createElement(D.Text,{as:"h2",color:"prominent",align:"center",weight:"bold",className:"cashier__header"},c().createElement(x.Localize,{i18n_default_text:"Your funds have been transferred"})),c().createElement("div",{className:"cashier__transferred-amount cashier__text--bold"},(0,u.formatMoney)(t,a.amount_transferred,!0)," ",(0,u.getCurrencyDisplayCode)(t)),c().createElement("div",{className:"cashier__transferred-details-wrapper"},c().createElement("span",{className:"account-transfer__transfer-details-from"},c().createElement(D.Icon,{icon:"IcCurrency-".concat(t.toLowerCase())}),c().createElement("span",{className:"cashier__transferred-details"},c().createElement(D.Text,{size:"xs",line_height:"xs",weight:"bold",className:"cashier__text--bold"},(0,u.getCurrencyName)(t)),c().createElement(D.Text,{size:"xs",line_height:"xs",color:"prominent",className:"cashier__text--faint"},r))),c().createElement(D.Icon,{className:"cashier__transferred-icon",icon:"IcArrowLeftBold"}),c().createElement("span",{className:"account-transfer__transfer-details-to"},c().createElement(D.Icon,{icon:"IcClient"}),c().createElement("span",{className:"cashier__transferred-details"},c().createElement(D.Text,{size:"xs",line_height:"xs",weight:"bold",align:"center",className:"cashier__text--bold"},a.client_name),c().createElement(D.Text,{size:"xs",line_height:"xs",color:"prominent",className:"cashier__text--faint"},a.client_id.toUpperCase()))))),c().createElement("div",{className:"cashier__form-submit"},c().createElement(D.Button,{className:"cashier__form-submit-button",has_effect:!0,text:(0,x.localize)("View in statement"),onClick:function(){return function(e,t){e.push(u.routes.statement),t()}(n,i)},secondary:!0,large:!0}),c().createElement(D.Button,{className:"cashier__form-submit-button cashier__done-button",has_effect:!0,text:(0,x.localize)("Make a new transfer"),onClick:i,primary:!0,large:!0})))};it.propTypes={currency:w().string,history:w().object,loginid:w().string,receipt:w().object,resetPaymentAgentTransfer:w().func};const ot=(0,C.withRouter)(T((function(e){var t=e.client,n=e.modules;return{currency:t.currency,loginid:t.loginid,receipt:n.cashier.config.payment_agent_transfer.receipt,resetPaymentAgentTransfer:n.cashier.resetPaymentAgentTransfer}}))(it));var st=function(e){var t=e.balance,n=e.container,r=e.error,a=e.is_cashier_locked,i=e.is_loading,o=e.is_transfer_successful,s=e.is_try_transfer_successful,l=e.is_virtual,u=e.onMount,d=e.onUnMount,p=e.setActiveTab;return c().useEffect((function(){p(n),l||u()}),[n,l,u,p]),c().useEffect((function(){return function(){d()}}),[d]),l?c().createElement(B,null):i?c().createElement(D.Loading,{className:"cashier__loader"}):a?c().createElement(V,null):r.is_show_full_page?c().createElement(U,{error:r}):+t?s?c().createElement($e,null):o?c().createElement(ot,null):c().createElement(at,{error:r}):c().createElement(F,null)};st.propTypes={balance:w().string,container:w().string,error:w().object,is_cashier_locked:w().bool,is_loading:w().bool,is_transfer_successful:w().bool,is_try_transfer_successful:w().bool,is_virtual:w().bool,onMount:w().func,onUnMount:w().func,setActiveTab:w().func};const lt=T((function(e){var t=e.client,n=e.modules;return{balance:t.balance,is_virtual:t.is_virtual,container:n.cashier.config.payment_agent_transfer.container,error:n.cashier.config.payment_agent_transfer.error,is_cashier_locked:n.cashier.is_cashier_locked,is_loading:n.cashier.is_loading,is_transfer_successful:n.cashier.config.payment_agent_transfer.is_transfer_successful,is_try_transfer_successful:n.cashier.config.payment_agent_transfer.is_try_transfer_successful,onMount:n.cashier.onMountPaymentAgentTransfer,onUnMount:n.cashier.resetPaymentAgentTransfer,setActiveTab:n.cashier.setActiveTab}}))(st);var ct=function(e){var t=e.accounts_list,n=e.continueRoute,r=e.currency,a=e.is_confirmed,i=e.last_location,o=e.onCancel,s=e.onConfirm,l=e.should_show;c().useEffect(n,[a,i]);var d=t.filter((function(e){return!e.is_crypto})).map((function(e){return e.currency}))[0],p=!!r&&(0,u.isCryptocurrency)(r);return c().createElement(D.Dialog,{className:"acc-prompt-dialog",title:p?(0,x.localize)("Switch account?"):(0,x.localize)("Switch to crypto account?"),confirm_button_text:p?(0,x.localize)("Switch account"):(0,x.localize)("Switch to crypto account"),cancel_button_text:(0,x.localize)("Cancel"),onConfirm:s,onCancel:o,is_visible:l},p?c().createElement(x.Localize,{i18n_default_text:"To deposit money, please switch to your {{currency_symbol}} account.",values:{currency_symbol:null==d?void 0:d.toUpperCase()}}):c().createElement(x.Localize,{i18n_default_text:"To deposit cryptocurrency, switch your account."}))};ct.propTypes={accounts_list:w().array,continueRoute:w().func,is_confirmed:w().bool,last_location:w().string,onCancel:w().func,onConfirm:w().func,should_show:w().bool};const ut=T((function(e){var t=e.client,n=e.modules;return{accounts_list:n.cashier.config.account_transfer.accounts_list,continueRoute:n.cashier.account_prompt_dialog.continueRoute,currency:t.currency,is_confirmed:n.cashier.account_prompt_dialog.is_confirmed,last_location:n.cashier.account_prompt_dialog.last_location,onCancel:n.cashier.account_prompt_dialog.onCancel,onConfirm:n.cashier.account_prompt_dialog.onConfirm,should_show:n.cashier.account_prompt_dialog.should_show}}))(ct);var dt=function(e){var t=e.error_message,n=e.setShouldShow,r=e.should_show;return c().createElement(D.Dialog,{className:"acc-prompt-dialog",title:(0,x.localize)("Error"),confirm_button_text:(0,x.localize)("Retry"),onConfirm:function(){return n(!1)},is_visible:r,has_close_icon:!0},t)};dt.propTypes={error_message:w().string,setShouldShow:w().func,should_show:w().bool};const pt=T((function(e){var t=e.modules;return{error_message:t.cashier.error_dialog.error_message,setShouldShow:t.cashier.error_dialog.setShouldShow,should_show:t.cashier.error_dialog.should_show}}))(dt);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}var yt=function(e){var t=e.history,n=e.is_account_transfer_visible,r=e.is_account_setting_loaded,a=e.is_cashier_default,i=e.is_crypto_transactions_visible,o=e.is_loading,s=e.is_logged_in,l=e.is_logging_in,d=e.is_onramp_tab_visible,p=e.is_p2p_enabled,h=e.is_payment_agent_transfer_visible,f=e.is_payment_agent_visible,m=e.is_visible,_=e.location,y=e.onMount,g=e.p2p_notification_count,v=e.platform,b=e.routeBackInApp,E=e.routes,w=e.setAccountSwitchListener,C=e.setTabIndex,A=e.tab_index,k=e.toggleCashier;c().useEffect((function(){return k(),function(){k()}}),[]),c().useEffect((function(){var e;(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.WS.wait("authorize");case 2:s&&(y(),w());case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){_t(i,r,a,o,s,"next",e)}function s(e){_t(i,r,a,o,s,"throw",e)}o(void 0)}))})()}),[s]);var S=function(){var e=[];return E.forEach((function(t){t.is_invisible||t.path===u.routes.cashier_pa&&!f||t.path===u.routes.cashier_pa_transfer&&!h||t.path===u.routes.cashier_p2p&&!p||t.path===u.routes.cashier_onramp&&!d||t.path===u.routes.cashier_acc_transfer&&!n||e.push(ft(ft({},t.path===u.routes.cashier_p2p&&{count:g}),{},{default:t.default,icon:t.icon_component,label:t.getTitle(),value:t.component,path:t.path,has_side_note:!i&&t.path!==u.routes.cashier_p2p}))})),e},N=(0,u.getSelectedRoute)({routes:E,pathname:_.pathname}),O=!!(0,u.getSelectedRoute)({routes:E,pathname:_.pathname}).default;return!s&&l||!r?c().createElement(D.Loading,{is_fullscreen:!0}):c().createElement(D.FadeWrapper,{is_visible:m,className:"cashier-page-wrapper",keyname:"cashier-page-wrapper"},c().createElement(ut,null),c().createElement(pt,null),c().createElement("div",{className:"cashier"},c().createElement(D.PageOverlay,{header:!(0,u.isMobile)()||O&&(o||a)?(0,x.localize)("Cashier"):N.getTitle(),onClickClose:function(){return b(t)},is_close_disabled:!!u.platforms[v]},c().createElement(D.DesktopWrapper,null,c().createElement(D.VerticalTab,{alignment:"center",id:"cashier",classNameHeader:"cashier__tab-header",current_path:_.pathname,is_floating:!0,setVerticalTabIndex:C,vertical_tab_index:O?0:A,is_full_width:!0,is_routed:!0,list:S(),tab_headers_note:c().createElement(D.Button,{id:"cashier_learn_more",className:"cashier-page-wrapper__button",text:(0,x.localize)("Learn more about payment methods"),onClick:function(){return window.open((0,u.getStaticUrl)("/payment-methods"))},secondary:!0})})),c().createElement(D.MobileWrapper,null,c().createElement(D.Div100vhContainer,{className:"cashier__wrapper--is-mobile",height_offset:"80px"},N&&c().createElement(N.component,{component_icon:N.icon_component,history:t,menu_options:S()}))))))};yt.propTypes={history:w().object,is_account_transfer_visible:w().bool,is_account_setting_loaded:w().bool,is_cashier_default:w().bool,is_crypto_transactions_visible:w().bool,is_loading:w().bool,is_logged_in:w().bool,is_logging_in:w().bool,is_onramp_tab_visible:w().bool,is_p2p_enabled:w().bool,is_payment_agent_transfer_visible:w().bool,is_payment_agent_visible:w().bool,is_virtual:w().bool,is_visible:w().bool,location:w().object,onMount:w().func,p2p_notification_count:w().number,platform:w().string,routeBackInApp:w().func,routes:w().arrayOf(w().object),setAccountSwitchListener:w().func,setTabIndex:w().func,tab_index:w().number,toggleCashier:w().func};const gt=T((function(e){var t=e.client,n=e.common,r=e.modules,a=e.ui;return{is_account_transfer_visible:r.cashier.is_account_transfer_visible,is_account_setting_loaded:t.is_account_setting_loaded,is_cashier_default:r.cashier.is_cashier_default,is_crypto_transactions_visible:r.cashier.transaction_history.is_crypto_transactions_visible,is_loading:r.cashier.is_loading,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_onramp_tab_visible:r.cashier.onramp.is_onramp_tab_visible,is_p2p_enabled:r.cashier.is_p2p_enabled,is_payment_agent_transfer_visible:r.cashier.is_payment_agent_transfer_visible,is_payment_agent_visible:r.cashier.is_payment_agent_visible,is_virtual:t.is_virtual,is_visible:a.is_cashier_visible,onMount:r.cashier.onMountCommon,p2p_notification_count:r.cashier.p2p_notification_count,platform:n.platform,routeBackInApp:n.routeBackInApp,setAccountSwitchListener:r.cashier.setAccountSwitchListener,setTabIndex:r.cashier.setCashierTabIndex,tab_index:r.cashier.cashier_route_tab_index,toggleCashier:a.toggleCashier}}))((0,I.withRouter)(yt));var vt=n("../../../node_modules/qrcode.react/lib/index.js"),bt=n.n(vt),Et=function(e){var t=e.api_error,n=e.currency,r=e.crypto_transactions,a=e.deposit_address,i=e.is_deposit_address_loading,o=e.recentTransactionOnMount,s=e.pollApiForDepositAddress,l=e.setIsDeposit;if(c().useEffect((function(){o()}),[o]),c().useEffect((function(){l(!0)}),[]),c().useEffect((function(){s(!1)}),[s]),i)return c().createElement(D.Loading,{is_fullscreen:!0});var d,p=(0,u.getCurrencyName)(n),h=u.CryptoConfig.get()[n].display_code;return d=["USDC","eUSDT"].includes(n)?c().createElement(x.Localize,{i18n_default_text:"To avoid loss of funds, please <0>do not send</0> ETH, and <1>do not use</1> Binance Chain (BNB) and Binance Smart Chain (BSC) networks.",components:[c().createElement("strong",{key:0}),c().createElement("strong",{key:1})]}):"ETH"===n?c().createElement(x.Localize,{i18n_default_text:"To avoid loss of funds, please <0>do not send</0> ERC20 tokens, and <1>do not use</1> Binance Chain (BNB) and Binance Smart Chain (BSC) networks.",components:[c().createElement("strong",{key:0}),c().createElement("strong",{key:1})]}):c().createElement(x.Localize,{i18n_default_text:"Do not send any other currency to the following address. Otherwise, you'll lose funds."}),c().createElement("div",{className:"cashier__wrapper crypto-deposit__wrapper"},c().createElement("div",{className:"crypto-deposit__transaction-wrapper"},c().createElement(D.Icon,{icon:"IcCurrency-".concat(null==n?void 0:n.toLowerCase()),size:64}),c().createElement(D.Text,{className:"crypto-deposit__transaction-currency",weight:"bold",as:"p",line_height:"m",size:(0,u.isMobile)()?"xs":"s",align:"center"},c().createElement(x.Localize,{i18n_default_text:"Send only {{currency}} ({{currency_symbol}}) to this address.",values:{currency:p,currency_symbol:h}})),c().createElement(D.Text,{as:"p",line_height:"m",size:(0,u.isMobile)()?"xs":"s",align:"center"},d),t?c().createElement("div",{className:"crypto-api-error"},c().createElement(D.Text,{as:"p",align:"center",size:"xs",className:"crypto-api-error__text"},c().createElement(D.Icon,{width:30,height:20,icon:"IcAlertWarning"}),c().createElement(x.Localize,{i18n_default_text:"Unfortunately, we couldn't get the address since our server was down. Please click Refresh to reload the address or try again later."})),c().createElement(D.Button,{text:(0,x.localize)("Refresh"),onClick:function(){return s(!1)},secondary:!0,small:!0})):c().createElement(c().Fragment,null,c().createElement(bt(),{className:"qrcode",value:a,size:160}),c().createElement("div",{className:"crypto-deposit__clipboard-wrapper"},c().createElement(D.Text,{className:"crypto-deposit__address-hash",line_height:"m",size:(0,u.isMobile)()?"xxs":"xs",weight:"bold",align:"center"},a),c().createElement(D.Clipboard,{className:"crypto-deposit__clipboard",text_copy:a,info_message:(0,u.isMobile)()?"":(0,x.localize)("copy"),icon:"IcCashierClipboard",success_message:(0,x.localize)("copied!"),popoverAlignment:(0,u.isMobile)()?"left":"bottom"})))),c().createElement("div",{className:"crypto-deposit__fiat-onramp-wrapper"},c().createElement("div",{className:"crypto-deposit__fiat-onramp-description"},c().createElement(D.Text,{as:"p",line_height:"m",size:(0,u.isMobile)()?"xs":"s",align:"center"},c().createElement(x.Localize,{i18n_default_text:"Looking for a way to buy cryptocurrency?"})),(0,u.isMobile)()?null:c().createElement("br",null),c().createElement(D.Text,{as:"p",line_height:"m",size:(0,u.isMobile)()?"xs":"s",align:"center"},c().createElement(x.Localize,{i18n_default_text:"Use our fiat onramp services to buy and deposit cryptocurrency into your Deriv account."}))),c().createElement(D.ButtonLink,{className:"crypto-deposit__fiat-onramp-button",has_effect:!0,to:"/cashier/on-ramp"},c().createElement(D.Text,{as:"p",weight:"bold",color:"colored-background",size:"xs"},c().createElement(x.Localize,{i18n_default_text:"Try our Fiat onramp"})))),(0,u.isMobile)()&&(0,u.isCryptocurrency)(n)&&null!=r&&r.length?c().createElement(pe,null):null)};Et.propTypes={api_error:w().string,crypto_transactions:w().array,currency:w().string,deposit_address:w().string,is_deposit_address_loading:w().bool,recentTransactionOnMount:w().func,pollApiForDepositAddress:w().func,setIsDeposit:w().func};const wt=T((function(e){var t=e.modules,n=e.client;return{api_error:t.cashier.onramp.api_error,crypto_transactions:t.cashier.transaction_history.crypto_transactions,currency:n.currency,deposit_address:t.cashier.onramp.deposit_address,is_deposit_address_loading:t.cashier.onramp.is_deposit_address_loading,recentTransactionOnMount:t.cashier.transaction_history.onMount,pollApiForDepositAddress:t.cashier.onramp.pollApiForDepositAddress,setIsDeposit:t.cashier.setIsDeposit}}))(Et);var Ct=function(e){var t=e.iframe_height,n=e.iframe_url,r=e.is_crypto,a=e.is_loading,i=(0,I.useHistory)();return c().createElement("div",{className:"cashier__wrapper"},a&&c().createElement(D.Loading,{is_fullscreen:!0}),n&&c().createElement("iframe",{className:"cashier__content",height:t,src:n,frameBorder:"0",scrolling:"auto"}),r&&c().createElement("div",{className:"cashier__transfer-onramp"},c().createElement("div",{className:"cashier__transfer-onramp__header"},c().createElement(D.Text,{line_height:"xxl"},c().createElement(x.Localize,{i18n_default_text:"Looking for a way to buy cryptocurrency?"}))),c().createElement("div",null,c().createElement(D.Button,{className:"cashier__transfer-onramp__button",has_effect:!0,text:(0,x.localize)("Try our Fiat onramp"),onClick:function(){return i.push(u.routes.cashier_onramp)},primary:!0}))))};Ct.propTypes={iframe_height:w().oneOfType([w().number,w().string]),iframe_url:w().string,is_loading:w().bool};const At=Ct;var kt=[{icons:[{light:"IcWalletCreditDebitLight",dark:"IcWalletCreditDebitDark"},{light:"IcCashierInstantBankTransferLight",dark:"IcCashierInstantBankTransferDark"},{light:"IcCashierEwalletLight",dark:"IcCashierEwalletDark"},{light:"IcCashierLocalPaymentMethodsLight",dark:"IcCashierLocalPaymentMethodsDark"}]}],St=[{icons:[{light:"IcCashierBitcoinLight",dark:"IcCashierBitcoinDark"},{light:"IcCashierEthereumLight",dark:"IcCashierEthereumDark"},{light:"IcCashierLiteCoinLight",dark:"IcCashierLiteCoinDark"},{light:"IcCashierUsdCoinLight",dark:"IcCashierUsdCoinDark"},{light:"IcCashierTetherLight",dark:"IcCashierTetherDark"}]}],Nt=[{icons:[{light:"IcCashierChangellyRowLight",dark:"IcCashierChangellyRowDark"},{light:"IcCashierXanpoolSmallLight",dark:"IcCashierXanpoolSmallDark"},{light:"IcCashierBanxaLight",dark:"IcCashierBanxaDark"}]}];var Ot=function(e){var t=e.detail_click,n=e.detail_contents,r=e.detail_description,a=e.detail_header,i=e.is_dark_mode_on,o=e.is_mobile;return c().createElement("div",{className:"cashier-default-detail"},c().createElement(D.Text,{size:"sm",weight:"bold",color:"prominent"},a),c().createElement("div",{className:"cashier-default-detail__div",onClick:t},c().createElement("div",{className:"cashier-default-detail__content"},c().createElement(D.Text,{size:"xs",className:"cashier-default-detail__text"},r),c().createElement(D.Icon,{icon:i?"IcChevronRightBoldDark":"IcChevronRightBold",size:16})),null==n?void 0:n.map((function(e,t){var n;return c().createElement("div",{key:t,className:"cashier-default-detail__array"},c().createElement("div",{className:"cashier-default-detail__icons"},c().createElement(D.NewsTicker,{speed:10},c().createElement("div",{className:z()({"cashier-default-detail__icons-array":!o})},null===(n=e.icons)||void 0===n?void 0:n.map((function(e,t){return c().createElement("div",{key:"".concat(e).concat(t),className:"cashier-default-detail__icon"},c().createElement(D.Icon,{icon:i?e.dark:e.light,width:72,height:45}))}))))))}))))};Ot.propTypes={detail_click:w().func,detail_contents:w().array,detail_description:w().string,detail_header:w().string,is_mobile:w().bool};const Tt=Ot;var It=function(e){var t,n=e.accounts_list,r=e.currency,a=e.has_set_currency,i=e.is_dark_mode_on,o=e.is_landing_company_loaded,s=e.is_mobile,l=e.is_payment_agent_visible_in_onboarding,d=e.is_switching,p=e.onMountCashierDefault,h=e.openRealAccountSignup,f=e.shouldNavigateAfterChooseCrypto,m=e.shouldNavigateAfterPrompt,_=e.setIsCashierDefault,y=e.setIsDeposit,g=e.setDepositTarget,v=e.setShouldShowAllAvailableCurrencies,b=e.showP2pInCashierDefault,E=e.show_p2p_in_cashier_default,w=e.toggleSetCurrencyModal,C=(0,I.useHistory)(),A=!!r&&(0,u.isCryptocurrency)(r),k=n.some((function(e){return e.is_crypto})),S=n.some((function(e){return!e.is_crypto}));c().useEffect((function(){return p(),function(){_(!1),!a&&window.location.pathname.includes(u.routes.cashier)&&(C.push(u.routes.trade),w())}}),[]);var N=function(e){h("choose"),f(e)},O=function(e){g(e),A||k?N(e):h("add_crypto")},T=function(e,t){S?m(e,t):h("add_fiat")},P=function(){g(u.routes.cashier_deposit),A?T(u.routes.cashier_deposit,"deposit"):y(!0)},M=function(){O(u.routes.cashier_deposit)},R=function(){O(u.routes.cashier_onramp)},U=function(){v(!0),g(u.routes.cashier_pa),N(u.routes.cashier_pa)},L=function(){g(u.routes.cashier_p2p),A?T(u.routes.cashier_p2p,"DP2P"):C.push(u.routes.cashier_p2p)};return d||0===n.length||!o?c().createElement(D.Loading,{className:"cashier-default__loader",is_fullscreen:!0}):c().createElement("div",null,c().createElement("div",{className:"cashier-default"},c().createElement("div",{className:"cashier-default-header"},c().createElement(D.Text,{size:s?"s":"sm",line_height:"xxl"},c().createElement(x.Localize,{i18n_default_text:"Choose a way to fund your account"})),c().createElement(D.Text,{size:s?"xs":"s",line_height:s?"xl":"xxl",align:"center"},c().createElement(x.Localize,{i18n_default_text:"Please note that some payment methods might not be available in your country."}))),s&&c().createElement("div",{className:"cashier-default-header-learn-more",onClick:function(){return window.open((0,u.getStaticUrl)("/payment-methods"))}},c().createElement(D.Text,{size:"xs",color:"red"},c().createElement(x.Localize,{i18n_default_text:"Learn more about payment methods"}))),c().createElement(D.ThemedScrollbars,{className:"cashier-default-content"},c().createElement("div",{className:"cashier-default-content__description"},null===(t=function(){b();var e=[];return e.push(function(e){return{detail_click:e,detail_description:(0,x.localize)("Deposit via the following payment methods:"),detail_header:(0,x.localize)("Deposit via bank wire, credit card, and e-wallet"),detail_contents:kt}}(P)),e.push(function(e){return{detail_click:e,detail_description:(0,x.localize)("We accept the following cryptocurrencies:"),detail_header:(0,x.localize)("Deposit cryptocurrencies"),detail_contents:St}}(M)),e.push(function(e,t){return{detail_click:e,detail_description:(0,x.localize)("Choose any of these exchanges to buy cryptocurrencies:"),detail_header:t?(0,x.localize)("Buy cryptocurrencies"):(0,x.localize)("Buy cryptocurrencies via fiat onramp"),detail_contents:Nt}}(R,A)),l&&e.push(function(e){return{detail_click:e,detail_description:(0,x.localize)("Deposit in your local currency via an authorised, independent payment agent in your country."),detail_header:(0,x.localize)("Deposit via payment agents")}}(U)),E&&e.push(function(e){return{detail_click:e,detail_description:(0,x.localize)("Deposit in your local currency via peer-to-peer exchange with fellow traders in your country."),detail_header:(0,x.localize)("Deposit with DP2P")}}(L)),e}())||void 0===t?void 0:t.map((function(e,t){return c().createElement(Tt,{key:"".concat(e.detail_header).concat(t),detail_click:e.detail_click,detail_contents:e.detail_contents,detail_description:e.detail_description,detail_header:e.detail_header,is_dark_mode_on:i,is_mobile:s})}))))))};It.propTypes={accounts_list:w().array,currency:w().string,is_dark_mode_on:w().bool,is_landing_company_loaded:w().bool,is_mobile:w().bool,is_payment_agent_visible_in_onboarding:w().bool,is_switching:w().bool,p2p_advertiser_error:w().string,onMountCashierDefault:w().func,openRealAccountSignup:w().func,shouldNavigateAfterChooseCrypto:w().func,shouldNavigateAfterPrompt:w().func,setIsCashierDefault:w().func,setIsDeposit:w().func};const xt=T((function(e){var t=e.client,n=e.modules,r=e.ui;return{accounts_list:n.cashier.config.account_transfer.accounts_list,currency:t.currency,has_set_currency:n.cashier.has_set_currency,is_dark_mode_on:r.is_dark_mode_on,is_landing_company_loaded:t.is_landing_company_loaded,is_mobile:r.is_mobile,is_payment_agent_visible_in_onboarding:n.cashier.is_payment_agent_visible_in_onboarding,is_switching:t.is_switching,onMountCashierDefault:n.cashier.onMountCashierDefault,openRealAccountSignup:r.openRealAccountSignup,p2p_advertiser_error:n.cashier.p2p_advertiser_error,shouldNavigateAfterChooseCrypto:r.shouldNavigateAfterChooseCrypto,shouldNavigateAfterPrompt:n.cashier.account_prompt_dialog.shouldNavigateAfterPrompt,setIsCashierDefault:n.cashier.setIsCashierDefault,setIsDeposit:n.cashier.setIsDeposit,setDepositTarget:n.cashier.setDepositTarget,setShouldShowAllAvailableCurrencies:n.cashier.setShouldShowAllAvailableCurrencies,showP2pInCashierDefault:n.cashier.showP2pInCashierDefault,show_p2p_in_cashier_default:n.cashier.show_p2p_in_cashier_default,toggleSetCurrencyModal:r.toggleSetCurrencyModal}}))(It);function Dt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}var Rt=function(e){var t=e.account_status,n=e.is_tnc_needed,r=e.is_financial_information_incomplete,a=e.is_trading_experience_incomplete,i=e.is_financial_account,o=e.onMount,s=e.standpoint,l=t.authentication,d=l.identity,p=l.document,h=l.needs_verification,f=h.includes("identity"),m=h.includes("document"),_="none"!==d.status,y="none"!==p.status,g=s.iom?(0,x.localize)("We were unable to verify your information automatically. To enable this function, you must complete the following:"):(0,x.localize)("To enable this feature you must complete the following:"),v=(0,I.useHistory)(),b=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.WS.tncApproval();case 2:return e.next=4,u.WS.getSettings();case 4:o();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Mt(i,r,a,o,s,"next",e)}function s(e){Mt(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),E=[].concat(Dt(f&&_?[{content:(0,x.localize)("Check proof of identity document verification status"),status:"action",onClick:function(){return v.push(u.routes.proof_of_identity)}}]:[]),Dt(m&&y?[{content:(0,x.localize)("Check proof of address document verification status"),status:"action",onClick:function(){return v.push(u.routes.proof_of_address)}}]:[]),Dt(n?[{content:c().createElement(x.Localize,{i18n_default_text:"Accept our updated <0>terms and conditions</0>",components:[c().createElement(D.StaticUrl,{key:0,className:"link",href:"terms-and-conditions"})]}),status:"button-action",onClick:function(){return b()},button_text:(0,x.localize)("I accept")}]:[]),Dt(i&&(r||a)?[{content:(0,x.localize)("Complete the financial assessment form"),status:"action",onClick:function(){return v.push(u.routes.financial_assessment)}}]:[]));return c().createElement(c().Fragment,null,E.length?c().createElement("div",{className:"cashier-locked"},c().createElement(D.Icon,{icon:"IcCashierDepositLock",className:"cashier-locked__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"cashier-locked__title"},(0,x.localize)("Deposits are locked")),c().createElement(D.Text,{as:"p",align:"center",size:"xs",className:"cashier-locked__desc"},g),c().createElement(D.Checklist,{className:"cashier-locked__checklist",items:E})):c().createElement(V,null))};Rt.propTypes={account_status:w().object,is_tnc_needed:w().bool,is_financial_information_incomplete:w().bool,is_trading_experience_incomplete:w().bool,is_financial_account:w().bool,onMount:w().func};const Ut=T((function(e){var t=e.client,n=e.modules;return{account_status:t.account_status,is_tnc_needed:t.is_tnc_needed,is_financial_information_incomplete:t.is_financial_information_incomplete,is_trading_experience_incomplete:t.is_trading_experience_incomplete,is_financial_account:t.is_financial_account,onMount:n.cashier.onMount,standpoint:t.standpoint}}))(Rt);var Lt=function(e){var t=e.submitFundsProtection;return c().createElement("div",{className:"funds-protection"},c().createElement(D.Icon,{icon:"IcCashierFundsProtection",className:"funds-protection__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"funds-protection__title"},(0,x.localize)("Funds protection level")),c().createElement("p",{className:"funds-protection__desc"},c().createElement(x.Localize,{i18n_default_text:"We hold customer funds in bank accounts separate from our operational accounts which would not, in the event of insolvency, form part of the company's assets. This meets the <0>Gambling Commission</0>'s requirements for the segregation of customer funds at the level: <1>medium protection</1>.",components:[c().createElement("a",{key:0,className:"link link--orange",target:"_blank",rel:"noopener noreferrer",href:"http://www.gamblingcommission.gov.uk/for-the-public/Your-rights/Protection-of-customer-funds.aspx"}),c().createElement("strong",{key:1})]})),c().createElement(D.Button,{onClick:t,primary:!0,large:!0,type:"submit"},(0,x.localize)("Deposit now")))};Lt.propTypes={submitFundsProtection:w().func};const Ft=T((function(e){return{submitFundsProtection:e.modules.cashier.submitFundsProtection}}))(Lt);function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const zt=function(e){var t=e.type,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState(!1),2),r=n[0],a=n[1],i=function(){a(!r)};return c().createElement("div",{className:"cashier__usdt-side-note"},c().createElement(D.Text,{as:"h2",weight:"bold",color:"prominent"},"eusdt"===t&&c().createElement(x.Localize,{i18n_default_text:"About Tether (Ethereum)"}),"usdt"===t&&c().createElement(x.Localize,{i18n_default_text:"About Tether (Omni)"})),"eusdt"===t&&c().createElement(D.Text,{as:"p",size:"xxs"},c().createElement(x.Localize,{i18n_default_text:"Deriv currently supports withdrawals of Tether eUSDT to Ethereum wallet. To ensure a successful transaction, enter a wallet address compatible with the tokens you wish to withdraw. <0>Learn more</0>",components:[c().createElement("a",{key:0,className:"link link--orange",onClick:i})]})),"usdt"===t&&c().createElement(D.Text,{as:"p",size:"xxs"},c().createElement(x.Localize,{i18n_default_text:"Deriv currently supports withdrawals of Tether USDT to Omni wallet. To ensure a successful transaction, enter a wallet address compatible with the tokens you wish to withdraw. <0>Learn more</0>",components:[c().createElement("a",{key:0,className:"link link--orange",onClick:i})]})),c().createElement(D.Modal,{className:"usdt-note-modal",title:c().createElement(x.Localize,{i18n_default_text:"About Tether"}),has_close_icon:!0,is_open:r,small:!0,toggleModal:i},c().createElement(D.Modal.Body,null,c().createElement(D.Text,{as:"p",size:"xs"},c().createElement(x.Localize,{i18n_default_text:"Tether is a blockchain-enabled platform designed to facilitate the use of fiat currencies in a digital manner."})),"eusdt"===t&&c().createElement("div",null,c().createElement("li",{className:"title"},c().createElement(x.Localize,{i18n_default_text:"Tether on Ethereum (eUSDT)"})),c().createElement(D.Text,{as:"p",size:"xs",className:"description"},c().createElement(x.Localize,{i18n_default_text:"Tether on the Ethereum blockchain, as an ERC20 token, is a newer transport layer, which now makes Tether available in Ethereum smart contracts. As a standard ERC20 token, it can also be sent to any Ethereum address."}))),"usdt"===t&&c().createElement("div",null,c().createElement("li",{className:"title"},c().createElement(x.Localize,{i18n_default_text:"Tether on Omni Layer (USDT)"})),c().createElement(D.Text,{as:"p",className:"description",size:"xs"},c().createElement(x.Localize,{i18n_default_text:"Tether was originally created to use the bitcoin network as its transport protocol ‒ specifically, the Omni Layer ‒ to allow transactions of tokenised traditional currency."}))))))};function Ht(e){return function(e){if(Array.isArray(e))return Bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gt=function(e){var t=e.crypto_transactions,n=e.container,r=e.currency,a=e.current_currency_type,i=e.error,o=e.is_cashier_locked,s=e.is_cashier_default,l=e.is_deposit,d=e.is_deposit_locked,p=e.is_eu,h=e.is_crypto_transactions_visible,f=e.iframe_height,m=e.iframe_url,_=e.is_loading,y=e.is_switching,g=e.is_system_maintenance,v=e.is_virtual,b=e.onMount,E=e.recentTransactionOnMount,w=e.setActiveTab,C=e.setIsDeposit,A=e.setSideNotes,k=e.tab_index,S=!!r&&(0,u.isCryptocurrency)(r);return c().useEffect((function(){h||E()}),[y]),c().useEffect((function(){return w(n),b(),function(){return C(!1)}}),[w,b,n]),c().useEffect((function(){if((0,u.isDesktop)())if(!(0,u.isCryptocurrency)(r)||"function"!=typeof A||s||y)A(null);else{var e=[];t.length&&e.push(c().createElement(pe,{key:2}));var n=[].concat(Ht(/^(UST)$/i.test(r)?[c().createElement(zt,{type:"usdt",key:1})]:[]),Ht(/^(eUSDT)$/i.test(r)?[c().createElement(zt,{type:"eusdt",key:1})]:[]));n.length&&e.push(n),A(e)}}),[r,k,t,s]),(y||_&&!m)&&!h?c().createElement(D.Loading,{is_fullscreen:!0}):v?c().createElement(B,null):g&&(o||d&&"crypto"===a)?c().createElement(V,null):i.is_ask_uk_funds_protection?c().createElement(Ft,null):o?c().createElement(V,null):d?c().createElement(Ut,null):h?c().createElement(Ve,null):l||p?i.message?c().createElement(U,{error:i}):(0,u.isCryptocurrency)(r)?c().createElement(wt,null):c().createElement(At,{iframe_height:f,iframe_url:m,is_loading:_,is_crypto:S}):c().createElement(xt,null)};Gt.propTypes={crypto_transactions:w().array,container:w().string,current_currency_type:w().string,error:w().object,is_cashier_default:w().bool,is_cashier_locked:w().bool,is_deposit:w().bool,is_crypto_transactions_visible:w().bool,is_deposit_locked:w().bool,is_eu:w().bool,iframe_height:w().oneOfType([w().number,w().string]),iframe_url:w().string,is_loading:w().bool,is_switching:w().bool,is_system_maintenance:w().bool,is_virtual:w().bool,onMount:w().func,recentTransactionOnMount:w().func,setActiveTab:w().func,setIsDeposit:w().func,setSideNotes:w().func,standpoint:w().object,tab_index:w().number};const Vt=T((function(e){var t=e.client,n=e.modules;return{crypto_transactions:n.cashier.transaction_history.crypto_transactions,container:n.cashier.config.deposit.container,currency:t.currency,current_currency_type:t.current_currency_type,error:n.cashier.config.deposit.error,is_cashier_default:n.cashier.is_cashier_default,is_cashier_locked:n.cashier.is_cashier_locked,is_crypto_transactions_visible:n.cashier.transaction_history.is_crypto_transactions_visible,is_deposit:n.cashier.is_deposit,is_deposit_locked:n.cashier.is_deposit_locked,is_eu:t.is_eu,iframe_height:n.cashier.config.deposit.iframe_height,iframe_url:n.cashier.config.deposit.iframe_url,is_loading:n.cashier.is_loading,is_system_maintenance:n.cashier.is_system_maintenance,is_switching:t.is_switching,is_virtual:t.is_virtual,onMount:n.cashier.onMount,recentTransactionOnMount:n.cashier.transaction_history.onMount,setActiveTab:n.cashier.setActiveTab,setIsDeposit:n.cashier.setIsDeposit,standpoint:t.standpoint,tab_index:n.cashier.cashier_route_tab_index}}))(Gt);function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Kt=function(e){var t=e.currency,n=(0,u.getCurrencyName)(t),r=u.CryptoConfig.get()[t].display_code;return c().createElement(D.Text,{as:"h2",color:"prominent",weight:"bold",align:"center",className:"cashier__header cashier__content-header"},c().createElement(x.Localize,{i18n_default_text:"Withdraw {{currency}} ({{currency_symbol}}) to your wallet",values:{currency:n,currency_symbol:r}}))},Wt=function(e){var t=e.account_platform_icon,n=e.balance,r=e.blockchain_address,a=e.crypto_currency,i=e.crypto_transactions,o=e.converter_from_error,s=e.converter_to_error,l=e.currency,d=e.current_fiat_currency,p=e.is_loading,h=e.onMountWithdraw,f=e.percentage,m=e.percentageSelectorSelectionStatus,_=e.recentTransactionOnMount,y=e.requestWithdraw,g=e.setBlockchainAddress,v=e.setWithdrawPercentageSelectorResult,b=e.should_percentage_reset,E=e.validateWithdrawFromAmount,w=e.validateWithdrawToAmount,C=e.verification_code;c().useEffect((function(){_()}),[_]),c().useEffect((function(){return h(C),function(){return m(!1)}}),[]);var A=function(e){return e?e.length<25||e.length>64?(0,x.localize)("Your wallet address should have 25 to 64 characters."):void 0:(0,x.localize)("This field is required.")};return p?c().createElement(D.Loading,null):c().createElement("div",{className:"cashier__wrapper withdraw__wrapper"},!(0,u.isMobile)()&&c().createElement(Kt,{currency:l}),c().createElement("div",{className:"withdraw__form-icon"},c().createElement(D.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),size:(0,u.isMobile)()?64:128})),(0,u.isMobile)()&&c().createElement(Kt,{currency:l}),c().createElement(Y.Formik,{initialValues:{address:""}},(function(e){var t=e.errors,i=e.isSubmitting,u=e.touched,p=e.setFieldTouched,h=e.handleChange,m=e.values;return c().createElement("div",{className:"withdraw__form"},c().createElement(Y.Field,{name:"address",validate:A},(function(e){var n=e.field;return c().createElement(D.Input,qt({},n,{onChange:function(e){h(e),g(e.target.value),p("address",!0,!1)},className:"cashier__input withdraw__input",type:"text",label:c().createElement(x.Localize,{i18n_default_text:"Your {{currency_symbol}} wallet address",values:{currency_symbol:null==l?void 0:l.toUpperCase()}}),error:u.address&&t.address,required:!0,autoComplete:"off"}))})),c().createElement("div",{className:"withdraw__percentage-selector"},c().createElement(ce,{amount:+n,currency:l,getCalculatedAmount:v,percentage:f,should_percentage_reset:b})),c().createElement("div",{className:"withdraw__crypto-fiat-converter"},c().createElement(ne,{from_currency:a,to_currency:d||"USD",validateFromAmount:E,validateToAmount:w})),c().createElement("div",{className:"withdraw__form-submit"},c().createElement(D.Button,{className:"cashier__form-submit-button",is_disabled:A(m.address)||!!o||!!s||i||!r,type:"submit",primary:!0,large:!0,onClick:function(){return y(C)}},c().createElement(x.Localize,{i18n_default_text:"Withdraw"}))))})),c().createElement(D.MobileWrapper,null,(0,u.isCryptocurrency)(l)&&null!=i&&i.length?c().createElement(pe,null):null))};Wt.propTypes={account_platform_icon:w().string,balance:w().number,blockchain_address:w().string,converter_from_error:w().string,converter_to_error:w().string,crypto_currency:w().string,crypto_transactions:w().array,currency:w().string,current_fiat_currency:w().string,is_loading:w().bool,onMountWithdraw:w().func,percentage:w().number,percentageSelectorSelectionStatus:w().func,requestWithdraw:w().func,recentTransactionOnMount:w().func,setBlockchainAddress:w().func,setWithdrawPercentageSelectorResult:w().func,should_percentage_reset:w().bool,validateWithdrawFromAmount:w().func,validateWithdrawToAmount:w().func,verification_code:w().string};const Yt=T((function(e){var t=e.client,n=e.modules;return{account_platform_icon:n.cashier.account_platform_icon,balance:t.balance,blockchain_address:n.cashier.blockchain_address,converter_from_error:n.cashier.converter_from_error,converter_to_error:n.cashier.converter_to_error,crypto_currency:t.currency,crypto_transactions:n.cashier.transaction_history.crypto_transactions,currency:t.currency,current_fiat_currency:t.current_fiat_currency,is_loading:n.cashier.is_loading,onMountWithdraw:n.cashier.onMountWithdraw,percentage:n.cashier.percentage,percentageSelectorSelectionStatus:n.cashier.percentageSelectorSelectionStatus,requestWithdraw:n.cashier.requestWithdraw,recentTransactionOnMount:n.cashier.transaction_history.onMount,setBlockchainAddress:n.cashier.setBlockchainAddress,setWithdrawPercentageSelectorResult:n.cashier.setWithdrawPercentageSelectorResult,should_percentage_reset:n.cashier.should_percentage_reset,validateWithdrawFromAmount:n.cashier.validateWithdrawFromAmount,validateWithdrawToAmount:n.cashier.validateWithdrawToAmount,verification_code:t.verification_code.payment_withdraw}}))(Wt);var Qt=function(){return c().createElement(D.Text,{as:"p",color:"prominent",weight:"bold",align:"center",className:"withdraw__receipt-status"},c().createElement(D.Icon,{icon:"IcCircleDynamicColor",color:"orange",size:8,className:"withdraw__receipt-status-icon"}),c().createElement(x.Localize,{i18n_default_text:"In review"}))},Jt=function(e){var t,n,r=e.account;return c().createElement("div",{className:"withdraw__account-info"},c().createElement("div",{className:"withdraw__account-info-detail"},c().createElement(D.Icon,{icon:(null==r?void 0:r.platform_icon)||"IcCurrency-".concat(null==r||null===(t=r.currency)||void 0===t?void 0:t.toLowerCase()),size:32}),c().createElement(D.Text,{color:"prominent",weight:"bold",size:(0,u.isMobile)()?"xxs":"s",align:"center",className:"withdraw__account-info-detail-text"},null==r||null===(n=r.currency)||void 0===n?void 0:n.toUpperCase())),c().createElement(D.Text,{color:"less-prominent",size:(0,u.isMobile)()?"xs":"s",align:"center",className:"withdraw__account-info-detail-text"},null==r?void 0:r.value))},Xt=function(e){var t=e.account,n=e.blockchain_address,r=function(e){return e.is_dxtrade||e.is_mt?e.text:(0,u.getCurrencyDisplayCode)(e.text)}(t);return c().createElement("div",{className:"withdraw__account-info"},c().createElement("div",{className:"withdraw__account-info-detail"},c().createElement(D.Icon,{icon:"IcCashierWithdrawWallet",size:32}),c().createElement(D.Text,{color:"prominent",weight:"bold",align:"center",className:"withdraw__account-info-detail-text"},c().createElement(x.Localize,{i18n_default_text:"{{account_text}} wallet",values:{account_text:r}}))),c().createElement("div",{className:"withdraw__account-info-address"},c().createElement(D.Text,{color:"less-prominent",as:"p",size:(0,u.isMobile)()?"xxs":"xs",align:"center",className:"withdraw__account-info-detail-text"},n),c().createElement(D.Clipboard,{text_copy:n,info_message:(0,u.isMobile)()?"":(0,x.localize)("copy"),icon:"IcCashierClipboard",success_message:(0,x.localize)("copied!"),popoverAlignment:(0,u.isMobile)()?"left":"bottom"})))},$t=function(e){var t=e.account,n=e.blockchain_address,r=e.withdraw_amount,a=e.crypto_transactions,i=e.currency,o=e.resetWithrawForm,s=e.recentTransactionOnMount,l=e.setIsCryptoTransactionsVisible,d=e.setIsWithdrawConfirmed;return c().useEffect((function(){s()}),[s]),c().useEffect((function(){return function(){d(!1),o()}}),[]),c().createElement("div",{className:"cashier__wrapper withdraw__wrapper"},c().createElement(D.Text,{as:"h2",color:"prominent",weight:"bold",align:"center",className:"cashier__header cashier__content-header"},c().createElement(x.Localize,{i18n_default_text:"Your withdrawal will be processed within 24 hours"})),c().createElement("div",{className:"withdraw__receipt-detail"},!(0,u.isMobile)()&&c().createElement(Qt,null),c().createElement(D.Text,{as:"p",color:"prominent",weight:"bold",align:"center",size:(0,u.isMobile)()?"m":"l",className:"withdraw__receipt-crypto"},c().createElement(x.Localize,{i18n_default_text:"{{withdraw_amount}} {{currency_symbol}}",values:{withdraw_amount:r,currency_symbol:null==i?void 0:i.toUpperCase()}})),(0,u.isMobile)()&&c().createElement(Qt,null),c().createElement(Jt,{account:t}),c().createElement(D.Icon,{className:"withdraw__receipt-icon",icon:"IcArrowDown",size:30}),c().createElement(Xt,{account:t,blockchain_address:n})),c().createElement("div",{className:"withdraw__receipt-button-wrapper"},c().createElement(D.Button,{id:"withdraw_transaction",className:"withdraw__receipt-button withdraw__receipt-button-left",text:(0,x.localize)("View transaction history"),onClick:function(){return l(!0)},secondary:!0}),c().createElement(D.Button,{id:"withdraw_receipt",className:"withdraw__receipt-button",has_effect:!0,text:(0,x.localize)("Make a new withdrawal"),onClick:function(){return d(!1)},primary:!0})),(0,u.isMobile)()&&(0,u.isCryptocurrency)(i)&&null!=a&&a.length?c().createElement(pe,null):null)};$t.propTypes={account:w().object,crypto_transactions:w().array,blockchain_address:w().string,currency:w().string,resetWithrawForm:w().func,recentTransactionOnMount:w().func,setIsCryptoTransactionsVisible:w().func,setIsWithdrawConfirmed:w().func};const Zt=T((function(e){var t=e.client,n=e.modules;return{account:n.cashier.config.account_transfer.selected_from,blockchain_address:n.cashier.blockchain_address,withdraw_amount:n.cashier.withdraw_amount,crypto_transactions:n.cashier.transaction_history.crypto_transactions,currency:t.currency,resetWithrawForm:n.cashier.resetWithrawForm,recentTransactionOnMount:n.cashier.transaction_history.onMount,setIsCryptoTransactionsVisible:n.cashier.transaction_history.setIsCryptoTransactionsVisible,setIsWithdrawConfirmed:n.cashier.setIsWithdrawConfirmed}}))($t);var en=function(e){var t=e.container,n=e.iframe_height,r=e.iframe_url,a=e.is_loading,i=e.onMount,o=e.setActiveTab,s=e.verification_code;return c().useEffect((function(){o(t),i(s)}),[]),c().createElement(At,{iframe_height:n,iframe_url:r,is_loading:a})};en.propTypes={container:w().string,iframe_height:w().oneOfType([w().number,w().string]),iframe_url:w().string,is_loading:w().bool,onMount:w().func,setActiveTab:w().func,verification_code:w().string};const tn=T((function(e){var t=e.client,n=e.modules;return{container:n.cashier.config.withdraw.container,iframe_height:n.cashier.config.withdraw.iframe_height,iframe_url:n.cashier.config.withdraw.iframe_url,is_loading:n.cashier.is_loading,onMount:n.cashier.onMount,setActiveTab:n.cashier.setActiveTab,verification_code:t.verification_code.payment_withdraw}}))(en);var nn=function(e){var t=e.is_resend_clicked,n=e.resend_timeout,r=e.resendVerificationEmail,a=e.setVerificationResendClicked;return c().createElement("div",{className:"withdraw__email-sent"},c().createElement(D.Icon,{icon:"IcEmailSent",className:"withdraw__icon",size:128}),c().createElement(D.Text,{as:"p",weight:"bold",align:"center",className:"withdraw__email-sent-title"},c().createElement(x.Localize,{i18n_default_text:"We've sent you an email."})),c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"withdraw__email-sent"},c().createElement(x.Localize,{i18n_default_text:"Please check your email for the verification link to complete the process."})),c().createElement("div",{className:"withdraw__email-resend"},t?c().createElement(c().Fragment,null,c().createElement(D.Text,{as:"p",align:"center",weight:"bold",size:"xs",className:"withdraw__email-sent-title"},c().createElement(x.Localize,{i18n_default_text:"Didn't receive the email?"})),c().createElement(D.Text,{as:"p",align:"center",size:"xs",line_height:"s",className:"withdraw__email-sent"},c().createElement(x.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),c().createElement(D.Button,{className:"withdraw__resend-button",classNameSpan:"withdraw__resend-button-text",is_disabled:n<60,has_effect:!0,text:n<60?(0,x.localize)("Resend email in {{seconds}}s",{seconds:n}):(0,x.localize)("Resend email"),onClick:r,primary:!0,large:!0})):c().createElement(D.Button,{className:"withdraw__email-resend-text",text:(0,x.localize)("Didn't receive the email?"),onClick:function(){return a(!0)},tertiary:!0})))};nn.propTypes={is_resend_clicked:w().bool,resend_timeout:w().number,resendVerificationEmail:w().func,setVerificationResendClicked:w().func};const rn=T((function(e){var t=e.modules;return{resendVerificationEmail:t.cashier.resendVerificationEmail,sendVerificationEmail:t.cashier.sendVerificationEmail,setVerificationResendClicked:t.cashier.setVerificationResendClicked}}))(nn);var an=function(e){var t=e.crypto_transactions,n=e.currency,r=e.is_email_sent,a=e.is_resend_clicked,i=e.resend_timeout,o=e.recentTransactionOnMount,s=e.sendVerificationEmail;return c().useEffect((function(){o()}),[o]),c().createElement("div",{className:"cashier__wrapper"},r?c().createElement(rn,{is_email_sent:r,is_resend_clicked:a,resend_timeout:i}):c().createElement(c().Fragment,null,c().createElement(D.Icon,{icon:"IcCashierAuthenticate",className:"withdraw__icon",size:128}),c().createElement(D.Text,{line_height:"xxl",size:(0,u.isMobile)()?"xs":"s",weight:"bold",as:"p",align:"center",className:"withdraw__header"},c().createElement(x.Localize,{i18n_default_text:"Please help us verify your withdrawal request."})),c().createElement(D.Text,{as:"p",align:"center",size:(0,u.isMobile)()?"xxs":"s",className:"withdraw__send-email--space"},c().createElement(x.Localize,{i18n_default_text:"Hit the button below and we'll send you an email with a link. Click that link to verify your withdrawal request."})),c().createElement(D.Text,{as:"p",align:"center",size:(0,u.isMobile)()?"xxs":"s"},c().createElement(x.Localize,{i18n_default_text:"This is to protect your account from unauthorised withdrawals."})),c().createElement(D.Button,{className:"withdraw__verify-button",has_effect:!0,text:(0,x.localize)("Send email"),onClick:s,primary:!0,large:!0}),c().createElement(D.MobileWrapper,null,(0,u.isCryptocurrency)(n)&&null!=t&&t.length?c().createElement(pe,null):null)))};an.propTypes={crypto_transactions:w().array,is_email_sent:w().bool,is_resend_clicked:w().bool,resend_timeout:w().number,recentTransactionOnMount:w().func,sendVerificationEmail:w().func};const on=T((function(e){var t=e.client,n=e.modules;return{crypto_transactions:n.cashier.transaction_history.crypto_transactions,currency:t.currency,is_email_sent:n.cashier.config.withdraw.verification.is_email_sent,is_resend_clicked:n.cashier.config.withdraw.verification.is_resend_clicked,resend_timeout:n.cashier.config.withdraw.verification.resend_timeout,recentTransactionOnMount:n.cashier.transaction_history.onMount,sendVerificationEmail:n.cashier.sendVerificationEmail}}))(an);function sn(e){return function(e){if(Array.isArray(e))return ln(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cn=function(e){var t=e.account_status,n=e.is_10K_limit,r=e.is_ask_financial_risk_approval,a=t.authentication,i=a.document,o=a.identity,s=a.needs_verification,l=n&&"verified"!==o.status,d="none"!==o.status,p=n&&(s.includes("document")||"verified"!==(null==i?void 0:i.status)),h="none"!==(null==i?void 0:i.status),f=n&&r,m=(0,I.useHistory)(),_=[].concat(sn(l?[{content:d?(0,x.localize)("Check proof of identity document verification status"):(0,x.localize)("Upload a proof of identity to verify your identity"),status:"action",onClick:function(){return m.push(u.routes.proof_of_identity)}}]:[]),sn(p?[{content:h?(0,x.localize)("Check proof of address document verification status"):(0,x.localize)("Upload a proof of address to verify your address"),status:"action",onClick:function(){return m.push(u.routes.proof_of_address)}}]:[]),sn(f?[{content:(0,x.localize)("Complete the financial assessment form"),status:"action",onClick:function(){return m.push(u.routes.financial_assessment)}}]:[]));return c().createElement(c().Fragment,null,_.length?c().createElement("div",{className:"cashier-locked"},c().createElement(D.Icon,{icon:"IcCashierWithdrawalLock",className:"cashier-locked__icon"}),c().createElement(D.Text,{as:"h2",weight:"bold",align:"center",className:"cashier-locked__title"},c().createElement(x.Localize,{i18n_default_text:"You have reached the withdrawal limit.<0/>Please upload your proof of identity and address to lift the limit to continue your withdrawal.",components:[c().createElement("br",{key:0})]})),c().createElement(c().Fragment,null,c().createElement(D.Checklist,{className:"cashier-locked__checklist",items:_}))):c().createElement(V,null))};cn.propTypes={account_status:w().object,is_10K_limit:w().bool,is_ask_financial_risk_approval:w().bool};const un=T((function(e){var t=e.modules;return{account_status:e.client.account_status,is_10K_limit:t.cashier.is_10k_withdrawal_limit_reached,is_ask_financial_risk_approval:t.cashier.config.withdraw.error.is_ask_financial_risk_approval}}))(cn);var dn=function(e){var t=e.children;return c().createElement("div",{className:"cashier-side-note__bullet-wrapper"},c().createElement("div",{className:"cashier-side-note__bullet"}),c().createElement("span",null,t))},pn=function(e){var t=e.notes,n=e.title,r=e.has_bullets;return c().createElement("div",{className:"cashier-side-note"},n&&c().createElement(D.DesktopWrapper,null,c().createElement(D.Text,{className:"cashier-side-note__text",weight:"bold",as:"p"},n)),t.map((function(e,t){return r?c().createElement(dn,{key:t},e):c().createElement(D.Text,{key:t,className:"cashier-side-note__text",size:"xxs",as:"p"},e)})))};pn.propTypes={notes:w().array.isRequired,title:w().oneOfType([w().string,w().object]),has_bullets:w().bool};const hn=pn;function fn(e){return function(e){if(Array.isArray(e))return mn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _n=function(e){var t=e.currency,n=[c().createElement(x.Localize,{i18n_default_text:"Do not enter an address linked to an ICO purchase or crowdsale. If you do, the ICO tokens will not be credited into your account.",key:0}),c().createElement(x.Localize,{i18n_default_text:"Please note that your maximum and minimum withdrawal limits aren’t fixed. They change due to the high volatility of cryptocurrency.",key:1})];(0,u.isCryptocurrency)(t)||n.push(c().createElement(x.Localize,{i18n_default_text:"We'll send you an email once your transaction has been processed.",key:1}));var r=(null==n?void 0:n.length)>1?c().createElement(x.Localize,{i18n_default_text:"Notes"}):c().createElement(x.Localize,{i18n_default_text:"Note"});return c().createElement(hn,{has_bullets:!0,notes:n,title:r})},yn=function(e){var t=e.balance,n=e.check10kLimit,r=e.container,a=e.crypto_transactions,i=e.currency,o=e.current_currency_type,s=e.error,l=e.iframe_url,d=e.is_10k_withdrawal_limit_reached,p=e.is_cashier_locked,h=e.is_crypto,f=e.is_crypto_transactions_visible,m=e.is_switching,_=e.is_system_maintenance,y=e.is_virtual,g=e.is_withdraw_confirmed,v=e.is_withdrawal_locked,b=e.setActiveTab,E=e.setErrorMessage,w=e.setSideNotes,C=e.tab_index,A=e.verify_error,k=e.verification_code,S=e.willMountWithdraw,N=e.recentTransactionOnMount;return c().useEffect((function(){f||N()}),[m]),c().useEffect((function(){return b(r),function(){E("")}}),[r,b,E]),c().useEffect((function(){n()}),[n]),c().useEffect((function(){return function(){return S(k)}}),[S]),c().useEffect((function(){if((0,u.isDesktop)())if((0,u.isCryptocurrency)(i)&&"function"==typeof w&&!m){var e=[];null!=a&&a.length&&e.push(c().createElement(pe,{key:2}));var t=[c().createElement(_n,{currency:i,key:0})].concat(fn(/^(UST)$/i.test(i)?[c().createElement(zt,{type:"usdt",key:1})]:[]),fn(/^(eUSDT)$/i.test(i)?[c().createElement(zt,{type:"eusdt",key:1})]:[]));e.push(t),w(e)}else w(null)}),[i,C,a]),_&&(p||v&&"crypto"===o)?c().createElement(V,null):void 0===d?c().createElement(D.Loading,{is_fullscreen:!0}):y?c().createElement(B,null):p?c().createElement(V,null):v||d?c().createElement(un,null):+t?s.message?c().createElement(U,{error:s,container:"withdraw"}):A.message?c().createElement(U,{error:A,container:"withdraw"}):h||!k&&!l?k&&h&&!g&&!f?c().createElement(Yt,null):g&&!f?c().createElement(Zt,null):f?c().createElement(Ve,null):c().createElement(on,null):c().createElement(tn,null):c().createElement(F,null)};yn.propTypes={balance:w().string,container:w().string,crypto_transactions:w().array,current_currency_type:w().bool,error:w().object,iframe_url:w().string,is_cashier_locked:w().bool,is_crypto:w().bool,is_crypto_transactions_visible:w().bool,is_switching:w().bool,is_system_maintenance:w().bool,is_virtual:w().bool,is_withdraw_confirmed:w().bool,is_withdrawal_locked:w().bool,recentTransactionOnMount:w().func,setActiveTab:w().func,tab_index:w().number,verification_code:w().string};const gn=T((function(e){var t=e.client,n=e.modules;return{balance:t.balance,check10kLimit:n.cashier.check10kLimit,container:n.cashier.config.withdraw.container,crypto_transactions:n.cashier.transaction_history.crypto_transactions,currency:t.currency,current_currency_type:t.current_currency_type,error:n.cashier.config.withdraw.error,iframe_url:n.cashier.config.withdraw.iframe_url,is_10k_withdrawal_limit_reached:n.cashier.is_10k_withdrawal_limit_reached,is_cashier_locked:n.cashier.is_cashier_locked,is_crypto:n.cashier.is_crypto,is_crypto_transactions_visible:n.cashier.transaction_history.is_crypto_transactions_visible,is_switching:t.is_switching,is_system_maintenance:n.cashier.is_system_maintenance,is_virtual:t.is_virtual,is_withdraw_confirmed:n.cashier.is_withdraw_confirmed,is_withdrawal_locked:n.cashier.is_withdrawal_locked,recentTransactionOnMount:n.cashier.transaction_history.onMount,setActiveTab:n.cashier.setActiveTab,setErrorMessage:n.cashier.setErrorMessage,tab_index:n.cashier.cashier_route_tab_index,verification_code:t.verification_code.payment_withdraw,verify_error:n.cashier.config.withdraw.verification.error,willMountWithdraw:n.cashier.willMountWithdraw}}))(yn);var vn=n("mobx"),bn=["action","icon","is_last_child","children"];function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wn=function(e){var t=e.action,n=e.icon,r=(e.is_last_child,e.children),a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,bn),i=Array.isArray(r)?r:r.split(",");return c().createElement("div",{className:"payment-agent__accordion-content-line"},c().createElement("div",null,c().createElement(D.Icon,{icon:"Ic".concat(n),className:"payment-agent__accordion-content-icon",color:"secondary"})),c().createElement("div",null,i.map((function(e,n){return c().createElement("a",En({key:n,className:"payment-agent__contact cashier__paragraph",href:"".concat(t?"".concat(t,":"):"").concat(e)},a),e,n===i.length-1?"":", ")}))))};wn.propTypes={action:w().string,icon:w().string,is_last_child:w().bool,rel:w().string,target:w().string,value:w().string};var Cn=function(e){var t=e.className,n=e.payment_agent_phones,r=e.payment_agent_urls,a=e.payment_agent_email;return c().createElement("div",{className:z()("payment-agent__accordion-content",t)},n&&c().createElement(wn,{action:"tel",icon:"Phone"},Array.isArray(n)?n.map((function(e){return e.phone_number})):n),r&&c().createElement(wn,{icon:"Website",target:"_blank",rel:"noopener noreferrer"},Array.isArray(r)?r.map((function(e){return e.url})):r),a&&c().createElement(wn,{action:"mailto",icon:"EmailOutline",is_last_child:!0,target:"_blank",rel:"noopener noreferrer"},a))};Cn.propTypes={className:w().string,payment_agent_email:w().string,payment_agent_phone:w().string,payment_agent_url:w().string};const An=Cn;var kn=function(e){var t=e.amount,n=e.currency,r=e.error,a=e.loginid,i=e.payment_agent_name,o=e.requestPaymentAgentWithdraw,s=e.setIsTryWithdrawSuccessful,l=e.verification_code;return c().createElement(Je,{data:[{label:(0,x.localize)("Payment agent"),value:i||a,key:"pa"},{label:(0,x.localize)("Amount"),value:c().createElement(D.Money,{currency:n,amount:t,show_currency:!0}),key:"amount"}],error:r,header:(0,x.localize)("Please confirm the transaction details in order to complete the withdrawal:"),onClickBack:function(){s(!1)},onClickConfirm:function(){o({loginid:a,currency:n,amount:t,verification_code:l})}})};kn.propTypes={amount:w().number,currency:w().string,error:w().object,loginid:w().string,payment_agent_name:w().string,requestPaymentAgentWithdraw:w().func,setIsTryWithdrawSuccessful:w().func,verification_code:w().string};const Sn=T((function(e){var t=e.modules;return{amount:t.cashier.config.payment_agent.confirm.amount,currency:t.cashier.config.payment_agent.confirm.currency,error:t.cashier.config.payment_agent.error,loginid:t.cashier.config.payment_agent.confirm.loginid,payment_agent_name:t.cashier.config.payment_agent.confirm.payment_agent_name,requestPaymentAgentWithdraw:t.cashier.requestPaymentAgentWithdraw,setIsTryWithdrawSuccessful:t.cashier.setIsTryWithdrawSuccessful}}))(kn);var Nn=function(e){var t=e.currency,n=e.history,r=e.loginid,a=e.receipt,i=e.resetPaymentAgent;c().useEffect((function(){return function(){return i()}}),[i]);var o=(0,u.getCurrencyDisplayCode)(t);return c().createElement("div",{className:"cashier__wrapper--align-left payment-agent__receipt "},c().createElement("div",{className:"cashier__success"},c().createElement(D.Text,{as:"h1",align:"center",color:"prominent",line_height:"m",size:(0,u.isMobile)()?"xs":"s",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:"Your funds have been transferred"})),c().createElement("div",{className:"cashier__transferred-amount cashier__text--bold"},(0,u.formatMoney)(t,a.amount_transferred,!0)," ",o),c().createElement("div",{className:"cashier__transferred-details-wrapper"},c().createElement("span",{className:"cashier__transferred-details"},c().createElement(D.Text,{as:"span",size:"xs",weight:"bold",className:"cashier__text--end"},o),c().createElement(D.Text,{as:"span",size:"xs",color:"less-prominent"},r)),c().createElement(D.Icon,{size:32,icon:"IcCurrency-".concat(t.toLowerCase())}),c().createElement(D.Icon,{className:"cashier__transferred-icon",icon:"IcArrowLeftBold"}),c().createElement(D.Icon,{size:32,icon:"IcPA"}),c().createElement("span",{className:"cashier__transferred-details"},a.payment_agent_name&&c().createElement(D.Text,{as:"span",size:"xs",weight:"bold"},a.payment_agent_name),c().createElement(D.Text,{as:"span",color:"less-prominent",size:"xs"},a.payment_agent_id)))),c().createElement(D.Text,{as:"h1",color:"prominent",line_height:"m",size:"s",weight:"bold"},c().createElement(x.Localize,{i18n_default_text:"IMPORTANT NOTICE TO RECEIVE YOUR FUNDS"})),c().createElement(D.Text,{as:"p",color:"prominent",size:(0,u.isMobile)()?"xxs":"xs",line_height:"m",className:"payment-agent__explanation cashier__paragraph"},c().createElement(x.Localize,{i18n_default_text:"You're not done yet. To receive the transferred funds, you must contact the payment agent for further instruction. A summary of this transaction has been emailed to you for your records."})),a.payment_agent_name&&c().createElement("div",{className:"payment-agent__transferred-contact-wrapper"},c().createElement(D.Text,{as:"p",size:(0,u.isMobile)()?"xxs":"xs",line_height:"m",className:"cashier__paragraph payment-agent__paragraph"},c().createElement(x.Localize,{i18n_default_text:"{{payment_agent}} agent contact details:",values:{payment_agent:a.payment_agent_name},options:{interpolation:{escapeValue:!1}}})),c().createElement(An,{className:"payment-agent__transferred-contact",payment_agent_email:a.payment_agent_email,payment_agent_phone:a.payment_agent_phone,payment_agent_url:a.payment_agent_url})),c().createElement("div",{className:"cashier__form-submit"},c().createElement(D.Button,{className:"cashier__form-submit-button",has_effect:!0,text:(0,x.localize)("View in statement"),onClick:function(){return function(e,t){e.push(u.routes.statement),t()}(n,i)},secondary:!0,large:!0}),c().createElement(D.Button,{className:"cashier__form-submit-button cashier__done-button",has_effect:!0,text:(0,x.localize)("Make a new transfer"),onClick:i,primary:!0,large:!0})))};Nn.propTypes={currency:w().string,history:w().object,loginid:w().string,receipt:w().object,resetPaymentAgent:w().func};const On=(0,C.withRouter)(T((function(e){var t=e.client,n=e.modules;return{currency:t.currency,loginid:t.loginid,receipt:n.cashier.config.payment_agent.receipt,resetPaymentAgent:n.cashier.resetPaymentAgent}}))(Nn));var Tn=["field","values"],In=["touched","errors","field","values"];function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Pn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Un=function(e){var t=e.children,n=e.field,r=e.props;return c().createElement("div",{className:"payment-agent__radio-container"},c().createElement("input",{id:r.id,className:r.className,name:n.name,value:r.id,checked:n.value===r.id,onChange:n.onChange,type:"radio"}),c().createElement("label",{htmlFor:r.id,className:"payment-agent__radio-wrapper"},c().createElement("span",{className:z()("payment-agent__radio-circle",{"payment-agent__radio-circle--selected":n.value===r.id})}),t))},Ln=function(e){var t=e.field,n=e.values,r=Pn(e,Tn);return c().createElement(Un,{field:t,props:r},c().createElement(D.Text,{as:"p",size:"xxs",line_height:"s",className:"payment-agent__radio-label cashier__paragraph cashier__paragraph-by-name"},c().createElement(x.Localize,{i18n_default_text:"By name"})),c().createElement(Y.Field,{name:"payment_agents"},(function(e){return c().createElement(c().Fragment,null,c().createElement(D.DesktopWrapper,null,c().createElement(D.Dropdown,{placeholder:(0,x.localize)("Choose an agent"),is_align_text_left:!0,className:"cashier__drop-down payment-agent__drop-down",classNameDisplay:"cashier__drop-down-display",classNameDisplaySpan:"cashier__drop-down-display-span",classNameItems:"cashier__drop-down-items",list:r.payment_agent_list,value:n.payment_agents,onChange:function(t){e.form.setFieldValue("payment_agents",t.target.value),e.form.setFieldValue("payment_method",r.id)}})),c().createElement(D.MobileWrapper,null,c().createElement(D.SelectNative,{placeholder:(0,x.localize)("Please select"),name:"payment_methods",className:"payment-agent__drop-down",list_items:r.payment_agent_list,value:n.payment_agents,label:(0,x.localize)("Choose agent"),should_show_empty_option:!1,onChange:function(t){e.form.setFieldValue("payment_agents",t.target.value),e.form.setFieldValue("payment_method",r.id)},use_text:!1})))})))},Fn=function(e){var t=e.touched,n=e.errors,r=e.field,a=e.values,i=Pn(e,In);return c().createElement(Un,{field:r,props:i},c().createElement(D.Text,{as:"p",size:"xxs",line_height:"s",className:"payment-agent__radio-label cashier__paragraph"},c().createElement(x.Localize,{i18n_default_text:"By payment agent ID"})),c().createElement(Y.Field,null,(function(e){return c().createElement(D.Input,{name:"payment_agent",className:"payment-agent__input",classNameError:"payment-agent__input-error",type:"text",placeholder:"CR",error:t.payment_agent&&n.payment_agent,autoComplete:"off",maxLength:"20",value:a.payment_agent,onChange:e.field.onChange,onFocus:function(){e.form.setFieldValue("payment_method",i.id)},onBlur:e.field.onBlur})})))},jn=function(e){var t,n,r=e.amount,a=e.balance,i=e.currency,o=e.error,s=e.is_loading,l=e.is_try_withdraw_successful,d=e.is_withdraw_successful,p=e.onMount,h=e.payment_agent_id,f=e.payment_agent_list,m=e.payment_agent_name,_=e.requestTryPaymentAgentWithdraw,y=e.resetPaymentAgent,g=e.verification_code;c().useEffect((function(){return p(),function(){y()}}),[p,y]);var v=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({loginid:t[t.payment_method],currency:i,amount:t.amount,verification_code:g});case 2:null!=(r=e.sent)&&r.error&&n.setSubmitting(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Dn(i,r,a,o,s,"next",e)}function s(e){Dn(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();if(s||!f.length)return c().createElement(D.Loading,{className:"cashier__loader",is_fullscreen:!1});if(l)return c().createElement(Sn,{verification_code:g});if(d)return c().createElement(On,null);var b=!m&&h;return c().createElement("div",{className:"cashier__wrapper--align-center payment-agent__withdrawal"},c().createElement(D.Text,{as:"p",size:"s",weight:"bold",align:"center",color:"prominent",className:"cashier__header payment-agent__withdrawal-header"},c().createElement(x.Localize,{i18n_default_text:"Payment agent withdrawal"})),c().createElement(Y.Formik,{initialValues:{amount:r||"",payment_agent:b?h:"",payment_agents:b||!m?null===(t=f[0])||void 0===t?void 0:t.value:null===(n=f.find((function(e){return e.text===m})))||void 0===n?void 0:n.value,payment_method:b?"payment_agent":"payment_agents"},validate:function(e){return function(e,t){var n=t.balance,r=t.currency,a=t.payment_agent,i={};"payment_agent"!==e.payment_method||e.payment_agent&&/^[A-Za-z]+[0-9]+$/.test(e.payment_agent)||(i.payment_agent=(0,x.localize)("Please enter a valid payment agent ID."));var o=(0,u.validNumber)(e.amount,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"float",decimals:(0,u.getDecimalPlaces)(r)},a.min_withdrawal&&{min:a.min_withdrawal,max:a.max_withdrawal})),s=o.is_ok,l=o.message;return e.amount?s?+n<+e.amount&&(i.amount=(0,x.localize)("Insufficient balance.")):i.amount=l:i.amount=(0,x.localize)("This field is required."),i}(e,{balance:a,currency:i,payment_agent:"payment_agent"===e.payment_method?{}:f.find((function(t){return t.value===e.payment_agents}))})},onSubmit:v},(function(e){var t=e.errors,n=e.isSubmitting,r=e.isValid,a=e.values,s=e.touched;return c().createElement(Y.Form,null,c().createElement("div",{className:"payment-agent__radio-group"},c().createElement(Y.Field,{id:"payment_agents",component:Ln,payment_agent_list:f,className:"payment-agent__radio",name:"payment_method",values:a}),c().createElement(Y.Field,{id:"payment_agent",component:Fn,touched:s,errors:t,values:a,className:"payment-agent__radio",name:"payment_method"})),c().createElement(Y.Field,{name:"amount"},(function(e){var n=e.field;return c().createElement(D.Input,xn({},n,{className:"cashier__input dc-input--no-placeholder",type:"text",label:(0,x.localize)("Amount"),error:s.amount&&t.amount,required:!0,leading_icon:c().createElement("span",{className:z()("symbols","symbols--".concat(i.toLowerCase()))},(0,u.getCurrencyDisplayCode)(i)),autoComplete:"off",maxLength:"30",hint:"payment_agents"===a.payment_method&&f.find((function(e){return e.value===a.payment_agents}))&&c().createElement(x.Localize,{i18n_default_text:"Withdrawal limits: <0 />-<1 />",components:[c().createElement(D.Money,{key:0,amount:f.find((function(e){return e.value===a.payment_agents})).min_withdrawal,currency:i}),c().createElement(D.Money,{key:1,amount:f.find((function(e){return e.value===a.payment_agents})).max_withdrawal,currency:i})]})}))})),c().createElement("div",{className:"cashier__form-submit"},c().createElement(D.Button,{className:"cashier__form-submit-button",type:"submit",is_disabled:!r||n,primary:!0,large:!0},c().createElement(x.Localize,{i18n_default_text:"Withdraw"}))),c().createElement(oe,{error:o}))})))};jn.propTypes={amount:w().string,balance:w().string,currency:w().string,error_message_withdraw:w().string,is_loading:w().bool,is_try_withdraw_successful:w().bool,is_withdraw_successful:w().bool,onMount:w().func,payment_agent_id:w().string,payment_agent_list:w().array,payment_agent_name:w().string,requestTryPaymentAgentWithdraw:w().func,resetPaymentAgent:w().func,verification_code:w().string};const zn=T((function(e){var t=e.client,n=e.modules;return{amount:n.cashier.config.payment_agent.confirm.amount,balance:t.balance,currency:t.currency,error:n.cashier.config.payment_agent.error,is_loading:n.cashier.is_loading,is_try_withdraw_successful:n.cashier.config.payment_agent.is_try_withdraw_successful,is_withdraw_successful:n.cashier.config.payment_agent.is_withdraw_successful,onMount:n.cashier.onMountPaymentAgentWithdraw,payment_agent_id:n.cashier.config.payment_agent.confirm.loginid,payment_agent_list:n.cashier.config.payment_agent.agents,payment_agent_name:n.cashier.config.payment_agent.confirm.payment_agent_name,requestTryPaymentAgentWithdraw:n.cashier.requestTryPaymentAgentWithdraw,resetPaymentAgent:n.cashier.resetPaymentAgent}}))(jn);function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bn=function(e){var t=e.error,n=e.is_email_sent,r=e.is_loading,a=e.is_resend_clicked,i=e.is_payment_agent_withdraw,o=e.onChangePaymentMethod,s=e.onMount,l=e.payment_agent_active_tab_index,d=e.payment_agent_list,p=e.resend_timeout,h=e.selected_bank,f=e.setActiveTabIndex,m=e.supported_banks,_=e.verification_code;c().useEffect((function(){s()}),[s]);var y=[{text:c().createElement(x.Localize,{i18n_default_text:"All payment agents"}),value:0}].concat(function(e){return function(e){if(Array.isArray(e))return Hn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(m));return c().createElement("div",{className:"cashier__wrapper--align-left cashier__wrapper-padding"},null!=t&&t.code&&null!=t&&t.onClickButton?c().createElement(U,{error:t}):c().createElement(c().Fragment,null,c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",className:"cashier__paragraph"},c().createElement(x.Localize,{i18n_default_text:"A payment agent is authorised to process deposits and withdrawals for you if your local payment methods or currencies are not supported on {{website_name}}.",values:{website_name:u.website_name}})),c().createElement("div",{className:"payment-agent__instructions"},c().createElement(D.Tabs,{active_index:l,className:"tabs--desktop",onTabItemClick:f,top:!0,header_fit_content:(0,u.isDesktop)()},c().createElement("div",{label:(0,x.localize)("Deposit")},r?c().createElement(D.Loading,{className:"payment-agent__loader"}):c().createElement(c().Fragment,null,c().createElement(D.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cashier__header payment-agent__list-header"},c().createElement(x.Localize,{i18n_default_text:"Payment agents"})),c().createElement("div",{className:"payment-agent__list-line"}),c().createElement("div",{className:"payment-agent__list-selector"},c().createElement(D.Text,{as:"p",size:"xs",line_height:"s",className:"cashier__paragraph"},c().createElement(x.Localize,{i18n_default_text:"Choose a payment agent and contact them for instructions."})),m.length>1&&c().createElement("div",null,c().createElement(D.DesktopWrapper,null,c().createElement(D.Dropdown,{id:"payment_methods",className:"payment-agent__drop-down payment-agent__filter",classNameDisplay:"cashier__drop-down-display payment-agent__filter-display",classNameDisplaySpan:"cashier__drop-down-display-span",classNameItems:"cashier__drop-down-items",list:y,name:"payment_methods",value:h,onChange:o})),c().createElement(D.MobileWrapper,null,c().createElement(D.SelectNative,{placeholder:(0,x.localize)("Please select"),name:"payment_methods",list_items:m,value:h,label:0===h?(0,x.localize)("All payment agents"):(0,x.localize)("Type"),onChange:function(e){return o({target:{name:"payment_methods",value:e.target.value.toLowerCase()}})},use_text:!1})))),c().createElement(D.Accordion,{className:"payment-agent__accordion",list:d.map((function(e){return{header:e.name,content:c().createElement(An,{payment_agent_email:e.email,payment_agent_phones:(0,vn.toJS)(e.phones),payment_agent_urls:(0,vn.toJS)(e.urls)})}}))})),c().createElement("div",{className:"payment-agent__disclaimer"},c().createElement(D.Text,{size:"xs",line_height:"xs",weight:"bold",className:"cashier__text"},c().createElement(x.Localize,{i18n_default_text:"DISCLAIMER"})),": ",c().createElement(x.Localize,{i18n_default_text:"{{website_name}} is not affiliated with any Payment Agent. Customers deal with Payment Agents at their sole risk. Customers are advised to check the credentials of Payment Agents, and check the accuracy of any information about Payments Agents (on Deriv or elsewhere) before transferring funds.",values:{website_name:u.website_name}}))),c().createElement("div",{label:(0,x.localize)("Withdrawal")},n?c().createElement("div",{className:"cashier__wrapper"},c().createElement(rn,{is_email_sent:n,is_resend_clicked:a,resend_timeout:p})):(_||i)&&c().createElement(zn,{verification_code:_}))))))};Bn.propTypes={error:w().object,is_email_sent:w().bool,is_loading:w().bool,is_resend_clicked:w().bool,is_payment_agent_withdraw:w().bool,onChangePaymentMethod:w().func,onMount:w().func,payment_agent_active_tab_index:w().number,payment_agent_list:w().array,resend_timeout:w().number,selected_bank:w().oneOfType([w().number,w().string]),setActiveTabIndex:w().func,supported_banks:b.PropTypes.arrayOrObservableArray,verification_code:w().string};const Gn=T((function(e){var t=e.modules;return{error:t.cashier.config.payment_agent.verification.error,is_email_sent:t.cashier.config.payment_agent.verification.is_email_sent,is_loading:t.cashier.is_loading,is_resend_clicked:t.cashier.config.payment_agent.verification.is_resend_clicked,onChangePaymentMethod:t.cashier.onChangePaymentMethod,onMount:t.cashier.onMountPaymentAgentList,payment_agent_active_tab_index:t.cashier.config.payment_agent.active_tab_index,payment_agent_list:t.cashier.config.payment_agent.filtered_list,resend_timeout:t.cashier.config.payment_agent.verification.resend_timeout,selected_bank:t.cashier.config.payment_agent.selected_bank,setActiveTabIndex:t.cashier.setActiveTabIndex,supported_banks:t.cashier.config.payment_agent.supported_banks}}))(Bn);var Vn=function(e){var t=e.container,n=e.is_cashier_locked,r=e.is_payment_agent_withdraw,a=e.is_switching,i=e.is_virtual,o=e.setActiveTab,s=e.verification_code,l=e.setPaymentAgentActiveTabIndex,u=e.payment_agent_active_tab_index;return l(s||r||u?1:0),c().useEffect((function(){return o(t),function(){l(0)}}),[]),a?c().createElement(D.Loading,{className:"payment-agent__loader"}):i?c().createElement(B,null):n?c().createElement(V,null):c().createElement(Gn,{verification_code:s,is_payment_agent_withdraw:r})};Vn.propTypes={container:w().string,is_cashier_locked:w().bool,is_payment_agent_withdraw:w().bool,is_virtual:w().bool,setActiveTab:w().func,verification_code:w().string,setPaymentAgentActiveTabIndex:w().func,payment_agent_active_tab_index:w().number};const qn=T((function(e){var t=e.client,n=e.modules;return{is_cashier_locked:n.cashier.is_cashier_locked,is_switching:t.is_switching,is_virtual:t.is_virtual,verification_code:t.verification_code.payment_agent_withdraw,container:n.cashier.config.payment_agent.container,is_payment_agent_withdraw:n.cashier.config.payment_agent.is_withdraw,setActiveTab:n.cashier.setActiveTab,setPaymentAgentActiveTabIndex:n.cashier.config.payment_agent.setActiveTabIndex,payment_agent_active_tab_index:n.cashier.config.payment_agent.active_tab_index}}))(Vn);var Kn=n("../../p2p/lib/index.js"),Wn=n.n(Kn);function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qn=function(e){var t=e.currency,n=e.history,r=e.is_dark_mode_on,a=e.is_logging_in,i=e.is_mobile,o=e.is_virtual,s=e.local_currency_config,l=e.location,d=e.loginid,p=e.platform,h=e.residence,f=e.setNotificationCount,m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState(null),2),y=m[0],b=m[1],E={get:v,init:_,timePromise:g};c().useEffect((function(){var e=new URLSearchParams(l.search).get("order");return e&&w(e),function(){return w(null)}}),[l.search,w]);var w=c().useCallback((function(e){var t=new URLSearchParams(l.search);t.has("order")&&t.delete("order"),e&&t.append("order",e),y!==e&&(n.push({pathname:u.routes.cashier_p2p,search:t.toString(),hash:l.hash}),b(e))}),[n,l.hash,l.search,y]);return a?c().createElement(D.Loading,{is_fullscreen:!0}):c().createElement(Wn(),{client:{currency:t,local_currency_config:s,is_virtual:o,residence:h,loginid:d},history:n,is_dark_mode_on:r,is_mobile:i,lang:(0,x.getLanguage)(),modal_root_id:"modal_root",order_id:y,platform:p,poi_url:u.routes.proof_of_identity,server_time:E,setNotificationCount:f,setOrderId:w,should_show_verification:/verification/.test(l.hash),websocket_api:u.WS})};Qn.propTypes={currency:w().string,history:w().object,is_dark_mode_on:w().bool,is_logging_in:w().bool,is_mobile:w().bool,is_virtual:w().bool,local_currency_config:w().object,location:w().object,loginid:w().string,platform:w().any,residence:w().string,setNotificationCount:w().func};const Jn=(0,I.withRouter)(T((function(e){var t=e.client,n=e.common,r=e.modules,a=e.ui;return{currency:t.currency,local_currency_config:t.local_currency_config,loginid:t.loginid,is_dark_mode_on:a.is_dark_mode_on,is_logging_in:t.is_logging_in,is_virtual:t.is_virtual,platform:n.platform,residence:t.residence,setNotificationCount:r.cashier.setNotificationCount,is_mobile:a.is_mobile}}))(Qn));var Xn=function(e){var t=e.is_dark_mode_on,n=e.provider,r=e.setSelectedProvider,a=e.is_mobile,i=n.getPaymentIcons(),o=n.name.toLowerCase().replace(" ","-"),s=a?56:128;return c().createElement("div",{className:"on-ramp__provider"},c().createElement("div",{className:"on-ramp__provider-logo"},c().createElement(D.Icon,{icon:t?n.icon.dark:n.icon.light,width:s,height:s})),c().createElement(D.Text,{size:"s",color:"prominent",weight:"bold",line_height:"l",className:"on-ramp__provider-name"},n.name),c().createElement(D.Text,{size:"xs",line_height:"m",as:"p",className:"on-ramp__provider-description"},n.getDescription()),c().createElement("div",{className:"on-ramp__provider-payment-icons"},c().createElement("div",{className:"on-ramp__provider-payment-icons-shadow"}),c().createElement(D.NewsTicker,{speed:10},i.map((function(e,n){return c().createElement(D.Icon,{key:n,size:40,icon:t?e.dark:e.light})})))),c().createElement(D.Button,{id:"gtm-onramp-provider-select--".concat(o),className:"on-ramp__provider-button",type:"button",has_effect:!0,onClick:function(){return r(n)},text:(0,x.localize)("Select"),primary:!0,small:a}))};Xn.propTypes={is_dark_mode_on:w().bool,is_mobile:w().bool,provider:w().object,setSelectedProvider:w().func};const $n=T((function(e){var t=e.modules,n=e.ui;return{setSelectedProvider:t.cashier.onramp.setSelectedProvider,is_dark_mode_on:n.is_dark_mode_on,is_mobile:n.is_mobile}}))(Xn);var Zn=function(e){var t=e.api_error,n=e.deposit_address,r=e.is_dark_mode_on,a=e.is_deposit_address_loading,i=e.is_deposit_address_popover_open,o=e.is_requesting_widget_html,s=e.onClickCopyDepositAddress,l=e.onClickDisclaimerContinue,d=e.onClickGoToDepositPage,p=e.selected_provider,h=e.setDepositAddressRef,f=e.setIsOnRampModalOpen,m=e.should_show_dialog,_=e.should_show_widget,y=e.widget_error,g=e.widget_html,v=c().useRef(null);return c().useEffect((function(){_&&g&&p.onMountWidgetContainer(v)}),[p,_,g]),null===p?null:a||_&&o?c().createElement(D.Loading,{is_fullscreen:!0}):_?c().createElement("div",{className:z()("on-ramp__widget-container",{"on-ramp__widget-container--error":y}),ref:v},y?c().createElement("div",{className:"on-ramp__widget-container-error"},y):c().createElement("div",{dangerouslySetInnerHTML:{__html:g}})):m?c().createElement("div",{className:"on-ramp__popup-no-deposit-address"},c().createElement("div",{className:"on-ramp__popup-no-deposit-address-text"},t?c().createElement(x.Localize,{i18n_default_text:"Please go to the Deposit page to get an address."}):c().createElement(x.Localize,{i18n_default_text:"Please go to the Deposit page to generate an address. Then come back here to continue with your transaction."})),c().createElement(D.Button.Group,{className:"on-ramp__popup-no-deposit-address-buttons"},c().createElement(D.Button,{text:(0,x.localize)("Cancel"),onClick:function(){return f(!1)},secondary:!0,large:!0}),c().createElement(D.Button,{text:(0,x.localize)("Go to Deposit page"),onClick:d,primary:!0,large:!0}))):c().createElement("div",{className:"on-ramp__popup"},p.should_show_deposit_address&&c().createElement(c().Fragment,null,c().createElement("div",{className:"on-ramp__popup-deposit"},c().createElement(D.Text,{size:(0,u.isMobile)()?"xxs":"xs",color:"general",line_height:(0,u.isMobile)()?"m":"l",align:(0,u.isMobile)()?"left":"center"},c().createElement(x.Localize,{i18n_default_text:"Please copy the crypto address you see below. You'll need it to deposit your cryptocurrency."})),c().createElement("div",{className:"on-ramp__popup-deposit-address"},c().createElement(D.Popover,{zIndex:9998,alignment:"right",message:(0,x.localize)("Copied!"),is_open:i},c().createElement("input",{className:z()("on-ramp__popup-deposit-address-text",{"on-ramp__popup-deposit-address-text--dark":r}),ref:h,defaultValue:n,disabled:!0,onFocus:function(e){return e.preventDefault()}}),c().createElement(D.Icon,{className:"on-ramp__popup-deposit-address-icon",icon:(0,u.isMobile)()?"IcCopy":"icClipboard",size:16,onClick:s}))),c().createElement("div",{className:"on-ramp__popup-deposit-address-hint"},c().createElement(D.HintBox,{icon:"IcInfo",is_info:!0,message:(0,x.localize)("This address can only be used ONCE. Please copy a new one for your next transaction.")}))),c().createElement("div",{className:"on-ramp__popup-divider"})),c().createElement("div",{className:"on-ramp__popup-disclaimer"},c().createElement(D.Text,{line_height:"m",weight:"bold",color:"prominent",as:"p",className:"on-ramp__popup-disclaimer-title"},c().createElement(x.Localize,{i18n_default_text:"Disclaimer"})),c().createElement(D.Text,{size:(0,u.isMobile)()?"xxs":"xs",line_height:"l",color:"general",as:"p",className:"on-ramp__popup-disclaimer-text"},c().createElement(x.Localize,{i18n_default_text:"By clicking 'Continue' you will be redirected to {{ service }}, a third-party payment service provider. Please note that {{ website_name }} is not responsible for the content or services provided by {{ service }}. If you encounter any issues related to {{ service }} services, you must contact {{ service }} directly.",values:{service:p.name,website_name:u.website_name}}))),!_&&n&&c().createElement("div",{className:"on-ramp__popup-buttons"},c().createElement(D.Button.Group,null,c().createElement(D.Button,{large:!0,onClick:function(){return f(!1)},secondary:!0,text:(0,x.localize)("Cancel")}),c().createElement(D.Button,{id:"gtm-onramp-provider-continue--".concat((0,u.getKebabCase)(p.name)),large:!0,onClick:l,primary:!0,text:(0,x.localize)("Continue")}))))};Zn.propTypes={api_error:w().string,deposit_address:w().string,is_deposit_address_loading:w().bool,is_deposit_address_popover_open:w().bool,is_requesting_widget_html:w().bool,onClickCopyDepositAddress:w().func,onClickDisclaimerContinue:w().func,onClickGoToDepositPage:w().func,selected_provider:w().object,setDepositAddressRef:w().func,setIsOnRampModalOpen:w().func,should_show_dialog:w().bool,should_show_widget:w().bool,widget_error:w().string,widget_html:w().string};const er=T((function(e){var t=e.modules,n=e.ui;return{api_error:t.cashier.onramp.api_error,deposit_address:t.cashier.onramp.deposit_address,is_dark_mode_on:n.is_dark_mode_on,is_deposit_address_loading:t.cashier.onramp.is_deposit_address_loading,is_deposit_address_popover_open:t.cashier.onramp.is_deposit_address_popover_open,is_requesting_widget_html:t.cashier.onramp.is_requesting_widget_html,onClickCopyDepositAddress:t.cashier.onramp.onClickCopyDepositAddress,onClickDisclaimerContinue:t.cashier.onramp.onClickDisclaimerContinue,onClickGoToDepositPage:t.cashier.onramp.onClickGoToDepositPage,selected_provider:t.cashier.onramp.selected_provider,setDepositAddressRef:t.cashier.onramp.setDepositAddressRef,setIsOnRampModalOpen:t.cashier.onramp.setIsOnRampModalOpen,should_show_dialog:t.cashier.onramp.should_show_dialog,should_show_widget:t.cashier.onramp.should_show_widget,widget_error:t.cashier.onramp.widget_error,widget_html:t.cashier.onramp.widget_html}}))(Zn);function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nr=function(){var e=[c().createElement(x.Localize,{i18n_default_text:"Fiat onramp is a cashier service that allows you to convert fiat currencies to crypto to top up your Deriv crypto accounts. Listed here are third-party crypto exchanges. You’ll need to create an account with them to use their services.",key:0})];return c().createElement(hn,{notes:e,title:c().createElement(x.Localize,{i18n_default_text:"What is Fiat onramp?"})})},rr=function(){return c().createElement("div",{className:"on-ramp__info"},c().createElement(D.Text,{color:"prominent",size:"s",weight:"bold",className:"on-ramp__info-header",as:"p"},c().createElement(x.Localize,{i18n_default_text:"What is Fiat onramp?"})),c().createElement("div",{className:"on-ramp__info-content"},c().createElement(D.ReadMore,{expand_text:(0,x.localize)("See more"),text:(0,x.localize)("Fiat onramp is a cashier service that allows you to convert fiat currencies to crypto to top up your Deriv crypto accounts. Listed here are third-party crypto exchanges. You’ll need to create an account with them to use their services."),collapse_length:140,className:"on-ramp__read-more"})))},ar=function(e){var t=e.filtered_onramp_providers,n=e.is_cashier_locked,r=e.is_cashier_default,a=e.is_deposit_locked,i=e.is_loading,o=e.is_onramp_modal_open,s=e.is_switching,l=e.menu_options,d=e.onMountOnramp,p=e.onUnmountOnramp,h=e.onramp_popup_modal_title,f=e.resetPopup,m=e.routeTo,_=e.setIsOnRampModalOpen,y=e.should_show_dialog,g=e.setSideNotes,v=e.tab_index,b=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c().useState(u.routes.cashier_onramp),2),E=b[0],w=b[1];return c().useEffect((function(){l&&E!==u.routes.cashier_onramp&&m(E)}),[E]),c().useEffect((function(){return d(),"function"!=typeof g||s||i||g([c().createElement(nr,{key:0})]),function(){return p()}}),[d,p,r,s,i,v]),s||i?c().createElement(D.Loading,{className:"cashier-default__loader",is_fullscreen:!0}):n?c().createElement(V,null):a?c().createElement(Ut,null):c().createElement(c().Fragment,null,c().createElement("div",{className:"cashier__wrapper cashier__wrapper--align-left on-ramp"},(0,u.isMobile)()&&c().createElement(c().Fragment,null,c().createElement(D.SelectNative,{className:"on-ramp__selector",list_items:(null!=l?l:[]).map((function(e){return{text:e.label,value:e.path}})),value:E,should_show_empty_option:!1,onChange:function(e){e.currentTarget.value!==E&&w(e.currentTarget.value)}}),c().createElement(rr,null)),c().createElement(D.Text,{color:(0,u.isMobile)()?"less-prominent":"general",weight:(0,u.isMobile)()?"normal":"bold",align:"center",line_height:"m",className:"on-ramp__page-header",as:"p"},c().createElement(x.Localize,{i18n_default_text:"Select payment channel"})),t.map((function(e){return c().createElement($n,{key:e.name,provider:e})})),c().createElement(D.Modal,{className:"on-ramp__modal",has_close_icon:!0,is_open:o,small:y,title:h,toggleModal:function(){return _(!o)},onUnmount:f,width:y?"44rem":"62.8rem"},c().createElement(D.Modal.Body,null,c().createElement(er,null)))))};ar.propTypes={filtered_onramp_providers:w().array,is_cashier_locked:w().bool,is_deposit_locked:w().bool,is_onramp_modal_open:w().bool,is_loading:w().bool,menu_options:w().array,onMountOnramp:w().func,onUnmountOnramp:w().func,onramp_popup_modal_title:w().string,resetPopup:w().func,routeTo:w().func,setIsOnRampModalOpen:w().func,setSideNotes:w().func,should_show_dialog:w().bool,tab_index:w().number};const ir=T((function(e){var t=e.modules,n=e.common,r=e.client;return{filtered_onramp_providers:t.cashier.onramp.filtered_onramp_providers,is_cashier_default:t.cashier.is_cashier_default,is_cashier_locked:t.cashier.is_cashier_locked,is_deposit_locked:t.cashier.is_deposit_locked,is_onramp_modal_open:t.cashier.onramp.is_onramp_modal_open,is_loading:t.cashier.is_loading,is_switching:r.is_switching,onMountOnramp:t.cashier.onramp.onMountOnramp,onUnmountOnramp:t.cashier.onramp.onUnmountOnramp,onramp_popup_modal_title:t.cashier.onramp.onramp_popup_modal_title,resetPopup:t.cashier.onramp.resetPopup,routeTo:n.routeTo,setIsOnRampModalOpen:t.cashier.onramp.setIsOnRampModalOpen,should_show_dialog:t.cashier.onramp.should_show_dialog,tab_index:t.cashier.cashier_route_tab_index}}))(ar);var or,sr={component:c().lazy((function(){return n.e("404").then(n.bind(n,"./Components/Page404.jsx"))})),getTitle:function(){return(0,x.localize)("Error 404")}};const lr=function(e){return e.is_dashboard,or||(or=[{path:u.routes.cashier,component:gt,is_modal:!0,is_authenticated:!0,getTitle:function(){return(0,x.localize)("Cashier")},icon_component:"IcCashier",routes:[{path:u.routes.cashier_deposit,component:Vt,getTitle:function(){return(0,x.localize)("Deposit")},icon_component:"IcCashierAdd",default:!0},{path:u.routes.cashier_withdrawal,component:gn,getTitle:function(){return(0,x.localize)("Withdrawal")},icon_component:"IcCashierMinus"},{path:u.routes.cashier_pa,component:qn,getTitle:function(){return(0,x.localize)("Payment agents")},icon_component:"IcPaymentAgent"},{path:u.routes.cashier_acc_transfer,component:We,getTitle:function(){return(0,x.localize)("Transfer")},icon_component:"IcAccountTransfer"},{path:u.routes.cashier_pa_transfer,component:lt,getTitle:function(){return(0,x.localize)("Transfer to client")},icon_component:"IcAccountTransfer"},{path:u.routes.cashier_p2p,component:Jn,getTitle:function(){return(0,x.localize)("DP2P")},icon_component:"IcDp2p"},{path:u.routes.cashier_p2p_verification,component:Jn,getTitle:function(){return(0,x.localize)("DP2P")},icon_component:"IcDp2p",is_invisible:!0},{id:"gtm-onramp-tab",path:u.routes.cashier_onramp,component:ir,getTitle:function(){return(0,x.localize)("Fiat onramp")},icon_component:"IcCashierOnRamp"}]}]).push(sr),or};var cr=function e(t,n){var r;return n.some((function(n){var a;try{a=(0,C.matchPath)(t,n)}catch(e){if(/undefined/.test(e.message))return}return a?(r=n,!0):!!n.routes&&(r=e(t,n.routes))})),r},ur=["active_class","to","children"];function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}(function(e){var t=e.active_class,n=e.to,r=e.children,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ur),i=c().useContext(u.PlatformContext).is_dashboard,o=function(e){return/^\//.test(e)?e:"/".concat(e||"")}(n),s=cr(o,lr({is_dashboard:i}));if(!s)throw new Error("Route not found: ".concat(n));return n?c().createElement(I.NavLink,dr({to:o,activeClassName:t||"active",exact:s.exact},a),r):c().createElement("a",a,r)}).propTypes={active_class:w().string,children:w().oneOfType([w().object,w().array,w().string]),to:w().string};const hr=function(e){return c().createElement(I.Route,{exact:e.exact,path:e.path,render:function(t){var n,r=null;if(e.component===I.Redirect){var a=e.to;e.path===u.routes.index&&(a=t.location.pathname.toLowerCase().replace(e.path,"")),r=c().createElement(I.Redirect,{to:a})}else if(!e.is_authenticated||e.is_logging_in||e.is_logged_in){var i=e.routes?e.routes.find((function(e){return e.default})):{},o=!(0,u.isEmptyObject)(i),s=(0,u.removeBranchName)(location.pathname);r=c().createElement(c().Fragment,null,o&&s===e.path&&c().createElement(I.Redirect,{to:i.path}),c().createElement(e.component,pr({},t,{routes:e.routes})))}else(0,u.redirectToLogin)(e.is_logged_in,(0,x.getLanguage)());var l=(null===(n=e.getTitle)||void 0===n?void 0:n.call(e))||"";return document.title="".concat(l," | ").concat(u.default_title),r}})};function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const mr=function(e){var t=c().useContext(u.PlatformContext).is_dashboard;return c().createElement(c().Suspense,{fallback:function(){return c().createElement("div",null,c().createElement(u.Localize,{i18n_default_text:"Loading..."}))}},c().createElement(I.Switch,null,lr({is_dashboard:t}).map((function(t,n){return c().createElement(hr,fr({key:n},t,e))}))))};var _r=function(e){var t=e.header,n=e.message,r=e.redirect_label,a=e.redirectOnClick,i=e.should_clear_error_on_click,o=e.setError,s=e.redirect_to,l=void 0===s?u.routes.trade:s,d=e.should_show_refresh,p=void 0===d||d,h=(0,I.useHistory)();c().useEffect((function(){if(h)return h.listen((function(){"function"==typeof o&&o(!1,null)}))}),[h,o]);var f=p?c().createElement(x.Localize,{i18n_default_text:"Please refresh this page to continue."}):"";return c().createElement(D.PageError,{header:t||c().createElement(x.Localize,{i18n_default_text:"Something’s not right"}),messages:n?[n,f]:[c().createElement(x.Localize,{key:0,i18n_default_text:"Sorry, an error occured while processing your request."}),f],redirect_url:l,redirect_label:r||c().createElement(x.Localize,{i18n_default_text:"Refresh"}),buttonOnClick:a||function(){return location.reload()},should_clear_error_on_click:i,setError:o})};_r.propTypes={message:w().oneOfType([w().node,w().string,w().object]),type:w().string};const yr=_r;var gr=function(e){var t=e.error,n=e.has_error,r=e.is_logged_in,a=e.is_logging_in,i=e.passthrough;return n?c().createElement(yr,t):c().createElement(mr,{is_logged_in:r,is_logging_in:a,passthrough:i})};gr.propTypes={error:b.PropTypes.objectOrObservableObject,has_error:w().bool,is_logged_in:w().bool,is_logging_in:w().bool,is_virtual:w().bool};const vr=(0,C.withRouter)(T((function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:n.error,has_error:n.has_error}}))(gr));function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e,t){return!t||"object"!==br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ar(e);if(t){var a=Ar(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Cr(this,n)}}(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=r.call(this,e);var n=e.passthrough,i=n.WS,o=n.root_store;return(0,u.setWebsocket)(i),t.root_store=o,_(),t}return t=a,(n=[{key:"render",value:function(){return c().createElement(O,{store:this.root_store},c().createElement(vr,null))}}])&&Er(t.prototype,n),a}(c().Component)},"../../p2p/lib/index.js":(e,t,n)=>{var r,a,i,o,s,l,c;self,e.exports=(r=n("react"),a=n("react-dom"),i=n("../../../node_modules/prop-types/index.js"),o=n("@deriv/shared"),s=n("@deriv/components"),l=n("../../../node_modules/formik/dist/formik.esm.js"),c=n("../../../node_modules/lodash.debounce/index.js"),(()=>{var e={9644:(e,t,n)=>{e.exports=n(5644)},353:(e,t,n)=>{"use strict";var r=n(3044),a=n(6955),i=n(2233),o=n(8030),s=n(7948),l=n(1875),c=n(842),u=n(8618);e.exports=function(e){return new Promise((function(t,n){var d=e.data,p=e.headers,h=e.responseType;r.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(m+":"+_)}var y=s(e.baseURL,e.url);function g(){if(f){var r="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,i={data:h&&"text"!==h&&"json"!==h?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};a(t,n,i),f=null}}if(f.open(e.method.toUpperCase(),o(y,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var v=(e.withCredentials||c(y))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;v&&(p[e.xsrfHeaderName]=v)}"setRequestHeader"in f&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),h&&"json"!==h&&(f.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),d||(d=null),f.send(d)}))}},5644:(e,t,n)=>{"use strict";var r=n(3044),a=n(3644),i=n(2215),o=n(2937);function s(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=s(n(1439));l.Axios=i,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=n(6714),l.CancelToken=n(4089),l.isCancel=n(8041),l.all=function(e){return Promise.all(e)},l.spread=n(783),l.isAxiosError=n(5587),e.exports=l,e.exports.default=l},6714:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4089:(e,t,n)=>{"use strict";var r=n(6714);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},8041:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},2215:(e,t,n)=>{"use strict";var r=n(3044),a=n(8030),i=n(946),o=n(6895),s=n(2937),l=n(7525),c=l.validators;function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var u=[o,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),a=Promise.resolve(e);u.length;)a=a.then(u.shift(),u.shift());return a}for(var d=e;n.length;){var p=n.shift(),h=n.shift();try{d=p(d)}catch(e){h(e);break}}try{a=o(d)}catch(e){return Promise.reject(e)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},u.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=u},946:(e,t,n)=>{"use strict";var r=n(3044);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},7948:(e,t,n)=>{"use strict";var r=n(9192),a=n(8762);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},8618:(e,t,n)=>{"use strict";var r=n(1935);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},6895:(e,t,n)=>{"use strict";var r=n(3044),a=n(8556),i=n(8041),o=n(1439);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},1935:e=>{"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},2937:(e,t,n)=>{"use strict";var r=n(3044);e.exports=function(e,t){t=t||{};var n={},a=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(e[a],t[a])}r.forEach(a,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(i,c),r.forEach(o,(function(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(void 0,t[a])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var u=a.concat(i).concat(o).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return r.forEach(d,c),n}},6955:(e,t,n)=>{"use strict";var r=n(8618);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8556:(e,t,n)=>{"use strict";var r=n(3044),a=n(1439);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},1439:(e,t,n)=>{"use strict";var r=n(3044),a=n(8868),i=n(1935),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(353)),l),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c},3644:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},8030:(e,t,n)=>{"use strict";var r=n(3044);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},8762:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},2233:(e,t,n)=>{"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9192:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},5587:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},842:(e,t,n)=>{"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},8868:(e,t,n)=>{"use strict";var r=n(3044);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1875:(e,t,n)=>{"use strict";var r=n(3044),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},783:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7525:(e,t,n)=>{"use strict";var r=n(4078),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={},o=r.version.split(".");function s(e,t){for(var n=t?t.split("."):o,r=e.split("."),a=0;a<3;a++){if(n[a]>r[a])return!0;if(n[a]<r[a])return!1}return!1}a.transitional=function(e,t,n){var a=t&&s(t);function o(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(o(r," has been removed in "+t));return a&&!i[r]&&(i[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var s=e[i],l=void 0===s||o(s,i,e);if(!0!==l)throw new TypeError("option "+i+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},3044:(e,t,n)=>{"use strict";var r=n(3644),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===a.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},4078:e=>{"use strict";e.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/sendbird"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/Users/baharsadeghzadeh/Projects/deriv-app/node_modules/sendbird","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},2779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},7108:(e,t)=>{var n;n=function(e){e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();e.table=t,e.bstr=function(e,n){for(var r=-1^n,a=e.length-1,i=0;i<a;)r=(r=r>>>8^t[255&(r^e.charCodeAt(i++))])>>>8^t[255&(r^e.charCodeAt(i++))];return i===a&&(r=r>>>8^t[255&(r^e.charCodeAt(i))]),-1^r},e.buf=function(e,n){if(e.length>1e4)return function(e,n){for(var r=-1^n,a=e.length-7,i=0;i<a;)r=(r=(r=(r=(r=(r=(r=(r=r>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])];for(;i<a+7;)r=r>>>8^t[255&(r^e[i++])];return-1^r}(e,n);for(var r=-1^n,a=e.length-3,i=0;i<a;)r=(r=(r=(r=r>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])];for(;i<a+3;)r=r>>>8^t[255&(r^e[i++])];return-1^r},e.str=function(e,n){for(var r,a,i=-1^n,o=0,s=e.length;o<s;)(r=e.charCodeAt(o++))<128?i=i>>>8^t[255&(i^r)]:r<2048?i=(i=i>>>8^t[255&(i^(192|r>>6&31))])>>>8^t[255&(i^(128|63&r))]:r>=55296&&r<57344?(r=64+(1023&r),a=1023&e.charCodeAt(o++),i=(i=(i=(i=i>>>8^t[255&(i^(240|r>>8&7))])>>>8^t[255&(i^(128|r>>2&63))])>>>8^t[255&(i^(128|a>>6&15|(3&r)<<4))])>>>8^t[255&(i^(128|63&a))]):i=(i=(i=i>>>8^t[255&(i^(224|r>>12&15))])>>>8^t[255&(i^(128|r>>6&63))])>>>8^t[255&(i^(128|63&r))];return-1^i}},"undefined"==typeof DO_NOT_EXPORT_CRC?n(t):n({})},629:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".advertiser-page{flex:1;display:flex;flex-direction:column}.advertiser-page__header{display:flex;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;justify-content:space-between;width:657px}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__header{padding-top:1.6rem;width:100vw}}.advertiser-page__header-details{display:flex}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__header-details{margin:0 1.6rem}.advertiser-page__header-details .dp2p-avatar{align-self:center}}.advertiser-page__header-name{align-self:center;display:flex;flex-flow:column;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-left:0.8rem}.advertiser-page__header-real-name{margin-top:0.4rem;max-width:500px}.advertiser-page__header-verification{align-items:center;display:flex}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__header-verification{display:grid;position:absolute;right:1.6rem}}.advertiser-page__header-verification-icon{margin-left:0.4rem;vertical-align:sub}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__header-verification-icon{vertical-align:text-top}}.advertiser-page__header-verification-id{justify-self:flex-end}.advertiser-page__header-verification-status{margin-left:1.6rem}.advertiser-page__horizontal-scroll{overflow-x:auto}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__modal{max-width:100vw}}.advertiser-page__stats{border-bottom:none;display:flex;grid-template-columns:repeat(3, 1fr) 2fr 1fr;grid-template-rows:46px;height:5rem;justify-content:space-between;margin:2.4rem 0 2.4rem 2.9rem;width:58.8rem}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__stats{margin:2.4rem 0;width:100vw}}.advertiser-page__stats-cell{display:grid;min-width:65px;text-align:center}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__stats-cell{min-width:12rem}.advertiser-page__stats-cell:nth-child(5){min-width:16rem}}.advertiser-page__stats-cell-buy{margin-left:0.5rem;margin-top:0.14rem}.advertiser-page__stats-cell-completion{display:flex}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__stats-cell-completion{flex-direction:row;justify-content:center;padding-left:0.5rem}}.advertiser-page__stats-cell-separator{border-right:1px solid #ededed}.advertiser-page__stats--wrapper{align-items:center;display:flex}@media (max-height: 580px){.advertiser-page__stats--wrapper{height:10rem}}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__stats--wrapper{display:flex;justify-content:center;flex:none;background-color:var(--general-main-1);z-index:1;transition:transform 0.25s linear, opacity 0.25s ease;transform-origin:top}}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__cell{display:block}}.advertiser-page__cell-limit{padding-top:0.8rem}.advertiser-page__popover-icon{margin:1.6rem 0.8rem 1.6rem 2.4rem}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__popover-icon{margin:1.6rem 1rem}}.advertiser-page__adverts{flex:1;display:flex;flex-direction:column}.advertiser-page__adverts-button{align-items:center;display:flex;justify-content:center}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__adverts-button{justify-content:flex-end}}.advertiser-page__adverts-table{display:flex;flex:1;flex-direction:column;width:657px}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__adverts-table{display:flex;flex-flow:column;margin-top:4rem;width:100vw}}.advertiser-page__adverts-table-body{flex:1;display:flex;flex-direction:column}.advertiser-page__adverts-table_row{padding:1.6rem;grid-template-columns:3fr 2fr 1fr}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__adverts-table_row{grid-template-columns:repeat(2, 1fr);height:100px;padding:1.6rem;width:100vw}}.advertiser-page__adverts-tabs{width:228px}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__adverts .dc-tabs__item{width:50%}}.advertiser-page__adverts-list{height:calc(100% - 200px)}.advertiser-page__adverts-scrollbar{position:absolute;width:657px}@media (min-width: 768px){.advertiser-page__adverts-scrollbar{height:calc(100vh - 527px)}}@media (min-width: 320px) and (max-width: 767px){.advertiser-page__adverts-scrollbar{bottom:0;max-height:calc(100vh - 440px) !important;position:fixed}}@media (min-width: 320px) and (max-width: 767px){.advertiser-page .dc-tabs__list--header-fit-content{position:fixed}}@media (min-width: 320px) and (max-width: 767px){.advertiser-page .dc-tabs__content{position:fixed;top:140px}.advertiser-page .dc-tabs__content .page-return{margin:1.2rem !important}}.advertiser-page__data-list{flex:1}.advertiser-page__data-list__data-list-body{flex:1}.advertiser-page__data-list .data-list__body-wrapper{flex:1}.advertiser-page-empty{height:100%;margin-top:4rem}@media (max-height: 525px){.advertiser-page-empty{height:8rem}}@media (min-height: 526px) and (max-height: 580px){.advertiser-page-empty{height:15rem}}\n",""]);const i=a},3770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,input,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}html{height:100%;font-size:10px}body{line-height:1;height:100%}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}strong{font-weight:bold}:host,:root{--text-size-xxxxs: 0.8rem;--text-size-xxxs: 1rem;--text-size-xxs: 1.2rem;--text-size-xs: 1.4rem;--text-size-s: 1.6rem;--text-size-xsm: 1.8rem;--text-size-sm: 2rem;--text-size-m: 2.4rem;--text-size-l: 3.2rem;--text-size-xl: 4.8rem;--text-size-xxl: 6.4rem;--text-lh-xxs: 1;--text-lh-xs: 1.25;--text-lh-s: 1.4;--text-lh-m: 1.5;--text-lh-l: 1.75;--text-lh-xl: 2;--text-lh-xxl: 2.4;--text-weight-lighter: lighter;--text-weight-normal: normal;--text-weight-bold: bold;--text-weight-bolder: bolder;--text-align-left: start;--text-align-right: right;--text-align-center: center;--brand-dark-grey: #0e0e0e;--brand-red-coral: #ff444f;--brand-orange: #ff6444;--brand-secondary: #85acb0;--wallet-airtm: linear-gradient(90deg, #1a8fff 0%, #0083ff 100%);--wallet-banxa: linear-gradient(90deg, #000 0%, #4ac0ba 96.35%);--wallet-bitcoin: linear-gradient(90deg, #f89e32 0%, #f7931b 103.12%);--wallet-credit: linear-gradient(274.73deg, #464750 3.82%, #0e0f11 88.49%);--wallet-dp2p: linear-gradient(90deg, #ff444f 0%, #211d1e 95.22%);--wallet-fasapay: linear-gradient(90deg, #f6931c 0%, #4873ac 95.22%);--wallet-jeton: linear-gradient(90deg, #ff7635 0%, #ff671f 100%);--wallet-mastercard: linear-gradient(90deg, #eb001b 0%, #f79e1b 100%);--wallet-neteller: linear-gradient(90deg, #98cc53 0%, #8dc640 100%);--wallet-paylivre: linear-gradient(90deg, #352caa 0%, #9a6bfc 100%);--wallet-paysafe: linear-gradient(90deg, #e3001b 0%, #008ac9 100%);--wallet-perfectmoney: gradient-perfectmoney;--wallet-skrill: linear-gradient(274.73deg, #5a205d 3.82%, #7f3883 88.49%);--wallet-sticpay: linear-gradient(90deg, #f36938 0%, #f25822 100%);--wallet-virtual: linear-gradient(274.25deg, #333 9.01%, #5c5b5b 103.31%);--wallet-visa: linear-gradient(274.73deg, #1a205e 3.82%, #122d96 88.49%);--wallet-webmoney: linear-gradient(90deg, #1a77ac 0%, #0068a3 100%);--app-card-virtual: linear-gradient(274.25deg, #333 9.01%, #5c5b5b 103.31%);--app-card-virtual-swap-free: linear-gradient(58.51deg, #061828 28.06%, #1a3c60 93.51%)}:host .theme--light,:root .theme--light{--general-main-1: #fff;--general-main-2: #fff;--general-section-1: #f2f3f4;--general-section-2: #f2f3f4;--general-section-3: #fafafa;--general-section-4: #f5f7fa;--general-disabled: #eaeced;--general-hover: #e6e9e9;--general-active: #d6dadb;--text-general: #333;--text-less-prominent: #999;--text-prominent: #333;--text-disabled: #999;--text-loss-danger: #ec3f3f;--text-profit-success: #4bb4b3;--text-warning: #ffad3a;--text-red: #ff444f;--text-blue: #0796e0;--text-colored-background: #fff;--icon-light-background: #5c5c5c;--icon-dark-background: #fff;--icon-grey-background: #f2f3f4;--purchase-main-1: #4bb4b3;--purchase-section-1: #3d9494;--purchase-main-2: #ec3f3f;--purchase-section-2: #d33636;--purchase-disabled-main: #eaeced;--purchase-disabled-section: #e6e9e9;--button-primary-default: var(--brand-red-coral);--button-secondary-default: #999;--button-tertiary-default: transparent;--button-primary-light-default: rgba(255,68,79,0.16);--button-primary-hover: #eb3e48;--button-secondary-hover: rgba(0,0,0,0.08);--button-tertiary-hover: rgba(255,68,79,0.08);--button-primary-light-hover: rgba(255,68,79,0.24);--button-toggle-primary: #0796e0;--button-toggle-secondary: #d6dadb;--overlay-outside-dialog: rgba(0,0,0,0.72);--overlay-inside-dialog: rgba(255,255,255,0.96);--shadow-menu: rgba(0,0,0,0.16);--shadow-menu-2: rgba(0,0,0,0.16);--shadow-drop: rgba(0,0,0,0.08);--state-normal: #fff;--state-hover: #e6e9e9;--state-active: #d6dadb;--state-disabled: #eaeced;--border-normal: #d6dadb;--border-normal-1: #d6dadb;--border-hover: #999;--border-hover-1: #5c5c5c;--border-active: var(--brand-secondary);--border-disabled: #eaeced;--fill-normal: #fff;--fill-hover: #999;--fill-active: var(--brand-secondary);--fill-disabled: #eaeced;--status-default: #eaeced;--status-adjustment: #999;--status-danger: #ec3f3f;--status-success: #4bb4b3;--status-warning: #ffad3a;--status-warning-transparent: rgba(255,173,58,0.16);--status-transfer: #ff6444;--status-info: #377cfc;--status-colored-background: #fff;--dashboard-swap-free: linear-gradient(58.51deg, #061828 28.06%, #1a3c60 93.51%);--dashboard-app: linear-gradient(274.25deg, #333 9.01%, #5c5b5b 103.31%);--payment-skrill: linear-gradient(274.73deg, #5a205d 3.82%, #7f3883 88.49%);--payment-visa: linear-gradient(274.73deg, #1a205e 3.82%, #122d96 88.49%);--payment-mastercard: linear-gradient(90deg, #eb001b 0%, #f79e1b 100%);--payment-credit-and-debit: linear-gradient(274.73deg, #464750 3.82%, #0e0f11 88.49%);--payment-bitcoin: linear-gradient(90deg, #f89e32 0%, #f7931b 103.12%);--payment-usd-coin: linear-gradient(90deg, #3d83cf 0%, #2775ca 100%);--payment-neteller: linear-gradient(90deg, #98cc53 0%, #8dc640 100%);--payment-webmoney: linear-gradient(90deg, #1a77ac 0%, #0068a3 100%);--payment-jeton: linear-gradient(90deg, #ff7635 0%, #ff671f 100%);--payment-sticpay: linear-gradient(90deg, #f36938 0%, #f25822 100%);--payment-airtm: linear-gradient(90deg, #1a8fff 0%, #0083ff 100%);--payment-dp2p: linear-gradient(90deg, #ff444f 0%, #211d1e 95.22%);--payment-deriv: linear-gradient(90deg, #ff6444 0%, #ff444f 100%);--transparent-success: rgba(75,180,179,0.92);--transparent-info: rgba(55,124,252,0.16);--gradient-success: linear-gradient(to top, #fff, rgba(75,180,179,0.16));--gradient-danger: linear-gradient(to top, #fff, rgba(255,68,79,0.16));--contract-gradient-danger: linear-gradient(to top, #fff 85%, rgba(255,68,79,0.16));--gradient-right-edge: linear-gradient(to right, rgba(255,255,255,0) -5%, #fff 71%);--badge-white: #fff;--badge-blue: #0677af;--badge-violet: #2a3052;--badge-green: #00a79e}:host .theme--dark,:root .theme--dark{--general-main-1: #0e0e0e;--general-main-2: #151717;--general-section-1: #151717;--general-section-2: #0e0e0e;--general-section-3: #242828;--general-section-4: #242828;--general-disabled: #1d1f20;--general-hover: #242828;--general-active: #323738;--text-prominent: #fff;--text-general: #c2c2c2;--text-less-prominent: #6e6e6e;--text-disabled: #3e3e3e;--text-profit-success: #00a79e;--text-loss-danger: #cc2e3d;--text-red: #ff444f;--text-colored-background: #fff;--icon-light-background: #5c5c5c;--icon-dark-background: #fff;--icon-grey-background: #333;--purchase-main-1: #00a79e;--purchase-section-1: #008079;--purchase-main-2: #cc2e3d;--purchase-section-2: #a32430;--purchase-disabled-main: #1d1f20;--purchase-disabled-section: #0e0e0e;--button-primary-default: var(--brand-red-coral);--button-secondary-default: #6e6e6e;--button-tertiary-default: transparent;--button-primary-light-default: rgba(255,68,79,0.16);--button-primary-hover: #eb3e48;--button-secondary-hover: rgba(255,255,255,0.08);--button-tertiary-hover: rgba(255,68,79,0.08);--button-primary-light-hover: rgba(255,68,79,0.24);--button-toggle-primary: #0796e0;--button-toggle-secondary: #323738;--overlay-outside-dialog: rgba(0,0,0,0.72);--overlay-inside-dialog: rgba(14,14,14,0.96);--shadow-menu: rgba(0,0,0,0.84);--shadow-menu-2: rgba(0,0,0,0.72);--shadow-drop: rgba(0,0,0,0.64);--state-normal: #0e0e0e;--state-hover: #242828;--state-active: #323738;--state-disabled: #1d1f20;--border-normal: #323738;--border-normal-1: #d6dadb;--border-hover: #6e6e6e;--border-hover-1: #5c5c5c;--border-active: var(--brand-secondary);--border-disabled: #1d1f20;--fill-normal: #0e0e0e;--fill-hover: #6e6e6e;--fill-active: var(--brand-secondary);--fill-disabled: #1d1f20;--status-default: #eaeced;--status-adjustment: #999;--status-danger: #cc2e3d;--status-warning: #ffad3a;--status-warning-2: rgba(255,173,58,0.16);--status-success: #00a79e;--status-transfer: #ff6444;--status-info: #377cfc;--status-colored-background: #fff;--transparent-success: rgba(0,167,158,0.92);--transparent-info: rgba(55,124,252,0.16);--gradient-success: linear-gradient(to top, #0e0e0e, rgba(0,167,158,0.16));--gradient-danger: linear-gradient(to top, #0e0e0e, rgba(255,68,79,0.16));--contract-gradient-danger: linear-gradient(to top, #0e0e0e 85%, rgba(255,68,79,0.16));--gradient-right-edge: linear-gradient(to right, rgba(14,14,14,0) -5%, #0e0e0e 71%);--badge-white: #fff;--badge-blue: #0677af;--badge-violet: #2a3052;--badge-green: #00a79e}.p2p-cashier{background:transparent;height:100%;width:100%;flex:1;display:flex;flex-direction:column}.p2p-cashier__barred-user .dc-hint-box{margin-top:1.6rem}@media (min-width: 320px) and (max-width: 767px){.p2p-cashier__barred-user .dc-hint-box__icon{align-self:flex-start;min-width:16px;min-height:16px}}@media (min-width: 320px) and (max-width: 767px){.p2p-cashier__barred-user .dc-hint-box{margin:1rem 2rem}}.p2p-cashier__content{padding:0 1.6rem}.p2p-cashier .dc-tabs--p2p-cashier__tabs{display:flex;flex-direction:column;flex:1}@media (min-width: 320px) and (max-width: 767px){.p2p-cashier .dc-tabs .dc-themed-scrollbars-wrapper li{flex:1}}.p2p-cashier .dc-tabs>.dc-tabs__content{display:flex;flex-direction:column;flex:1}.p2p-cashier .dc-button-menu__wrapper{background-color:var(--state-disabled)}.p2p-cashier .dc-button-menu__wrapper .dc-button-menu__button,.p2p-cashier .dc-button-menu__wrapper .dc-button-menu__button--active{height:100%}.p2p-cashier .dc-button-menu__wrapper .dc-button-menu__button span{color:var(--text-less-prominent)}.p2p-cashier .dc-button-menu__wrapper .dc-button-menu__button--active span{color:var(--text-prominent)}.p2p-cashier .dc-button-menu--highlight{background-color:var(--state-normal) !important}.p2p-cashier__separator{width:100%;border-top:1px solid var(--general-section-1)}@media (min-width: 320px) and (max-width: 767px){.p2p-cashier__advertiser-tab .dc-tabs__item{padding:0 1.6rem;margin:auto}.p2p-cashier__advertiser-tab .dc-tabs__list{position:fixed;margin-bottom:unset !important;background-color:var(--general-main-1);z-index:2;width:100%}.p2p-cashier__advertiser-tab .dc-tabs__content{margin-top:4rem}}.sendbird-fileviewer__header-delete{display:none !important}@media (min-width: 320px) and (max-width: 767px){.p2p-nickname__dialog{height:100%}}.dc-modal__container_p2p-nickname__dialog{height:auto;margin-bottom:0;max-height:50rem !important;max-width:44rem;min-width:44rem;padding:0;width:100%}@media (min-width: 320px) and (max-width: 767px){.dc-modal__container_p2p-nickname__dialog{min-width:0}}\n",""]);const i=a},1330:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".buy-sell__header{display:flex;flex-direction:column}@media (min-width: 320px) and (max-width: 767px){.buy-sell__header{background-color:var(--general-main-1);border-bottom:1px solid var(--general-section-1);display:flex;flex:none;justify-content:center;position:fixed;transition:transform 0.3s linear, opacity 0.3s ease;transform-origin:top;width:100%;z-index:1}}.buy-sell__header-container{display:flex;flex-direction:row;justify-content:space-between}@media (min-width: 320px) and (max-width: 767px){.buy-sell__header-container{flex-direction:column}}.buy-sell__header-filters{height:3.6rem;width:16.8rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__header-filters{transition:transform 0.3s linear, opacity 0.3s ease;transform-origin:top}}.buy-sell__header-match-ads{display:flex;flex-direction:row}@media (min-width: 1024px){.buy-sell__header-match-ads .dc-checkbox__box{margin-left:unset}}@media (min-width: 320px) and (max-width: 767px){.buy-sell__header-match-ads{margin:0.9rem 0.8rem}}.buy-sell__header-match-ads__popover{align-self:flex-end;margin-left:0.4rem}.buy-sell__header-row{display:flex;flex-direction:row}@media (min-width: 320px) and (max-width: 767px){.buy-sell__header-row{border-top:1px solid var(--general-section-1);justify-content:space-between}}.buy-sell__header-position-static{position:static}\n",""]);const i=a},7747:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".buy-sell__modal-body{padding:1.6rem;position:relative}.buy-sell__modal-field{margin-bottom:0 !important;margin-right:0.7rem;flex:1}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-field{margin:0.8rem 0}}.buy-sell__modal-field-wrapper{display:flex;margin:-2.4rem 0 1.6rem -2.4rem}.buy-sell__modal-field-wrapper>*{margin:2.4rem 0 0 2.4rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-field-wrapper{flex-direction:column}.buy-sell__modal-field-wrapper .dc-input__wrapper{margin-top:2.5rem;width:90vw}}.buy-sell__modal-field-wrapper>.dc-input{margin-top:1rem}.buy-sell__modal-content .dc-input{margin-bottom:unset}\n",""]);const i=a},8119:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"@media (min-width: 320px) and (max-width: 767px){.buy-sell-row{border-bottom:1px solid var(--general-section-1);padding:1.6rem;height:150px;display:flex;flex-direction:column}}.buy-sell-row__advertiser{display:flex;flex-direction:row;align-items:center;margin-bottom:1.6rem}.buy-sell-row__advertiser-name{display:flex;flex-direction:column;margin-left:0.8rem}.buy-sell-row__advertiser-arrow{margin-left:auto}.buy-sell-row__information{align-items:center;display:flex;flex-direction:row;justify-content:space-between}.buy-sell-row__rate{display:flex;flex-direction:column}.buy-sell-row__rate>:last-child{margin-top:0.8rem}.buy-sell-row__no-match{align-items:center;border-bottom:1px solid var(--general-section-1);display:flex;height:5.6rem;justify-content:center}.buy-sell-row__table-cell--left{align-items:flex-start;display:flex;flex-direction:column}.buy-sell-row__table-cell--right{align-items:flex-end}\n",""]);const i=a},9082:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".buy-sell{flex:1;display:flex;flex-direction:column}.buy-sell__advertiser-page-return .dc-text{align-self:flex-start}@media (min-width: 320px) and (max-width: 767px){.buy-sell__advertiser-page-return{border-bottom:1px solid var(--general-section-1);margin-bottom:unset;padding-bottom:1.2rem}.buy-sell__advertiser-page-return .page-return__button{padding:0 1.6rem}.buy-sell__advertiser-page-return .dc-text{align-self:self-end}}@media (min-width: 320px) and (max-width: 767px){.buy-sell__empty{margin-top:calc(17.2rem + 2.6rem)}}.buy-sell__table{display:flex;flex:1;flex-direction:column}.buy-sell__table-body{height:100%;flex:1;display:flex;flex-direction:column}.buy-sell__data-list{flex:1}.buy-sell__data-list__data-list-body{flex:1}.buy-sell__data-list .data-list__body-wrapper{flex:1}.buy-sell__table-header{display:grid;grid-template-columns:2fr repeat(3, 1fr)}.buy-sell__table-header>.dc-table__head:first-child{margin-left:1.6rem}.buy-sell__table-row{padding:1.6rem;grid-template-columns:2fr repeat(3, 1fr)}.buy-sell__table-row:hover{background-color:var(--general-hover)}.buy-sell__cell{align-items:center;display:flex}.buy-sell__cell-hover{cursor:pointer}.buy-sell__cell--container{display:flex;flex-direction:column;margin-left:0.8rem}.buy-sell__name:hover{color:var(--brand-red-coral);text-decoration:underline;-webkit-text-decoration-color:var(--brand-red-coral);text-decoration-color:var(--brand-red-coral)}.buy-sell__button{display:flex;justify-content:center;align-items:center}\n",""]);const i=a},5955:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".search-box{margin:2.4rem 0.8rem;width:24rem}@media (min-width: 320px) and (max-width: 767px){.search-box{margin:0.8rem 0 1rem 1.6rem;width:16rem}.search-box .dc-input{height:4rem}}@media (max-width: 320px){.search-box{width:14rem}}.search-box__cross-icon{cursor:pointer}.search-box__field{margin-bottom:0 !important}.search-box__field .dc-input{justify-content:center}.search-box__field .dc-input__field{flex-grow:1;height:4rem;padding-right:3rem;width:unset}@media (min-width: 320px) and (max-width: 767px){.search-box__field .dc-input__field{padding:0 2.8rem 0 0.4rem}}.search-box__field .dc-input__leading-icon{cursor:pointer;margin-left:0.8rem;pointer-events:unset;position:unset}\n",""]);const i=a},5889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".sort-dropdown{height:4.4rem;margin:2.4rem 0;width:24rem}.sort-dropdown .dc-dropdown__display{height:4.2rem}@media (min-width: 320px) and (max-width: 767px){.sort-dropdown{height:4rem;margin:0.8rem 1.6rem 1rem 0;width:16rem}.sort-dropdown .dc-dropdown__display{height:4rem}.sort-dropdown .dc-dropdown__display-text{display:block;overflow:hidden;padding-left:0.8rem;padding-right:unset;text-overflow:ellipsis;width:80%}.sort-dropdown .dc-dropdown__list{left:unset;right:0;width:calc(100vw - 3.2rem)}.sort-dropdown .dc-list__item-text{padding:1rem 1.6rem}}@media (min-width: 320px) and (max-width: 767px) and (max-width: 350px){.sort-dropdown{min-width:unset;width:14rem}}\n",""]);const i=a},3796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-blocked{align-items:center;display:flex;flex-direction:column;margin-top:6.4rem;max-width:67.2rem}.dp2p-blocked__title{margin:2.4rem 0 1rem}.dp2p-blocked__checklist-container{margin-top:2.4rem}.dp2p-blocked__checklist .dc-checklist__item{width:40rem}@media (min-width: 320px) and (max-width: 767px){.dp2p-blocked__checklist .dc-checklist__item{width:100%}}\n",""]);const i=a},1027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".p2p-empty{display:flex;flex-direction:column;align-items:center;margin-top:2.4rem;max-width:628px}.p2p-empty--no-tabs{margin-top:calc(4rem + 4.4rem)}.p2p-empty-icon{margin-bottom:2.4rem}.p2p-empty-title{margin:0.8rem}.p2p-empty-text{font-size:var(--text-size-xs);margin:1.2rem 0}.p2p-empty-text p{line-height:1.43}.p2p-empty__button{text-decoration:none;margin-top:1.6rem}@media (min-width: 320px) and (max-width: 767px){.p2p-empty__button{width:calc(100vw - 3.2rem)}}\n",""]);const i=a},6662:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-form-error{margin-right:auto;padding-right:0.8rem}\n",""]);const i=a},5582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".animation-wrapper-enter{transform:scale3d(1, 0, 1);opacity:0}.animation-wrapper-enter-done{transform:scale3d(1, 1, 1);opacity:1}.animation-wrapper-exit{transform:scale3d(1, 1, 1);opacity:1}.animation-wrapper-exit-done{display:none;transform:scale3d(1, 0, 1);opacity:0;height:0px}\n",""]);const i=a},1456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".p2p-toggle-container{background:var(--state-disabled);padding:0.4rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:4px}@media (min-width: 768px){.p2p-toggle-container{margin:2.4rem 0}}@media (min-width: 320px) and (max-width: 767px){.p2p-toggle-container{align-self:center;margin:1.6rem}}\n",""]);const i=a},5351:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".ad-status--active{background:rgba(75,180,179,0.16);border-radius:1.6rem;padding:0.2rem 1.6rem;text-align:center;width:8.8rem}@media (min-width: 320px) and (max-width: 767px){.ad-status--active{margin-bottom:0.8rem}}.ad-status--inactive{border:1px solid var(--status-danger);border-radius:0.2rem;padding:0.1rem 1.2rem;text-align:center;width:8.8rem}@media (min-width: 320px) and (max-width: 767px){.ad-status--inactive{margin-bottom:0.8rem}}\n",""]);const i=a},8587:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dc-modal__container_delete-modal .dc-modal-header{border-bottom:unset !important}.dc-modal__container_delete-modal .dc-modal-body{padding:2rem 2.4rem}@media (min-width: 320px) and (max-width: 767px){.dc-modal__container_delete-modal .dc-modal-body{padding:0 1.6rem}}.dc-modal__container_delete-modal .dc-modal-footer{border-top:none}\n",""]);const i=a},1135:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".p2p-my-ads{flex:1;display:flex;flex-direction:column}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads{margin-top:1.6rem}.p2p-my-ads .page-return{border-bottom:2px solid var(--general-section-1);margin:unset;padding:0 1.6rem 1.6rem}.p2p-my-ads .dc-list{margin-left:1vw;width:88vw}.p2p-my-ads .dc-list__item{padding-top:0.4rem}}.p2p-my-ads .dc-input__wrapper{max-width:67.2rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads .dc-input__wrapper{max-width:90vw}.p2p-my-ads .dc-input__wrapper .p2p-my-ads__form-field{margin-bottom:0}}.p2p-my-ads__header{display:flex;align-items:center;margin:2.4rem 0 1.6rem;justify-content:space-between;min-height:50px}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__header{border-bottom:1px solid var(--general-section-1);justify-content:flex-end;margin:unset}}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-element{padding:0 0 10rem}.p2p-my-ads__form .dc-input__footer{justify-content:space-between;width:86vw}.p2p-my-ads__form .dc-input__hint--relative{margin-left:unset}}.p2p-my-ads__form-radio-group{display:flex;margin-top:unset;padding-bottom:1.2rem}.p2p-my-ads__form-radio-group .dc-radio-group__circle{border:2px solid var(--border-hover)}.p2p-my-ads__form-radio-group .dc-radio-group__circle--selected{border:4px solid var(--brand-red-coral)}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-radio-group{padding:0.5rem 0}}.p2p-my-ads__form-summary{color:var(--text-less-prominent);font-size:1.4rem;margin-bottom:-1.6rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-summary{margin:0.6rem 0}}.p2p-my-ads__form-scrollbar{height:calc(100% - 2.4rem - 9.2rem);position:absolute;width:calc(100% - 4.8rem)}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-scrollbar{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:0 1.6rem;position:unset;width:90vw}}.p2p-my-ads__form-container{display:flex;height:8rem;justify-content:space-between;width:67.2rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-container{flex-direction:column;height:unset;width:unset}}.p2p-my-ads__form-field{height:4rem;margin-bottom:0;margin-left:0;margin-top:4.3rem;width:32.4rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-field{margin:2.1rem 0}}.p2p-my-ads__form-field--single{width:18.9rem}.p2p-my-ads__form-field--textarea{height:9.6rem;margin-bottom:0;width:67.2rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-field--textarea{width:90vw}}.p2p-my-ads__form-field--textarea .dc-input__hint{top:9.7rem}.p2p-my-ads__form-field--textarea .dc-input__counter{top:9.7rem;right:0rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-field--textarea .dc-input__counter{display:flex;right:0}}.p2p-my-ads__form-button{margin-left:0.8rem}.p2p-my-ads__form-footer{align-items:center;background-color:var(--general-main-1);display:flex;justify-content:flex-end}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__form-footer{border-top:2px solid var(--general-section-1);bottom:0;flex-direction:row;padding:1.6rem;position:fixed;right:0;width:100vw}}.p2p-my-ads__table{display:flex;flex:1;flex-direction:column}.p2p-my-ads__table-body{flex:1;display:flex;flex-direction:column}.p2p-my-ads__table-price{color:var(--text-profit-success);font-weight:bold}.p2p-my-ads__table-popovers{background-color:var(--general-main-1);display:flex;justify-content:space-around;position:absolute;right:0;width:10rem}.p2p-my-ads__table-popovers__archive{align-items:center;cursor:pointer;display:flex;height:3.2rem;justify-content:center;width:3.2rem}@media (min-width: 1024px){.p2p-my-ads__table-popovers__archive:hover{background-color:var(--general-hover)}}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-popovers__archive{align-items:center;background-color:#85acb0;display:flex;height:100%;justify-content:center;width:6rem}}.p2p-my-ads__table-popovers__delete{align-items:center;cursor:pointer;display:flex;height:3.2rem;justify-content:center;width:3.2rem}@media (min-width: 1024px){.p2p-my-ads__table-popovers__delete:hover{background-color:var(--general-hover)}}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-popovers__delete{align-items:center;background-color:var(--brand-red-coral);display:flex;height:100%;justify-content:center;width:6rem}}.p2p-my-ads__table-popovers__unarchive{align-items:center;cursor:pointer;display:flex;height:3.2rem;justify-content:center;width:3.2rem}@media (min-width: 1024px){.p2p-my-ads__table-popovers__unarchive:hover{background-color:var(--general-hover)}}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-popovers__unarchive{align-items:center;background-color:var(--brand-orange);display:flex;height:100%;justify-content:center;width:6rem}}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-popovers{display:flex;justify-content:unset}}.p2p-my-ads__table-available{align-items:flex-start;flex-flow:column;justify-content:center;width:85%}.p2p-my-ads__table-available-progress{margin-bottom:0.4rem}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-available-progress{margin:0.4rem 0}}.p2p-my-ads__table-row{padding:1.6rem;grid-template-columns:repeat(4, 2fr) 1.5fr}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-row{grid-template-columns:unset;padding:1.6rem;width:100%}}.p2p-my-ads__table-row-details{display:flex;justify-content:space-between}.p2p-my-ads__table-row-disabled .dc-table__cell{color:var(--text-disabled)}.p2p-my-ads__table-row-disabled .dc-progress-indicator__container{background-color:var(--general-section-1)}.p2p-my-ads__table-row-disabled .dc-progress-indicator__bar{background-color:var(--general-disabled)}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads__table-row-disabled .dc-text:not(.ad-status--inactive){color:var(--text-disabled)}}.p2p-my-ads__table-status{height:100%;width:100%}.p2p-my-ads__table--disabled .dc-table__cell{color:var(--text-disabled)}.p2p-my-ads__table--disabled .dc-progress-indicator__container{background-color:var(--general-section-1)}.p2p-my-ads__table--disabled .dc-progress-indicator__bar{background-color:var(--general-disabled)}.p2p-my-ads__popup-header{border-bottom:1px solid var(--general-section-2)}.p2p-my-ads__popup-header_wrapper{padding:1.6rem 2.4rem;display:flex;align-items:center;width:100%;justify-content:space-between;box-sizing:border-box}.p2p-my-ads__popup-header_right{justify-content:flex-end;padding:2.8rem 2.4rem 0}.p2p-my-ads__popup-header--title{font-weight:bold;color:var(--text-prominent)}.p2p-my-ads__popup-header--title:first-letter{text-transform:uppercase}.p2p-my-ads__popup-header--no-border{border:none}.p2p-my-ads__popup-content{padding:2.4rem}.p2p-my-ads__popup-content_centre{padding:0 8rem;display:flex;flex-direction:column;justify-content:center;align-items:center}.p2p-my-ads__popup-content--title{color:var(--text-general);font-size:var(--text-size-s);font-weight:bold;margin:1.4rem 0 0.8rem}.p2p-my-ads__popup-content--text{color:var(--text-general);font-size:var(--text-size-xs);margin-bottom:1.6rem}.p2p-my-ads__popup-field{margin-bottom:0 !important;flex:1}.p2p-my-ads__popup-field:not(:first-child){margin-left:2.4rem}.p2p-my-ads__popup-field_wrapper{display:flex;margin-bottom:1.6rem;align-items:center}.p2p-my-ads__popup-field--textarea{margin-top:4.3rem;margin-bottom:4.3rem}.p2p-my-ads__popup-field--textarea .dc-input__hint{top:9.7rem}.p2p-my-ads__popup-field--textarea .dc-input__counter{top:9.7rem;right:0rem}.p2p-my-ads__popup-field--icon{width:3.66rem;margin:0 1.6rem;transform:rotate(180deg)}.p2p-my-ads__popup-field--trailing{font-size:var(--text-size-xxs);color:var(--text-less-prominent)}.p2p-my-ads__popup-info{margin-bottom:1.6rem}.p2p-my-ads__popup-info_notes{margin-bottom:2rem}.p2p-my-ads__popup-info--title{color:var(--text-less-prominent);font-size:var(--text-size-xxs)}.p2p-my-ads__popup-info--text{color:var(--text-general);font-size:var(--text-size-xs);word-break:break-word}.p2p-my-ads__popup-info--strong{font-weight:bold}.p2p-my-ads__popup-footer{min-height:7.2rem;display:flex;align-items:center;justify-content:flex-end;padding:0 2.4rem;border-top:1px solid var(--general-section-2)}.p2p-my-ads__popup-close_icon{cursor:pointer;fill:var(--text-general)}.p2p-my-ads__empty{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 auto;transform:translateX(-25%);text-align:center}.p2p-my-ads__empty--pending{transform:translateX(-30%)}.p2p-my-ads__empty-button{width:auto;height:40px}.p2p-my-ads__state{text-align:center;margin:0 auto}.p2p-my-ads__state-button{margin-top:12px}.p2p-my-ads__create{margin:1.6rem;width:90vw}.p2p-my-ads__create-container{border-top:2px solid var(--general-section-1)}.p2p-my-ads__data-list{flex:1}.p2p-my-ads__data-list__data-list-body{flex:1}.p2p-my-ads__data-list .data-list__body-wrapper{flex:1}.p2p-my-ads__page-return{border-bottom:2px solid var(--general-section-1);margin:unset;padding:0 2rem 1.6rem}.p2p-my-ads .toggle-ads{align-items:center;display:flex;font-size:var(--text-size-s);justify-items:flex-start;margin-right:-50px}.p2p-my-ads .toggle-ads__switch{transform:scale(0.5) translateX(-50%)}.p2p-my-ads .toggle-ads__message{margin-right:1.6rem}.p2p-my-ads .toggle-ads--on{color:var(--text-profit-success)}.p2p-my-ads .toggle-ads--off{color:var(--text-less-prominent)}@media (min-width: 320px) and (max-width: 767px){.p2p-my-ads .toggle-ads{padding-right:1.6rem}}.dc-modal-header__title--p2p-my-ads__modal-error{padding:2.4rem 2.4rem 0 !important}.dc-modal__container_p2p-my-ads__modal-error .dc-modal-footer{padding-top:0 !important}.dc-modal__container_p2p-my-ads__modal-error .dc-modal-header{padding-bottom:1rem}\n",""]);const i=a},6977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-balance{display:flex;align-items:center}.my-profile-balance__amount{margin-right:0.8rem}\n",""]);const i=a},5899:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-form .dc-input{margin-bottom:unset}.my-profile-form .dc-input__wrapper{margin-bottom:unset}.my-profile-form>*:first-child{margin-bottom:1.6rem}.my-profile-form__textarea{margin-top:2.5rem}@media (min-width: 320px) and (max-width: 767px){.my-profile-form__textarea:first-child{margin-top:2.5rem}}@media (min-width: 320px) and (max-width: 767px){.my-profile-form__form>:nth-child(3){padding-bottom:7.4rem}}@media (min-width: 768px){.my-profile-form__form>:nth-child(3){padding-bottom:9.8rem}}.my-profile-form__footer{border-top:2px solid var(--general-section-1);background-color:var(--general-main-1);text-align:right}@media (min-width: 320px) and (max-width: 767px){.my-profile-form__footer{width:100vw;padding:1.6rem;position:fixed;bottom:0;left:0}}@media (min-width: 768px){.my-profile-form__footer{position:fixed;bottom:36px;width:672px;padding:1.6rem 2.4rem}}\n",""]);const i=a},9195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-header{display:flex;align-items:center;margin:2.4rem 0}@media (min-width: 320px) and (max-width: 767px){.my-profile-header{margin:0 0 2.4rem}}.my-profile-header__avatar{margin-right:0.8rem}.my-profile-header-details{display:flex}.my-profile-header-name{align-self:center}\n",""]);const i=a},4770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-privacy{margin-bottom:2.4rem}.my-profile-privacy__toggle{margin-right:1.6rem;width:32px;height:17px}.my-profile-privacy__toggle-container{display:flex;align-items:center;margin-top:1.6rem}.my-profile-privacy__toggle-button{width:13px;height:13px;top:2px;left:3px}.my-profile-privacy__toggle-button--active{left:calc(100% - 4px) !important}.dc-toggle-switch:checked+.dc-toggle-switch__label .my-profile-privacy__toggle-button{left:calc(100% - 3px)}\n",""]);const i=a},9711:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-separator-container{align-items:center;display:flex;flex-direction:row;width:100%}.my-profile-separator-container__line{background-color:var(--general-section-1);flex:1;height:1px;margin:0 1.6rem}.my-profile-separator-container__line--invisible{background-color:inherit}.my-profile-separator-container__line:last-child{margin-right:0}\n",""]);const i=a},7585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".my-profile-stats{border-bottom:none;display:flex;margin:2.4rem 0;overflow:auto}.my-profile-stats__cell{display:flex;flex-direction:column;border-right:1px solid var(--general-section-2);white-space:nowrap;align-items:flex-start}.my-profile-stats__cell+.my-profile-stats__cell{padding:0 4rem}@media (min-width: 320px) and (max-width: 767px){.my-profile-stats__cell+.my-profile-stats__cell{padding:0.4rem 1.6rem}}.my-profile-stats__cell:first-child{padding-right:4rem}@media (min-width: 320px) and (max-width: 767px){.my-profile-stats__cell:first-child{padding-right:1.6rem;padding-top:0.4rem;padding-bottom:0.4rem}}@media (min-width: 320px) and (max-width: 767px){.my-profile-stats__cell:nth-child(3){border-right:none}}.my-profile-stats__popover{display:flex;align-items:center;margin-left:auto}\n",""]);const i=a},7298:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"@media (min-width: 768px){.my-profile__content{max-width:672px;min-width:672px}}@media (min-width: 320px) and (max-width: 767px){.my-profile__content{padding:1.6rem;width:100vw}}\n",""]);const i=a},5206:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-nickname__form-header{border-bottom:1px solid var(--general-section-2)}.dp2p-nickname__form-header_wrapper{padding:1.6rem 2.4rem;display:flex;align-items:center;width:100%;justify-content:space-between;box-sizing:border-box}.dp2p-nickname__form-header_right{justify-content:flex-end;padding:2.8rem 2.4rem 0}.dp2p-nickname__form-header--title{font-weight:bold;color:var(--text-prominent)}.dp2p-nickname__form-header--title:first-letter{text-transform:uppercase}.dp2p-nickname__form-header--no-border{border:none}.dp2p-nickname__form-content__centre{align-items:center;display:flex;flex-direction:column;height:calc(100% - 74px);justify-content:center;min-height:300px;padding:0 4rem}.dp2p-nickname__form-content--title{margin:1.4rem 0}.dp2p-nickname__form-content--text{margin-bottom:1.6rem}.dp2p-nickname__form-content--list{color:var(--text-general);font-size:var(--text-size-xs);line-height:1.43}.dp2p-nickname__form-content--list li{list-style-type:disc;margin:0.8rem 1.8rem 0}.dp2p-nickname__form-content--ps{color:var(--text-general);padding-top:0.5rem;margin:1.6rem 0;font-size:var(--text-size-xs);align-self:flex-start;width:100%;text-align:center}.dp2p-nickname__form-field{flex:1;margin-bottom:unset}.dp2p-nickname__form-field:not(:first-child){margin-left:2.4rem}.dp2p-nickname__form-field_wrapper{align-items:center;display:flex;margin-bottom:1.6rem;width:32.8rem}.dp2p-nickname__form-field--textarea{margin-top:4.3rem}.dp2p-nickname__form-field--textarea .dc-input__hint{top:9.7rem}.dp2p-nickname__form-field--textarea .dc-input__counter{right:0rem;top:9.7rem}.dp2p-nickname__form-field--icon{margin:0 1.6rem;transform:rotate(180deg);width:3.66rem}.dp2p-nickname__form-field--trailing{color:var(--text-less-prominent);font-size:var(--text-size-xxs)}@media (min-width: 320px) and (max-width: 767px){.dp2p-nickname__form-field{margin-left:5vw;margin-right:5vw;width:100vw}}.dp2p-nickname__form-info{margin-bottom:1.6rem}.dp2p-nickname__form-info_notes{margin-bottom:2rem}.dp2p-nickname__form-info--title{color:var(--text-less-prominent);font-size:var(--text-size-xxs)}.dp2p-nickname__form-info--text{color:var(--text-general);font-size:var(--text-size-xs);word-break:break-word}.dp2p-nickname__form-info--strong{font-weight:bold}.dp2p-nickname__form-footer{align-items:center;bottom:0;display:flex;justify-content:flex-end;padding:2.4rem;width:100%}@media (min-width: 320px) and (max-width: 767px){.dp2p-nickname__form-footer{border-top:2px solid var(--general-section-1);padding:1.6rem}}.dp2p-nickname__form-close_icon{cursor:pointer;fill:var(--text-general)}@media (min-width: 320px) and (max-width: 767px){.dp2p-nickname__form-wrapper{height:100%}}\n",""]);const i=a},3801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"@media (min-width: 320px) and (max-width: 767px){.cancel-modal__footer .dc-btn__group{align-items:center;display:flex;flex-direction:column}.cancel-modal__footer .dc-btn__group .dc-btn{margin-top:0.8rem;width:80vw}}.cancel-modal__warning{padding-top:0.8rem}.dc-modal__container_cancel-modal .dc-modal-header{border-bottom:none}.dc-modal__container_cancel-modal .dc-modal-body{padding:0.8rem 2.4rem}.dc-modal__container_cancel-modal .dc-modal-footer{border-top:none;padding:0 1.6rem 1.6rem}\n",""]);const i=a},8451:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".order-details-complain-modal__body{flex-grow:1}@media (min-width: 320px) and (max-width: 767px){.order-details-complain-modal__body{flex-direction:column}}.order-details-complain-modal__explanation{background-color:var(--general-section-1);margin-top:1.6rem;padding:1.6rem}@media (min-width: 320px) and (max-width: 767px){.order-details-complain-modal__explanation{border-radius:4px;margin:1.6rem}}@media (min-width: 768px){.order-details-complain-modal__explanation{border-radius:8px}}.order-details-complain-modal__radio-group:not(.dc-radio-group__item){display:inline}@media (min-width: 320px) and (max-width: 767px){.order-details-complain-modal__radio-group:not(.dc-radio-group__item){margin-top:0}.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item-wrapper{border-bottom:1px solid var(--general-section-1)}.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item-wrapper>.dc-radio-group__item{margin:1.6rem}}@media (min-width: 768px){.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item{border-bottom:1px solid var(--general-section-1);padding:1.6rem 0}}.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item .dc-radio-group__label{flex:1}.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item .dc-radio-group__circle{align-self:start;margin-top:0.3rem;border:2px solid var(--text-less-prominent);transition:all 0.1s ease-in-out}.order-details-complain-modal__radio-group:not(.dc-radio-group__item) .dc-radio-group__item .dc-radio-group__circle--selected{border:4px solid var(--brand-red-coral)}.dc-modal__container_order-details-complain-modal .dc-modal-footer{border-top:solid 2px var(--general-section-1)}\n",""]);const i=a},2848:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dc-modal__container_order-details-confirm-modal .dc-modal-header{border-bottom:none}.dc-modal__container_order-details-confirm-modal .dc-modal-header__title{padding:2.4rem}@media (min-width: 320px) and (max-width: 767px){.dc-modal__container_order-details-confirm-modal .dc-modal-header__title{padding:2.4rem 1.6rem 1.6rem}}.dc-modal__container_order-details-confirm-modal .dc-modal-body{padding:0 2.4rem}@media (min-width: 320px) and (max-width: 767px){.dc-modal__container_order-details-confirm-modal .dc-modal-body{padding:0.8rem 1.6rem}}\n",""]);const i=a},8092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".order-details{display:flex;flex-direction:row;flex:1}@media (min-width: 768px){.order-details{min-height:512px;max-height:512px}}.order-details-card{background-color:var(--general-main-1);display:flex;flex-direction:column}@media (min-width: 768px){.order-details-card{border-radius:4px;border:8px solid var(--general-section-1);width:456px}}@media (min-width: 320px) and (max-width: 767px){.order-details-card{height:100%;width:100%}}.order-details-card__header{display:flex;justify-content:space-between;color:var(--text-general);position:relative;border-bottom:1px solid var(--general-section-1)}@media (min-width: 768px){.order-details-card__header{padding:1.6rem 2.4rem}}@media (min-width: 320px) and (max-width: 767px){.order-details-card__header{padding:1.6rem}}.order-details-card__header--left{align-self:flex-start}@media (min-width: 320px) and (max-width: 767px){.order-details-card__header--right{align-items:center;display:flex}}.order-details-card__header-id{color:var(--text-less-prominent);font-size:var(--text-size-xxs);line-height:1.8rem;margin-top:0.4rem}.order-details-card__header-status{font-size:var(--text-size-s);line-height:2.4rem;font-weight:bold}.order-details-card__header-status--info{color:var(--text-less-prominent)}.order-details-card__header-status--success{color:var(--status-success)}.order-details-card__header-status--danger{color:var(--status-danger)}.order-details-card__header-status--alert{color:var(--status-warning)}.order-details-card__header-amount{line-height:1.5;font-size:2.4rem}.order-details-card__header-method{font-size:1.2rem;border:1px solid var(--border-normal);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:1.6rem;padding:0.4rem 1rem;margin-top:0.8rem}.order-details-card__header-timer{font-size:1.2rem;line-height:1.5;text-align:center}.order-details-card__header-timer-counter{margin-top:0.4rem;border:1px solid var(--border-normal);border-radius:16px;padding:0.4rem 0.8rem}.order-details-card__header-payment-info{margin-top:0.8rem;font-size:1.4rem;line-height:1.4;color:var(--text-general);word-break:break-word}@media (min-width: 768px){.order-details-card__info{padding:1.6rem 2.4rem}}@media (min-width: 320px) and (max-width: 767px){.order-details-card__info{flex:1;min-height:0;padding:1.6rem}}.order-details-card__info-block{margin-bottom:1.6rem}.order-details-card__info-block-value{display:flex;flex-direction:column;font-size:1.4rem;line-height:1.43;color:var(--text-general);word-break:break-word}.order-details-card__info-columns{display:flex;flex-flow:row nowrap}.order-details-card__info--right,.order-details-card__info--left{display:flex;flex-flow:column nowrap;flex:1}.order-details-card__footer{border-top:1px solid var(--general-section-1);margin-top:auto;font-size:1.4rem;line-height:1.43;color:var(--text-general);padding:1.6rem 2.4rem;display:flex;height:72px}@media (min-width: 320px) and (max-width: 767px){.order-details-card__footer{border-top:unset;height:100%;padding:unset}}.order-details-card__footer--left{margin-right:auto}.order-details-card__footer--right{margin-left:auto}.order-details-card__message{font-size:var(--text-size-xs);line-height:2rem;color:var(--text-general)}.order-details-card__modal-checkbox{margin:2.4rem -0.7rem}.dc-modal__container_orders__popup .dc-checkbox{margin-top:2.4rem}.dc-modal__container_orders__popup .dc-checkbox__box{margin-left:0}\n",""]);const i=a},7392:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".order-chat{background-color:var(--general-main-1);display:flex;flex-direction:column;flex:1}@media (min-width: 768px){.order-chat{border-radius:4px;border:8px solid var(--general-section-1);margin-left:3.2rem;width:440px}}@media (min-width: 320px) and (max-width: 767px){.order-chat{height:100%;max-height:100%;width:100vw;overflow:hidden}}.order-chat__error{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.order-chat__error-retry{margin-top:1.6rem}.order-chat__header{background-color:var(--general-main-1);border-bottom:1px solid var(--general-section-1);display:flex;height:76px}@media (min-width: 768px){.order-chat__header{border-top-left-radius:4px;border-top-right-radius:4px}}@media (min-width: 320px) and (max-width: 767px){.order-chat__header{padding:1.6rem}}.order-chat__header-icon{align-items:center;align-self:center;border-radius:50%;display:flex;height:40px;justify-content:center;width:40px}@media (min-width: 768px){.order-chat__header-icon{margin:1.6rem 1.6rem 1.6rem 2.4rem}}@media (min-width: 320px) and (max-width: 767px){.order-chat__header-icon{margin:1.6rem;margin-left:0}}.order-chat__header-user{display:flex;flex-direction:column;justify-content:center}.order-chat__header-user-name{display:block}.order-chat__header-user-timestamp{display:block}.order-chat__header-user-timestamp:first-letter{text-transform:capitalize}.order-chat__messages{background-color:var(--general-main-1);margin-top:auto;margin-right:0.8rem;flex:1 1 0}.order-chat__messages-date{margin-top:1.6rem;text-align:center}.order-chat__messages-item{display:flex;flex-direction:column;margin:1.6rem 1.2rem 1.6rem 2.4rem}.order-chat__messages-item-file{color:inherit}.order-chat__messages-item-image{width:50%}.order-chat__messages-item-image>img{border:1px solid var(--border-normal);border-radius:4px;width:100%;height:auto}.order-chat__messages-item-image>img:hover{border:1px solid var(--border-hover)}.order-chat__messages-item-message{border-radius:1.6rem;max-width:100%;padding:0.8rem 1.6rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;word-break:break-word}.order-chat__messages-item-message>p{white-space:pre-wrap}.order-chat__messages-item-timestamp{align-items:center;display:flex;margin-top:0.4rem}.order-chat__messages-item-timestamp-receipt{margin-left:0.4rem}.order-chat__messages-item--incoming{align-items:flex-start}.order-chat__messages-item--incoming .order-chat__messages-item-message{background-color:var(--general-active);border-bottom-left-radius:4px}.order-chat__messages-item--outgoing{align-items:flex-end}.order-chat__messages-item--outgoing .order-chat__messages-item-message{background-color:var(--brand-secondary);border-bottom-right-radius:4px}.order-chat__footer{background-color:var(--general-main-1);border-top:2px solid var(--general-section-1);max-height:33.333%}.order-chat__footer-disclaimer{margin:0.8rem 2.4rem}.order-chat__footer--empty{margin-top:auto}.order-chat__footer-icon-container{align-items:center;border-radius:4px;bottom:0.4rem;cursor:pointer;display:flex;height:32px;justify-content:center;margin-right:0.4rem;position:absolute;right:0;width:32px}@media (hover: hover){.order-chat__footer-icon-container:hover{background-color:var(--general-hover)}}.order-chat__footer-input{position:relative;height:calc(100% - 1.6rem - 2.6rem);margin:1.6rem 2.4rem 0.8rem}.order-chat__footer .dc-input{height:100%;min-height:40px;margin-bottom:0}.order-chat__footer .dc-input__wrapper{margin-bottom:unset;height:100%}.order-chat__footer .dc-input__counter{bottom:-2rem;right:0;top:unset}.order-chat__footer .dc-input__field[type='textarea']{overflow-y:auto;height:40px;min-height:40px;max-height:100%;width:calc(100% - 32px - 0.8rem)}.order-chat__footer .dc-input__field[type='textarea']::-webkit-scrollbar{width:5px;height:5px;background-color:transparent;border-radius:10px}.order-chat__footer .dc-input__field[type='textarea']::-webkit-scrollbar-track{background-color:transparent}.order-chat__footer .dc-input__field[type='textarea']::-webkit-scrollbar-thumb{border-radius:10px;background-color:var(--state-active)}.order-chat__footer .dc-input__trailing-icon{margin-right:0.4rem !important;top:unset}\n",""]);const i=a},3705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,'.orders{flex:1;display:flex;flex-direction:column}@media (min-width: 320px) and (max-width: 767px){.orders .initial-loader{height:80%}}@media (min-width: 320px) and (max-width: 767px){.orders .p2p-empty__button{width:100%;padding:1rem}}@media (min-width: 320px) and (max-width: 767px){.orders .p2p-empty{padding:4rem 1.6rem;margin:0rem}}.orders__empty{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 auto;transform:translate(-100%, 20%);text-align:center}.orders__empty-text{margin:24px 0;font-weight:700;font-size:var(--text-size-s)}@media (min-width: 320px) and (max-width: 767px){.orders-tab{height:7.7rem;width:100%;display:flex;justify-content:center;flex-direction:column;border-bottom:1px solid var(--general-section-1)}}.orders-tab__header{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:4px}.orders-tab__header-filter .dc-button-menu__wrapper button.dc-btn{height:3.6rem;min-width:12rem !important;white-space:nowrap;padding:0.8rem 1.8rem}@media (min-width: 320px) and (max-width: 767px){.orders-tab__header{align-self:center}}.orders__button{margin:0 1.6rem}.orders__dialog{position:absolute;height:100%;width:100%;top:0;left:0;background:var(--shadow-menu)}.orders__dialog .dc-dialog__dialog{width:auto;height:auto;padding:0;max-width:440px;min-height:0;min-width:44rem}.orders__dialog .dc-dialog__content{margin-bottom:0;width:100%;max-width:100%}.orders__separator{width:100%;border-bottom:1px solid var(--general-section-1)}.orders__mobile{display:grid;grid-template-areas:"header header-right" "title title";padding:1.6rem;border-bottom:1px solid var(--general-section-1)}.orders__mobile--attention{background:var(--button-tertiary-hover);border-bottom:2px solid var(--general-section-1)}.orders__mobile-highlight-danger{background-color:#fff8f8}.orders__mobile .dc-table__row{border-bottom:unset}.orders__mobile-separator{width:100vw;height:1px;border-top:1px solid var(--general-section-1);position:absolute;left:0rem;margin:1.6rem 0rem}.orders__mobile-header{grid-area:header;display:flex;justify-content:space-between;align-items:center;height:2.4rem}.orders__mobile-header-right{grid-area:header-right;display:flex;justify-self:end}.orders__mobile-title{align-items:start;display:flex;flex-direction:column;grid-area:title;height:4.9rem;justify-content:space-around;justify-self:start}.orders__mobile-chat{margin-left:0.9rem;display:flex;align-self:center}.orders__mobile-time{border:solid 1px var(--border-normal);border-radius:1.6rem;width:7.8rem;height:2.4rem;letter-spacing:1px}.orders__mobile-status{width:auto;padding:0.2rem 1.6rem;font-weight:bold;text-align:center;font-size:var(--text-size-xs);border-radius:1.6rem}.orders__table{display:flex;flex:1;flex-direction:column}.orders__table-body{flex:1;display:flex;flex-direction:column}.orders__table-row{padding:2.4rem;cursor:pointer}.orders__table-row--attention{background:var(--button-tertiary-hover)}.orders__table-row:not(.orders__table-row--header){cursor:pointer}.orders__table-row:not(.orders__table-row--header):hover{background:var(--general-hover)}.orders__table-time{border:solid 1px var(--border-normal);border-radius:16px;width:78px;height:24px;padding:2px;text-align:center;font-size:var(--text-size-xxs);letter-spacing:1px}.orders__table-grid{grid-template-columns:1.5fr 1.5fr 2fr 2.5fr 1.5fr 1.5fr 2fr}.orders__table-grid--active{grid-template-columns:1.5fr 1.5fr 2fr 2.5fr 1.5fr 1.5fr 1.5fr}.orders__table-status{font-weight:bold;border-radius:16px;padding:0.2rem 1.6rem;white-space:nowrap}.orders__table-status--danger{color:var(--brand-red-coral);background-color:rgba(236,63,63,0.16)}.orders__table-status--alert{color:var(--status-warning);background-color:rgba(255,173,58,0.16)}.orders__table-status--success{color:var(--text-profit-success);background-color:rgba(75,180,179,0.16)}.orders__table-status--disabled{color:var(--text-less-prominent);background-color:rgba(153,153,153,0.16)}.orders__table-status--info{color:var(--status-info);background-color:rgba(28,90,227,0.16)}.orders__table .dc-table__header>.orders__table-grid{padding:0 2.4rem}.orders__data-list{flex:1}.orders__data-list__data-list-body{flex:1}.orders__data-list .data-list__body-wrapper{flex:1}\n',""]);const i=a},592:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".page-return{display:flex;justify-content:flex-start;align-items:center;font-size:1.6rem;font-weight:bold;line-height:1.75;color:var(--text-general);margin:2.4rem 0}.page-return__button{line-height:1rem;cursor:pointer;border-radius:4px;padding-right:0.8rem}\n",""]);const i=a},2774:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-table-error{height:100%;width:100%;display:flex;justify-content:center;margin-top:5rem}@media (min-width: 320px) and (max-width: 767px){.dp2p-table-error{text-align:center}}\n",""]);const i=a},2733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"",""]);const i=a},8212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-unsupported-account{display:flex;flex-grow:1;justify-content:center;align-items:center}\n",""]);const i=a},3654:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-avatar{align-items:center;border-radius:50%;display:flex;justify-content:center}\n",""]);const i=a},767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".p2p-verification__download{text-align:center;margin-top:6.4rem}.p2p-verification__text{font-size:var(--text-size-s);font-weight:bold;margin:1.6rem 0}.p2p-verification__app-store{margin-top:2.4rem}\n",""]);const i=a},7546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2609),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".dp2p-verification{width:100%;max-width:67.2rem;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:6.8rem}@media (min-width: 320px) and (max-width: 767px){.dp2p-verification{margin-top:1rem;padding:1.6rem;transform:none;width:100vw}}.dp2p-verification__icon{margin-bottom:3.4rem}.dp2p-verification__text{text-align:center}.dp2p-verification__text-title{font-size:var(--text-size-s);font-weight:bold;margin-bottom:1rem;line-height:1.5;color:var(--text-general)}.dp2p-verification__text-description{margin-bottom:2.4rem}.dp2p-verification__text-description p:first-child{margin-bottom:0.4rem}.dp2p-verification__text-description p:nth-child(2){padding:0 5.5rem}.dp2p-verification__checklist{width:400px}.dp2p-verification__checklist .dc-checklist__item{min-width:40rem}@media (min-width: 320px) and (max-width: 767px){.dp2p-verification__checklist .dc-checklist__item{min-width:100%}}@media (min-width: 320px) and (max-width: 767px){.dp2p-verification__checklist{width:100%}}.dp2p-verification__wrapper{padding-top:3.5rem}.dp2p-verification__wrapper--mobile{padding:3.5rem 2.5rem 0}\n",""]);const i=a},2609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},2165:function(e,t,n){e.exports=function(e,t,r){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(e),o=a(t),s=a(r);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}var O=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"3.1.2"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}(),T={},I=function(){function e(e){this._container=e}return e.create=function(t,n){return T[t]=new e(n),T[t]},e.get=function(e){return e||(e=Sa.getInstance()._iid),T[e]},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._container[e]},e.prototype.set=function(e,t){this._container[e]=t},e.prototype.remove=function(e){this._container.hasOwnProperty(e)&&delete this._container[e]},e}(),x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function M(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function R(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function U(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var L,F=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name="SendBirdException",r.code=n||0,r.message=t,r}return D(t,e),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===t.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===t.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenRevokedError",{get:function(){return this.code===t.SESSION_TOKEN_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_KEY_EXPIRED",{get:function(){return 400309},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_DEACTIVATED",{get:function(){return 400300},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NON_EXISTING_USER",{get:function(){return 400301},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_EXPIRED",{get:function(){return 400302},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REVOKED",{get:function(){return 400310},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_INITIALIZATION",{get:function(){return 800100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_REQUIRED",{get:function(){return 800101},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_CANCELED",{get:function(){return 800102},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_PARAMETER",{get:function(){return 800110},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ERROR",{get:function(){return 800120},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ROUTING_ERROR",{get:function(){return 800121},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_DATA",{get:function(){return 800130},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_ERROR_DATA",{get:function(){return 800140},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WRONG_CHANNEL_TYPE",{get:function(){return 800150},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MARK_AS_READ_RATE_LIMIT_EXCEEDED",{get:function(){return 800160},enumerable:!1,configurable:!0}),Object.defineProperty(t,"QUERY_IN_PROGRESS",{get:function(){return 800170},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ACK_TIMEOUT",{get:function(){return 800180},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LOGIN_TIMEOUT",{get:function(){return 800190},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_CLOSED",{get:function(){return 800200},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_FAILED",{get:function(){return 800210},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_FAILED",{get:function(){return 800220},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_UPLOAD_CANCEL_FAILED",{get:function(){return 800230},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_CANCELED",{get:function(){return 800240},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_DUPLICATED",{get:function(){return 800250},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_SIZE_LIMIT_EXCEEDED",{get:function(){return 800260},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REQUEST_FAILED",{get:function(){return 800500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_SUCCESS",{get:function(){return 800501},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_FAILED",{get:function(){return 800502},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CHANNEL_NOT_FOUND",{get:function(){return 900500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_NOT_MEMBER",{get:function(){return 900020},enumerable:!1,configurable:!0}),t}(Error),j=function(){function e(){this.sessionToken=null,this.sessionKey=null,this.eKey=null}return e.prototype.hasSession=function(){return!!this.sessionKey},e}(),z={},H=function(){function e(e,t){var n=this;void 0===t&&(t={}),this._iid=e,Object.keys(t).forEach((function(e){var r=t[e];"function"==typeof r&&(n[e]=n.getClonedClass(r))})),z[e]=this}return e.get=function(e){return e?z[e]:{}},e.prototype.getClonedClass=function(e){var t=this._iid;return function(n){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(this,e)||this}return D(r,n),Object.defineProperty(r,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_name",{get:function(){return e.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),r}(e)},e}(),B={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},G=function(e){m(n,e);var t=b(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"log",value:function(e){for(var t,n,r,a,i,o=this.getLogLevelText(e);o.length<8;)o+=" ";for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];switch(l.unshift("[".concat(o,"]")),e){case"verbose":(t=console).log.apply(t,l);break;case"debug":(n=console).log.apply(n,l);break;case"info":(r=console).info.apply(r,l);break;case"warn":(a=console).warn.apply(a,l);break;case"error":(i=console).error.apply(i,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),n}(function(){function e(){d(this,e)}return h(e,[{key:"getLogLevelText",value:function(e){return B[e]}}]),e}()),V={DEBUG:"debug",PRODUCTION:"production"},q=V.PRODUCTION,K={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},W=[K.NONE,K.ERROR,K.WARN,K.INFO,K.DEBUG,K.VERBOSE],Y=K.WARN,Q=W.indexOf(Y),J=[new G],X=function(){function e(){d(this,e)}return h(e,null,[{key:"Mode",get:function(){return V}},{key:"mode",get:function(){return q},set:function(t){Object.keys(e.Mode).map((function(t){return e.Mode[t]})).indexOf(t)>-1&&(q=t)}},{key:"supportedLogLevels",get:function(){return K}},{key:"logLevel",get:function(){return W[Q]},set:function(e){W.includes(e)||(e=Y),Q=W.indexOf(e)}},{key:"defaultLogLevel",get:function(){return Y}},{key:"isDisplayableLogLevel",value:function(e){var t=W.indexOf(e);return 0<=t&&t<=Q}},{key:"log",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.isDisplayableLogLevel(t)&&J.forEach((function(e){return e.log.apply(e,[t].concat(r))}))}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=[];Array.isArray(n[n.length-1])&&(a=n.pop()),a.some((function(t){return e.isDisplayableLogLevel(t.level)}))&&J.filter((function(e){return e instanceof G})).forEach((function(e){e.groupStart.apply(e,n),a.forEach((function(t){return e.log.apply(e,[t.level].concat(A(t.messages)))})),e.groupEnd()}))}}]),e}(),$=function(){function e(){d(this,e),this._queue=[],this.locked=!1}return h(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),Z=function(){function e(t){d(this,e),this.sb=t,this.mutex=new $,this.pingTimer=null,this.pingTimeoutTimer=null}return h(e,[{key:"ping",value:function(){var e=this,t=H.get(this.sb._iid).Command.bPing(),n=I.get(this.sb._iid).container,r=n.wsAdapter,a=n.pongTimeout;r.client.send(t),X.debug("`PING`"),this.pingTimeoutTimer=setTimeout((function(){X.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()}),a)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=I.get(this.sb._iid).container.pingInterval;this.mutex.lock((function(n){e.stop(),e.pingTimer=setInterval((function(){e.ping()}),t),n()}))}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),ee=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},te=function(){return"undefined"==typeof window&&"undefined"!=typeof process&&("node"===process.title||void 0!==process.versions&&process.versions.node||"[object process]"===String(process))},ne=[F.CONNECTION_REQUIRED,F.NETWORK_ERROR,F.ACK_TIMEOUT,F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED,F.FILE_UPLOAD_CANCEL_FAILED,F.REQUEST_CANCELED,500901,500910,900200],re=[F.SESSION_TOKEN_EXPIRED,F.SESSION_TOKEN_REVOKED,F.USER_DEACTIVATED,F.NON_EXISTING_USER],ae=[F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED],ie=function(){function e(){}return e.deepEqual=function(e,t){if(e!==t){var n=P({},e),r=P({},t);return!(n.hasOwnProperty("messageId")&&r.hasOwnProperty("messageId")&&n.messageId!==r.messageId||n.hasOwnProperty("reqId")&&r.hasOwnProperty("reqId")&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}return!0},e.isResendableError=function(e){return e>0&&ne.indexOf(e)>=0},e.isAutoResendableError=function(e){return e>0&&ae.indexOf(e)>=0},e.isNonAutoReconnectableError=function(e){return e>0&&re.indexOf(e)>=0},e.isFile=function(e){var t="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!t)if(te()){if("undefined"!=typeof Buffer)return e instanceof Buffer}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return t},e}();!function(e){e.FILE="file",e.BLOB="blob"}(L||(L={}));var oe=function(){function e(){}var t;return t=e,e.convertFileToDataUrl=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsDataURL(e)}))},e.convertFileToArrayBuffer=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsArrayBuffer(e)}))},e.convertDataUrlToByteArray=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return[i,n]},e.convertDataURLtoFile=function(e,n){var r=t.convertDataUrlToByteArray(e),a=r[0],i=r[1];return new File([a],n,{type:i})},e.convertDataURLtoBlob=function(e){var n=t.convertDataUrlToByteArray(e),r=n[0],a=n[1];return new Blob([r],{type:a})},e.convertArrayBufferToFile=function(e,t){return new File([e],t)},e.isFile=function(e){return"File"in window&&e instanceof File},e.isBlob=function(e){return"Blob"in window&&e instanceof Blob},e.convertBlobToBuffer=function(n){return M(void 0,void 0,void 0,(function(){var r;return R(t,(function(t){switch(t.label){case 0:return[4,e.convertFileToArrayBuffer(n)];case 1:return r=t.sent(),[2,Buffer.from(r)]}}))}))},e}(),se=function(){function e(e){var t=this;this.fields={},e&&Object.keys(e).forEach((function(n){t.fields[n]={value:e[n]},ie.isFile(e[n])&&(t.fields[n].filename=e[n].name)})),this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return e.prototype.add=function(e,t,n){void 0===n&&(n=null),this.fields[e]={value:t,filename:n}},e.prototype.remove=function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]},e.prototype.yield=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,l,c,u,d,p,h=this;return R(this,(function(f){switch(f.label){case 0:for(e=!1,t=Object.keys(this.fields),n=0,r=t;n<r.length;n++)if(l=r[n],ie.isFile(this.fields[l].value)){e=!0;break}if(!e)return[3,10];a=new o.default,i=0,s=t,f.label=1;case 1:return i<s.length?(l=s[i],c=this.fields[l],ie.isFile(c.value)?(u=c.value).filename||u.name?(a.append(l,c.value,u.filename||u.name),[3,6]):[3,2]:[3,7]):[3,9];case 2:return u.data?(a.append(l,c.value,u.data.name),[3,6]):[3,3];case 3:return d=c.value,"undefined"!=typeof window&&"undefined"!=typeof process&&process.title.endsWith("node")&&process.versions&&process.versions.node&&"undefined"!=typeof Blob&&d instanceof Blob||"undefined"!=typeof File&&d instanceof File?[4,oe.convertBlobToBuffer(d)]:[3,5];case 4:d=f.sent(),f.label=5;case 5:a.append(l,d,"unnamed"),f.label=6;case 6:return[3,8];case 7:a.append(l,c.value),f.label=8;case 8:return i++,[3,1];case 9:return[2,a];case 10:return p={},Object.keys(this.fields).forEach((function(e){p[e]=h.fields[e].value})),[2,p]}}))}))},e}(),le=function(e,t,n){return void 0===n&&(n=null),new Promise((function(r,a){t((function(t,i){void 0===i&&(i=null),n&&(I.get(e).get("isErrorFirstInCallback")?n(t,i):n(i,t)),t?a(t):r(i)}))}))},ce=888e3,ue=function(){function e(t){d(this,e),this.sb=t,this.cls=H.get(this.sb._iid)}return h(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return n?r&&r.internal?"".concat(t,"/v").concat(O.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(O.SDK_MAJOR_VERSION).concat(n):t}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noSessionKey,r=void 0!==n&&n,a=t.accessToken,i=void 0===a?null:a,s=e instanceof o.default&&"function"==typeof e.getHeaders?e.getHeaders():{},l=I.get(this.sb._iid).container,c=l.appId,u=l.auth,d=l.extensions,p=l.getUserAgentWithExtensions;return s.SendBird="JS,".concat(O.OS_VERSION,",").concat(O.SDK_VERSION,",").concat(c),s["SB-User-Agent"]=encodeURIComponent(p(d)),!r&&u.sessionKey&&(s["Session-Key"]=u.sessionKey),i&&(s["App-Id"]=c,s["Access-Token"]=i),s["Request-Sent-Timestamp"]=(new Date).getTime().toString(),s}},{key:"_createQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=[];return Object.keys(t).forEach((function(e){var r=t[e];if(null!=r){var a;a="object"===u(r)?Array.isArray(r)?r.map((function(e){return encodeURIComponent("string"==typeof e?e.trim():e)})).join(","):encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),n.push("".concat(e,"=").concat(a))}})),n.length>0?"".concat(e,"?").concat(n.join("&")):e}catch(t){return X.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_request",value:function(e,t,n,r){var a=this;this.checkRouting((function(s,l){if(s)r(new F("Request failed.",F.REQUEST_FAILED),null);else{var c=a._buildUrl({apiHost:l.apiHost,url:t,params:n});(n?n.yield():Promise.resolve({})).then((function(s){var l=a._createHeader(s,n?n.options:{}),u=[{level:X.supportedLogLevels.DEBUG,messages:["url:",t]},{level:X.supportedLogLevels.DEBUG,messages:["data:",s]}],d=null;switch(e){case"GET":d=a._createQuery(c,s);break;case"POST":case"PUT":d=c;break;case"DELETE":d=a._createQuery(c,s)}var p=null;if("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer||te()||"function"!=typeof fetch)switch(e){case"GET":p=i.default.get(d,{headers:l,validateStatus:a._validateStatus});break;case"POST":var h=null;if(s instanceof o.default){var f=i.default.CancelToken.source();h=f.token;var m=a.cls.FileMessageQueue,_=n.upload.reqId;_&&(u.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",_]}),m.uploadRequest[_]=f)}p=i.default.post(d,"function"==typeof s.getBuffer?s.getBuffer():s,{headers:l,validateStatus:a._validateStatus,cancelToken:h,onUploadProgress:function(e){n.upload.progressHandler&&n.upload.progressHandler(e,n.upload.reqId)}});break;case"PUT":p=i.default.put(d,s,{headers:l,validateStatus:a._validateStatus});break;case"DELETE":p=i.default.delete(d,{headers:l,validateStatus:a._validateStatus})}else{var y={method:e,headers:l};switch(e){case"GET":break;case"POST":if(s instanceof o.default){if("function"==typeof AbortController){var g=new AbortController,v=g.signal;y.signal=v;var b=a.cls.FileMessageQueue,E=n.upload.reqId;E&&(u.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",E]}),b.uploadRequest[E]=g)}y.body="function"==typeof s.getBuffer?s.getBuffer():s}else l["Content-Type"]="application/json; charset=utf-8",y.body=JSON.stringify(s);break;case"PUT":s instanceof o.default?y.body="function"==typeof s.getBuffer?s.getBuffer():s:(l["Content-Type"]="application/json; charset=utf-8",y.body=JSON.stringify(s))}p=fetch(d,y).then((function(e){return e.json().then((function(t){if(!a._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:t}};return Promise.resolve({data:t})}))}))}X.group("".concat(e," request"),u),u=[],p.then((function(t){try{var a=t.data;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest(),u.push({level:X.supportedLogLevels.DEBUG,messages:["data:",a]}),r(null,a)}catch(e){throw{code:ce,rawError:e}}})).catch((function(i){if(i.code===ce)throw i.rawError;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest();var o=a._handleError(i);if(u.push({level:X.supportedLogLevels.DEBUG,messages:["error:",o]}),t&&n)if(n.options&&n.options.isSessionRefresh)r(o,null);else{var s=I.get(a.sb._iid).container.sessionManager;s.isSessionError(o)?s.refreshSessionIfExpiredError(o).then((function(){return r(new F("Session is refreshed successfully.",F.SESSION_REFRESH_SUCCESS),null)})).catch((function(e){return r(new F("Session refresh failed.",F.SESSION_REFRESH_FAILED),null)})):r(o,null)}else r(o,null)})).finally((function(){return X.group("".concat(e," response"),u)}))}))}}))}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new F("Request has been canceled.",F.REQUEST_CANCELED);if(n){var r=n.data,a=r?r.message:"Request failed.",i=r?r.code:F.REQUEST_FAILED;return new F(a,i)}return new F("Request failed.",F.REQUEST_FAILED)}return new F("There was a network error.",F.NETWORK_ERROR)}},{key:"get",value:function(e,t,n){this._request("GET",e,t,n)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,t,n){this._request("POST",e,t,n)}},{key:"put",value:function(e,t,n){this._request("PUT",e,t,n)}},{key:"delete",value:function(e,t,n){this._request("DELETE",e,t,n)}},{key:"refreshSessionKey",value:function(t,n){var r=this,a=t.accessToken;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(i.userId)),s=new se;s.options.isSessionRefresh=!0,s.options.noSessionKey=!0,s.options.accessToken=a,r.post(o,s,n)}}))}},{key:"updateCurrentUserInfo",value:function(t,n){var r=this,a=t.nickname,i=t.profileUrl,o=t.profileImage,s=t.preferredLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),u=new se;a&&u.add("nickname",a),i&&u.add("profile_url",i),o&&u.add("profile_file",o,o.name),s&&u.add("preferred_languages",s),r.put(c,u,n)}}))}},{key:"getMyGroupChannelChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.ts,i=t.token,o=t.customTypes,s=t.includeEmpty,l=t.includeFrozen;r.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(c.userId)),d=new se({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});i&&d.add("token",i),a&&d.add("change_ts",a),o&&o.length>0&&d.add("custom_types",o),"boolean"==typeof s&&d.add("show_empty",s),"boolean"==typeof l&&d.add("show_frozen",l),r.get(u,d,n)}}))}),n)}},{key:"getChannelInvitationPreference",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"getGroupChannelCount",value:function(t,n){var r=this,a=t.memberStateFilter;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=r.cls.GroupChannel,s=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId)),l="";switch(a){case o.MemberStateFilter.JOINED:l="joined";break;case o.MemberStateFilter.INVITED:l="invited";break;case o.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case o.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;default:l="all"}var c=new se({state:l});r.get(s,c,n)}}))}},{key:"getUnreadItemCount",value:function(t,n){var r=this,a=t.keys;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(i.userId)),s=new se({item_keys:a});r.get(o,s,n)}}))}},{key:"getTotalUnreadMessageCount",value:function(t,n){var r=this,a=t.customTypesFilter,i=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(o.userId)),l=new se({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(s,l,n)}}))}},{key:"getTotalUnreadChannelCount",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"searchMessages",value:function(t,n){var r=this,a=t.keyword,i=t.limit,o=t.reverse,s=t.exactMatch,l=t.channelUrl,c=t.channelCustomType,u=t.messageTimestampFrom,d=t.messageTimestampTo,p=t.order,h=t.nextToken,f=t.advancedQuery,m=t.targetFields;this.sb.ConnectionManager.ready((function(t,_){if(t)n(t,null);else{var y=e.Path.SEARCH_MESSAGE,g=new se({limit:i,reverse:o,query:a,custom_type:c});u&&g.add("message_ts_from",u),d&&g.add("message_ts_to",d),l&&g.add("channel_url",l),p&&g.add("sort_field",p),"boolean"==typeof s&&g.add("exact_match",s),null!==h&&h.length>0&&g.add("after",h),"boolean"==typeof f&&g.add("advanced_query",f),m&&Array.isArray(m)&&g.add("target_fields",m),r.get(y,g,n)}}))}},{key:"markAsReadAll",value:function(t,n){var r=this,a=t.channelUrls;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(i.userId)),s=new se;a&&s.add("channel_urls",a),r.put(o,s,n)}}))}},{key:"markAsDelivered",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(a)),l=new se;i&&l.add("user_id",i),r.put(s,l,n)}}))}},{key:"setChannelInvitationPreference",value:function(t,n){var r=this,a=t.isAutoAccept;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId)),s=new se({auto_accept:a});r.put(o,s,n)}}))}},{key:"blockUser",value:function(t,n){var r=this,a=t.blockedUserId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(i.userId)),s=new se({target_id:a});r.post(o,s,n)}}))}},{key:"unblockUser",value:function(t,n){var r=this,a=t.unblockedUserId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"getPushTriggerOption",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setPushTriggerOption",value:function(t,n){var r=this,a=t.pushTriggerOption;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId)),s=new se({push_trigger_option:a});r.put(o,s,n)}}))}},{key:"getPushTokens",value:function(t,n){var r=this,a=t.ts,i=t.token,o=t.type;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(o)),c=new se;i&&c.add("token",i),a&&c.add("created_ts",a),r.get(l,c,n)}}))}},{key:"getPushTemplate",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setPushTemplate",value:function(t,n){var r=this,a=t.templateName;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId)),s=new se({name:a});r.put(o,s,n)}}))}},{key:"getDoNotDisturb",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setDoNotDisturb",value:function(t,n){var r=this,a=t.doNotDisturbOn,i=t.startHour,o=t.startMin,s=t.endHour,l=t.endMin,c=t.timezone;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var d=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(u.userId)),p=new se({do_not_disturb:a,start_hour:i,start_min:o,end_hour:s,end_min:l,timezone:c});r.put(d,p,n)}}))}},{key:"getSnoozePeriod",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setSnoozePeriod",value:function(t,n){var r=this,a=t.snoozeOn,i=t.startTs,o=t.endTs;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(s.userId)),c=new se({snooze_enabled:a,snooze_start_ts:i,snooze_end_ts:o});r.put(l,c,n)}}))}},{key:"registerGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId)),s=new se({gcm_reg_token:a,always_push:!0});r.post(o,s,n)}}))}},{key:"unregisterGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"unregisterAllGCMPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"registerAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId)),s=new se({apns_device_token:a,always_push:!0});r.post(o,s,n)}}))}},{key:"unregisterAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"unregisterAllAPNSPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"unregisterAllPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"loadFriendList",value:function(t,n){var r=this,a=t.token,i=t.limit;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(o.userId)),l=new se({limit:i,token:a});r.get(s,l,n)}}))}},{key:"getFriendChangeLogsByToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(i.userId)),s=new se;a&&s.add("token",a),r.get(o,s,n)}}))}},{key:"addFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),s=new se({user_ids:a});r.post(o,s,n)}}))}},{key:"deleteFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),s=new se({user_ids:a});r.delete(o,s,n)}}))}},{key:"uploadFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveries;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),s=[];a.forEach((function(e){s.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})}));var l=new se({friend_discoveries:s});r.put(o,l,n)}}))}},{key:"deleteFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveryKeys;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),s=new se({friend_discovery_keys:a});r.delete(o,s,n)}}))}},{key:"loadUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.userIdsFilter,s=t.metaDataKeyFilter,l=t.metaDataValuesFilter,c=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var d=e.Path.USERS,p=new se({token:a,limit:i});o&&o.length>0&&p.add("user_ids",o),s&&l&&l.length>0&&(p.add("metadatakey",s),p.add("metadatavalues_in",l)),c&&p.add("nickname_startswith",c),r.get(d,p,n)}}))}},{key:"loadBlockedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.userIdsFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(s.userId)),c=new se({token:a,limit:i});o&&o.length>0&&c.add("user_ids",o),r.get(l,c,n)}}))}},{key:"createUserMetaData",value:function(t,n){var r=this,a=t.metaData;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId)),s=new se({metadata:a});r.post(o,s,n)}}))}},{key:"updateUserMetaData",value:function(t,n){var r=this,a=t.metaData,i=t.upsert;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(o.userId)),l=new se({metadata:a,upsert:i});r.put(s,l,n)}}))}},{key:"deleteUserMetaData",value:function(t,n){var r=this,a=t.metaDataKey;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"deleteAllUserMetaData",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"getMessageChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channelUrl,i=t.ts,o=t.timestamp,s=t.token,l=t.isOpenChannel,c=t.includeMetaArray,u=t.includeReaction,d=t.includeReactions,p=t.includeReplies,h=t.includeParentMessageText,f=t.includeThreadInfo,m=t.replyType,_=t.includeParentMessageInfo,y=t.includePollDetails;r.sb.ConnectionManager.ready((function(t,g){if(t)n(t,null);else{var v=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)),b=new se;s&&b.add("token",s),i&&b.add("change_ts",i),o&&b.add("change_ts",o),"boolean"==typeof c&&b.add("with_sorted_meta_array",c),"boolean"==typeof d?b.add("include_reactions",d):b.add("include_reactions","boolean"==typeof u&&u),"boolean"==typeof f&&b.add("include_thread_info",f),"string"==typeof m?b.add("include_reply_type",m):b.add("include_reply_type","boolean"==typeof p&&p?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof _?b.add("include_parent_message_info",_):b.add("include_parent_message_info","boolean"==typeof h&&h),"boolean"==typeof y&&b.add("include_poll_details",y),r.get(v,b,n)}}))}),n)}},{key:"getMyMutedInfo",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,o=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=o?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.get(l,null,n)}}))}},{key:"loadBannedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=s?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(o)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(o)),u=new se({token:a,limit:i});r.get(c,u,n)}}))}},{key:"loadMutedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=s?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(o)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(o)),u=new se({token:a,limit:i});r.get(c,u,n)}}))}},{key:"getMessageList",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channel,i=t.token,o=t.tokenType,s=t.isInclusive,l=t.prevResultSize,c=void 0===l?0:l,u=t.nextResultSize,d=void 0===u?0:u,p=t.shouldReverse,h=t.messageType,f=t.customType,m=t.customTypes,_=t.senderUserIds,y=t.includeMetaArray,g=t.includeReaction,v=t.includeReactions,b=t.includeReplies,E=t.includeParentMessageText,w=t.includeThreadInfo,C=t.replyType,A=t.includeParentMessageInfo,k=t.showSubchannelMessagesOnly,S=t.includePollDetails,N=t.rootMessageId,O=t.parentMessageId;r.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url),T=new se({is_sdk:String(!0),prev_limit:String(c),next_limit:String(d),include:String(s),reverse:String(p)});"timestamp"===o?T.add("message_ts",i):"messageId"===o&&T.add("message_id",String(i)),h&&T.add("message_type",String(h)),Array.isArray(m)&&(0===m.length&&("string"==typeof f?m.push(f):m.push("*")),T.add("custom_types",m)),Array.isArray(_)&&_.length>0&&T.add("sender_ids",_),"boolean"==typeof y&&T.add("with_sorted_meta_array",y),"boolean"==typeof v?T.add("include_reactions",v):T.add("include_reactions","boolean"==typeof g&&g),"boolean"==typeof w&&T.add("include_thread_info",w),"string"==typeof C?T.add("include_reply_type",C):T.add("include_reply_type","boolean"==typeof b&&b?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof A?T.add("include_parent_message_info",A):T.add("include_parent_message_info","boolean"==typeof E&&E),"boolean"==typeof k&&a.isOpenChannel()&&T.add("show_subchannel_messages_only",k),"boolean"==typeof S&&T.add("include_poll_details",S),N&&T.add("root_message_id",N),O&&T.add("parent_message_id",O),r.get(u,T,n)}}))}),n)}},{key:"checkMessageHugeGap",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channelUrl;t.channelType;var i=t.messageType,o=void 0===i?"":i,s=t.customTypes,l=void 0===s?["*"]:s,c=t.senderUserIds,u=void 0===c?[]:c,d=t.includeReactions,p=void 0===d||d,h=t.includeMetaArray,f=void 0!==h&&h,m=t.showSubchannelMessagesOnly,_=void 0!==m&&m,y=t.threshold,g=t.previous,v=t.next,b="".concat(e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_GAP.replace("%s",encodeURIComponent(a))),E=new se({huge_gap_threshold:y,prev_start_ts:g.from,prev_end_ts:g.to,prev_cache_count:g.cachedCount,next_start_ts:v.from,next_end_ts:v.to,next_cache_count:v.cachedCount,reverse:!0,custom_types:l,message_type:o,include_reactions:p,with_sorted_meta_array:f,show_subchannel_messages_only:_});Array.isArray(u)&&u.length>0&&E.add("sender_ids",u),r.get(b,E,n)}),n)}},{key:"translateUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.messageId,s=t.translationTargetLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",o):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",o),u=new se({target_langs:s});r.post(c,u,n)}}))}},{key:"getMessage",value:function(t,n){var r=this,a=t.channel,i=t.messageId,o=t.includeMetaArray,s=t.includeReactions,l=t.includeParentMessageText,c=t.includeThreadInfo,u=t.includeParentMessageInfo,d=t.includePollDetails;this.sb.ConnectionManager.ready((function(t,p){if(t)n(t,null);else{var h=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)),f=new se({is_sdk:String(!0)});"boolean"==typeof o&&f.add("with_sorted_meta_array",o),"boolean"==typeof s&&f.add("include_reactions",s),"boolean"==typeof c&&f.add("include_thread_info",c),"boolean"==typeof u?f.add("include_parent_message_info",u):f.add("include_parent_message_info","boolean"==typeof l&&l),"boolean"==typeof d&&f.add("include_poll_details",d),r.get(h,f,n)}}))}},{key:"deleteMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.messageId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(o)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(o));r.delete(l,null,n)}}))}},{key:"muteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,o=t.description,s=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)),d=new se({user_id:i});s&&(s>0||-1!==s)&&d.add("seconds",s),o&&d.add("description",o),r.post(u,d,n)}}))}},{key:"unmuteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,o=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=o?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}}))}},{key:"banUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,o=t.description,s=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)),d=new se({user_id:i});o&&d.add("description",o),d.add("seconds",String(s)),r.post(u,d,n)}}))}},{key:"unbanUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,o=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=o?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}}))}},{key:"getMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.keys;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),c=new se({keys:o});r.get(l,c,n)}}))}},{key:"createMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.metaCounter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),c=new se({metacounter:o});r.post(l,c,n)}}))}},{key:"updateMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.metaCounter,s=t.upsert,l=t.mode;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),d=new se({metacounter:o,upsert:s,mode:l});r.put(u,d,n)}}))}},{key:"deleteMetaCounter",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.key;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",o):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",o);r.delete(l,null,n)}}))}},{key:"deleteAllMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"getMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.keys;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new se({keys:o,include_ts:!0});r.get(l,c,n)}}))}},{key:"createMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.metaData;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new se({metadata:o,include_ts:!0});r.post(l,c,n)}}))}},{key:"updateMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.metaData,s=t.upsert;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new se({metadata:o,upsert:s,include_ts:!0});r.put(c,u,n)}}))}},{key:"deleteMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.key;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",o):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",o),c=new se({include_ts:!0});r.delete(l,c,n)}}))}},{key:"deleteAllMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new se({include_ts:!0});r.delete(s,l,n)}}))}},{key:"loadOperatorList",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.token,s=t.limit;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)),u=new se({token:o,limit:s});r.get(c,u,n)}}))}},{key:"getOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.internalCall;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),l=new se({});l.internal=i===O.INTERNAL_CALL,r.get(s,l,n)}}))}},{key:"loadOpenChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.nameKeyword,s=t.urlKeyword,l=t.customTypes,c=t.includeFrozen,u=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var p=e.Path.OPENCHANNELS,h=new se({token:a,limit:i});o&&h.add("name_contains",o),s&&h.add("url_contains",s),l&&l.length>0&&h.add("custom_types",l),"boolean"==typeof c&&h.add("show_frozen",c),"boolean"==typeof u&&h.add("show_metadata",u),r.get(p,h,n)}}))}},{key:"loadParticipantList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(o)),c=new se({token:a,limit:i});r.get(l,c,n)}}))}},{key:"createOpenChannel",value:function(t,n){var r=this,a=t.name,i=t.coverUrlOrImage,o=t.data,s=t.operatorUserIds,l=t.customType,c=t.channelUrl;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS,p=new se;"string"==typeof i&&p.add("cover_url",i),ie.isFile(i)&&p.add("cover_file",i),null!==c&&"string"==typeof c&&p.add("channel_url",c),null!==a&&"string"==typeof a&&p.add("name",a),o&&p.add("data",o),s&&(Array.isArray(s)?p.add("operators",s):p.add("operators",[s])),l&&p.add("custom_type",l),r.post(d,p,n)}}))}},{key:"updateOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.name,o=t.coverUrlOrImage,s=t.data,l=t.operatorUserIds,c=t.customType;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),p=new se;"string"==typeof o&&p.add("cover_url",o),ie.isFile(o)&&p.add("cover_file",o,o.name),null!==i&&"string"==typeof i&&p.add("name",i),null!==s&&"string"==typeof s&&p.add("data",s),null!==l&&(Array.isArray(l)?p.add("operator_ids",l):p.add("operator_ids",[l])),null!==c&&"string"==typeof c&&p.add("custom_type",c),r.put(d,p,n)}}))}},{key:"deleteOpenChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"getGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.showMember,o=t.internalCall;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),c=new se({show_member:i,show_read_receipt:!0,show_delivery_receipt:!0});c.internal=o===O.INTERNAL_CALL,r.get(l,c,n)}}))}},{key:"loadGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.includeEmpty,s=t.order,l=t.userIdsFilter,c=t.nicknameContainsFilter,u=t.channelNameContainsFilter,d=t.channelUrlsFilter,p=t.customTypesFilter,h=t.customTypeStartsWithFilter,f=t.memberStateFilter,m=t.superChannelFilter,_=t.publicChannelFilter,y=t.unreadChannelFilter,g=t.metadataOrderKeyFilter,v=t.metadataKey,b=t.metadataValues,E=t.metadataValueStartsWith,w=t.hiddenChannelFilter,C=t.searchFilter,A=t.includeFrozen,k=t.includeMetaData;return le(this.sb._iid,(function(t){r.sb.ConnectionManager.ready((function(n,S){if(n)t(n,null);else{var N=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(S.userId)),O=new se({token:a,limit:i,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(o),member_state_filter:f});p&&p.length>0&&O.add("custom_types",p),c&&O.add("members_nickname_contains",c),u&&O.add("name_contains",u),C&&C.hasOwnProperty("search_query")&&C.hasOwnProperty("search_fields")&&(O.add("search_query",C.search_query),O.add("search_fields",C.search_fields)),l&&l.userIds&&l.userIds.length>0&&(l.includeMode?(O.add("members_include_in",l.userIds),O.add("query_type",l.queryType.toUpperCase())):O.add("members_exactly_in",l.userIds)),d&&d.length>0&&O.add("channel_urls",d),O.add("super_mode",m),O.add("public_mode",_),O.add("unread_filter",y),g&&O.add("metadata_order_key",g),v&&O.add("metadata_key",v),b&&b.length>0&&O.add("metadata_values",b),E&&O.add("metadata_value_startswith",E),h&&O.add("custom_type_startswith",h),w&&O.add("hidden_mode",w),"boolean"==typeof A&&O.add("show_frozen",A),"boolean"==typeof k&&O.add("show_metadata",k),r.get(N,O,t)}}))}),n)}},{key:"loadPublicGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,o=t.includeEmpty,s=t.order,l=t.channelNameContainsFilter,c=t.channelUrlsFilter,u=t.customTypesFilter,d=t.customTypeStartsWithFilter,p=t.superChannelFilter,h=t.membershipFilter,f=t.metadataOrderKeyFilter,m=t.metadataKey,_=t.metadataValues,y=t.metadataValueStartsWith,g=t.includeFrozen,v=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,b){if(t)n(t,null);else{var E=r.cls.GroupChannel,w=e.Path.GROUPCHANNELS,C=new se({token:a,limit:i,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(o),public_mode:E.PublicChannelFilter.PUBLIC,public_membership_mode:h});u&&u.length>0&&C.add("custom_types",u),l&&C.add("name_contains",l),c&&c.length>0&&C.add("channel_urls",c),C.add("super_mode",p),f&&C.add("metadata_order_key",f),m&&C.add("metadata_key",m),_&&_.length>0&&C.add("metadata_values",_),y&&C.add("metadata_value_startswith",y),d&&C.add("custom_type_startswith",d),"boolean"==typeof g&&C.add("show_frozen",g),"boolean"==typeof v&&C.add("show_metadata",v),r.get(w,C,n)}}))}},{key:"createGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isSuper,o=t.isBroadcast,s=t.isPublic,l=t.channelUrl,c=t.isDiscoverable,u=t.isStrict,d=t.name,p=t.data,h=t.customType,f=t.coverUrl,m=t.coverImage,_=t.accessCode,y=t.isEphemeral,g=t._invitedUserIds,v=void 0===g?[]:g,b=t.operatorUserIds,E=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,g){if(t)n(t,null);else{var w=e.Path.GROUPCHANNELS,C=new se({user_ids:[g.userId].concat(A(v)).filter((function(e,t,n){return t===n.indexOf(e)}))});null!==f&&"string"==typeof f&&C.add("cover_url",f),ie.isFile(m)&&C.add("cover_file",m,m.name),null!==l&&C.add("channel_url",l),null!==a&&C.add("is_distinct",a),null!==i&&C.add("is_super",i),null!==o&&C.add("is_broadcast",o),null!==s&&C.add("is_public",s),null!==c&&C.add("is_discoverable",c),null!==u&&C.add("strict",u),null!==y&&C.add("is_ephemeral",y),_&&C.add("access_code",_),null!==d&&"string"==typeof d&&C.add("name",d),p&&C.add("data",p),h&&C.add("custom_type",h),Array.isArray(b)&&b.length>0&&C.add("operator_ids",b),null!==E&&E>-1&&C.add("message_survival_seconds",E),r.post(w,C,n)}}))}},{key:"updateGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isPublic,o=t.channelUrl,s=t.isDiscoverable,l=t.name,c=t.data,u=t.customType,d=t.coverUrl,p=t.coverImage,h=t.accessCode,f=t.operatorUserIds,m=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,_){if(t)n(t,null);else{var y=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(o)),g=new se;null!==a&&g.add("is_distinct",a),null!==i&&g.add("is_public",i),null!==s&&g.add("is_discoverable",s),null!==h&&g.add("access_code",h),null!==d&&"string"==typeof d&&g.add("cover_url",d),ie.isFile(p)&&g.add("cover_file",p,p.name),null!==l&&"string"==typeof l&&g.add("name",l),null!==c&&"string"==typeof c&&g.add("data",c),null!==u&&"string"==typeof u&&g.add("custom_type",u),null!==f&&(Array.isArray(f)?g.add("operator_ids",f):f&&g.add("operator_ids",[f])),null!==m&&m>-1&&g.add("message_survival_seconds",m),r.put(y,g,n)}}))}},{key:"addOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=void 0!==i&&i,s=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,i){if(!t){var l=(o?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),c=new se({operator_ids:s});r.post(l,c,n)}}))}},{key:"removeOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=void 0!==i&&i,s=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,i){if(!t){var l=(o?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),c=new se({operator_ids:s});r.delete(l,c,n)}}))}},{key:"inviteToGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.userIds;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(a)),l=new se({user_ids:i});r.post(s,l,n)}}))}},{key:"acceptInvitation",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(a)),l=new se({user_id:o.userId});i&&l.add("access_code",i),r.put(s,l,n)}}))}},{key:"declineInvitation",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(a)),s=new se({user_id:i.userId});r.put(o,s,n)}}))}},{key:"joinGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(a)),l=new se({user_id:o.userId});i&&l.add("access_code",i),r.put(s,l,n)}}))}},{key:"leaveGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(a)),s=new se({user_id:i.userId});r.put(o,s,n)}}))}},{key:"hideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.hidePreviousMessages,o=t.allowAutoUnhide;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a)),c=new se({user_id:s.userId,hide_previous_messages:i,allow_auto_unhide:o});r.put(l,c,n)}}))}},{key:"unhideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"freeze",value:function(t,n){var r=this,a=t.channelUrl,i=t.isGroupChannel,o=t.freezing;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=i?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)),c=new se({freeze:o});r.put(l,c,n)}}))}},{key:"deleteGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"loadMemberList",value:function(t,n){var r=this,a=t.channelUrl,i=t.token,o=t.limit,s=t.mutedMemberFilter,l=t.order,c=t.memberStateFilter,u=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var p=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(a)),h=new se({token:i,limit:o,order:l.toLowerCase(),muted_member_filter:s.toLowerCase(),member_state_filter:c,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});u&&h.add("nickname_startswith",u),r.get(p,h,n)}}))}},{key:"report",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.reportCategory,s=t.reportingUserId,l=t.reportDescription;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)),d=new se({report_category:o});null!=s&&d.add("reporting_user_id",s),null!=l&&d.add("report_description",l),r.post(u,d,n)}}))}},{key:"reportUser",value:function(t,n){var r=this,a=t.offendingUserId,i=t.channelUrl,o=t.isOpenChannel,s=t.reportCategory,l=t.reportingUserId,c=t.reportDescription;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var d=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(a)),p=new se({channel_url:i,channel_type:o?"open_channels":"group_channels",report_category:s});null!=l&&p.add("reporting_user_id",l),null!=c&&p.add("report_description",c),r.post(d,p,n)}}))}},{key:"reportMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.messageId,s=t.reportCategory,l=t.reportingUserId,c=t.reportDescription,u=t.offendingUserId;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var p=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(o)),h=new se({report_category:s,offending_user_id:u});null!=l&&h.add("reporting_user_id",l),null!=c&&h.add("report_description",c),r.post(p,h,n)}}))}},{key:"sendUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,o=t.message,s=t.data,l=t.customType,c=t.translationTargetLanguages,u=t.metaArrays,d=t.mentionType,p=t.mentionedUserIds,h=t.pushNotificationDeliveryOption,f=t.rootMessageId,m=t.parentMessageId,_=t.appleCriticalAlertOptions,y=t.pollId,g=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,v){if(t)n(t,null);else{var b=r.cls.FileMessageParams,E=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),w=new se({message_type:"MESG",user_id:v.userId,message:o,mention_type:d,mentioned_user_ids:[]});null!=s&&w.add("data",s),null!=l&&w.add("custom_type",l),c&&w.add("translation_target_langs",c),u&&u.length>0&&w.add("sorted_metaarray",u.map((function(e){return e.encode()}))),d===r.cls.BaseMessageParams.MentionType.CHANNEL?w.add("mentioned_user_ids",[]):Array.isArray(p)&&p.length>0&&w.add("mentioned_user_ids",p),h&&h!==b.PushNotificationDeliveryOption.DEFAULT&&w.add("push_option",h),f&&w.add("root_message_id",f),m&&w.add("parent_message_id",m),_&&w.add("apple_critical_alert_options",_.serialize()),"number"==typeof y?w.add("poll_id",y):null===y&&w.add("poll_id",-1),g&&w.add("reply_to_channel",g),r.post(E,w,n)}}))}},{key:"sendFileMessage",value:function(t,n){var r=this,a=t.reqId,i=t.channelUrl,o=t.isOpenChannel,s=t.fileUrl,l=t.fileName,c=t.fileSize,u=t.fileType,d=t.data,p=t.customType,h=t.thumbnailSizes,f=t.requireAuth,m=t.metaArrays,_=t.mentionType,y=t.mentionedUserIds,g=t.pushNotificationDeliveryOption,v=t.rootMessageId,b=t.parentMessageId,E=t.appleCriticalAlertOptions,w=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,C){if(t)n(t,null);else{var A=r.cls.FileMessageParams,k=o?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),S=new se({message_type:"FILE",user_id:C.userId,url:s,mention_type:_,mentioned_user_ids:[],req_id:a});null!=l&&S.add("file_name",l),null!=c&&S.add("file_size",c),null!=u&&S.add("file_type",u),null!=d&&S.add("custom_field",d),null!=p&&S.add("custom_type",p),h&&S.add("thumbnails",h),f&&S.add("require_auth",f),m&&m.length>0&&S.add("sorted_metaarray",m.map((function(e){return e.encode()}))),_===r.cls.BaseMessageParams.MentionType.CHANNEL?S.add("mentioned_user_ids",[]):Array.isArray(y)&&y.length>0&&S.add("mentioned_user_ids",y),g&&g!==A.PushNotificationDeliveryOption.DEFAULT&&S.add("push_option",g),v&&S.add("root_message_id",v),b&&S.add("parent_message_id",b),E&&S.add("apple_critical_alert_options",E.serialize()),w&&S.add("reply_to_channel",w),r.post(k,S,n)}}))}},{key:"uploadFile",value:function(t,n){var r=this,a=t.file,i=t.thumbnailSizes,o=t.channelUrl,s=t.progressHandler,l=t.reqId;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=I.get(r.sb._iid).container.appInfo;if(u)if("number"==typeof a.size||a.size||(a.size=0),"number"==typeof a.size)if(a.size<=u.uploadSizeLimit){var d=e.Path.STORAGE_FILE,p=new se;if(p.add("file",a,a.name),o&&"string"==typeof o&&p.add("channel_url",o),i)for(var h=0;h<i.length;h++)p.add("thumbnail"+(h+1),i[h].maxWidth+","+i[h].maxHeight);p.upload.reqId=l,p.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},p.upload.progressHandler=function(e){s&&"function"==typeof s&&s(e,l)},r.post(d,p,n)}else n(new F("The file size exceeded the upload limit: ".concat(u.uploadSizeLimit),F.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new F("Invalid file size: ".concat(a.size),F.INVALID_PARAMETER),null);else n(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)}}))}},{key:"registerScheduledUserMessage",value:function(t,n){var r=this,a=t.groupChannelParams,i=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=o?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)),c=new se({scheduled_dt:a._getScheduleString(),user_id:s.userId,message:a.message,data:a.data});a.customType&&c.add("custom_type",a.customType),a.metaArrayKeys&&Object.keys(a.metaArrayKeys).length>0&&c.add("metaarray",a.metaArrayKeys),a.mentionType&&c.add("mention_type",a._mentionType),a._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?c.add("mentioned_user_ids",[]):Array.isArray(a._mentionedUserIds)&&a._mentionedUserIds.length>0&&c.add("mentioned_user_ids",a._mentionedUserIds),a.translationTargetLanguages&&a.translationTargetLanguages.length>0&&c.add("translation_target_langs",a.translationTargetLanguages),a.pushNotificationDeliveryOption&&a.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&c.add("push_option",a.pushNotificationDeliveryOption),a.appleCriticalAlertOptions&&c.add("apple_critical_alert_options",a.appleCriticalAlertOptions.serialize()),r.post(l,c,n)}}))}},{key:"getMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.get(o,null,n)}}))}},{key:"setMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pushTriggerOption,o=t.enable;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(a)),c=new se;i&&c.add("push_trigger_option",i),"boolean"==typeof o&&c.add("enable",o),r.put(l,c,n)}}))}},{key:"setMyCountPreference",value:function(t,n){var r=this,a=t.channelUrl,i=t.countPreference;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(a)),l=new se({count_preference:i});r.put(s,l,n)}}))}},{key:"resetMyHistory",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(a));r.put(o,null,n)}}))}},{key:"addReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,o=t.messageId,s=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(o)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(o)),u=new se({reaction:s});r.post(c,u,n)}}))}},{key:"deleteReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,o=t.messageId,s=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(o)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(o)),u=new se({reaction:s});r.delete(c,u,n)}}))}},{key:"getAllEmoji",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,a){r?t(r,null):n.get(e.Path.EMOJI_CATEGORIES,null,t)}))}},{key:"getEmojiCategory",value:function(t,n){var r=this,a=t.categoryId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",a);r.get(o,null,n)}}))}},{key:"getEmoji",value:function(t,n){var r=this,a=t.emojiKey;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.EMOJIS_EMOJIKEY.replace("%s",a);r.get(o,null,n)}}))}},{key:"getAllowFriendDiscovery",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,a){if(r)t(r,null);else{var i=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId));n.get(i,null,t)}}))}},{key:"setAllowFriendDiscovery",value:function(t,n){var r=this,a=t.allowFriendDiscovery;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId)),s=new se;"boolean"==typeof a&&s.add("allow_friend_discovery",a),r.put(o,s,n)}}))}},{key:"getPollList",value:function(t,n){var r=this,a=t.channelUrl,i=t.token,o=t.limit;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS,c=new se({channel_url:a});i&&c.add("token",i),o&&c.add("limit",o),r.get(l,c,n)}}))}},{key:"getPoll",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,o=t.showPartialVoters;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID.replace("%s",i),c=new se({channel_url:a});"boolean"==typeof o&&c.add("show_partial_voter_list",o),r.get(l,c,n)}}))}},{key:"createPoll",value:function(t,n){var r=this,a=t.title,i=t.options,o=t.data,s=t.isAnonymous,l=t.allowUserSuggestion,c=t.allowMultipleVotes,d=t.closeAt;this.sb.ConnectionManager.ready((function(t,p){if(t)n(t,null);else{var h=e.Path.POLLS,f=new se({title:a,options:i});"object"===u(o)&&f.add("data",o),"boolean"==typeof s&&f.add("is_anonymous",s),"boolean"==typeof l&&f.add("allow_user_suggestion",l),"boolean"==typeof c&&f.add("allow_multiple_votes",c),"number"==typeof d&&f.add("close_at",d),r.post(h,f,n)}}))}},{key:"updatePoll",value:function(t,n){var r=this,a=t.pollId,i=t.title,o=t.options,s=t.data,l=t.isAnonymous,c=t.allowUserSuggestion,d=t.allowMultipleVotes,p=t.closeAt;this.sb.ConnectionManager.ready((function(t,h){if(t)n(t,null);else{var f=e.Path.POLLS_POLLID.replace("%s",a),m=new se;"string"==typeof i&&m.add("title",i),Array.isArray(o)&&m.add("options",o),"object"===u(s)&&m.add("data",s),"boolean"==typeof l&&m.add("is_anonymous",l),"boolean"==typeof c&&m.add("allow_user_suggestion",c),"boolean"==typeof d&&m.add("allow_multiple_votes",d),"number"==typeof p&&m.add("close_at",p),r.put(f,m,n)}}))}},{key:"deletePoll",value:function(t,n){var r=this,a=t.pollId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.POLLS_POLLID.replace("%s",a);r.delete(o,null,n)}}))}},{key:"votePoll",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,o=t.optionIds;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_VOTE.replace("%s",i),c=new se({channel_url:a});Array.isArray(o)&&c.add("option_ids",o),r.put(l,c,n)}}))}},{key:"closePoll",value:function(t,n){var r=this,a=t.pollId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var o=e.Path.POLLS_POLLID_CLOSE.replace("%s",a);r.put(o,null,n)}}))}},{key:"getPollOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,o=t.optionId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",i).replace("%s",o),c=new se({channel_url:a});r.get(l,c,n)}}))}},{key:"addPollOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,o=t.text;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS.replace("%s",i),c=new se({channel_url:a,text:o});r.post(l,c,n)}}))}},{key:"updatePollOption",value:function(t,n){var r=this,a=t.pollId,i=t.optionId,o=t.text;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",a).replace("%s",i),c=new se({text:o});r.put(l,c,n)}}))}},{key:"deletePollOption",value:function(t,n){var r=this,a=t.pollId,i=t.optionId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var s=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",a).replace("%s",i);r.delete(s,null,n)}}))}},{key:"getPollOptionVoterList",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,o=t.optionId,s=t.token,l=t.limit;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var u=e.Path.POLLS_POLLID_OPTIONS_OPTIONID_VOTERS.replace("%s",i).replace("%s",o),d=new se({channel_url:a});s&&d.add("token",s),l&&d.add("limit",l),r.get(u,d,n)}}))}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_MESSAGES_GAP:"/group_channels/%s/messages_gap",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s",POLLS:"/polls",POLLS_POLLID:"/polls/%s",POLLS_POLLID_VOTE:"/polls/%s/vote",POLLS_POLLID_CLOSE:"/polls/%s/close",POLLS_POLLID_OPTIONS:"/polls/%s/options",POLLS_POLLID_OPTIONS_OPTIONID:"/polls/%s/options/%s",POLLS_POLLID_OPTIONS_OPTIONID_VOTERS:"/polls/%s/options/%s/voters"}}}]),e}(),de=function(){function e(t,n){d(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?s.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return h(e,[{key:"connect",value:function(e,t,n){var r=this;X.debug("`WebSocketClient.connect` called.");var a=I.get(this.sb._iid).container,i=a.pinger,o=a.auth,s=a.extensions,l=a.getUserAgentWithExtensions,c=a.sessionManager;this.wsHost=n;try{var u="/?p=JS&pv="+encodeURIComponent(O.OS_VERSION)+"&sv="+encodeURIComponent(O.SDK_VERSION)+"&ai="+encodeURIComponent(this.sb.getApplicationId());if(o.sessionKey?u+="&key="+encodeURIComponent(o.sessionKey):u+="&user_id="+encodeURIComponent(e)+"&access_token="+encodeURIComponent(t),u+="&active=1",u+="&SB-User-Agent="+encodeURIComponent(l(s)),u+="&Request-Sent-Timestamp="+(new Date).getTime().toString(),u+="&include_extra_data="+encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(",")),c.handler&&(u+="&expiring_session=1"),this.sb.Options.includePollDetails&&(u+="&include_poll_details=1"),u+="&use_local_cache=1",this.ws=new this.WebSocket(this.wsHost+u),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){X.debug("`window` object does not exist.")}var d=!1;this.ws.onopen=function(e){X.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();for(var t=e.data.split("\n"),n=0;n<t.length;n++){var a=t[n];if(a&&"string"==typeof a){try{if("PONG"===a.substring(0,4)){i.pong();continue}}catch(e){X.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(a)}}},this.ws.onerror=function(e){X.debug("`WebSocket.onerror` called:",e),i&&i.stop(),d=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){X.group("`WebSocket.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["e",e]},{level:X.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),i&&i.stop(),r.explicitDisconnect?r.handler.onClose(e):d||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){X.group("`WebSocketClient.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=I.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=I.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();de.ConnectionHandler=function e(){d(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}};var pe,he={},fe=function(){function e(){this._observers=[]}return e.of=function(t){return he[t]||(he[t]=new e),he[t]},e.prototype.invokeConnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onConnect&&n.onConnect()}},e.prototype.invokeDisconnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onDisconnect&&n.onDisconnect()}},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>-1&&this._observers.splice(t,1)},e}(),me=function(){},_e={NAME_ALPHABETICAL:["name","-pk"],CHRONOLOGICAL:["-createdAt","-pk"],LATEST_LAST_MESSAGE:["-lastMessageCreatedAt","-createdAt","-pk"]},ye={LATEST:["channelUrl","-createdAt","-messageId"],LATEST_UNSENT:["channelUrl","sendingStatus","createdAt"]},ge=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,a=Math.floor((n+r)/2);n<r;){var i=e[a].createdAt-t.createdAt;if(i>0)r=a,a=Math.floor((n+r)/2);else{if(!(i<0))return a;n=a+1,a=Math.floor((n+r)/2)}}return e[a].createdAt>t.createdAt?a:a+1}return e.length},ve=function(e){var t=e.channel,n=e.ts,r=e.prevLimit,a=void 0===r?0:r,i=e.nextLimit,o=void 0===i?0:i,s=e.filter,l={channel:t,token:n,tokenType:"timestamp",isInclusive:!0,prevResultSize:a,nextResultSize:o,shouldReverse:!1,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeReplies:!0,includeParentMessageText:!0,showSubchannelMessagesOnly:!0};if(s){var c=s.messageType,u=s.customTypes,d=s.senderUserIds;c&&(l.messageType=c),u.length>0&&(l.customTypes=u),d.length>0&&(l.senderUserIds=d)}return l},be=function(e,t,n){if(n.length>0){var r=n.map((function(e){return e.createdAt}));t.includes("prev")&&(e.top=Math.min.apply(Math,U([e.top],r,!1))),t.includes("next")&&(e.bottom=Math.max.apply(Math,U([e.bottom],r,!1)))}},Ee=function(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))},we={};!function(e){e.SUCCEEDED="succeeded",e.UNSENT="unsent"}(pe||(pe={}));var Ce,Ae=function(){function e(e){var t=e.iid,n=e.collections;this._iid=t,this._collections=n,we[t]=this}return e.of=function(e){return we[e]},e.prototype._serialize=function(e){return e.serialize()},e.prototype._deserialize=function(e){if(e){var t=P(P({},e),{messageId:parseInt(e.messageId)}),n=H.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if("user"===t.messageType)return r.buildFromSerializedData(t);if("file"===t.messageType)return a.buildFromSerializedData(t);if("admin"===t.messageType)return i.buildFromSerializedData(t)}return null},e.deserialize=function(e,t){if(t){var n=P(P({},t),{messageId:parseInt(t.messageId)}),r=H.get(e),a=r.UserMessage,i=r.FileMessage,o=r.AdminMessage;if("user"===n.messageType)return a.buildFromSerializedData(n);if("file"===n.messageType)return i.buildFromSerializedData(n);if("admin"===n.messageType)return o.buildFromSerializedData(n)}return null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return I.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._fetch=function(e,t,n){return M(this,void 0,void 0,(function(){var r,a,i=this;return R(this,(function(o){switch(o.label){case 0:return this._localCacheEnabled?(r={where:function(r){if(!r)return!1;if(e&&r.channelUrl!==e)return!1;if(n.backward){if(r.createdAt<=n.token)return!1}else if(r.createdAt>=n.token)return!1;return!!t.match(i._deserialize(r))},index:"UnsentMessage"===n.collection.name?ye.LATEST_UNSENT:ye.LATEST,backward:n.backward},[4,n.collection.query(r)]):[3,3];case 1:return[4,o.sent().fetch({limit:n.limit})];case 2:return a=o.sent(),[2,Promise.all(a.map((function(e){return M(i,void 0,void 0,(function(){var t,r,a;return R(this,(function(i){switch(i.label){case 0:return t=this._deserialize(e),(r=e.messageParams)&&r.file?(a=t._messageParams,[4,n.collection.getBlob(r.file)]):[3,2];case 1:a._file=i.sent(),i.label=2;case 2:return[2,t]}}))}))})))];case 3:return[2,[]]}}))}))},e.fetch=function(t,n,r){return M(this,void 0,void 0,(function(){var a,i,o=this;return R(this,(function(s){switch(s.label){case 0:return a={where:function(a){if(!a)return!1;if(r.backward){if(a.createdAt<=r.token)return!1}else if(a.createdAt>=r.token)return!1;return!!n.match(e.deserialize(t,a))},index:"UnsentMessage"===r.collection.name?ye.LATEST_UNSENT:ye.LATEST,backward:r.backward},[4,r.collection.query(a)];case 1:return[4,s.sent().fetch({limit:r.limit})];case 2:return i=s.sent(),[2,Promise.all(i.map((function(n){return M(o,void 0,void 0,(function(){var a,i,o;return R(this,(function(s){switch(s.label){case 0:return a=e.deserialize(t,n),(i=n.messageParams)&&i.file?(o=a._messageParams,[4,r.collection.getBlob(i.file)]):[3,2];case 1:o.file=s.sent(),s.label=2;case 2:return[2,a]}}))}))})))]}}))}))},e.prototype.get=function(e,t){return M(this,void 0,void 0,(function(){var n,r;return R(this,(function(a){switch(a.label){case 0:return this._localCacheEnabled?(n=this.getMessageCollectionByType(t),r=this._deserialize,[4,n.getByKey(e)]):[3,2];case 1:return[2,r.apply(this,[a.sent()])];case 2:return[2,null]}}))}))},e.prototype.getMessageCollectionByType=function(e){return e?this._collections[e]:this._collections.succeeded},e.prototype.getPreviousAndNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),M(this,void 0,void 0,(function(){var i,o;return R(this,(function(s){switch(s.label){case 0:return[4,this.getPreviousMessages(e,t,n,r/2,a)];case 1:return i=s.sent(),[4,this.getNextMessages(e,t,n,r/2,a)];case 2:return o=s.sent(),[2,function(e){for(var t=[],n={},r=0,a=e;r<a.length;r++){var i=a[r];i.messageId?n[i.messageId]||(n[i.messageId]=!0,t.push(i)):t.push(i)}return t}(U(U([],i,!0),o,!0))]}}))}))},e.prototype.getPreviousMessages=function(e,t,n,r,a){return void 0===r&&(r=30),M(this,void 0,void 0,(function(){var i;return R(this,(function(o){switch(o.label){case 0:return i=this.getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!1,collection:i})];case 1:return[2,o.sent().reverse()]}}))}))},e.prototype.getNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),M(this,void 0,void 0,(function(){var i;return R(this,(function(o){switch(o.label){case 0:return i=this.getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!0,collection:i})];case 1:return[2,o.sent()]}}))}))},e.prototype.getUnsentMessages=function(e,t){return M(this,void 0,void 0,(function(){var n;return R(this,(function(r){switch(r.label){case 0:return n=this.getMessageCollectionByType(pe.UNSENT),[4,this._fetch(e,t,{token:0,limit:null,collection:n,backward:!0})];case 1:return[2,r.sent()]}}))}))},e.prototype.getAllUnsentMessages=function(t,n){return M(this,void 0,void 0,(function(){return R(this,(function(r){switch(r.label){case 0:return[4,e.fetch(this._iid,t,{token:Date.now(),limit:null,collection:n,backward:!1})];case 1:return[2,r.sent()]}}))}))},e.prototype.countBetween=function(e,t,n,r,a){return M(this,void 0,void 0,(function(){var i,o=this;return R(this,(function(s){switch(s.label){case 0:return this._localCacheEnabled?(i={where:function(a){return a.channelUrl===e&&!(n>a.createdAt||a.createdAt>r)&&t.match(o._deserialize(a))},index:ye.LATEST},[4,this.getMessageCollectionByType(a).query(i)]):[3,3];case 1:return[4,s.sent().count()];case 2:return[2,s.sent()];case 3:return[2,0]}}))}))},e.prototype.upsert=function(e,t){return M(this,void 0,void 0,(function(){var n,r,a=this;return R(this,(function(i){switch(i.label){case 0:return this._localCacheEnabled?(n=this.getMessageCollectionByType(t),[4,Promise.all(e.map((function(e){return M(a,void 0,void 0,(function(){var t,r;return R(this,(function(a){switch(a.label){case 0:return(t=e.serialize())?((t=P({},t)).messageParams&&(t.messageParams=P({},t.messageParams)),e.sendingStatus&&"succeeded"!==e.sendingStatus?t.messageId="unsent-"+e.reqId:t.messageId=""+e.messageId,e.isFileMessage()&&e._messageParams&&e._messageParams.file?[4,n.saveBlob(e._messageParams.file,e.reqId)]:[3,2]):[3,2];case 1:r=a.sent(),t.messageParams.file=r,a.label=2;case 2:return[2,t]}}))}))})))]):[3,3];case 1:return r=i.sent(),[4,n.upsertMany(r)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e,t){return M(this,void 0,void 0,(function(){return R(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,Ee(500)]:[3,3];case 1:return n.sent(),[4,this.getMessageCollectionByType(t).removeIf({messageId:{"/in":e.map((function(e){return""+e}))}})];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.removeUnsentMessages=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o;return R(this,(function(s){switch(s.label){case 0:return t=e.channelUrl,n=e.sendingStatus,r=e.reqIds,a=[],this._localCacheEnabled?[4,Ee(500)]:[3,3];case 1:return s.sent(),i=this.getMessageCollectionByType(pe.UNSENT),o={channelUrl:{"=":t}},n&&(o.sendingStatus={"=":n}),r&&r.length>0&&(o.reqId={"/in":r}),[4,i.removeIf(o)];case 2:a=s.sent(),s.label=3;case 3:return[2,a]}}))}))},e.prototype.removeFailedMessages=function(e,t){return M(this,void 0,void 0,(function(){var n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return n=[],this._localCacheEnabled?[4,Ee(500)]:[3,3];case 1:return o.sent(),r=this.getMessageCollectionByType(pe.UNSENT),a=Sa.getInstance(this._iid),i={channelUrl:{"=":e},sendingStatus:{"=":a.MessageSendingStatus.FAILED}},t&&t.length>0&&(i.reqId={"/in":t}),[4,r.removeIf(i)];case 2:n=o.sent(),o.label=3;case 3:return[2,n]}}))}))},e.prototype.clearByChannelUrl=function(e){return M(this,void 0,void 0,(function(){var t=this;return R(this,(function(n){switch(n.label){case 0:return[4,Promise.all(Object.keys(pe).map((function(n){var r=t.getMessageCollectionByType(pe[n]),a={channelUrl:{"=":e}};return r.removeIf(a)})))];case 1:return n.sent(),[2]}}))}))},e.prototype.clear=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this.getMessageCollectionByType(e).clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAll=function(){return M(this,void 0,void 0,(function(){var e=this;return R(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,Promise.all(Object.keys(pe).map((function(t){return e.clear(pe[t])})))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAbove=function(e,t){return M(this,void 0,void 0,(function(){return R(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,this.getMessageCollectionByType(t).removeIf({createdAt:{"<":e}})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e}();!function(e){e[e.EVENT_CHANNEL_CHANGED=0]="EVENT_CHANNEL_CHANGED",e[e.EVENT_USER_RECEIVED_INVITATION=1]="EVENT_USER_RECEIVED_INVITATION",e[e.EVENT_USER_DECLINED_INVITATION=2]="EVENT_USER_DECLINED_INVITATION",e[e.EVENT_USER_JOINED=3]="EVENT_USER_JOINED",e[e.EVENT_USER_LEFT=4]="EVENT_USER_LEFT",e[e.EVENT_CHANNEL_ENTER=5]="EVENT_CHANNEL_ENTER",e[e.EVENT_CHANNEL_EXIT=6]="EVENT_CHANNEL_EXIT",e[e.EVENT_CHANNEL_FROZEN=7]="EVENT_CHANNEL_FROZEN",e[e.EVENT_CHANNEL_UNFROZEN=8]="EVENT_CHANNEL_UNFROZEN",e[e.EVENT_CHANNEL_HIDDEN=9]="EVENT_CHANNEL_HIDDEN",e[e.EVENT_CHANNEL_UNHIDDEN=10]="EVENT_CHANNEL_UNHIDDEN",e[e.EVENT_TYPING_STATUS_UPDATED=11]="EVENT_TYPING_STATUS_UPDATED",e[e.EVENT_OPERATOR_UPDATED=12]="EVENT_OPERATOR_UPDATED",e[e.EVENT_CHANNEL_METADATA_UPDATED=13]="EVENT_CHANNEL_METADATA_UPDATED",e[e.EVENT_CHANNEL_METADATA_DELETED=14]="EVENT_CHANNEL_METADATA_DELETED",e[e.EVENT_CHANNEL_METACOUNTER_UPDATED=15]="EVENT_CHANNEL_METACOUNTER_UPDATED",e[e.EVENT_CHANNEL_METACOUNTER_DELETED=16]="EVENT_CHANNEL_METACOUNTER_DELETED",e[e.EVENT_CHANNEL_DELETED=17]="EVENT_CHANNEL_DELETED",e[e.EVENT_USER_MUTED=18]="EVENT_USER_MUTED",e[e.EVENT_USER_UNMUTED=19]="EVENT_USER_UNMUTED",e[e.EVENT_USER_BANNED=20]="EVENT_USER_BANNED",e[e.EVENT_USER_UNBANNED=21]="EVENT_USER_UNBANNED",e[e.EVENT_MESSAGE_RECEIVED=22]="EVENT_MESSAGE_RECEIVED",e[e.EVENT_MESSAGE_SENT=23]="EVENT_MESSAGE_SENT",e[e.EVENT_MESSAGE_UPDATED=24]="EVENT_MESSAGE_UPDATED",e[e.EVENT_MESSAGE_DELETED=25]="EVENT_MESSAGE_DELETED",e[e.EVENT_READ_RECEIPT_UPDATED=26]="EVENT_READ_RECEIPT_UPDATED",e[e.EVENT_DELIVERY_RECEIPT_UPDATED=27]="EVENT_DELIVERY_RECEIPT_UPDATED",e[e.EVENT_MENTION=28]="EVENT_MENTION",e[e.EVENT_REACTION_UPDATED=29]="EVENT_REACTION_UPDATED",e[e.EVENT_THREAD_INFO_UPDATED=30]="EVENT_THREAD_INFO_UPDATED",e[e.CHANNEL_BACKGROUND=1e3]="CHANNEL_BACKGROUND",e[e.CHANNEL_CHANGELOG=1001]="CHANNEL_CHANGELOG",e[e.MESSAGE_BACKGROUND=1002]="MESSAGE_BACKGROUND",e[e.MESSAGE_FILL=1003]="MESSAGE_FILL",e[e.MESSAGE_CHANGELOG=1004]="MESSAGE_CHANGELOG",e[e.LOCAL_MESSAGE_PENDING_CREATED=2e3]="LOCAL_MESSAGE_PENDING_CREATED",e[e.LOCAL_MESSAGE_FAILED=2001]="LOCAL_MESSAGE_FAILED",e[e.LOCAL_MESSAGE_CANCELED=2002]="LOCAL_MESSAGE_CANCELED",e[e.LOCAL_MESSAGE_RESEND_STARTED=2003]="LOCAL_MESSAGE_RESEND_STARTED",e[e.MESSAGE_COLLECTION_FILTER_MISMATCH=2004]="MESSAGE_COLLECTION_FILTER_MISMATCH"}(Ce||(Ce={}));var ke,Se={},Ne=function(){function e(){this._observers=[]}return e.of=function(t){return Se[t]||(Se[t]=new e),Se[t]},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)},e.prototype.send=function(e){for(var t=0,n=this._observers;t<n.length;t++)n[t].onevent(e)},e}(),Oe=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},Te=new Map,Ie=new Map,xe=new Map,De=function(){function e(t){var n=this,r=t.key,a=t.concurrentCallLimit,i=void 0===a?2:a,o=t.backOffDelay,s=void 0===o?0:o;this._holdersKey=e.createSemaphoreHoldersKey(r),this._resolversKey=e.createSemaphoreResolversKey(r),this._chainProcessStateKey=e.createChainProcessStateKey(r),this._numLocks=i,this._backOffDelay=s,this._localAcquiredKeys=[],this._localResolversData=[],ee()?(Te[this._holdersKey]||(Te[this._holdersKey]=[]),Ie[this._resolversKey]||(Ie[this._resolversKey]=[])):(window.localStorage[this._holdersKey]||window.localStorage.setItem(this._holdersKey,JSON.stringify([])),window.localStorage[this._resolversKey]||window.localStorage.setItem(this._resolversKey,JSON.stringify([])),window.localStorage[this._chainProcessStateKey]||window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(!1)),window.addEventListener("storage",(function(e){return M(n,void 0,void 0,(function(){var t,n;return R(this,(function(r){if(JSON.parse(window.localStorage[this._holdersKey]),this._localResolversData.length>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()&&this._hasHighestPriorityResolver())switch(e.key){case this._holdersKey:if(t=JSON.parse(e.oldValue),n=JSON.parse(e.newValue),!t||!n||n.length>=t.length)return[2];this._processChainResolve();break;case this._chainProcessStateKey:if(JSON.parse(e.newValue))return[2];this._processChainResolve();break;default:return[2]}return[2]}))}))})),window.addEventListener("beforeunload",(function(){var e=JSON.parse(window.localStorage[n._resolversKey]),t=n._localResolversData.map((function(e){return e.key})),r=e.filter((function(e){return t.indexOf(e.key)<0}));window.localStorage.setItem(n._resolversKey,JSON.stringify(r)),n._localAcquiredKeys.forEach((function(e){return n.release(e)}))})))}return e.createSemaphoreHoldersKey=function(e){return"collection@semaphore_holders_for:"+e},e.createSemaphoreResolversKey=function(e){return"collection@semaphore_resolvers_for:"+e},e.createChainProcessStateKey=function(e){return"collection@semaphore_chain_process_state_for:"+e},Object.defineProperty(e.prototype,"numLocks",{get:function(){return this._numLocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backOffDelay",{get:function(){return this._backOffDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){if(ee())return this.numLocks-Te[this._holdersKey].length;var e=JSON.parse(window.localStorage[this._holdersKey]);return this.numLocks-e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitCount",{get:function(){return ee()?Ie[this._resolversKey].length:JSON.parse(window.localStorage[this._resolversKey]).length},enumerable:!1,configurable:!0}),e.prototype._hasHighestPriorityResolver=function(){var e=JSON.parse(window.localStorage[this._resolversKey]);return e.length>0&&this._localResolversData.map((function(e){return e.key})).indexOf(e[0].key)>=0},e.prototype._isProcessChainAcquireRunning=function(){return ee()?xe[this._chainProcessStateKey]:JSON.parse(window.localStorage[this._chainProcessStateKey])},e.prototype._setProcessChainAcquireRunning=function(e){ee()?xe[this._chainProcessStateKey]=e:window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(e))},e.prototype._processChainResolve=function(){return M(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return this.waitCount>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()?(this._setProcessChainAcquireRunning(!0),this._tryResolve()?[4,(n=this._backOffDelay,M(void 0,void 0,void 0,(function(){return R(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,n)}))]}))})))]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:this._setProcessChainAcquireRunning(!1),ee()?this._processChainResolve():(e=new StorageEvent("storage",{key:this._chainProcessStateKey,oldValue:JSON.stringify(!0),newValue:JSON.stringify(!1)}),dispatchEvent(e)),t.label=3;case 3:return[2]}var n}))}))},e.prototype.acquire=function(e){return void 0===e&&(e=Ve.BACKGROUND_SYNC_CLOSE),M(this,void 0,void 0,(function(){var t,n=this;return R(this,(function(r){return ee()?[2,new Promise((function(t){var r={key:Oe(),resolver:function(e){return t(e)},priority:e};switch(e){case Ve.USER_CALL:case Ve.FILL:case Ve.BACKGROUND_SYNC_OPEN:for(var a=Ie[n._resolversKey],i=-1,o=0;o<a.length&&i<0;o++)e>a[o].priority&&(i=o);if(i>=0){Ie[n._resolversKey].splice(i,0,r);break}case Ve.BACKGROUND_SYNC_CLOSE:Ie[n._resolversKey].push(r)}n._processChainResolve()}))]:(t=JSON.parse(window.localStorage[this._resolversKey]),[2,new Promise((function(r){var a=Oe(),i={key:a,priority:e},o={key:a,resolver:function(e){return r(e)},priority:e};switch(e){case Ve.USER_CALL:case Ve.FILL:case Ve.BACKGROUND_SYNC_OPEN:for(var s=-1,l=0;l<t.length&&s<0;l++)e>t[l].priority&&(s=l);if(s>=0){t.splice(s,0,i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.splice(s,0,o);break}case Ve.BACKGROUND_SYNC_CLOSE:t.push(i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.push(o)}n._processChainResolve()}))])}))}))},e.prototype.release=function(e){if(JSON.parse(window.localStorage[this._holdersKey]),ee()){if((t=Te[this._holdersKey].indexOf(e))>=0)return Te[this._holdersKey].splice(t,1),this._processChainResolve(),!0}else{var t,n=JSON.parse(window.localStorage[this._holdersKey]),r=U([],n,!0);if((t=n.indexOf(e))>=0){n.splice(t,1),window.localStorage.setItem(this._holdersKey,JSON.stringify(n)),this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e),1);var a=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(r),newValue:JSON.stringify(n)});return dispatchEvent(a),!0}}return!1},e.prototype._tryResolve=function(){if(JSON.parse(window.localStorage[this._holdersKey]),ee()){if(Te[this._holdersKey].length<this.numLocks){var e=Oe();return Te[this._holdersKey]=U(U([],Te[this._holdersKey],!0),[e],!1),(n=Ie[this._resolversKey].shift()).resolver(e),!0}}else{var t=JSON.parse(window.localStorage[this._holdersKey]);if(t.length<this.numLocks){e=Oe();var n=this._localResolversData.shift(),r=JSON.parse(window.localStorage[this._resolversKey]),a=r.map((function(e){return e.key})).indexOf(n.key);r.splice(a,1),window.localStorage.setItem(this._resolversKey,JSON.stringify(r)),window.localStorage.setItem(this._holdersKey,JSON.stringify(U(U([],t,!0),[e],!1))),this._localAcquiredKeys.push(e);var i=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(U([],t,!0)),newValue:JSON.stringify(U(U([],t,!0),[e],!1))});return dispatchEvent(i),(0,n.resolver)(e),!0}}return!1},e}();!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(ke||(ke={}));var Pe,Me=function(){},Re=function(){function e(e,t,n,r){void 0===n&&(n=2),void 0===r&&(r=10),this._worker=null,this._state=ke.IDLE,this._retryCount=0,this._retryLimit=3,this._isPaused=!1,this.priority=Ve.BACKGROUND_SYNC_CLOSE,this.onProgress=Me,this.onStop=Me,this.onError=Me,this.onEnd=Me,this._key=e,this._worker=t,this._semaphore=new De({key:e,concurrentCallLimit:n,backOffDelay:r})}return Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._state===ke.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._state===ke.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDone",{get:function(){return this._state===ke.END},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,t){return void 0===t&&(t=!1),this._isPaused=!1,this.isDone&&t&&(this._state=ke.IDLE),this.run(e)},e.prototype.run=function(e){return M(this,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return this._isPaused||!this.isIdle?[3,5]:(t=this,[4,this._semaphore.acquire(this.priority)]);case 1:t._key=a.sent(),this._state=ke.RUNNING,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this._worker(e)];case 3:return n=a.sent(),this._retryCount=0,this.onProgress(n),n.hasNext?(this._state=ke.IDLE,this._isPaused?(this._semaphore.release(this._key),this.onStop()):(this.run(n.nextParams),this._semaphore.release(this._key))):(this._state=ke.END,this._semaphore.release(this._key),this.onEnd(),this._isPaused&&this.onStop()),[3,5];case 4:return r=a.sent(),X.warn("Collection sync run error: ",r),this._state=ke.IDLE,this._semaphore.release(this._key),this.onError(r),this._retryCount<this._retryLimit?(this._retryCount++,X.debug("Failed collection sync retry count: ",this._retryCount),this.run(e)):(X.debug("Failed collection sync all retries failed."),this.stop(),this.onStop()),[3,5];case 5:return[2]}}))}))},e.prototype.stop=function(){this._isPaused=!0},e}(),Ue=function(){function e(e){this._source=e}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),e}(),Le=function(){function e(e,t){this._source=e,this._sendingStatus=t}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendingStatus",{get:function(){return this._sendingStatus},enumerable:!1,configurable:!0}),e}(),Fe=function(){function e(){this.messageType="",this.customTypes=[],this.senderUserIds=[],this.sendingStatus=null}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){if(this.messageType&&this.messageType!==e.messageType)return!1;if(this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if(this.senderUserIds.length>0){if(!e.isUserMessage()&&!e.isFileMessage())return!1;if(!this.senderUserIds.includes(e.sender.userId))return!1}return!this.sendingStatus||this.sendingStatus===e.sendingStatus},e}(),je=function(){function e(e){var t=e.top,n=e.bottom;this.top=t,this.bottom=n}return e.prototype.include=function(e){return this.top<=e&&e<=this.bottom},e.prototype.overlap=function(e){return this.include(e.top)||this.include(e.bottom)},e}(),ze={},He=function(){function e(e){var t=this,n=e.iid,r=e.channel,a=e.limit,i=void 0===a?Ye:a;this._prevSync=null,this._nextSync=null,this._syncRange=new je({top:Number.MAX_SAFE_INTEGER,bottom:-1}),this._isPrevSyncComplete=!1,this._isNextSyncComplete=!1,this._iid=n,this._channel=r,this._limit=i;var o=H.get(this._iid).BaseChannel,s=I.get(this._iid),l=s.get("currentUserId"),c=s.get("store"),u=s.get("apiClient"),d=Ae.of(this._iid),p=Ne.of(this._iid),h="sendbird:"+l+"@channel/"+this._channel.url+"/message/sync",f=s.container.concurrentCallLimit,m=s.container.backOffDelay;this._prevSync=new Re(h,(function(e){return M(t,void 0,void 0,(function(){var e,t,n,a,i,s,l,f,m=this;return R(this,(function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:null},[4,c.get(h)];case 1:return(t=_.sent())&&t.isPrevSyncComplete?[3,5]:(t&&(this._syncRange=t.range,this._isPrevSyncComplete=t.isPrevSyncComplete),n=ve({channel:this._channel,ts:this._syncRange.top,prevLimit:this._limit}),[4,u.getMessageList(n)]);case 2:return a=_.sent(),i=a.messages.map((function(e){return o.buildMessage(e,m._channel)})),s=this.getMinCreatedAt(i),this._syncRange.top=Math.min(this._syncRange.top,s),this._syncRange.bottom<0&&(this._syncRange.bottom=this.getMaxCreatedAt(i)),this._isPrevSyncComplete=i.length<this._limit,X.debug("Message collection background sync fetched messages count: ",i.length),[4,d.upsert(i)];case 3:return _.sent(),l={range:this._syncRange,isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:t?t.isNextSyncComplete:this._isNextSyncComplete},[4,c.set({key:h,value:l,generation:1})];case 4:return _.sent(),f={source:Ce.MESSAGE_BACKGROUND,payload:{channel:r,messages:i}},p.send(f),e.hasNext=!this._isPrevSyncComplete,[3,6];case 5:X.debug("Message collection background sync has finished."),e.hasNext=!1,_.label=6;case 6:return[2,e]}}))}))}),f,m),this._nextSync=new Re(h,(function(e){return M(t,void 0,void 0,(function(){var e,t,n,a,i,s,l,f,m=this;return R(this,(function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:null},[4,c.get(h)];case 1:return(t=_.sent())?(this._syncRange=t.range,n=ve({channel:this._channel,ts:this._syncRange.bottom,nextLimit:this._limit}),[4,u.getMessageList(n)]):[3,5];case 2:return a=_.sent(),i=a.messages.map((function(e){return o.buildMessage(e,m._channel)})),s=this.getMaxCreatedAt(i),this._syncRange.bottom=Math.max(this._syncRange.bottom,s),this._isNextSyncComplete=i.length<this._limit,[4,d.upsert(i)];case 3:return _.sent(),l={range:this._syncRange,isPrevSyncComplete:t?t.isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:this._isNextSyncComplete},[4,c.set({key:h,value:l,generation:1})];case 4:_.sent(),f={source:Ce.MESSAGE_BACKGROUND,payload:{channel:r,messages:i}},p.send(f),e.hasNext=!this._isNextSyncComplete,_.label=5;case 5:return[2,e]}}))}))}),f,m)}return e.of=function(t,n,r){return void 0===r&&(r=Ye),ze[t]||(ze[t]={}),ze[t][n.url]||(ze[t][n.url]=new e({iid:t,channel:n,limit:r})),ze[t][n.url]},Object.defineProperty(e.prototype,"priority",{set:function(e){this._prevSync.priority=e,this._nextSync.priority=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Message collection background sync has resumed."),this._isPrevSyncComplete||this._prevSync.resume(null),this._isNextSyncComplete||this._nextSync.resume(null)},e.prototype.pause=function(){X.debug("Message collection background sync has paused."),this._prevSync.stop(),this._nextSync.stop()},e.prototype.getMinCreatedAt=function(e){var t=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var n=e.createdAt;n<t&&(t=n)})),t},e.prototype.getMaxCreatedAt=function(e){var t=0;return e.forEach((function(e){var n=e.createdAt;n>t&&(t=n)})),t},e}(),Be={},Ge=function(){function e(e){var t=this,n=e.iid,r=e.channel;this._token=0,this._sync=null,this._iid=n,this._channel=r;var a=H.get(this._iid).BaseChannel,i=I.get(this._iid),o=i.get("currentUserId"),s=i.get("store"),l=i.get("apiClient"),c=i.container.localCacheEnabled,u=Ae.of(this._iid),d=Ne.of(this._iid),p="sendbird:"+o+"@channel/"+this._channel.url+"/message/changelogs";this._sync=new Re(p,(function(e){return M(t,void 0,void 0,(function(){var e,t,n,o,h,f,m,_=this;return R(this,(function(y){switch(y.label){case 0:return e={hasNext:!0,nextParams:""},c?[4,s.get(p)]:[3,2];case 1:return n=y.sent(),[3,3];case 2:n=null,y.label=3;case 3:return t=n,this._token=t?t.token:i.get("firstConnectedAt")/1e3,o={channelUrl:this._channel.url,isOpenChannel:this._channel.isOpenChannel(),includeMetaArray:!1,includeReactions:!0,includeReplies:!0,includeParentMessageText:!0,includeThreadInfo:!0},"number"==typeof this._token?o.timestamp=this._token:o.token=this._token,[4,l.getMessageChangeLogs(o)];case 4:return h=y.sent(),f={updatedMessages:h.updated.map((function(e){return a.buildMessage(e,_._channel)})),deletedMessageIds:h.deleted.map((function(e){return parseInt(e.message_id)}))},e.hasNext=h.has_more,e.nextParams=this._token=h.next,X.debug("Message collection changelog sync update messages count: ",f.updatedMessages.length),X.debug("Message collection changelog sync deleted message ids count: ",f.deletedMessageIds.length),c?[4,u.upsert(f.updatedMessages)]:[3,8];case 5:return y.sent(),[4,u.remove(f.deletedMessageIds)];case 6:return y.sent(),[4,s.set({key:p,value:{token:this._token},generation:1})];case 7:y.sent(),y.label=8;case 8:return m={source:Ce.MESSAGE_CHANGELOG,payload:P({channel:r},f)},d.send(m),[2,e]}}))}))}))}return e.of=function(t,n){return Be[t]||(Be[t]={}),Be[t][n.url]||(Be[t][n.url]=new e({iid:t,channel:n})),Be[t][n.url]},e.prototype.resume=function(){X.debug("Message collection changelog sync has resumed."),this._sync.resume(null,!0)},e.prototype.pause=function(){X.debug("Message collection changelog sync has paused."),this._sync.stop()},e}();!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"}(Pe||(Pe={}));var Ve,qe=function(){function e(){this._onCacheResult=null,this._onApiResult=null}return e.prototype.invokeCacheResult=function(e,t){this._onCacheResult(e,t)},e.prototype.invokeApiResult=function(e,t){this._onApiResult(e,t)},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),Ke=function(){function e(){}return e.prototype.isNetworkConnected=function(){return!("undefined"==typeof navigator||!navigator.onLine)},e.ready=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){return"undefined"!=typeof navigator&&navigator&&"boolean"==typeof navigator.onLine?[2,navigator.onLine]:[2,new Promise((function(e,t){i.default.get("https://www.google.com").then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}();!function(e){e[e.BACKGROUND_SYNC_CLOSE=0]="BACKGROUND_SYNC_CLOSE",e[e.BACKGROUND_SYNC_OPEN=1]="BACKGROUND_SYNC_OPEN",e[e.FILL=2]="FILL",e[e.USER_CALL=3]="USER_CALL"}(Ve||(Ve={}));var We,Ye=100,Qe=new je({top:Number.MAX_SAFE_INTEGER,bottom:0}),Je=new Map,Xe=function(e){return"sendbird@message/fill/"+e+"/"+Oe()},$e=function(){function e(e){var t=this,n=e.iid,r=e.channel,a=e.startingPoint,i=e.filter,o=e.limit,s=void 0===o?100:o;this._hugeGapCheckTimer=null,this._messages=[],this._syncRange=new je(P({},Qe)),this._hasPrevious=!0,this._hasNext=!0,this._unsentMessages=[],this._iid=n,this._channel=r,this._startingPoint=a,this._filter=i,this._limit=s,this._syncLimit=Math.max(s,Ye),this._eventObserver={onevent:function(e){return M(t,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this._handleEvent(e)];case 1:return t.sent(),[2]}}))}))}},this._eventHandler={onMessagesAdded:me,onMessagesUpdated:me,onMessagesDeleted:me,onChannelUpdated:me,onChannelDeleted:me,onHugeGapDetected:me};var l=I.get(this._iid);this._localCacheEnabled=l.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=He.of(this._iid,this._channel,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=Ge.of(this._iid,this._channel),this._connectionObserver={onConnect:function(){t._checkHugeGap(),t._localCacheEnabled&&t._backgroundSync.resume(),t._changelogSync.resume()},onDisconnect:function(){return M(t,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,Ke.ready()];case 1:return e.sent()||(this._previousFillSync.stop(),this._nextFillSync.stop(),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},this._previousFillSync=new Re(Xe("prev"),(function(e){return M(t,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,prevLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.min.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.top=Math.min(this._syncRange.top,n),r=new Le(Ce.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.top>=n,nextParams:this._syncRange.top}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),this._nextFillSync=new Re(Xe("next"),(function(e){return M(t,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,nextLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.max.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.bottom=Math.max(this._syncRange.bottom,n),r=new Le(Ce.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.bottom<=n,nextParams:this._syncRange.bottom}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),fe.of(this._iid).addObserver(this._connectionObserver)}return e.prototype._handleEvent=function(e){var t=e.source,n=e.payload,r=void 0===n?{}:n,a=Sa.getInstance(this._iid);switch(e.source){case Ce.MESSAGE_BACKGROUND:break;case Ce.MESSAGE_CHANGELOG:var i=r,o=i.channel,s=i.updatedMessages,l=i.deletedMessageIds;if(o&&o.url===this._channel.url){if(s&&s.length>0){this._removeUnsentMessagesFromView([s]);var c=new Le(t,s[0].sendingStatus);this._addMessagesToView(s,{context:c})}l&&l.length>0&&(h=this._removeMessagesFromView(l,{})).length>0&&(c=new Le(t,h[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,this._channel,h))}break;case Ce.LOCAL_MESSAGE_PENDING_CREATED:case Ce.LOCAL_MESSAGE_RESEND_STARTED:case Ce.LOCAL_MESSAGE_CANCELED:var u=r,d=(o=u.channel,u.message);c=new Le(t,d.sendingStatus),o.url===this._channel.url&&this._upsertUnsentMessagesToView([d],{context:c});break;case Ce.EVENT_MESSAGE_SENT:var p=r;if(o=p.channel,d=p.message,o.url===this._channel.url){var h=this._removeUnsentMessagesFromView([d]);this._hasNext?h.length>0&&(c=new Le(t,h[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,o,h)):(this._addMessagesToView([d],{}),c=new Le(t,d.sendingStatus),h.length>0?this._eventHandler.onMessagesUpdated(c,o,[d]):this._eventHandler.onMessagesAdded(c,o,[d]))}break;case Ce.EVENT_MESSAGE_RECEIVED:var f=r;o=f.channel,d=f.message,o.url!==this._channel.url||this._hasNext||(c=new Le(t,d.sendingStatus),this._addMessagesToView([d],{context:c}));break;case Ce.LOCAL_MESSAGE_FAILED:var m=r;o=m.channel,d=m.message,o.url===this._channel.url&&d.sendingStatus===a.MessageSendingStatus.FAILED&&(c=new Le(t,d.sendingStatus),this._upsertUnsentMessagesToView([d],{context:c}));break;case Ce.EVENT_MESSAGE_UPDATED:var _=r;o=_.channel,d=_.message,o.url===this._channel.url&&(c=new Le(t,d.sendingStatus),this._addMessagesToView([d],{context:c,isUpdateOnly:!0}));break;case Ce.EVENT_MESSAGE_DELETED:var y=r,g=(o=y.channel,y.messageId);o.url===this._channel.url&&(Je.delete(g),(h=this._removeMessagesFromView([g],{})).length>0&&(c=new Le(t,h[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,this._channel,h)));break;case Ce.EVENT_DELIVERY_RECEIPT_UPDATED:case Ce.EVENT_READ_RECEIPT_UPDATED:if((o=r.channel).isGroupChannel()){s=[];for(var v=0,b=this._messages;v<b.length;v++)d=b[v],(Je.get(d.messageId)||0)!==(N=this.channel.getUnreadMemberCount(d))&&(s.push(d),N>0?Je.set(d.messageId,N):Je.delete(d.messageId));s.length>0&&(c=new Le(t,s[0].sendingStatus),this._eventHandler.onMessagesUpdated(c,o,s))}break;case Ce.EVENT_USER_LEFT:var E=I.get(this._iid),w=r,C=(o=w.channel,w.user),A=E.get("currentUserId");if(C.userId!==A){s=[];for(var k=0,S=this._messages;k<S.length;k++){var N;d=S[k],(Je.get(d.messageId)||0)!==(N=this.channel.getUnreadMemberCount(d))&&(s.push(d),N>0?Je.set(d.messageId,N):Je.delete(d.messageId))}s.length>0&&(c=new Le(t,s[0].sendingStatus),this._eventHandler.onMessagesUpdated(c,o,s))}else c=new Ue(t),this._eventHandler.onChannelDeleted(c,o.url);break;case Ce.EVENT_CHANNEL_CHANGED:case Ce.EVENT_USER_RECEIVED_INVITATION:case Ce.EVENT_USER_JOINED:case Ce.EVENT_CHANNEL_FROZEN:case Ce.EVENT_CHANNEL_UNFROZEN:case Ce.EVENT_CHANNEL_HIDDEN:case Ce.EVENT_CHANNEL_UNHIDDEN:case Ce.EVENT_USER_MUTED:case Ce.EVENT_USER_UNMUTED:case Ce.EVENT_TYPING_STATUS_UPDATED:case Ce.EVENT_OPERATOR_UPDATED:case Ce.EVENT_CHANNEL_METADATA_UPDATED:case Ce.EVENT_CHANNEL_METADATA_DELETED:case Ce.EVENT_CHANNEL_METACOUNTER_UPDATED:case Ce.EVENT_CHANNEL_METACOUNTER_DELETED:o=r.channel,c=new Ue(t),this._eventHandler.onChannelUpdated(c,o);break;case Ce.EVENT_CHANNEL_DELETED:o=r.channel,c=new Ue(t),this._eventHandler.onChannelDeleted(c,o.url)}},e.prototype._createRemoteMessageParams=function(e){var t=e.prevLimit,n=void 0===t?0:t,r=e.nextLimit,a=void 0===r?0:r,i=new(0,H.get(this._iid).MessageListParams);return i.isInclusive=!0,i.prevResultSize=n,i.nextResultSize=a,i.includeMetaArray=!0,i.includeReactions=!0,i.includeThreadInfo=!0,i.includeReplies=!0,i.includeParentMessageText=!0,i},e.prototype._getRemoteMessages=function(e){var t=e.ts,n=e.prevLimit,r=void 0===n?0:n,a=e.nextLimit,i=void 0===a?0:a;return M(this,void 0,void 0,(function(){var e,n,a,o;return R(this,(function(s){switch(s.label){case 0:return e=[],r>0?(a=this._createRemoteMessageParams({prevLimit:r,nextLimit:0}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,2];case 1:n=s.sent(),e=e.concat(n),this._hasPrevious=n.length>=r,s.label=2;case 2:return i>0?(a=this._createRemoteMessageParams({prevLimit:0,nextLimit:i}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,4];case 3:o=s.sent(),e=e.concat(o),this._hasNext=o.length>=i,s.label=4;case 4:return e.length>0?[4,this._upsertRemotelyFetchedMessages(e)]:[3,6];case 5:s.sent(),s.label=6;case 6:return[2,e]}}))}))},e.prototype._upsertRemotelyFetchedMessages=function(e,t){return void 0===t&&(t={}),M(this,void 0,void 0,(function(){var n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return n=t.context,r=void 0===n?null:n,a=Ae.of(this._iid),i=e.map((function(e){return e.reqId})),[4,a.removeUnsentMessages({channelUrl:this.channel.url,reqIds:i})];case 1:return o.sent(),this._removeUnsentMessagesFromView(e,{context:r}),[4,a.upsert(e,pe.SUCCEEDED)];case 2:return o.sent(),this._addMessagesToView(e,{context:r}),[2]}}))}))},e.prototype._checkHugeGap=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,l,c,u,d,p,h,f,m=this;return R(this,(function(_){switch(_.label){case 0:return _.trys.push([0,12,,13]),e=H.get(this._iid).BaseChannel,t=I.get(this._iid),n=t.get("apiClient"),this._messages.length>0?(r=Ae.of(this._iid),a={from:this._messages[0].createdAt,to:Math.min(this._syncRange.top,this._messages[this._messages.length-1].createdAt),cachedCount:0},i=a,[4,r.countBetween(this._channel.url,this._filter,a.from,a.to)]):[3,8];case 1:return i.cachedCount=_.sent(),o={from:Math.max(this._syncRange.bottom,this._messages[0].createdAt),to:this._messages[this._messages.length-1].createdAt,cachedCount:0},s=o,[4,r.countBetween(this._channel.url,this._filter,o.from,o.to)];case 2:return s.cachedCount=_.sent(),l={iid:this._iid,channelUrl:this._channel.url,channelType:this._channel.channelType,filter:this._filter,previous:a,next:o},[4,n.checkMessageHugeGap(P(P({},l),l.filter))];case 3:return c=_.sent(),(u={isHugeGap:!!c.is_huge_gap,previousMessages:c.prev_messages.map((function(t){return e.buildMessage(t,m._channel)}))||[],previousHasMore:!!c.prev_hasmore,nextMessages:c.next_messages.map((function(t){return e.buildMessage(t,m._channel)}))||[],nextHasMore:!!c.next_hasmore}).isHugeGap?[3,6]:(p=U(U([],u.previousMessages,!0),u.nextMessages,!0),X.debug("Message collection non-huge gap message fill count: ",p.length),p.length>0?(h=new Le(Ce.MESSAGE_FILL,p[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(p,{context:h})]):[3,5]);case 4:_.sent(),this._extendSyncRange(["prev"],u.previousMessages),this._extendSyncRange(["next"],u.nextMessages),u.previousHasMore&&this._previousFillSync.run(this._syncRange.top),u.nextHasMore&&this._nextFillSync.run(this._syncRange.bottom),_.label=5;case 5:return[3,7];case 6:setTimeout((function(){return m._eventHandler.onHugeGapDetected()}),10),_.label=7;case 7:return[3,11];case 8:return d=Math.floor(this._syncLimit/2),[4,this._getRemoteMessages({ts:this._startingPoint,prevLimit:d,nextLimit:d})];case 9:return(p=_.sent()).length>0?(h=new Le(Ce.MESSAGE_FILL,p[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(p,{context:h})]):[3,11];case 10:_.sent(),this._extendSyncRange(["prev","next"],this._messages),_.label=11;case 11:return[3,13];case 12:return f=_.sent(),X.warn("Message collection huge gap checker error: ",f),this._hugeGapCheckTimer=setTimeout((function(){m._hugeGapCheckTimer=null,m._checkHugeGap()}),3e3),[3,13];case 13:return[2]}}))}))},e.prototype._extendSyncRange=function(e,t){if(t.length>0){var n=t.map((function(e){return e.createdAt}));e.includes("prev")&&(this._syncRange.top=Math.min.apply(Math,U([this._syncRange.top],n,!1))),e.includes("next")&&(this._syncRange.bottom=Math.max.apply(Math,U([this._syncRange.bottom],n,!1)))}},e.prototype._addMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=t.isUpdateOnly,i=void 0!==a&&a,o=[],s=[],l=[],c=0,u=e;c<u.length;c++){var d=u[c],p=this._messages.map((function(e){return e.messageId})).indexOf(d.messageId);if(this._filter.match(d)){var h=this._channel.getUnreadMemberCount(d);if(Je.set(d.messageId,h),p>=0)s.push(d),this._messages[p]=d;else if(!i){var f=ge(this._messages,d);o.push(d),this._messages.splice(f,0,d)}}else p>=0&&(l.push(d),this._messages.splice(p,1))}r&&(o.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,o),s.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,s),l.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,l))},e.prototype._removeMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,o=e;i<o.length;i++){var s=o[i],l=this._messages.map((function(e){return e.messageId})).indexOf(s);if(l>=0){var c=this._messages[l];a.push(c),this._messages.splice(l,1)}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._upsertUnsentMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],o=[],s=0,l=e;s<l.length;s++){var c=l[s],u=this._unsentMessages.map((function(e){return e.reqId})).indexOf(c.reqId);if(this._filter.match(c))if(u>=0)i.push(c),this._unsentMessages[u]=c;else{var d=ge(this._unsentMessages,c);a.push(c),this._unsentMessages.splice(d,0,c)}else u>=0&&(this._unsentMessages.splice(u,1),o.push(c))}r&&(a.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,a),i.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,i),o.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,o))},e.prototype._removeUnsentMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,o=e;i<o.length;i++){var s=o[i],l=this._unsentMessages.map((function(e){return e.reqId})).indexOf(s.reqId);if(l>=0){var c=this._unsentMessages[l];a.push(c),this._unsentMessages.splice(l,1)}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._removeFailedMessagesFromView=function(e){var t=Sa.getInstance(this._iid),n=[],r=[],a=this._unsentMessages.map((function(e){return e.reqId}));if(e)for(var i=0,o=e;i<o.length;i++){var s=o[i],l=a.indexOf(s.reqId);l>=0&&this._unsentMessages[l].sendingStatus===t.MessageSendingStatus.FAILED?n.push(this._unsentMessages[l]):r.push(this._unsentMessages[l])}else for(var c=0,u=this._unsentMessages;c<u.length;c++)(s=u[c]).sendingStatus===t.MessageSendingStatus.FAILED?n.push(s):r.push(s);return this._unsentMessages=r,n},e._processNextAutoResend=function(e){if(e.isCacheEnabled&&!e.isInBackground&&e.getConnectionState()===e.ConnectionState.OPEN)try{var t=e.getAutoResendQueue();if(t.length>0){e.getIsProcessingAutoResend()||(X.debug("Auto-resend queue started."),e.setIsProcessingAutoResend(!0));var n=t[0];X.debug("Processing auto-resend for message request id: ",n.reqId),H.get(e._iid).GroupChannel.getChannel(n.channelUrl,O.INTERNAL_CALL,(function(t,r){var a;if(e.getErrorFirstCallback()&&(r=(a=[t,r])[0],t=a[1]),r)throw r;n.isUserMessage()?t._autoResendUserMessage(n):n.isFileMessage()&&t._autoResendFileMessage(n)}))}else X.debug("Auto-resend queue finished."),e.setIsProcessingAutoResend(!1)}catch(t){X.warn("Process auto-resend error: ",t),e.setIsProcessingAutoResend(!1)}},e._completeCurrentAndProcessNextAutoResend=function(e,t){if(e.isCacheEnabled&&t._isAutoResendRegistered){var n=e.getAutoResendQueue();if(t.sendingStatus===e.MessageSendingStatus.SUCCEEDED||t.sendingStatus===e.MessageSendingStatus.FAILED&&!ie.isAutoResendableError(t.errorCode))n.length>0&&t.reqId===n[0].reqId&&(n.shift(),this._processNextAutoResend(e));else if(t.sendingStatus===e.MessageSendingStatus.PENDING){if(n.length>0&&n.map((function(e){return e.reqId})).indexOf(t.reqId)>-1)return;n.push(t),!e.getIsProcessingAutoResend()&&n.length>0&&this._processNextAutoResend(e)}}},e._processPendingMessages=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,l,c,u,d,p,h,f,m;return R(this,(function(_){switch(_.label){case 0:return t=Ae.of(e._iid),n=Ne.of(e._iid),r=I.get(e._iid),(a=new Fe).sendingStatus=e.MessageSendingStatus.PENDING,i=r.container.nestdb,o=i.collection("UnsentMessage"),[4,t.getAllUnsentMessages(a,o)];case 1:s=_.sent(),l=0,c=s,_.label=2;case 2:return l<c.length?(u=c[l],[4,e.GroupChannel.getChannel(u.channelUrl)]):[3,10];case 3:return d=_.sent(),u._isAutoResendRegistered?(p=(new Date).getTime(),h=u.createdAt+2592e5,p<=h?(-1===(f=e.getAutoResendQueue()).map((function(e){return e.reqId})).indexOf(u.reqId)&&f.push(u),[3,6]):[3,4]):[3,7];case 4:return X.debug("Auto-resend registered pending messaged expired. Expiration date: ",new Date(h).toLocaleString()),(m=u._clone()).sendingStatus=e.MessageSendingStatus.FAILED,m.requestState=e.MessageRequestState.FAILED,m._isAutoResendRegistered=!1,[4,t.upsert([m],pe.UNSENT)];case 5:_.sent(),n.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:d,message:m}}),_.label=6;case 6:return[3,9];case 7:return X.debug("Cached pending message is not auto-resend registered. Changing its sending status to failed: ",u.reqId),(m=u._clone()).sendingStatus=e.MessageSendingStatus.FAILED,m.requestState=e.MessageRequestState.FAILED,m.errorCode=F.ACK_TIMEOUT,[4,t.upsert([m],pe.UNSENT)];case 8:_.sent(),n.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:d,message:m}}),_.label=9;case 9:return l++,[3,2];case 10:return[2]}}))}))},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){var e=Sa.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){var e=Sa.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startingPoint",{get:function(){return this._startingPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this,n=new qe;this._messages=[],this._syncRange=new je(P({},Qe)),this._hasNext=!0,this._hasPrevious=!0;var r=Math.floor(this._limit/2);switch(e){case Pe.CACHE_AND_REPLACE_BY_API:var a=Ae.of(this._iid);a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint).then((function(e){return M(t,void 0,void 0,(function(){var t;return R(this,(function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}}))}))})).catch((function(e){n.invokeCacheResult(e,null)})).finally((function(){t._getRemoteMessages({ts:t._startingPoint,prevLimit:r,nextLimit:r}).then((function(e){t._messages=[],t._addMessagesToView(e),t._extendSyncRange(["prev","next"],t._messages),n.invokeApiResult(null,e)})).catch((function(e){n.invokeApiResult(e,null)})).finally((function(){Ne.of(t._iid).addObserver(t._eventObserver)}))}))}return n},e.prototype.loadPrevious=function(){return M(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return this._hasPrevious?(e=this._messages.length>0?Math.min.apply(Math,this._messages.map((function(e){return e.createdAt}))):Number.MAX_SAFE_INTEGER,[4,Ke.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadPrevious() from the cache."),[4,Ae.of(this._iid).getPreviousMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadPrevious() from the server."),[4,this._getRemoteMessages({ts:e,prevLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),be(this._syncRange,["prev"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.loadNext=function(){return M(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return this._hasNext?(e=this._messages.length>0?Math.max.apply(Math,this._messages.map((function(e){return e.createdAt}))):0,[4,Ke.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadNext() from the cache."),[4,Ae.of(this._iid).getNextMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadNext() from the server."),[4,this._getRemoteMessages({ts:e,nextLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),be(this._syncRange,["next"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.removeFailedMessages=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a;return R(this,(function(i){switch(i.label){case 0:return t=Sa.getInstance(this._iid),n=Ae.of(this._iid),r=e.map((function(e){return e.reqId})),[4,n.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:t.MessageSendingStatus.FAILED,reqIds:r})];case 1:return a=i.sent(),this._removeFailedMessagesFromView(e),[2,a]}}))}))},e.prototype.removeAllFailedMessages=function(){return M(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return e=Sa.getInstance(this._iid),[4,Ae.of(this._iid).removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:e.MessageSendingStatus.FAILED})];case 1:return t.sent(),this._removeFailedMessagesFromView(),[2]}}))}))},e.prototype.dispose=function(){this._localCacheEnabled&&(this._previousFillSync.stop(),this._nextFillSync.stop(),this._backgroundSync.pause()),this._changelogSync.pause(),fe.of(this._iid).removeObserver(this._connectionObserver),this._hugeGapCheckTimer&&(clearTimeout(this._hugeGapCheckTimer),this._hugeGapCheckTimer=null),Ne.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setMessageCollectionHandler=function(e){this._eventHandler=e},e}(),Ze=1048576,et=function(){function e(e){void 0===e&&(e={}),this._emojiHash=e.emoji_hash||"",this._uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*Ze:Number.MAX_VALUE,this._useReaction=!!e.use_reaction,this._applicationAttributes=e.application_attributes||[],this._premiumFeatureList=e.premium_feature_list||[],this._disableSupergroupMack=e.disable_supergroup_mack||!1}return Object.defineProperty(e.prototype,"emojiHash",{get:function(){return this._emojiHash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploadSizeLimit",{get:function(){return this._uploadSizeLimit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingReaction",{get:function(){return this._useReaction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationAttributes",{get:function(){return this._applicationAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premiumFeatureList",{get:function(){return this._premiumFeatureList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupergroupMackDisabled",{get:function(){return this._disableSupergroupMack},enumerable:!1,configurable:!0}),e.prototype._objectify=function(){var e={};return e.emoji_hash=this._emojiHash,this._uploadSizeLimit!==Number.MAX_VALUE&&(e.file_upload_size_limit=this._uploadSizeLimit/Ze),e.use_reaction=this._useReaction,e.application_attributes=this._applicationAttributes,e.premium_feature_list=this._premiumFeatureList,e.disable_supergroup_mack=this._disableSupergroupMack,e},e}(),tt=function(){function e(t){d(this,e),this.sb=t,this.cls=H.get(this.sb._iid),this.client=new de(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return h(e,[{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}},{key:"connect",value:function(e,t){var n=this,r=I.get(this.sb._iid).container,a=r.auth,i=r.apiClient,o=r.commandHandler;a.sessionToken=t||null;var s=this.cls.GroupChannel,l=null,c=new de.ConnectionHandler;this.client=new de(this.sb,c),c.onMessage=function(e){o.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,n.sb.reconnecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=function(){s.cachedChannels&&Object.keys(s.cachedChannels).forEach((function(e){var t=s.cachedChannels[e];t.invalidateTypingStatus()&&Object.keys(n.sb.channelHandlers).forEach((function(e){n.sb.channelHandlers[e].onTypingStatusUpdated(t)}))}))};r(),n.sb.globalTimer=setInterval((function(){return r()}),1e3),n.flushConnectionCallbacks(null,t),n.sb.ConnectionManager.processAllReadyHandler(null)}},c.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout((function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new F("Connection timeout.",F.LOGIN_TIMEOUT),null),n.sb.disconnect(null)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new F("Connection has been canceled.",F.REQUEST_FAILED),null)},n.sb.connecting=!1},c.onError=function(r){X.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),a.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1):n.connectCount<n.connectParams.retryCount?(n.connectCount++,n.client.connect(e,t,l)):(n.connectCount=0,n.flushConnectionCallbacks(new F("Websocket connection failed.",F.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1)},c.onClose=function(){X.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},i.checkRouting((function(r,a){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new F("Connection routing failed.",F.REQUEST_FAILED),null);l=a.wsHost,i.dummyCall((function(e){e&&X.error("API dummy call failed:",e)})),n.client.connect(e,t,l)}))}},{key:"reconnect",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=I.get(this.sb._iid).container,a=r.auth,i=r.apiClient,o=r.commandHandler,s=r.ackStateMap,l=r.sessionManager,c=this.cls.OpenChannel;if(this.sb.connecting=!1,this.sb.reconnecting=!0,this.sb.reconnectTimer)X.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1?(n&&(Object.keys(s).forEach((function(e){var t=s[e];t&&(clearTimeout(t.timer),(0,t.handler)(new F("Command received no ack.",F.ACK_TIMEOUT),null)),delete s[e]})),fe.of(this.sb._iid).invokeDisconnect(),Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectStarted()}))),this.reconnectDelay=0):this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER),!e||!a.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount)return this.disconnect({clearSession:!1,err:new F("Websocket connection failed.",F.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectFailed()})),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler();this.sb.onReconnectTimerCancel=function(){t.reconnectCount=0},this.sb.reconnectTimer=setTimeout((function(){t.sb.reconnectTimer=null,t.sb.onReconnectTimerCancel=null,t.client&&t.client.disconnect(!0);var n=new de.ConnectionHandler;t.client=new de(t.sb,n),t.sb.loginHandler=function(n,r){n?l.isSessionError(n)?l.refreshSessionIfExpiredError(n).then((function(){clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnectCount=0,t.reconnect(e,!1)})).catch((function(){})):(clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnect(e,!1)):(t.reconnectCount=0,t.sb.connecting=!1,t.sb.reconnecting=!1,t.sb.isReconnectingOnError=!1,fe.of(t.sb._iid).invokeConnect(),Object.keys(t.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectSucceeded()})),t.sb.ConnectionManager.processAllReadyHandler(null),t.sb.isReconnectingOnError&&Object.keys(t.sb.ConnectionManager.networkHandlers).forEach((function(e){t.sb.ConnectionManager.networkHandlers[e].onReconnected()})),Object.keys(c.enteredChannels).forEach((function(e){c.enteredChannels[e].enter((function(n,r){if(n){var a=t.cls.FileMessageQueue;delete c.enteredChannels[e],a.delete(e)}}))})))},n.onOpen=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),t.sb.loginTimer=setTimeout((function(){X.debug("Reconnect: `loginTimer` timeout."),t.sb.loginTimer=null,t.reconnect(e,!0)}),t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=null},n.onMessage=function(e){o.onRawCommandReceived(e)},n.onError=function(n){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",n),t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0)},n.onClose=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),t.sb.reconnecting=!1},i.checkRouting((function(n,r){n?t.reconnect(e,!0):(t.sb.getCurrentApiHost()!==r.apiHost&&i.get("/",null,(function(){})),t.client.connect(e,null,r.wsHost))}))}),this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=I.get(this.sb._iid),r=n.container.ackStateMap,a=this.cls,i=a.GroupChannel,o=a.OpenChannel,s=e.clearSession,l=e.err;this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),s&&(o.clearEnteredChannels(),o.clearCache(),i.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),Object.keys(r).forEach((function(e){clearTimeout(r[e].timer)})),this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new j)),l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this,r=I.get(this.sb._iid).container,a=r.store,i=r.localCacheEnabled,o=this.sb.connectionCallbacks;if(this.sb.connectionCallbacks=[],e)if(i){var s=this.sb._getCurrentUserDataKey();ie.isNonAutoReconnectableError(e.code)?a.remove(s).catch((function(e){return X.debug("Sendbird connect store remove error: ",e)})).finally((function(){return o.forEach((function(t){return t(e,null)}))})):a.get(s).then((function(e){n.sb._populateVaultFromCurrentUserData(e)})).catch((function(e){X.debug("Sendbird connect store fetch error: ",e)})).finally((function(){n.sb.currentUser?o.forEach((function(t){return t(e,n.sb.currentUser)})):o.forEach((function(t){return t(e,null)}))}))}else o.forEach((function(t){return t(e,null)}));else fe.of(this.sb._iid).invokeConnect(),i?a.set({key:this.sb._getCurrentUserDataKey(),value:this._createCurrentUserData(t),generation:1}).catch((function(e){return X.debug("Sendbird connect store write error: ",e)})).finally((function(){return o.forEach((function(e){return e(null,n.sb.currentUser)}))})):o.forEach((function(e){return e(null,t)}))}},{key:"_createCurrentUserData",value:function(e){var t=I.get(this.sb._iid).container,n=t.auth,r=t.maxUnreadCountOfSuperGroupChannel,a=t.profileImageEncryption,i=t.appInfo,o=t.connectedAt,s=t.firstConnectedAt,l=t.concurrentCallLimit,c=t.backOffDelay,u={currentUser:(e||this.sb.currentUser).serialize(),maxUnreadCountOfSuperGroupChannel:O.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,profileImageEncryption:!1};return n.sessionKey&&(u.sessionKey=n.sessionKey),n.eKey&&(u.eKey=n.eKey),r&&(u.maxUnreadCountOfSuperGroupChannel=r),a&&(u.profileImageEncryption=a),i&&(u.appInfo=i._objectify()),o&&s&&(u.connectedAt=o,u.firstConnectedAt=s),l&&c&&(u.concurrentCallLimit=l,u.backOffDelay=c),u}}]),e}(),nt=function(){function e(t){var n=t.type,r=t.nullable,a=void 0!==r&&r,i=t.optional,o=void 0!==i&&i,s=t.optionalIf,l=void 0===s?null:s,c=t.ignoreIf,u=void 0===c?null:c,p=t.defaultValue,h=void 0===p?null:p,f=t.constraint,m=void 0===f?null:f;d(this,e),this.type=n,this.nullable=a,this.optional=o,this.optionalIf=l,this.ignoreIf=u,this.defaultValue=h,this.constraint=m}return h(e,[{key:"isMatchingType",value:function(e){var t=function(t,n){return"string"==typeof n?u(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&ie.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===u(n)&&Object.keys(n).map((function(e){return n[e]})).indexOf(e)>-1};return t(e,this.type)||Array.isArray(this.type)&&this.type.some((function(n){return t(e,n)}))||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);t.length>0&&void 0===t[t.length-1];)t.pop();var r=!1,a=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(a=t.pop()),n.pop(),r=!0);var i=[],o=null,s=0;return n.forEach((function(n){"function"==typeof n.ignoreIf&&n.ignoreIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):n.isMatchingType(t[s])?(n.nullable&&null===t[s]||!n.constraint||n.constraint(t[s])||(o=e.error),i.push(t[s]),s++):n.optional||"function"==typeof n.optionalIf&&n.optionalIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):(o=e.error,i.push(t[s]),s++)})),r&&a&&i.push(a),t.length!==s&&(o=e.error),[o].concat(i)}},{key:"error",get:function(){return new F("Invalid parameter.",F.INVALID_PARAMETER)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}}]),e}(),rt=function(){function e(t){d(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return h(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=I.get(this.sb._iid).container,r=n.auth,a=n.isInBackground;t&&r.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||a||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach((function(n){n&&"function"==typeof n&&n(e,t)}))}}},{key:"errorAllReadyHandler",value:function(){var e=I.get(this.sb._iid).container.auth;this.processAllReadyHandler(e&&e.hasSession()?new F("WebSocket connection must be made first.",F.WEBSOCKET_CONNECTION_CLOSED):new F("Connection should be made first.",F.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout((function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)}),this.authenticateTimer);this.authInfoRequester((function(r){if(n){clearTimeout(n),n=null,t.authCount--;var a=function(n,r){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,r.accessToken,a):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,a):e(nt.error,null)}}))}else e(nt.error,null)}}]),e}(),at=function(){this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},it=function(){function e(){d(this,e),this.handler=null,this.resolvers=[]}return h(e,[{key:"_refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){var a=null,i=function(){a&&(clearTimeout(a),a=null)},o=function(){a&&(i(),r(e.sessionTokenRequestFailedError))};a=setTimeout((function(){return o()}),3e4),t.handler.onSessionTokenRequired((function(e){a&&(i(),n(e))}),o)}))}},{key:"_refreshSessionKey",value:function(){var t=this;return new Promise((function(n,r){var a=I.get(t._iid).container,i=a.auth,o=a.wsAdapter;i.sessionToken?o.isConnected?t._refreshSessionKeyByCommand().then((function(){return n()})).catch((function(e){e.isSessionTokenExpiredError?r(e):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)}))})):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)})):r(e.sessionTokenNotFoundError)}))}},{key:"_refreshSessionKeyByCommand",value:function(){var t=this;return new Promise((function(n,r){var a=Sa.getInstance(t._iid),i=I.get(t._iid).container.auth,o=H.get(t._iid).Command,s=o.bSessionRefresh({token:i.sessionToken,requestId:o.generateRequestId()});a.sendCommand(s,(function(t,o){if(!a.getErrorFirstCallback()){var s=[t,o];o=s[0],t=s[1]}t?r(t):o?o.hasOwnProperty("error")?r(e.sessionKeyRefreshFailedError):(o.hasOwnProperty("new_key")&&(i.sessionKey=o.new_key),n()):r(e.sessionKeyRefreshFailedError)}))}))}},{key:"_refreshSessionKeyByApi",value:function(){var t=this;return new Promise((function(n,r){!function a(i){if(i<3){var o=I.get(t._iid).container,s=o.auth,l=o.apiClient,c={};s.sessionToken&&(c.accessToken=s.sessionToken),l.refreshSessionKey(c,(function(e,t){if(e)e.isSessionTokenExpiredError||e.isSessionTokenRevokedError?r(e):a(i+1);else{var o=t.key;s.sessionKey=o,n()}}))}else r(e.sessionKeyRefreshFailedError)}(0)}))}},{key:"_handleSessionToken",value:function(t){var n=this;t?(I.get(this._iid).container.auth.sessionToken=t,this._refreshSessionKey().then((function(){return n._handleSessionRefreshSuccess()})).catch((function(){return n._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):this._handleSessionClosed(e.sessionTokenRequestFailedError)}},{key:"_handleSessionRefreshSuccess",value:function(){this.handler.onSessionRefreshed(),this._flushResolvers(null)}},{key:"_handleSessionRefreshError",value:function(e){this._cancelConnection(),this.handler.onSessionError(e),this._flushResolvers(e)}},{key:"_handleSessionClosed",value:function(e){this._cancelConnection(),this.handler.onSessionClosed(),this._flushResolvers(e)}},{key:"_cancelConnection",value:function(){var e=Sa.getInstance(this._iid);e.reconnecting&&(Object.keys(e.connectionHandlers).forEach((function(t){e.connectionHandlers[t].onReconnectFailed()})),e.reconnecting=!1),e.disconnect()}},{key:"_flushResolvers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;n<this.resolvers.length;n++)e?this.resolvers[n].reject(e):this.resolvers[n].resolve(t);this.resolvers=[]}},{key:"setHandler",value:function(e){e instanceof at&&(this.handler=e)}},{key:"isSessionError",value:function(e){return e.isSessionTokenExpiredError||e.isSessionTokenRevokedError||e.isSessionKeyExpiredError}},{key:"refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){t.handler?(t.resolvers.push({resolve:n,reject:r}),1===t.resolvers.length&&t._refreshSessionToken().then((function(e){return t._handleSessionToken(e)})).catch((function(){return t._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):n()}))}},{key:"refreshSessionKey",value:function(){var e=this;return new Promise((function(t,n){e.handler?(e.resolvers.push({resolve:t,reject:n}),1===e.resolvers.length&&e._refreshSessionKey().then((function(){return e._handleSessionRefreshSuccess()})).catch((function(t){t.isSessionTokenExpiredError?e._refreshSessionToken().then((function(t){return e._handleSessionToken(t)})).catch((function(t){return e._handleSessionRefreshError(t)})):t.isSessionTokenRevokedError?e._handleSessionClosed(t):e._handleSessionRefreshError(t)}))):t()}))}},{key:"refreshSessionIfExpiredError",value:function(e){var t=this;return e.isSessionTokenExpiredError?this.refreshSessionToken():e.isSessionKeyExpiredError?this.refreshSessionKey():e.isSessionTokenRevokedError?new Promise((function(e,n){return n(t.closeSession())})):Promise.reject(e)}},{key:"closeSession",value:function(){var t=e.sessionTokenRequestFailedError;return this._handleSessionClosed(t),t}}],[{key:"sessionTokenNotFoundError",get:function(){return new F("Session token is not found.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionTokenExpiredError",get:function(){return new F("Session token is expired.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionKeyRefreshFailedError",get:function(){return new F("Failed to refresh the session key.",F.SESSION_KEY_REFRESH_FAILED)}},{key:"sessionTokenRequestFailedError",get:function(){return new F("Failed to get the session token.",F.SESSION_TOKEN_REQUEST_FAILED)}}]),e}(),ot=function(){function e(t){d(this,e),this.sb=t}return h(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=I.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"offlineWorker",value:function(){try{if(this.sb.setIsProcessingAutoResend(!1),"undefined"!=typeof navigator&&!navigator.onLine){var e=I.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}}]),e}(),st=(new Date).getTime(),lt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(d(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var a=this.getJsonElement();a&&(this.requestId=a.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return h(e,[{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"LOGI"===this.command||"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}},{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,a=e.customType,i=e.metaArrays,o=e.mentionType,s=e.mentionedUserIds,l=e.translationTargetLanguages,c=e.pushNotificationDeliveryOption,u=e.appleCriticalAlertOptions,d=e.requestId,p=void 0===d?null:d,h=e.silent,f=void 0!==h&&h,m=e.rootMessageId,_=void 0===m?null:m,y=e.parentMessageId,g=void 0===y?null:y,v=e.pollId,b=e.isReplyToChannel,E=void 0!==b&&b,w=H.get(this._iid),C=w.UserMessageParams,A=w.BaseMessageParams,k={};return k.channel_url=t,k.message=n,k.data=r,i&&i.length>0&&(k.metaarray=i.map((function(e){return e.encode()}))),o&&(k.mention_type=o),k.mentioned_user_ids=[],o===A.MentionType.CHANNEL?k.mentioned_user_ids=[]:Array.isArray(s)&&s.length>0&&(k.mentioned_user_ids=s),a&&(k.custom_type=a),l&&l.length>0&&(k.target_langs=l),c&&c!==C.PushNotificationDeliveryOption.DEFAULT&&(k.push_option=c),u&&(k.apple_critical_alert_options=u.serialize()),f&&(k.silent=f),_&&(k.root_message_id=_),g&&(k.parent_message_id=g),"number"==typeof v?k.poll_id=v:null===v&&(k.poll_id=-1),E&&(k.reply_to_channel=E),new this("MESG",k,p)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,a=e.type,i=e.size,o=e.data,s=e.customType,l=e.thumbnailSizes,c=e.requireAuth,u=e.metaArrays,d=e.mentionType,p=e.mentionedUserIds,h=e.pushNotificationDeliveryOption,f=e.appleCriticalAlertOptions,m=e.requestId,_=void 0===m?null:m,y=e.silent,g=void 0!==y&&y,v=e.rootMessageId,b=void 0===v?null:v,E=e.parentMessageId,w=void 0===E?null:E,C=e.isReplyToChannel,A=void 0!==C&&C,k=H.get(this._iid),S=k.BaseMessageParams,N=k.FileMessageParams,O={};return O.channel_url=t,O.url=n,O.name=r||"",O.type=a||"",O.size=i||0,O.custom=o,s&&(O.custom_type=s),l&&(O.thumbnails=l),c&&(O.require_auth=c),u&&u.length>0&&(O.metaarray=u.map((function(e){return e.encode()}))),d&&(O.mention_type=d),O.mentioned_user_ids=[],d===S.MentionType.CHANNEL?O.mentioned_user_ids=[]:Array.isArray(p)&&p.length>0&&(O.mentioned_user_ids=p),h&&h!==N.PushNotificationDeliveryOption.DEFAULT&&(O.push_option=h),f&&(O.apple_critical_alert_options=f.serialize()),g&&(O.silent=g),b&&(O.root_message_id=b),w&&(O.parent_message_id=w),A&&(O.reply_to_channel=A),new this("FILE",O,_)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.message,i=void 0===a?null:a,o=e.data,s=void 0===o?null:o,l=e.customType,c=void 0===l?null:l,u=e.mentionType,d=void 0===u?null:u,p=e.mentionedUserIds,h=void 0===p?null:p,f=e.metaArrayParams,m=void 0===f?null:f,_=e.pollId,y=H.get(this._iid).BaseMessageParams,g={};return g.channel_url=t,g.msg_id=n,null!=i&&void 0!==i&&(g.message=i),null!=s&&void 0!==s&&(g.data=s),null!=c&&void 0!==c&&(g.custom_type=c),d&&(g.mention_type=d),d===y.MentionType.CHANNEL?g.mentioned_user_ids=[]:Array.isArray(h)&&h.length>0&&(g.mentioned_user_ids=h),m&&(g.metaarray=m),r&&(g.apple_critical_alert_options=r.serialize()),"number"==typeof _?g.poll_id=_:null===_&&(g.poll_id=-1),new this("MEDI",g)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.data,i=void 0===a?null:a,o=e.customType,s=void 0===o?null:o,l=e.mentionType,c=void 0===l?null:l,u=e.mentionedUserIds,d=void 0===u?null:u,p=e.metaArrayParams,h=void 0===p?null:p,f=H.get(this._iid).BaseMessageParams,m={};return m.channel_url=t,m.msg_id=n,null!=i&&void 0!==i&&(m.data=i),null!=s&&void 0!==s&&(m.custom_type=s),c&&(m.mention_type=c),c===f.MentionType.CHANNEL?m.mentioned_user_ids=[]:Array.isArray(d)&&d.length>0&&(m.mentioned_user_ids=d),h&&(m.metaarray=h),r&&(m.apple_critical_alert_options=r.serialize()),new this("FEDI",m)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return st++,String(st)}}]),e}(),ct={},ut=function(){function e(e){var t=this,n=e.iid,r=e.limit,a=void 0===r?yt:r;this._token="",this._sync=null,this._syncRange=new je({top:Number.MAX_SAFE_INTEGER,bottom:0}),this._completed=!1,this._pkIndex=Date.now(),this._iid=n,this._limit=a;var i=H.get(this._iid).GroupChannel,o=I.get(this._iid),s=o.get("currentUserId"),l=o.get("apiClient"),c=o.get("store"),u=bt.of(this._iid),d=Ne.of(this._iid),p="sendbird:"+s+"@groupchannel/sync";this._sync=new Re(p,(function(e){return M(t,void 0,void 0,(function(){var e,t,n,r,a,o,s=this;return R(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextParams:""},[4,c.get(p)];case 1:return(t=h.sent())&&t.completed?[3,5]:(t&&(this._token=t.token,this._syncRange=t.range,this._pkIndex=t.primaryKeyIndex),n={token:this._token,limit:this._limit,includeEmpty:!0,order:"chronological"},[4,l.loadGroupChannelList(n)]);case 2:return r=h.sent(),a=r.channels.map((function(e){return r.ts&&(e.ts=r.ts),e.cached_primary_key=s._pkIndex--,i.upsert(e)})),this._syncRange.top=Math.min(this._syncRange.top,Math.min.apply(Math,a.map((function(e){return e.createdAt})))),this._syncRange.bottom=Math.max(this._syncRange.bottom,Math.max.apply(Math,a.map((function(e){return e.createdAt})))),e.hasNext=a.length>=this._limit,e.nextParams=this._token=r.next,this._token||(e.hasNext=!1),this._completed=!e.hasNext,X.debug("Group channel collection background sync fetched channels count: ",a.length),[4,u.upsert(a)];case 3:return h.sent(),[4,c.set({key:p,value:{token:this._token,range:this._syncRange,completed:this._completed,primaryKeyIndex:this._pkIndex},generation:1})];case 4:return h.sent(),o={source:Ce.CHANNEL_BACKGROUND,payload:{channels:a}},d.send(o),[3,6];case 5:X.debug("Group channel collection background sync has finished."),e.hasNext=!1,h.label=6;case 6:return[2,e]}}))}))}))}return e.of=function(t,n){return void 0===n&&(n=yt),ct[t]||(ct[t]=new e({iid:t,limit:n})),ct[t]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Group channel collection background sync has resumed."),this._sync.resume("")},e.prototype.pause=function(){X.debug("Group channel collection background sync has paused."),this._sync.stop()},e}(),dt={},pt=function(){function e(e){var t=this,n=e.iid;this._token=0,this._sync=null,this._pkIndex=Date.now(),this._iid=n;var r=H.get(this._iid).GroupChannel,a=I.get(this._iid);this._token=a.get("firstConnectedAt")/1e3;var i=a.get("currentUserId"),o=a.get("store"),s=a.get("apiClient"),l=a.container.localCacheEnabled,c=bt.of(this._iid),u=Ne.of(this._iid),d="sendbird:"+i+"@groupchannel/changelogs";this._sync=new Re(d,(function(e){return M(t,void 0,void 0,(function(){var e,t,n,a,i,p,h,f=this;return R(this,(function(m){switch(m.label){case 0:return e={hasNext:!0,nextParams:""},l?[4,o.get(d)]:[3,2];case 1:return n=m.sent(),[3,3];case 2:n=null,m.label=3;case 3:return(t=n)&&(this._token=t.token,this._pkIndex=t.primaryKeyIndex),a={},"number"==typeof this._token?a.ts=this._token:a.token=this._token,[4,s.getMyGroupChannelChangeLogs(a)];case 4:return i=m.sent(),p={updatedChannels:i.updated.map((function(e){return e.cached_primary_key=f._pkIndex--,new r(e)})),deletedChannelUrls:i.deleted},e.hasNext=i.has_more,e.nextParams=this._token=i.next,X.debug("Group channel collection changelog sync update channels count: ",p.updatedChannels.length),X.debug("Group channel collection changelog sync deleted channel urls count: ",p.deletedChannelUrls.length),l?[4,c.upsert(p.updatedChannels)]:[3,8];case 5:return m.sent(),[4,c.remove(p.deletedChannelUrls)];case 6:return m.sent(),[4,o.set({key:d,value:{token:this._token,primaryKeyIndex:this._pkIndex},generation:1})];case 7:m.sent(),m.label=8;case 8:return h={source:Ce.CHANNEL_CHANGELOG,payload:p},u.send(h),[2,e]}}))}))}))}return e.of=function(t){return dt[t]||(dt[t]=new e({iid:t})),dt[t]},e.prototype.resume=function(){X.debug("Group channel collection changelog sync has resumed."),this._sync.resume(0,!0)},e.prototype.pause=function(){X.debug("Group channel collection changelog sync has paused."),this._sync.stop()},e}(),ht=function(e,t){for(var n=0;n<e.length;n++)if(e[n].url===t.url)return n;return-1},ft=function(e,t,n){if(e.length>0){for(var r=0,a=e.length-1,i=Math.floor((r+a)/2);r<a;){var o=_t(e[i],t,n);if(o>0)a=i,i=Math.floor((r+a)/2);else{if(!(o<0))return i;r=i+1,i=Math.floor((r+a)/2)}}return _t(e[i],t,n)>0?i:i+1}return e.length},mt=function(e,t){return t-e},_t=function(e,t,n){switch(n){case We.LATEST_LAST_MESSAGE:if(e.lastMessage&&!t.lastMessage)return-1;if(!e.lastMessage&&t.lastMessage)return 1;if(e.lastMessage&&t.lastMessage){var r=e.lastMessage.createdAt;if(0==(i=t.lastMessage.createdAt-r)){var a=e.createdAt;0==(i=t.createdAt-a)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey))}return i}return r=e.createdAt,0==(i=t.createdAt-r)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case We.CHRONOLOGICAL:return 0==(i=t.createdAt-e.createdAt)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case We.CHANNEL_NAME_ALPHABETICAL:var i;return 0===(i=e.name.localeCompare(t.name))&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i}},yt=40;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical"}(We||(We={}));var gt=function(){function e(e){var t=this,n=e.iid,r=e.filter,a=e.order,i=e.limit,o=void 0===i?20:i;this._channels=[],this._token=null,this._hasMore=!0,this._iid=n,this._filter=r,this._order=a,this._limit=o,this._syncLimit=Math.max(o,yt),this._eventObserver={onevent:function(e){return M(t,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this._handleEvent(e)];case 1:return t.sent(),[2]}}))}))}},this._eventHandler={onChannelsAdded:me,onChannelsUpdated:me,onChannelsDeleted:me};var s=I.get(this._iid);this._localCacheEnabled=s.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=ut.of(this._iid,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=pt.of(this._iid),Ne.of(this._iid).addObserver(this._eventObserver),this._connectionStateObserver={onConnect:function(){t._localCacheEnabled&&t._backgroundSync.resume(),t._changelogSync.resume()},onDisconnect:function(){return M(t,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,Ke.ready()];case 1:return e.sent()||(this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},fe.of(this._iid).addObserver(this._connectionStateObserver)}return e.prototype._handleEvent=function(e){var t=this,n=e.source,r=e.payload,a=I.get(this._iid),i=new Ue(n);switch(n){case Ce.CHANNEL_BACKGROUND:break;case Ce.CHANNEL_CHANGELOG:var o=r,s=o.updatedChannels,l=o.deletedChannelUrls,c=s.filter((function(e){return t._filter.match(e)}));this._addChannelsToView(c,{context:i}),this._removeChannelsFromView(l,{context:i});break;case Ce.EVENT_USER_DECLINED_INVITATION:var u=a.get("currentUserId"),d=r,p=d.channel;d.invitee.userId===u?this._removeChannelsFromView([p.url],{context:i}):this._filter.match(p)?this._addChannelsToView([p],{context:i}):this._removeChannelsFromView([p.url],{context:i});break;case Ce.EVENT_USER_LEFT:u=a.get("currentUserId");var h=r;p=h.channel,h.user.userId===u?this._removeChannelsFromView([p.url],{context:i}):this._filter.match(p)?this._addChannelsToView([p],{context:i}):this._removeChannelsFromView([p.url],{context:i});break;case Ce.EVENT_USER_BANNED:case Ce.EVENT_USER_UNBANNED:break;case Ce.EVENT_USER_MUTED:case Ce.EVENT_USER_UNMUTED:case Ce.EVENT_TYPING_STATUS_UPDATED:case Ce.EVENT_OPERATOR_UPDATED:case Ce.EVENT_CHANNEL_METADATA_UPDATED:case Ce.EVENT_CHANNEL_METADATA_DELETED:case Ce.EVENT_CHANNEL_METACOUNTER_UPDATED:case Ce.EVENT_CHANNEL_METACOUNTER_DELETED:p=e.payload.channel,this._addChannelsToView([p],{context:i});break;case Ce.EVENT_READ_RECEIPT_UPDATED:case Ce.EVENT_USER_RECEIVED_INVITATION:case Ce.EVENT_USER_JOINED:case Ce.EVENT_CHANNEL_FROZEN:case Ce.EVENT_CHANNEL_UNFROZEN:case Ce.EVENT_CHANNEL_HIDDEN:case Ce.EVENT_CHANNEL_UNHIDDEN:case Ce.EVENT_CHANNEL_CHANGED:p=e.payload.channel,this._filter.match(p)?this._addChannelsToView([p],{context:i}):this._removeChannelsFromView([p.url],{context:i});break;case Ce.EVENT_CHANNEL_DELETED:var f=r.channelUrl;this._removeChannelsFromView([f],{context:i})}},e.prototype._getRemoteChannels=function(){return M(this,void 0,void 0,(function(){var e,t,n;return R(this,(function(r){switch(r.label){case 0:return e=H.get(this._iid).GroupChannel,[4,I.get(this._iid).get("apiClient").loadGroupChannelList(P(P({},this._filter),{order:this._order,token:this._token,limit:this._limit,userIdsFilter:this._filter.userIdsFilter,searchFilter:(a=this._filter.searchFilter,a.searchQuery&&a.searchFields?{search_query:a.searchQuery,search_fields:a.searchFields.join(",").toLocaleLowerCase()}:{})}))];case 1:return t=r.sent(),n=t.channels.map((function(n){return"number"==typeof t.ts&&(n.ts=t.ts),e.upsert(n)})),[4,bt.of(this._iid).upsert(n)];case 2:return r.sent(),[2,[n,t.next]]}var a}))}))},e.prototype._addChannelsToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],o=0,s=e;o<s.length;o++){var l=s[o],c=ht(this._channels,l);if(c<0){a.push(l);var u=ft(this._channels,l,this._order);u===this._channels.length?this._channels.push(l):this._channels.splice(u,0,l)}else i.push(l),this._channels[c]=l}r&&(a.length>0&&this._eventHandler.onChannelsAdded(r,a),i.length>0&&this._eventHandler.onChannelsUpdated(r,i))},e.prototype._removeChannelsFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,o=e;i<o.length;i++){var s=o[i],l=this._channels.map((function(e){return e.url})).indexOf(s);l>=0&&(a.push(this._channels[l].url),this._channels.splice(l,1))}return r&&a.length>0&&this._eventHandler.onChannelsDeleted(r,a),a},Object.defineProperty(e.prototype,"channelList",{get:function(){return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a;return R(this,(function(i){switch(i.label){case 0:return this._hasMore?[4,Ke.ready()]:[3,5];case 1:return i.sent()?[3,3]:(X.debug("Group channel collection loadMore() from the cache."),e=bt.of(this._iid),t=e.getNextContainerToken(this._order,this._channels),[4,e.getNextChannels(this._filter,this._order,t,this._limit)]);case 2:return r=i.sent(),this._addChannelsToView(r),[2,r];case 3:return X.debug("Group channel collection loadMore() from the server."),[4,this._getRemoteChannels()];case 4:return n=i.sent(),r=n[0],a=n[1],this._token=a,this._token||(this._hasMore=!1),this._addChannelsToView(r),[2,r];case 5:return[2,[]]}}))}))},e.prototype.dispose=function(){fe.of(this._iid).removeObserver(this._connectionStateObserver),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause(),Ne.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setGroupChannelCollectionHandler=function(e){this._eventHandler=e},e.GroupChannelOrder=We,e}(),vt={},bt=function(){function e(e){var t=e.iid,n=e.collection,r=void 0===n?null:n;this._collection=null,this._pkIndex=Date.now(),this._lastFetchedPrimaryKey=Date.now(),this._iid=t,this._collection=r,vt[t]=this}return e.of=function(e){return vt[e]},e.prototype._serialize=function(e){var t=this._createPk();return e.cachedPrimaryKey=t,P(P({},e.serialize()),{lastMessageCreatedAt:e.lastMessage?e.lastMessage.createdAt:e.createdAt,pk:t})},e.prototype._deserialize=function(e){return e?H.get(this._iid).GroupChannel.buildFromSerializedData(e):null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return I.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._createPk=function(){return this._pkIndex--},e.prototype._fetch=function(e,t,n){return M(this,void 0,void 0,(function(){var r,a,i,o,s,l,c,u=this;return R(this,(function(d){switch(d.label){case 0:if(!this._localCacheEnabled)return[3,3];switch(r=_e.LATEST_LAST_MESSAGE,t){case We.CHANNEL_NAME_ALPHABETICAL:r=_e.NAME_ALPHABETICAL;break;case We.CHRONOLOGICAL:r=_e.CHRONOLOGICAL;break;case We.LATEST_LAST_MESSAGE:r=_e.LATEST_LAST_MESSAGE}return a=n.containerToken,i=a.lastMessageCreatedAt,o=a.createdAt,s=a.name,l=a.lastFetchedPrimaryKey,c={where:function(n){switch(t){case We.LATEST_LAST_MESSAGE:if(n.lastMessage){if(n.lastMessageCreatedAt>i)return!1;if(n.lastMessageCreatedAt===i&&mt(l,n.pk)>=0)return!1}else{if(n.createdAt>o)return!1;if(n.createdAt===o&&mt(l,n.pk)>=0)return!1}break;case We.CHANNEL_NAME_ALPHABETICAL:var r=n.name.localeCompare(s);if(r<0)return!1;if(0===r&&mt(l,n.pk)>=0)return!1;break;case We.CHRONOLOGICAL:if(n.createdAt>o)return!1;if(n.createdAt===o&&mt(l,n.pk)>=0)return!1}return e.match(u._deserialize(n))},index:r},[4,this._collection.query(c)];case 1:return[4,d.sent().fetch({limit:n.limit})];case 2:return[2,d.sent().map((function(e){return u._deserialize(e)}))];case 3:return[2,[]]}}))}))},e.prototype.getNextContainerToken=function(e,t){switch(e){case We.LATEST_LAST_MESSAGE:return t.length>0?{lastMessageCreatedAt:(n=t[t.length-1]).lastMessage?n.lastMessage.createdAt:null,createdAt:n.createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{lastMessageCreatedAt:Number.MAX_SAFE_INTEGER,createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case We.CHRONOLOGICAL:return t.length>0?{createdAt:(n=t[t.length-1]).createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case We.CHANNEL_NAME_ALPHABETICAL:var n;return t.length>0?{name:(n=t[t.length-1]).name,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{name:"",lastFetchedPrimaryKey:this._lastFetchedPrimaryKey}}},e.prototype.get=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?(t=this._deserialize,[4,this._collection.getByKey(e)]):[3,2];case 1:return[2,t.apply(this,[n.sent()])];case 2:return[2,null]}}))}))},e.prototype.getNextChannels=function(e,t,n,r){return void 0===r&&(r=100),M(this,void 0,void 0,(function(){return R(this,(function(a){switch(a.label){case 0:return[4,this._fetch(e,t,{containerToken:n,limit:r})];case 1:return[2,a.sent()]}}))}))},e.prototype.upsert=function(e){return M(this,void 0,void 0,(function(){var t,n=this;return R(this,(function(r){switch(r.label){case 0:return this._localCacheEnabled?(t=e.map((function(e){return n._serialize(e)})),[4,this._collection.upsertMany(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._collection.removeIf({url:{"/in":e}})]:[3,3];case 1:return t.sent(),[4,Sa.getInstance(this._iid).clearCachedMessages(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return this._localCacheEnabled?[4,this._collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e}(),Et=function(){function e(){this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return e.createFromJson=function(e){var t=parseInt(e.msg_id),n=e.user_id,r=e.operation,a=e.reaction,i=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof r&&["add","delete"].indexOf(r.toLowerCase())>=0&&"string"==typeof a&&a&&"number"==typeof i){var o=new this;return o.messageId=t,o.userId=n,o.key=a,o.operation=r.toLowerCase(),o.updatedAt=i,o}return null},e}(),wt=function(e){return Object.keys(e).forEach((function(t){e[t]&&"object"==typeof e[t]&&wt(e[t])})),Object.freeze(e)},Ct=function(){function e(){}return e.serialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),wt(n)},e.serializeWithoutFreeze=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e.deserialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e}(),At={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},kt=new WeakMap,St=function(){function e(t){d(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.mentionedUserIds=[],this.sendingStatus=null,kt.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.isReplyToChannel=!1,this.parentMessage=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,this.reqId="",this._isAutoResendRegistered=!1,t&&this.__update(t)}return h(e,[{key:"serialize",value:function(e){var t=this;return Ct.serialize(this,(function(n){n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender),n.hasOwnProperty("_isAutoResendRegistered")&&(n.isAutoResendRegistered=n._isAutoResendRegistered,delete n._isAutoResendRegistered),t.appleCriticalAlertOptions&&(n.appleCriticalAlertOptions=t.appleCriticalAlertOptions.serialize()),e&&e(n)}))}},{key:"isIdentical",value:function(e){return!("object"!==u(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return ie.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Sa.getInstance(this._iid),r=H.get(this._iid),a=r.User,i=r.BaseChannel,o=r.BaseMessageParams,s=r.BaseMessage,l=r.Reaction,u=r.MessageMetaArray,d=r.ThreadInfo,p=r.OGMetaData,h=r.AppleCriticalAlertOptions;e.hasOwnProperty("msg_id")&&e.msg_id&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("message_id")&&e.message_id&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",e.hasOwnProperty("silent")&&(this.silent=e.silent),this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):i.CHANNEL_TYPE_GROUP;var f=e.hasOwnProperty("metaarray")?e.metaarray:{},m=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(f).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var _=0;_<m.length;_++){var y=m[_];this.metaArrays.push(new u(y,f[y]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var g=e.sorted_metaarray;Array.isArray(g)&&(this.metaArrays=g.map((function(e){return new u(e.key,e.value)})))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var v=0;v<e.reactions.length;v++){var b=l.createFromJson(e.reactions[v]);b&&this.reactions.push(b)}if(this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:o.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach((function(e){var n=new a(e);t.mentionedUsers.push(n)})),this.mentionedUserIds=[],e.hasOwnProperty("mentioned_user_ids")&&(this.mentionedUserIds=e.mentioned_user_ids),this.sendingStatus=this.messageId>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&e.root_message_id&&kt.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&e.parent_message_id&&(this.parentMessageId=parseInt(e.parent_message_id)),this.threadInfo=new d(e.thread_info),this.isReplyToChannel=!!e.hasOwnProperty("is_reply_to_channel")&&e.is_reply_to_channel,e.hasOwnProperty("parent_message_info")){var E=c({},e.parent_message_info);e.parent_message_info.hasOwnProperty("file")&&(E.require_auth=!!e.parent_message_info.file.require_auth);var w={channelType:this.channelType,channelUrl:this.channelUrl};switch(this.parentMessage=i.buildMessage(E,w),this.parentMessage.messageType){case s.MESSAGE_TYPE_USER:this.parentMessageText=this.parentMessage.message;break;case s.MESSAGE_TYPE_FILE:this.parentMessageText=this.parentMessage.name}}e.hasOwnProperty("og_tag")&&(this.ogMetaData=new p(e.og_tag)),e.hasOwnProperty("is_op_msg")&&(this.isOperatorMessage=e.is_op_msg),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new h(e.apple_critical_alert_options)),e.hasOwnProperty("is_auto_resend_registered")&&(this._isAutoResendRegistered=e.is_auto_resend_registered),this.reqId=e.hasOwnProperty("req_id")?e.req_id:""}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter((function(t){return e.indexOf(t.key)>-1})):[]}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===u(e)&&e){var t=H.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}},{key:"sender",get:function(){var e=Sa.getInstance(this._iid),t=H.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach((function(e){t[e.key]=e.value})),t}},{key:"applyReactionEvent",value:function(e){var t=this,n=H.get(this._iid).Reaction,r=null,a=C(nt.parse(arguments,[new nt({type:Et,constraint:function(e){return parseInt(e.messageId)===parseInt(t.messageId)}})]),2);if(r=a[0],e=a[1],!r){for(var i=!1,o=0;o<this.reactions.length;o++)if(this.reactions[o].key===e.key){this.reactions[o]._applyEvent(e),this.reactions[o].isEmpty&&this.reactions.splice(o,1),i=!0;break}i||"add"!==e.operation||this.reactions.push(new n(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(t,n,r,a){var i=this,o=H.get(this._iid).ThreadedMessageListParams,s=null,l=C(nt.parse(arguments,[new nt({type:"number"}),new nt({type:"string",constraint:function(e){return Object.values(At).includes(e)}}),new nt({type:o,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),5);return s=l[0],t=l[1],n=l[2],r=l[3],a=l[4],le(this._iid,(function(a){if(s)a(s,null);else{var o=H.get(i._iid),l=o.GroupChannel,u=o.OpenChannel;i.isGroupChannel()?l.getChannel(i.channelUrl,O.INTERNAL_CALL,(function(o,s){if(Sa.getInstance(i._iid).getErrorFirstCallback()){var l=[o,s];s=l[0],o=l[1]}s?a(s,null):I.get(i._iid).container.apiClient.getMessageList(c(c({channel:o,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=H.get(i._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,o)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===i.messageId}))[0],s=n.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:s})})).catch((function(e){a(e,null)}))})):i.isOpenChannel()&&u.getChannel(i.channelUrl,O.INTERNAL_CALL,(function(o,s){if(Sa.getInstance(i._iid).getErrorFirstCallback()){var l=[o,s];s=l[0],o=l[1]}s?a(s,null):I.get(i._iid).container.apiClient.getMessageList(c(c({channel:o,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=H.get(i._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,o)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===i.messageId}))[0],s=n.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:s})})).catch((function(e){a(e,null)}))}))}}),a)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,At.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t=this,n=H.get(this._iid).ThreadInfoUpdateEvent,r=null,a=C(nt.parse(arguments,[new nt({type:n,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(t.messageId)}})]),2);return r=a[0],e=a[1],!r&&(this.threadInfo=e.threadInfo,!0)}},{key:"_setRootMessageId",value:function(e){kt.set(this,e)}}],[{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"ReplyType",get:function(){return{ALL:"all",NONE:"none",ONLY_REPLY_TO_CHANNEL:"only_reply_to_channel"}}},{key:"getMessage",value:function(e,t){var n=this,r=H.get(this._iid),a=r.BaseChannel,i=r.MessageRetrievalParams,o=null,s=C(nt.parse(arguments,[new nt({type:i,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),3);return o=s[0],e=s[1],t=s[2],le(this._iid,(function(t){if(o)t(o,null);else{var r=H.get(n._iid),i=r.GroupChannel,s=r.OpenChannel;switch(e.channelType){case a.CHANNEL_TYPE_GROUP:i.getChannel(e.channelUrl,O.INTERNAL_CALL,(function(r,i){if(Sa.getInstance(n._iid).getErrorFirstCallback()){var o=[r,i];i=o[0],r=o[1]}i?t(i,null):I.get(n._iid).container.apiClient.getMessage(c({channel:r},e),(function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}}))}));break;case a.CHANNEL_TYPE_OPEN:s.getChannel(e.channelUrl,O.INTERNAL_CALL,(function(r,i){if(Sa.getInstance(n._iid).getErrorFirstCallback()){var o=[r,i];i=o[0],r=o[1]}i?t(i,null):I.get(n._iid).container.apiClient.getMessage(c({channel:r},e),(function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}}))}))}}}),t)}}]),e}(),Nt=function(){function e(e){this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,e&&this.__update(e)}return e.objectify=function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,a=void 0===r?"":r,i=e.plainProfileUrl,o=void 0===i?"":i,s=e.connectionStatus,l=void 0===s?"":s,c=e.lastSeenAt,u=void 0===c?0:c,d=e.metaData,p=void 0===d?{}:d,h=e.isActive,f=void 0===h||h,m=e.friendDiscoveryKey,_=void 0===m?null:m,y=e.friendName,g=void 0===y?null:y,v=e.preferredLanguages,b=void 0===v?null:v,E=e.requireAuth;return{user_id:n,nickname:a,profile_url:o,is_online:l,last_seen_at:u,metadata:p,is_active:f,friend_discovery_key:_,friend_name:g,preferred_languages:b,require_auth_for_profile_image:void 0!==E&&E}},e.buildFromSerializedData=function(e){var t=H.get(this._iid).User,n=Ct.deserialize(e);return new t(t.objectify(n))},Object.defineProperty(e.prototype,"preferredLanguages",{get:function(){return this._preferredLanguages},enumerable:!1,configurable:!0}),e.prototype.__update=function(t){var n=I.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=t.guest_id),t.hasOwnProperty("user_id")&&(this.userId=t.user_id),t.hasOwnProperty("name")&&(this.nickname=t.name),t.hasOwnProperty("nickname")&&(this.nickname=t.nickname),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=t.image||t.profile_url||"",Object.defineProperty(this,"profileUrl",{value:this.requireAuth?this.plainProfileUrl+"?auth="+n.eKey:this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null},e.prototype._updateMetaData=function(e,t){var n=this;void 0===t&&(t=!1);var r=H.get(this._iid).GroupChannel;Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]})),Object.keys(r.cachedChannels).forEach((function(e){if(r.cachedChannels.hasOwnProperty(e)){var t=r.cachedChannels[e];t.memberMap.hasOwnProperty(n.userId)&&(t.memberMap[n.userId].metaData=n.metaData)}}))},e.prototype.serialize=function(){return Ct.serialize(this,(function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)}))},e.prototype.getOriginalProfileUrl=function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("sendbirdtest.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""},e.prototype.createMetaData=function(e,t){var n,r=this,a=null;return n=nt.parse(arguments,[new nt({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new nt({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,(function(t){a?t(a,null):I.get(r._iid).container.apiClient.createUserMetaData({metaData:e},(function(e,n){e||r._updateMetaData(n),t(e,n)}))}),t)},e.prototype.updateMetaData=function(e,t,n){var r,a=this,i=null;return r=nt.parse(arguments,[new nt({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),i=r[0],e=r[1],t=r[2],n=r[3],le(this._iid,(function(n){i?n(i,null):I.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},(function(e,t){e||a._updateMetaData(t),n(e,t)}))}),n)},e.prototype.deleteMetaData=function(e,t){var n,r=this,a=null;return n=nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,(function(t){if(a)t(a,null);else{var n={};n[e]="",I.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},(function(e,a){e||r._updateMetaData(n,!0),t(e,a)}))}}),t)},e.prototype.deleteAllMetaData=function(e){var t=this;return le(this._iid,(function(e){var n=t.metaData;I.get(t._iid).container.apiClient.deleteAllUserMetaData({},(function(r,a){r||t._updateMetaData(n,!0),e(r,a)}))}),e)},Object.defineProperty(e,"NON_AVAILABLE",{get:function(){return"nonavailable"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONLINE",{get:function(){return"online"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OFFLINE",{get:function(){return"offline"},enumerable:!1,configurable:!0}),e}(),Ot={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},Tt=new WeakMap,It=new WeakMap,xt=function(){function e(t){d(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,Tt.set(this,{}),It.set(this,""),t&&this.__update(t)}return h(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===u(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new Nt(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&e.hasOwnProperty("ts")&&"number"==typeof e.ts&&this._refreshMetaData(e.metadata,e.ts),e.hasOwnProperty("cached_primary_key")&&(this.cachedPrimaryKey=e.cached_primary_key)}},{key:"_addOrUpdateCachedMetaData",value:function(e,t){var n=Tt.get(this);Object.keys(e).forEach((function(r){var a=n[r],i=e[r];a?t>a.updatedAt&&(a.value=i,a.updatedAt=t,a.isRemoved=!1):n[r]={value:i,updatedAt:t,isRemoved:!1}}))}},{key:"_markAsDeletedCachedMetaData",value:function(e,t){var n=Tt.get(this);e.forEach((function(e){var r=n[e];r?t>r.updatedAt&&(r.isRemoved=!0,r.updatedAt=t):n[e]={value:null,updatedAt:t,isRemoved:!0}}))}},{key:"_refreshMetaData",value:function(e,t){var n={};Object.keys(e).forEach((function(r){n[r]={value:e[r],updatedAt:t,isRemoved:!1}})),Tt.set(this,n)}},{key:"cachedPrimaryKey",get:function(){return It.get(this)},set:function(e){It.set(this,e)}},{key:"isGroupChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,H.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,H.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,H.get(this._iid).PreviousMessageListQuery)(this)}},{key:"createPollListQuery",value:function(){return new(0,H.get(this._iid).PollListQuery)({channelUrl:this.url})}},{key:"createPollVoterListQuery",value:function(e,t){return new(0,H.get(this._iid).PollVoterListQuery)({channelUrl:this.url,pollId:e,optionId:t})}},{key:"serialize",value:function(){var e=this;return Ct.serialize(this,(function(t){if(null!==t.lastMessage&&"object"===u(t.lastMessage)){var n=t.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,t.lastMessage=n)}t.hasOwnProperty("_messageOffsetTimestamp")&&(t.messageOffsetTimestamp=t._messageOffsetTimestamp,delete t._messageOffsetTimestamp),e.cachedPrimaryKey&&(t.cachedPrimaryKey=e.cachedPrimaryKey)}))}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"number",constraint:function(e){return e>=0}}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:e,token:null,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=H.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,a)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=H.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,a)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r=this,a=H.get(this._iid),i=a.BaseChannel,o=a.MessageChangeLogsParams,s=null,l=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:o,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){s?n(s,null):I.get(r._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:r.url,ts:null,token:e,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return i.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r=this,a=H.get(this._iid),i=a.BaseChannel,o=a.MessageChangeLogsParams,s=null,l=C(nt.parse(arguments,[new nt({type:"number",constraint:function(e){return e>=0}}),new nt({type:o,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){s?n(s,null):I.get(r._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:r.url,timestamp:e,token:null,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return i.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return le(this._iid,(function(e){var n=Sa.getInstance(t._iid);I.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},(function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)}))}),e)}},{key:"_parseMessageListParams",value:function(e){for(var t=new(0,H.get(this._iid).MessageListParams),n=null,r=!1,a=0,i=0,o=!1,s="",l="",c=null,u=!1,d=!1,p=null,h=arguments.length,f=new Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];switch(e){case"prev":var _=C(nt.parse(f,[new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"string"}),new nt({type:"string"}),new nt({type:"array",optional:!0}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),11);n=_[0],r=_[2],a=_[3],o=_[4],s=_[5],l=_[6],c=_[7],u=_[8],d=_[9],p=_[10];break;case"next":var y=C(nt.parse(f,[new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"string"}),new nt({type:"string"}),new nt({type:"array",optional:!0}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),11);n=y[0],r=y[2],i=y[3],o=y[4],s=y[5],l=y[6],c=y[7],u=y[8],d=y[9],p=y[10];break;case"prevnext":var g=C(nt.parse(f,[new nt({type:"number"}),new nt({type:"number"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"string"}),new nt({type:"string"}),new nt({type:"array",optional:!0}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),11);n=g[0],a=g[2],i=g[3],o=g[4],s=g[5],l=g[6],c=g[7],u=g[8],d=g[9],p=g[10],r=!0}return n?[null,p]:(t.isInclusive=r,t.prevResultSize=a,t.nextResultSize=i,t.reverse=o,t.messageType=s,t.customType=l,""===t.customType&&(t.customType="*"),t.senderUserIds=c,t.includeMetaArray=u,t.includeReactions=d,[t,p])}},{key:"_getMessageList",value:function(e,t,n,r){var a=this,i=H.get(this._iid).MessageListParams,o=null,s=C(nt.parse(arguments,[new nt({type:"number"}),new nt({type:"string",constraint:function(e){return Object.values(Ot).includes(e)}}),new nt({type:i,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),5);return o=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){o?r(o,null):I.get(a._iid).container.apiClient.getMessageList(c(c({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse})).then((function(e){var t=H.get(a._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,a)})).filter((function(e){return null!==e}));r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=C(this._parseMessageListParams.apply(this,["prev"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.TIMESTAMP,n,r)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=C(this._parseMessageListParams.apply(this,["next"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.TIMESTAMP,n,r)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=C(this._parseMessageListParams.apply(this,["prevnext"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.TIMESTAMP,n,r)}},{key:"getPreviousMessagesByID",value:function(e){var t=C(this._parseMessageListParams.apply(this,["prev"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.MESSAGE_ID,n,r)}},{key:"getNextMessagesByID",value:function(e){var t=C(this._parseMessageListParams.apply(this,["next"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.MESSAGE_ID,n,r)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=C(this._parseMessageListParams.apply(this,["prevnext"].concat(A(nt.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Ot.MESSAGE_ID,n,r)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,Ot.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,Ot.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,r=e.message,a=e.data,i=e.customType,o=e.metaArrays,s=e.mentionType,l=e.mentionedUserIds,u=e.pushNotificationDeliveryOption,d=e.rootMessageId,p=e.parentMessageId,h=e.translationTargetLanguages,f=e.appleCriticalAlertOptions,m=e.pollId,_=e.silent,y=void 0!==_&&_,g=e.isReplyToChannel,v=e.messageParams,b=e.oldMessage,E=void 0===b?null:b,w=e.isManualResend,C=void 0!==w&&w,A=e.callback,k=H.get(this._iid),S=k.Command,N=k.UserMessage,O=Sa.getInstance(this._iid),T=Ae.of(this._iid),x=bt.of(this._iid),D=Ne.of(this._iid),P=I.get(this._iid).container.localCacheEnabled;n||(n=S.generateRequestId());var M={};Array.isArray(h)&&h.forEach((function(e){return M[e]=""}));var R=N.objectify({messageId:0,reqId:n,user:O.currentUser||{},channel:this,message:r,data:a,customType:i,metaArrays:o,mentionType:s,mentionedUserIds:l,rootMessageId:d,parentMessageId:p,translations:M,silent:y,appleCriticalAlertOptions:f,isReplyToChannel:g,messageParams:v,createdAt:(new Date).getTime()}),U=new N(R);if(U.requestState=O.MessageRequestState.PENDING,U.sendingStatus=O.MessageSendingStatus.PENDING,U.requestedMentionUserIds=l,U._messageParams=v,!O.currentUser){var L=new F("Connection should be made first.",F.CONNECTION_REQUIRED),j=new N(R);return j.requestState=O.MessageRequestState.FAILED,j.sendingStatus=O.MessageSendingStatus.FAILED,j.requestedMentionUserIds=l,j.errorCode=L.code,A(L,j),U}return(!t.isGroupChannel()||E&&E._isAutoResendRegistered?Promise.resolve():T.upsert([U],pe.UNSENT).then((function(){D.send({source:C?Ce.LOCAL_MESSAGE_RESEND_STARTED:Ce.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:t,message:U}})}))).then((function(){var e=S.bMessage({channelUrl:t.url,message:r,data:a,customType:i,metaArrays:o,mentionType:s,mentionedUserIds:l,requestId:n,rootMessageId:d,parentMessageId:p,silent:y,translationTargetLanguages:h,pushNotificationDeliveryOption:u,appleCriticalAlertOptions:f,pollId:m,isReplyToChannel:g});U.reqId=e.requestId,t.isGroupChannel()&&O.getConnectionState()!==O.ConnectionState.OPEN&&O.currentUser&&!O.connecting&&!O.reconnecting&&"string"==typeof i&&0===i.indexOf("SB_VIDEOCHAT")?I.get(O._iid).container.apiClient.sendUserMessage({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),message:r,data:a,customType:i,translationTargetLanguages:h,metaArrays:o,mentionType:s,mentionedUserIds:l,pushNotificationDeliveryOption:u,rootMessageId:d,parentMessageId:p,appleCriticalAlertOptions:f,pollId:m,isReplyToChannel:g},(function(e,r){var a=null;if(e){if(U._isAutoResendRegistered&&ie.isAutoResendableError(e.code))return;(a=new N(R)).requestState=O.MessageRequestState.FAILED,a.requestedMentionUserIds=l,E&&(a._isAutoResendRegistered=E._isAutoResendRegistered),e.code===F.REQUEST_CANCELED?(a.sendingStatus=O.MessageSendingStatus.CANCELED,T.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){D.send({source:Ce.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){A&&A(new F(e.message,e.code),a)}))):(a.errorCode=e.code,a.sendingStatus=O.MessageSendingStatus.FAILED,P&&ie.isAutoResendableError(e.code)&&(a.sendingStatus=O.MessageSendingStatus.PENDING,a.errorCode=0,a._isAutoResendRegistered=!0),T.upsert([a],pe.UNSENT).then((function(){$e._completeCurrentAndProcessNextAutoResend(O,a),D.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){var t=a._clone();t.sendingStatus=O.MessageSendingStatus.FAILED,t.errorCode=e.code,t._isAutoResendRegistered=!1,A&&A(new F(e.message,e.code),t)})))}else{for(var i in(a=new N(r)).reqId=n,a.requestState=O.MessageRequestState.SUCCEEDED,a.sendingStatus=O.MessageSendingStatus.SUCCEEDED,E&&(a._isAutoResendRegistered=E._isAutoResendRegistered),t.lastMessage=a,O.channelHandlers)O.channelHandlers[i].onChannelChanged(t);x.upsert([t]).then((function(){D.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return T.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return T.upsert([a],pe.SUCCEEDED)})).then((function(){$e._completeCurrentAndProcessNextAutoResend(O,a),D.send({source:Ce.EVENT_MESSAGE_SENT,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){A&&A(null,a)}))}})):O.sendCommand(e,(function(r,a){if(O.getErrorFirstCallback()){var i=[r,a];a=i[0],r=i[1]}if(a){if(U._isAutoResendRegistered&&ie.isAutoResendableError(a.code))return;var o=new N(R);o.reqId=e.requestId,o.requestState=O.MessageRequestState.FAILED,a.code===F.REQUEST_CANCELED?(o.sendingStatus=O.MessageSendingStatus.CANCELED,t.isGroupChannel()&&T.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){D.send({source:Ce.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:o}})})).catch((function(e){return X.error(e)})).finally((function(){A&&A(new F(a.message,a.code),o)}))):(o.sendingStatus=O.MessageSendingStatus.FAILED,o.errorCode=a.code,o.requestedMentionUserIds=l,t.isGroupChannel()?(P&&ie.isAutoResendableError(a.code)&&(o.sendingStatus=O.MessageSendingStatus.PENDING,o.errorCode=0,o._isAutoResendRegistered=!0),T.upsert([o],pe.UNSENT).then((function(){return $e._completeCurrentAndProcessNextAutoResend(O,o),D.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:o}})})).catch((function(e){X.error(e)})).finally((function(){var e=o._clone();e.sendingStatus=O.MessageSendingStatus.FAILED,e.errorCode=a.code,e._isAutoResendRegistered=!1,A&&A(new F(a.message,a.code),e)}))):A&&A(new F(a.message,a.code),o))}else{var s=new N(c(c({},r.getJsonElement()),{},{messageParams:v}));s.reqId=n,s.requestState=O.MessageRequestState.SUCCEEDED,s.sendingStatus=O.MessageSendingStatus.SUCCEEDED,E&&(s._isAutoResendRegistered=E._isAutoResendRegistered);var u=O.currentUser;if(u&&s._sender&&u.userId===s._sender.userId&&(u.nickname!==s._sender.nickname&&(u.nickname=s._sender.nickname),u.plainProfileUrl!==s._sender.plainProfileUrl&&(u.plainProfileUrl=s._sender.plainProfileUrl),ie.deepEqual(u.metaData,s._sender.metaData)||(u.metaData=s._sender.metaData)),t.isGroupChannel()){t.lastMessage=s,Object.keys(O.channelHandlers).forEach((function(e){O.channelHandlers[e].onChannelChanged(t)}));var d=Ne.of(t._iid);bt.of(t._iid).upsert([t]).then((function(){d.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return T.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return T.upsert([s],pe.SUCCEEDED)})).then((function(){$e._completeCurrentAndProcessNextAutoResend(O,s),d.send({source:Ce.EVENT_MESSAGE_SENT,payload:{channel:t,message:s}})})).catch((function(e){X.error(e)})).finally((function(){A&&A(null,s)}))}else A&&A(null,s)}}))})),U}},{key:"sendUserMessage",value:function(){var e=nt.toArray(arguments),t=e.pop(),n=null,r=null,a=H.get(this._iid).UserMessageParams;if("function"==typeof t)if(e[0]instanceof a)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new a).message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=nt.error}else n=nt.error;else n=nt.error;var i=I.get(this._iid).container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(c(c({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,messageParams:r,callback:function(e,n){i?t(e,n):t(n,e)}})):(i?t(nt.error,null):t(null,nt.error),null)}},{key:"_autoResendUserMessage",value:function(e){var t=this,n=Sa.getInstance(this._iid);if(n&&n.currentUser){var r=e._messageParams;return new Promise((function(n,a){return t._sendUserMessage(c(c({},r),{},{reqId:e.reqId,metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,pushNotificationDeliveryOption:r.pushNotificationDeliveryOption,messageParams:r,oldMessage:e,callback:function(e,t){e?a(e):n(t)}}))}))}}},{key:"_autoResendFileMessage",value:function(e){var t=Sa.getInstance(this._iid);if(t&&t.currentUser){var n=this._parsePendingFileMessage(e),r=H.get(this._iid).FileMessageQueue;r.create(this).addJob(new r.Job({fileInfo:n,pendingMessage:e._clone(),requestId:e.reqId,error:n.error,response:null}))}}},{key:"resendUserMessage",value:function(e,t){var n=this,r=H.get(this._iid),a=r.UserMessage,i=r.UserMessageParams,o=null,s=C(nt.parse(arguments,[new nt({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===u(e.translations)&&!Array.isArray(e.translations)}}),new nt({type:"callback"})]),3);return o=s[0],e=s[1],t=s[2],le(this._iid,(function(t){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(o,null);else{var r=Object.keys(e.translations),a=i.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(c(c({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:a,reqId:e.reqId,messageParams:e._messageParams,isManualResend:!0,callback:t}))}}),t)}},{key:"updateUserMessage",value:function(e,t,n,r,a){var i=this,o=H.get(this._iid),s=o.Command,l=o.UserMessage,u=o.UserMessageParams,d=arguments,p=null,h=null;if("number"==typeof e)switch(d.length){case 3:var f=C(nt.parse(d,[new nt({type:"number"}),new nt({type:u}),new nt({type:"callback"})]),4);p=f[0],e=f[1],h=f[2],a=f[3];break;case 5:h=new u;var m=C(nt.parse(d,[new nt({type:"number"}),new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"callback"})]),6);p=m[0],e=m[1],t=m[2],n=m[3],r=m[4],a=m[5],h.message=t,h.data=n,h.customType=r}return le(this._iid,(function(t){if(!p&&h&&h._validate()){var n=s.bUpdateUserMessage(c(c({channelUrl:i.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Sa.getInstance(i._iid),a=Ae.of(i._iid),o=Ne.of(i._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var s=[e,n];n=s[0],e=s[1]}var u=null;n||(u=new l(c(c({},e.getJsonElement()),{},{messageParams:h})),i.isGroupChannel()&&a.upsert([u],pe.SUCCEEDED).then((function(){o.send({source:Ce.EVENT_MESSAGE_UPDATED,payload:{channel:i,message:u}})})).catch((function(e){X.error(e)}))),t(n,u)}))}else t(nt.error,null)}),a)}},{key:"translateUserMessage",value:function(e,t,n){var r=this,a=Sa.getInstance(this._iid),i=H.get(this._iid).UserMessage,o=null,s=C(nt.parse(arguments,[new nt({type:i,constraint:function(e){return e.channelUrl===r.url&&e.sendingStatus===a.MessageSendingStatus.SUCCEEDED}}),new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),4);return o=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){o?n(o,null):I.get(r._iid).container.apiClient.translateUserMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},(function(e,t){var r=null;e||(r=new i(t)),n(e,r)}))}),n)}},{key:"_parsePendingFileMessage",value:function(e){var t=e._messageParams.serialize(),n=t.data,r=t.customType,a=t.fileUrl,i=t.thumbnailSizes,o=t.mentionType,s=t.mentionedUserIds,l=t.metaArrays,c=t.parentMessageId,u=t.pushNotificationDeliveryOption,d=e._messageParams;return{file:d.file?d.file:a,name:e.name,type:e.type,size:e.size,data:n,customType:r,thumbnailSizes:i,metaArrays:l,mentionType:o,mentionedUserIds:s,pushNotificationDeliveryOption:u,rootMessageId:c,parentMessageId:c,appleCriticalAlertOptions:d.appleCriticalAlertOptions,messageParams:e._messageParams,silent:e.silent,error:null,progressHandler:null,callback:null}}},{key:"_parseFileMessageArguments",value:function(e){var t=H.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,a={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,appleCriticalAlertOptions:null,isReplyToChannel:!1,messageParams:null,callback:null};if("function"==typeof e[e.length-1]&&(a.callback=e.pop()),"function"==typeof e[e.length-1]&&(a.progressHandler=e.pop()),e[0]instanceof r)a.file=e[0].file||e[0].fileUrl,a.name=e[0].fileName,a.type=e[0].mimeType,a.size=e[0].fileSize,a.data=e[0].data,a.customType=e[0].customType,a.thumbnailSizes=e[0].thumbnailSizes,a.metaArrays=e[0].metaArrays,a.mentionType=e[0]._mentionType,a.mentionedUserIds=e[0]._mentionedUserIds,a.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,a.rootMessageId=e[0].rootMessageId,a.parentMessageId=e[0].parentMessageId,a.silent=e[0].silent,e[0]._validate()||(a.error=nt.error),a.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions,a.isReplyToChannel=e[0].isReplyToChannel,a.messageParams=e[0];else if(ie.isFile(e[0])||"string"==typeof e[0]){switch(a.file=e[0],e.length){case 1:break;case 2:a.data=e[1];break;case 3:a.data=e[1],a.customType=e[2];break;case 4:a.data=e[1],a.customType=e[2],a.thumbnailSizes=e[3];break;case 5:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4];break;case 6:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5];break;case 7:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5],a.thumbnailSizes=e[6]}var i=C(nt.parse([a.file,a.name,a.type,a.size,a.data,a.customType,a.thumbnailSizes],[new nt({type:["file","string"]}),new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"array"})]),8);a.error=i[0],a.file=i[1],a.name=i[2],a.type=i[3],a.size=i[4],a.data=i[5],a.customType=i[6],a.thumbnailSizes=i[7];var o=ie.isFile(a.file);o&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a.messageParams={mentionType:n.MentionType.USERS,mentionedUserIds:a.mentionedUserIds,cachedMentionedUsers:[],cachedMentionedUserIds:[],metaArrays:a.metaArrays,parentMessageId:a.parentMessageId,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption,appleCriticalAlertOptions:a.appleCriticalAlertOptions,fileName:a.name,mimeType:a.type,fileSize:a.size,data:a.data,customType:a.customType,isUpdate:!1,file:o?a.file:null,fileUrl:o?null:a.file,thumbnailSizes:a.thumbnailSizes}}else a.error=nt.error;return ie.isFile(a.file)&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a}},{key:"_createTempFileMessage",value:function(e){try{var t=Sa.getInstance(this._iid),n=H.get(this._iid),r=n.Command,a=n.FileMessage,i=c(c({},e),{},{messageId:0,reqId:r.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map((function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}})),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}),o=a.objectify(i);return new a(o)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this,t=nt.toArray(arguments),n=this._parseFileMessageArguments(t),r=H.get(this._iid).Command,a=null,i=r.generateRequestId();n.error||((a=this._createTempFileMessage(n)).requestedMentionUserIds=n.mentionedUserIds,i=a.reqId);var o=Sa.getInstance(this._iid);if(o&&o.currentUser||(n.error=new F("Connection should be made first.",F.CONNECTION_REQUIRED)),this.isGroupChannel()){var s=Ae.of(this._iid),l=Ne.of(this._iid);s.upsert([a],pe.UNSENT).then((function(){l.send({source:Ce.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:e,message:a}})}))}var c=H.get(this._iid).FileMessageQueue;return c.create(this).addJob(new c.Job({fileInfo:n,pendingMessage:a,requestId:i,error:n.error,response:null})),a}},{key:"sendFileMessages",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.progress?n.progress:function(){},a=n.sent?n.sent:function(){},i=n.complete?n.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var o=[];return e.forEach((function(n,s){o.push(t.sendFileMessage(n,r,(function(t,n){a(t,n),s===e.length-1&&i(null)})))})),o}return i(nt.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,a=H.get(this._iid),i=a.FileMessage,o=a.FileMessageParams,s=null,l=C(nt.parse(arguments,[new nt({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new nt({type:"file",optionalIf:function(e){return!!e[0].plainUrl},defaultValue:null}),new nt({type:"callback"})]),4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(s,null);else{var a=new o;e.plainUrl?a.fileUrl=e.plainUrl:a.file=t,a.fileName=e.name,a.fileSize=e.size,a.mimeType=e.type,a.data=e.data,a.customType=e.customType,a.mentionType=e.mentionType,a.mentionedUserIds=e.requestedMentionUserIds,a.metaArrays=e.metaArrays,a.thumbnailSizes=e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),a.appleCriticalAlertOptions=e.appleCriticalAlertOptions,r.sendFileMessage(a,n)}}),n)}},{key:"updateFileMessage",value:function(e,t,n,r){var a=this,i=H.get(this._iid),o=i.Command,s=i.FileMessage,l=i.FileMessageParams,u=arguments,d=null,p=null;if("number"==typeof e)switch(u.length){case 3:var h=C(nt.parse(u,[new nt({type:"number"}),new nt({type:l}),new nt({type:"callback"})]),4);d=h[0],e=h[1],p=h[2],r=h[3],p&&(p._isUpdate=!0);break;case 4:p=new l;var f=C(nt.parse(u,[new nt({type:"number"}),new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"callback"})]),5);d=f[0],e=f[1],t=f[2],n=f[3],r=f[4],p.data=t,p.customType=n,p._isUpdate=!0}return le(this._iid,(function(t){if(!d&&p&&p._validate()){var n=o.bUpdateFileMessage(c(c({channelUrl:a.url,messageId:e},p),{},{mentionType:p._mentionType,mentionedUserIds:p._mentionedUserIds})),r=Sa.getInstance(a._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var o=null;if(!n&&(o=new s(c(c({},e.getJsonElement()),{},{messageParams:p})),a.isGroupChannel())){var l=Ae.of(a._iid),u=Ne.of(a._iid);l.upsert([o],pe.SUCCEEDED).then((function(){u.send({source:Ce.EVENT_MESSAGE_UPDATED,payload:{channel:a,message:o}})})).catch((function(e){X.error(e)}))}t(n,o)}))}else t(nt.error,null)}),r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:["number","string"]}),new nt({type:"callback"})]),3);n=r[0],e=r[1],t=r[2];var a=I.get(this._iid).container.isErrorFirstInCallback;return n?(a?t(n,null):t(null,n),!1):H.get(this._iid).FileMessageQueue.create(this).cancelUploadItemByRequestId(e,(function(e,n){return a?t(e,n):t(n,e)}))}},{key:"addReaction",value:function(e,t,n){var r=this,a=Sa.getInstance(this._iid),i=H.get(this._iid).ReactionEvent,o=null,s=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),4);return o=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){o?n(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?I.get(r._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var a=null;t||(a=i.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,a)})):n(new F("Cannot add reaction to a non-succeeded message.",F.REQUEST_FAILED),null)}),n)}},{key:"deleteReaction",value:function(e,t,n){var r=this,a=Sa.getInstance(this._iid),i=H.get(this._iid).ReactionEvent,o=null,s=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),4);return o=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){o?n(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?I.get(r._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var a=null;t||(a=i.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,a)})):n(new F("Cannot remove reaction to a non-succeeded message.",F.REQUEST_FAILED),null)}),n)}},{key:"deleteMessage",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.deleteMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),messageId:e.messageId},(function(r,a){if(!r&&n.isGroupChannel()){var i=Ae.of(n._iid),o=Ne.of(n._iid);i.remove([e.messageId],pe.SUCCEEDED).then((function(){o.send({source:Ce.EVENT_MESSAGE_DELETED,payload:{channel:n,message:e}})})).catch((function(e){return X.error(e)}))}t(r,null)}))}),t)}},{key:"copyUserMessage",value:function(t,n,r){var a=H.get(this._iid);a.Command;var i=a.UserMessage,o=a.BaseMessageParams,s=null,l=C(nt.parse(arguments,[new nt({type:e}),new nt({type:i}),new nt({type:"callback"})]),4);s=l[0],t=l[1],n=l[2],r=l[3];var u=I.get(this._iid).container.isErrorFirstInCallback;if(s)return u?r(nt.error,null):r(null,nt.error),null;if(this.url!==n.channelUrl){var d=new F("The message does not belong to this channel",F.INVALID_PARAMETER);return u?r(d,null):r(null,d),null}var p={},h=Object.keys(n.translations);h.forEach((function(e){return p[e]=""}));var f=o.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(c(c({},n),{},{reqId:null,pushNotificationDeliveryOption:f,translationTargetLanguages:h,rootMessageId:null,parentMessageId:null,parentMessageText:null,messageParams:n._messageParams,callback:r}))}},{key:"copyFileMessage",value:function(t,n,r){var a=this,i=H.get(this._iid),o=i.Command;i.GroupChannel;var s=i.FileMessage,l=i.BaseMessageParams;i.FileMessageParams;var c=i.User,u=null,d=C(nt.parse(arguments,[new nt({type:e}),new nt({type:s}),new nt({type:"callback"})]),4);u=d[0],t=d[1],n=d[2],r=d[3];var p=I.get(this._iid),h=p.container.isErrorFirstInCallback;if(u)return h?r(nt.error,null):r(null,nt.error),null;if(this.url!==n.channelUrl){var f=new F("The message does not belong to this channel");return h?r(f,null):r(null,f),null}var m=Sa.getInstance(this._iid),_=n,y=_.url,g=_.name,v=_.type,b=_.size,E=_.data,w=_.customType,A=_.mentionType,k=_.mentionedUserIds,S=_.mentionedUsers,N=_.metaArrays,O=_.thumbnails,T=_.requireAuth,x=_.messageSurvivalSeconds,D=_.silent,P=_.appleCriticalAlertOptions,M=o.generateRequestId(),R=m.currentUser||{},U=t.url,L=t.isOpenChannel(),j=S.filter((function(e){return new c(c.objectify(e))})),z=l.PushNotificationDeliveryOption.DEFAULT,B=s.objectify({messageId:0,reqId:M,user:R,channel:t,plainUrl:y,name:g,type:v,size:b,data:E,customType:w,mentionType:A,mentionedUserIds:k,mentionedUsers:j,requestedMentionUserIds:k,metaArrays:N,thumbnails:O,requireAuth:T,messageSurvivalSeconds:x,silent:D,createdAt:(new Date).getTime(),appleCriticalAlertOptions:P}),G=new s(B);if(G.requestState=m.MessageRequestState.PENDING,G.sendingStatus=m.MessageSendingStatus.PENDING,!m.currentUser){var V=new F("Connection should be made first.",F.CONNECTION_REQUIRED),q=new s(B);return q.requestState=m.MessageRequestState.FAILED,q.sendingStatus=m.MessageSendingStatus.FAILED,q.errorCode=V.code,h?r(V,q):r(q,V),G}var K=o.bFile({requestId:M,channelUrl:U,url:y,name:g,type:v,size:b,data:E,customType:w,metaArrays:N,mentionType:A,mentionedUserIds:k,thumbnailSizes:O,requireAuth:T,pushNotificationDeliveryOption:z,silent:D,appleCriticalAlertOptions:P});return m.getConnectionState()===m.ConnectionState.OPEN||m.connecting||m.reconnecting?m.sendCommand(K,(function(e,n){if(m.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(n)if(n.code!==F.INVALID_PARAMETER){var o=new s(B);o.requestState=m.MessageRequestState.FAILED,o.sendingStatus=m.MessageSendingStatus.FAILED,n.code!==F.FILE_UPLOAD_CANCEL_FAILED&&n.code!==F.REQUEST_CANCELED||(o.sendingStatus=m.MessageSendingStatus.CANCELED),o.errorCode=n.code,h?r(n,o):r(o,n)}else h?r(n,null):r(null,n);else{var l=new s(e.getJsonElement()),c=l._sender;if(R&&c&&R.userId===c.userId&&(R.nickname!==c.nickname&&(R.nickname=c.nickname),R.plainProfileUrl!==c.plainProfileUrl&&(R.plainProfileUrl=c.plainProfileUrl)),t.isGroupChannel()){t.lastMessage=l,Object.keys(m.channelHandlers).forEach((function(e){m.channelHandlers[e].onChannelChanged(t)}));var u=Ne.of(a._iid);bt.of(a._iid).upsert([t]).then((function(){u.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).catch((function(e){X.error(e)})),Ae.of(a._iid).upsert([l]).then((function(){u.send({source:Ce.EVENT_MESSAGE_SENT,payload:{channel:a,message:l}})})).catch((function(e){X.error(e)}))}h?r(null,l):r(l,null)}})):p.container.apiClient.sendFileMessage({channelUrl:U,isOpenChannel:L,fileUrl:y,fileName:g,fileType:v,fileSize:b,data:E,customType:w,metaArrays:N,mentionType:A,mentionedUserIds:k,thumbnailSizes:O,requireAuth:T,pushNotificationDeliveryOption:z,appleCriticalAlertOptions:P},(function(e,n){if(e)if(e.code!==F.INVALID_PARAMETER){var a=new s(commnad.getJsonElement());a.requestState=m.MessageRequestState.FAILED,a.sendingStatus=m.MessageSendingStatus.FAILED,e.code!==F.FILE_UPLOAD_CANCEL_FAILED&&e.code!==F.REQUEST_CANCELED||(a.sendingStatus=m.MessageSendingStatus.CANCELED),a.errorCode=e.code,h?r(e,a):r(a,e)}else h?r(e,null):r(null,e);else{var i=new s(n),o=i._sender;R&&o&&R.userId===o.userId&&(R.nickname!==o.nickname&&(R.nickname=o.nickname),R.plainProfileUrl!==o.plainProfileUrl&&(R.plainProfileUrl=o.plainProfileUrl)),t.isGroupChannel()&&(t.lastMessage=i,Object.keys(m.channelHandlers).forEach((function(e){m.channelHandlers[e].onChannelChanged(t)}))),h?r(null,i):r(i,null)}})),G}},{key:"addOperators",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.addOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"removeOperators",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.removeOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getMetaCounters",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaCounters",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.createMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaCounters",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},(function(e,t){return n(e,t)}))}),n)}},{key:"increaseMetaCounters",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},(function(e,n){return t(e,n)}))}),t)}},{key:"decreaseMetaCounters",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},(function(e,n){var r=null;e||(r={},Object.keys(n).forEach((function(e){r[e]=n[e]}))),t(e,r)}))}),t)}},{key:"deleteMetaCounter",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.deleteMetaCounter({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"getCachedMetaData",value:function(){var e=Tt.get(this),t={};return Object.keys(e).forEach((function(n){var r=e[n];r.isRemoved||(t[n]=r.value)})),t}},{key:"getMetaData",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"getAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){e(t,n&&n.ts?n.metadata:n)}))}),e)}},{key:"createMetaData",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.createMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaData:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.updateMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e,upsert:t},(function(e,t){n(e,t&&t.ts?t.metadata:t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.deleteMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){t(e,n&&n.ts?{}:n)}))}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n&&n.ts?{}:n)}))}),e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var a=this;return le(this._iid,(function(r){var i=H.get(a._iid),o=i.Command,s=i.UserMessage,l=i.FileMessage,c=i.AdminMessage,u=null;if(t.isUserMessage()?u=o.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(u=o.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),u){var d=Sa.getInstance(a._iid);d.sendCommand(u,(function(e,n){if(d.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(t.isUserMessage()?i=new s(e.getJsonElement()):t.isFileMessage()?i=new l(e.getJsonElement()):t.isAdminMessage()&&(i=new c(e.getJsonElement()))),r(n,i)}))}else r(nt.error,null)}),r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r=H.get(this._iid).MessageMetaArray,a=null,i=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new nt({type:"callback"})]),4);if(a=i[0],e=i[1],t=i[2],n=i[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=[];if(Array.isArray(t))for(var s=0;s<t.length;s++){var l=t[s];o.push(new r(l,[]))}return this._updateMessageMetaArray(this.url,e,{array:o.map((function(e){return e.encode()})),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r=H.get(this._iid).MessageMetaArray,a=null,i=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new nt({type:"callback"})]),4);if(a=i[0],e=i[1],t=i[2],n=i[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=[];if(Array.isArray(t))for(var s=0;s<t.length;s++){var l=t[s];o.push(new r(l,[]))}return this._updateMessageMetaArray(this.url,e,{array:o.map((function(e){return e.encode()})),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r=H.get(this._iid).MessageMetaArray,a=null,i=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof r}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new nt({type:"callback"})]),4);if(a=i[0],e=i[1],t=i[2],n=i[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:o,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r=H.get(this._iid).MessageMetaArray,a=null,i=C(nt.parse(arguments,[new nt({type:St}),new nt({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof r}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new nt({type:"callback"})]),4);if(a=i[0],e=i[1],t=i[2],n=i[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:o,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r=this,a=H.get(this._iid).BaseChannel,i=null,o=C(nt.parse(arguments,[new nt({type:a.ReportCategory}),new nt({type:"string"}),new nt({type:"callback"})]),4);return i=o[0],e=o[1],t=o[2],n=o[3],le(this._iid,(function(n){if(i)n(i,null);else{var a=Sa.getInstance(r._iid);I.get(r._iid).container.apiClient.report({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),reportCategory:e,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:t},(function(e,t){n(e,null)}))}}),n)}},{key:"reportUser",value:function(e,t,n,r){var a=this,i=H.get(this._iid).BaseChannel,o=null,s=C(nt.parse(arguments,[new nt({type:Nt}),new nt({type:i.ReportCategory}),new nt({type:"string"}),new nt({type:"callback"})]),5);return o=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){if(o)r(o,null);else{var i=Sa.getInstance(a._iid);I.get(a._iid).container.apiClient.reportUser({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}},{key:"reportMessage",value:function(e,t,n,r){var a=this,i=H.get(this._iid).BaseChannel,o=null,s=C(nt.parse(arguments,[new nt({type:St}),new nt({type:i.ReportCategory}),new nt({type:"string"}),new nt({type:"callback"})]),5);return o=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){if(o)r(o,null);else{var i=Sa.getInstance(a._iid);I.get(a._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}}],[{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}},{key:"buildMessage",value:function(e,t){var n=H.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var o=e.file;return new a(c(c({},e),{},{url:String(o.url),name:String(o.name),type:String(o.type),size:parseInt(o.size),data:String(o.data)}));case"BRDM":case"ADMM":return new i(e)}return null}}]),e}(),Dt=function(){function e(t){d(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):xt.CHANNEL_TYPE_GROUP)}return h(e,[{key:"isGroupChannel",value:function(){return this.channelType===xt.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===xt.CHANNEL_TYPE_OPEN}}]),e}();Dt.CATEGORY_NONE=0,Dt.CATEGORY_CHANNEL_ENTER=10102,Dt.CATEGORY_CHANNEL_EXIT=10103,Dt.CATEGORY_USER_CHANNEL_MUTE=10201,Dt.CATEGORY_USER_CHANNEL_UNMUTE=10200,Dt.CATEGORY_USER_CHANNEL_BAN=10601,Dt.CATEGORY_USER_CHANNEL_UNBAN=10600,Dt.CATEGORY_CHANNEL_FREEZE=10701,Dt.CATEGORY_CHANNEL_UNFREEZE=10700,Dt.CATEGORY_TYPING_START=10900,Dt.CATEGORY_TYPING_END=10901,Dt.CATEGORY_CHANNEL_JOIN=1e4,Dt.CATEGORY_CHANNEL_LEAVE=10001,Dt.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,Dt.CATEGORY_CHANNEL_INVITE=10020,Dt.CATEGORY_CHANNEL_DECLINE_INVITE=10022,Dt.CATEGORY_CHANNEL_PROP_CHANGED=11e3,Dt.CATEGORY_CHANNEL_DELETED=12e3,Dt.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,Dt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,Dt.CATEGORY_CHANNEL_HIDE=13e3,Dt.CATEGORY_CHANNEL_UNHIDE=13001;var Pt=function e(t){d(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0)};Pt.CATEGORY_USER_BLOCK=20001,Pt.CATEGORY_USER_UNBLOCK=2e4,Pt.CATEGORY_FRIEND_DISCOVERED=20900;var Mt=function(){function e(t){d(this,e),this.sb=t,this.cls=H.get(this.sb._iid)}return h(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,a=n.User,i=n.Member,o=n.RestrictedUser,s=n.BaseChannel,l=n.GroupChannel,d=n.OpenChannel,p=n.UserMessage,h=n.FileMessage,f=n.AdminMessage,m=n.BaseMessageParams,_=n.ReactionEvent,y=n.ReadStatus,g=n.ThreadInfoUpdateEvent,v=n.PollUpdateEvent,b=n.PollVoteEvent,E=n.RestrictionInfo,w=I.get(this.sb._iid),C=w.container,A=C.pinger,k=C.auth,S=C.subscribedUnreadMessageCount,T=C.sessionManager,x=C.ackStateMap,D=new r(e),P=D.getJsonElement();if(P.hasOwnProperty("unread_cnt")&&"object"===u(P.unread_cnt)){var M=!1,R=P.unread_cnt.ts;"number"==typeof R&&R>S.ts&&(S.all!==P.unread_cnt.all&&(M=!0),S.all=P.unread_cnt.all>=0?P.unread_cnt.all:0,P.unread_cnt.custom_types&&Object.keys(P.unread_cnt.custom_types).forEach((function(e){S.custom_types[e]!==P.unread_cnt.custom_types[e]&&(M=!0),S.custom_types[e]=P.unread_cnt.custom_types[e]})),M=M&&S.ts>0,S.ts=R),M&&Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onTotalUnreadMessageCountUpdated(S.all,S.custom_types)}))}var U=D.requestId;if(U){var L=x[U];if(L){clearTimeout(L.timer);var j=L.handler;j&&("EROR"===D.command?j(new F(P.message,P.code),null):j(null,D)),x.hasOwnProperty(U)&&delete x[U]}}else{A&&"LOGI"!==D.command&&A.refreshTimer();var z=bt.of(this.sb._iid),H=Ae.of(this.sb._iid),B=Ne.of(this.sb._iid);switch(D.command){case"LOGI":if(this.sb.loginTimer)if(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,P.hasOwnProperty("error"))this.sb.isSessionOpened=!1,this.sb.loginHandler(new F(P.message,P.code),null);else{if(this.sb.isSessionOpened=!0,P.hasOwnProperty("key")&&(k.sessionKey=P.key),P.hasOwnProperty("ekey")&&(k.eKey=P.ekey),P.hasOwnProperty("user_id")&&(this.sb.currentUser=new a(P)),"number"==typeof P.ping_interval&&P.ping_interval>0&&w.set("pingInterval",1e3*P.ping_interval),"number"==typeof P.pong_timeout&&P.pong_timeout>0&&w.set("pongTimeout",1e3*P.pong_timeout),"number"==typeof P.login_ts){var G=1e3*P.login_ts;w.set("connectedAt",G),w.container.firstConnectedAt||w.set("firstConnectedAt",G)}"number"==typeof P.max_unread_cnt_on_super_group?w.set("maxUnreadCountOfSuperGroupChannel",P.max_unread_cnt_on_super_group):w.set("maxUnreadCountOfSuperGroupChannel",O.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),P.profile_image_encryption&&w.set("profileImageEncryption",!0),A&&A.start(),P.hasOwnProperty("file_upload_size_limit")&&P.hasOwnProperty("premium_feature_list")&&P.hasOwnProperty("emoji_hash")&&w.set("appInfo",new et(P)),P.hasOwnProperty("concurrent_call_limit")&&P.hasOwnProperty("back_off_delay")&&(w.set("concurrentCallLimit",P.concurrent_call_limit),w.set("backOffDelay",P.back_off_delay)),this.sb.loginHandler(null,this.sb.currentUser)}break;case"EXPR":var V=new F("The session would be expired.",P.reason||F.SESSION_KEY_EXPIRED);T.refreshSessionIfExpiredError(V).then((function(){})).catch((function(){}));break;case"MESG":case"FILE":case"BRDM":case"ADMM":var q=null;if("MESG"===D.command?q=new p(P):"FILE"===D.command?q=new h(P):"BRDM"!==D.command&&"ADMM"!==D.command||(q=new f(P)),q){var K=this.sb.currentUser?this.sb.currentUser.userId:null,W=q.silent,Y=!!P.force_update_last_message,Q=q._sender&&q._sender.userId===K;if(q.isGroupChannel()){var J=l.cachedChannels.hasOwnProperty(q.channelUrl);l.getChannel(q.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){if(!w.container.appInfo.isSupergroupMackDisabled||!e.isSuper||e.isBroadcast){var i=r.bMessageAck({channelUrl:q.channelUrl,messageId:q.messageId});t.sb.sendCommand(i)}if(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,q._sender&&e.memberMap.hasOwnProperty(q._sender.userId)){var o=e.memberMap[q._sender.userId];o.nickname!==q._sender.nickname&&(o.nickname=q._sender.nickname),o.plainProfileUrl!==q._sender.plainProfileUrl&&(o.plainProfileUrl=q._sender.plainProfileUrl),ie.deepEqual(o.metaData,q._sender.metaData)||(o.metaData=q._sender.metaData),o.isBlockedByMe!==q._sender.isBlockedByMe&&(o.isBlockedByMe=q._sender.isBlockedByMe)}var s=t.sb.currentUser;s&&Q&&(s.nickname!==q._sender.nickname&&(s.nickname=q._sender.nickname),s.plainProfileUrl!==q._sender.plainProfileUrl&&(s.plainProfileUrl=q._sender.plainProfileUrl),ie.deepEqual(s.metaData,q._sender.metaData)||(s.metaData=q._sender.metaData));var c=!1;if(q.mentionType===m.MentionType.CHANNEL)Q||(c=!0);else if(q.mentionType===m.MentionType.USERS)for(var u=0;u<q.mentionedUsers.length;u++)if(!Q&&q.mentionedUsers[u].userId===K){c=!0;break}W&&!Q||(e.isEphemeral||J)&&((!e.lastMessage||e.lastMessage.createdAt<q.createdAt)&&(e.lastMessage=q),Q||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(c?1:0))),Y&&(!e.lastMessage||e.lastMessage.createdAt<q.createdAt)&&(e.lastMessage=q),W&&!Q||(z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageReceived(e,q),c&&r.onMentionReceived(e,q)})),H.upsert([q]).then((function(){B.send({source:Ce.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:q}})})).catch((function(e){t.handleCacheError(e)}))}}))}else q.isOpenChannel()&&d.getChannel(q.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;if(q.mentionType===m.MentionType.CHANNEL)a=!0;else if(q.mentionType===m.MentionType.USERS)for(var i=0;i<q.mentionedUsers.length;i++)if(q.mentionedUsers[i].userId===K){a=!0;break}Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];d.enteredChannels[e.url]&&r.onMessageReceived(e,q),a&&r.onMentionReceived(e,q)})),d.enteredChannels[e.url]&&B.send({source:Ce.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:q}})}}))}break;case"MEDI":case"FEDI":case"AEDI":var $=null;if("MEDI"===D.command?$=new p(P):"FEDI"===D.command?$=new h(P):"AEDI"===D.command&&($=new f(P)),$){var Z=this.sb.currentUser?this.sb.currentUser.userId:null,ee=$.silent,te=$.sender&&$.sender.userId===Z;if($.isGroupChannel()){var ne=l.cachedChannels.hasOwnProperty($.channelUrl);l.getChannel($.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=e.cachedReadReceiptStatus[Z],i=a&&a>=$.createAt,o=t.sb.currentUser;o&&te&&(o.nickname!==$._sender.nickname&&(o.nickname=$._sender.nickname),o.plainProfileUrl!==$._sender.plainProfileUrl&&(o.plainProfileUrl=$._sender.plainProfileUrl),ie.deepEqual(o.metaData,$._sender.metaData)||(o.metaData=$._sender.metaData));var s=!1,l=!1;if(!te&&!i&&P&&P.hasOwnProperty("old_values")){var c=P.old_values.mention_type||$.mentionType,u=P.old_values.mentioned_user_ids||$.mentionedUsers.map((function(e){return e.userId}));if(c===m.MentionType.USERS&&$.mentionType===m.MentionType.USERS){for(var d=!1,p=!1,h=0;h<u.length;h++)if(u[h]===Z){d=!0;break}for(var f=0;f<$.mentionedUsers.length;f++)if($.mentionedUsers[f].userId===Z){p=!0;break}!d&&p&&(l=!0,!ee&&ne&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),s=!0))}else if(c===m.MentionType.USERS&&$.mentionType===m.MentionType.CHANNEL){for(var _=!1,y=0;y<u.length;y++)if(u[y]===Z){_=!0;break}_||(l=!0,!ee&&ne&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),s=!0))}}e.lastMessage?e.lastMessage.createdAt<$.createdAt?(e.lastMessage=$,s=!0):e.lastMessage.createdAt===$.createdAt&&e.lastMessage.messageId===$.messageId&&(ne?e.lastMessage.updatedAt<$.updatedAt&&(e.lastMessage=$,s=!0):s=!0):(e.lastMessage=$,s=!0),ee&&!te||!s||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageUpdated(e,$),l&&r.onMentionReceived(e,$)})),H.upsert([$]).then((function(){B.send({source:Ce.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:$}})})).catch((function(e){t.handleCacheError(e)}))}}))}else $.isOpenChannel()&&d.getChannel($.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageUpdated(e,$)})),B.send({source:Ce.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:$}}))}))}break;case"DELM":var re=String(P.channel_type),ae=String(P.channel_url),oe=parseInt(P.msg_id);switch(re){case s.CHANNEL_TYPE_GROUP:l.getChannel(ae,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,oe)})),H.remove(["".concat(oe)]).then((function(){B.send({source:Ce.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:oe}})})).catch((function(e){t.handleCacheError(e)})))}));break;case s.CHANNEL_TYPE_OPEN:d.getChannel(ae,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,oe)})),B.send({source:Ce.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:oe}}))}))}break;case"READ":var se=new y(P),le=l.cachedChannels.hasOwnProperty(se.channelUrl);l.getChannel(se.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(le&&e.updateReadReceipt(se.reader.userId,se.timestamp),t.sb.currentUser&&(se.reader.userId===t.sb.currentUser.userId?le?(e.unreadMessageCount>0||e.unreadMentionCount>0)&&(e._setGroupChannelUnreadCount(0,0),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):0!==e.unreadMessageCount&&0!==e.unreadMentionCount||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReadReceiptUpdated(e)})),B.send({source:Ce.EVENT_READ_RECEIPT_UPDATED,payload:{channel:e,user:se.reader}})))}));break;case"MRCT":var ce=String(P.channel_type),ue=String(P.channel_url),de=_.createFromJson(P);switch(ce){case s.CHANNEL_TYPE_GROUP:l.getChannel(ue,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,de)})),H.get("".concat(de.messageId)).then((function(n){n&&(n.applyReactionEvent(de),H.upsert([n]).then((function(){B.send({source:Ce.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:de}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case s.CHANNEL_TYPE_OPEN:d.getChannel(ue,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,de)})),B.send({source:Ce.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:de}}))}))}break;case"DLVR":var pe=String(P.channel_url),he=P.hasOwnProperty("updated")?P.updated:null,fe=l.cachedChannels.hasOwnProperty(pe);l.getChannel(pe,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;Object.keys(he).forEach((function(n){t.sb.currentUser&&n===t.sb.currentUser.userId&&(a=!0),fe&&e.updateDeliveryReceipt(n,parseInt(he[n]))})),l.cachedChannels[e.url]=e,a&&1===Object.keys(he).length||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onDeliveryReceiptUpdated(e)})),B.send({source:Ce.EVENT_DELIVERY_RECEIPT_UPDATED,payload:{channel:e}}))}}));break;case"MTHD":var me=String(P.channel_url),_e=String(P.channel_type),ye=g.createFromJson(P);switch(_e){case s.CHANNEL_TYPE_GROUP:l.getChannel(me,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,ye)})),H.get("".concat(ye.targetMessageId)).then((function(n){n&&(n.applyThreadInfoUpdateEvent(ye),H.upsert([n]).then((function(){B.send({source:Ce.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:ye}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case s.CHANNEL_TYPE_OPEN:d.getChannel(me,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,ye)})),B.send({source:Ce.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:ye}}))}))}break;case"MCNT":if(P.hasOwnProperty("group_channels")&&Array.isArray(P.group_channels)){var ge,ve=[],be=N(P.group_channels);try{for(be.s();!(ge=be.n()).done;){var Ee=ge.value;if(Ee){var we=l.cachedChannels[Ee.channel_url];we&&we.isBroadcast&&we.setLatestMemberCount(Ee.member_count,Ee.joined_member_count,Ee.ts)&&ve.push(we)}}}catch(e){be.e(e)}finally{be.f()}ve.length>0&&(Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelMemberCountChanged(ve)})),z.upsert(ve).then((function(){var e,t=N(ve);try{for(t.s();!(e=t.n()).done;){var n=e.value;B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}}catch(e){t.e(e)}finally{t.f()}})).catch((function(e){t.handleCacheError(e)})))}if(P.hasOwnProperty("open_channels")&&Array.isArray(P.open_channels)){var ke,Se=[],Oe=N(P.open_channels);try{for(Oe.s();!(ke=Oe.n()).done;){var Te=ke.value;if(Te){var Ie=d.cachedChannels[Te.channel_url];Ie&&Ie.setLatestParticipantCount(Te.participant_count,Te.ts)&&Se.push(Ie)}}}catch(e){Oe.e(e)}finally{Oe.f()}if(Se.length>0){Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelParticipantCountChanged(Se)}));var xe,De=N(Se);try{for(De.s();!(xe=De.n()).done;){var Pe=xe.value;B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:Pe}})}}catch(e){De.e(e)}finally{De.f()}}}break;case"PEDI":var Me=v.createFromJson(P);Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onPollUpdated(Me)}));break;case"VOTE":var Re=b.createFromJson(P);Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onPollVoted(Re)}));break;case"SYEV":var Ue=new Dt(P),Le=P.ts;switch(Ue.category){case Dt.CATEGORY_CHANNEL_JOIN:case Dt.CATEGORY_CHANNEL_LEAVE:l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var o=Ue.data.hasOwnProperty("member_count")?Ue.data.member_count:null,s=Ue.data.hasOwnProperty("joined_member_count")?Ue.data.joined_member_count:null,c=!1;if(Ue.category===Dt.CATEGORY_CHANNEL_JOIN)(Ue.data.hasOwnProperty("users")?Ue.data.users:[Ue.data]).forEach((function(n){e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(o,s,P.ts):(n.state=i.JOINED,e.addMember(new i(n),Le),e.updateJoinedMemberCount());var r=new a(n);t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){var a=t.sb.channelHandlers[n];a.onUserJoined(e,r),e.isBroadcast&&c&&a.onChannelMemberCountChanged([e])})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_JOINED,payload:{channel:e,user:r}})})).catch((function(e){t.handleCacheError(e)}))}));else{var u=new a(Ue.data);t.sb.currentUser&&u.userId===t.sb.currentUser.userId?(e.isPublic||l.removeCachedChannel(Ue.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):l.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(o,s,P.ts):(e.removeMember(u),e.updateJoinedMemberCount()),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserLeft(e,u),e.isBroadcast&&c&&r.onChannelMemberCountChanged([e])})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_LEFT,payload:{channel:e,user:u}})})).catch((function(e){t.handleCacheError(e)}))}}}));break;case Dt.CATEGORY_CHANNEL_OPERATOR_UPDATE:Ue.isGroupChannel()?l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{for(var i=Ue.data.operators.map((function(e){return new a(e)})),o=i.map((function(e){return e.userId})),s=0;s<e.members.length;s++)e.members[s].role=o.indexOf(e.members[s].userId)>=0?l.Role.OPERATOR:l.Role.NONE;e.myRole=t.sb.currentUser&&o.indexOf(t.sb.currentUser.userId)>=0?l.Role.OPERATOR:l.Role.NONE,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,i)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:i}})})).catch((function(e){t.handleCacheError(e)}))}})):Ue.isOpenChannel()&&d.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):(e.operators=Ue.data.operators.map((function(e){return new a(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,e.operators)})),B.send({source:Ce.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators}}))}));break;case Dt.CATEGORY_CHANNEL_INVITE:l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var o=null;Ue.data&&Ue.data.inviter&&Object.keys(Ue.data.inviter).length>0&&(o=new a(Ue.data.inviter));for(var s=[],c=0;c<Ue.data.invitees.length;c++){var u=new a(Ue.data.invitees[c]);s.push(u),Ue.data.invitees[c].state=i.INVITED;var d=new i(Ue.data.invitees[c]);if(e.isSuper||e.isBroadcast){var p=Ue.data.hasOwnProperty("member_count")?Ue.data.member_count:null,h=Ue.data.hasOwnProperty("joined_member_count")?Ue.data.joined_member_count:null;e.setLatestMemberCount(p,h,P.ts)}else e.addMember(d,Le);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=P.ts,l.cachedChannels[e.url]=e)}Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserReceivedInvitation(e,o,s)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_RECEIVED_INVITATION,payload:{channel:e,inviter:o,invitees:s}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_DECLINE_INVITE:l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var i=null;Ue.data&&Ue.data.inviter&&Object.keys(Ue.data.inviter).length>0&&(i=new a(Ue.data.inviter));var o=new a(Ue.data.invitee);if(t.sb.currentUser&&o.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||l.removeCachedChannel(Ue.channelUrl)),e.isSuper||e.isBroadcast){var s=Ue.data.hasOwnProperty("member_count")?Ue.data.member_count:null,c=Ue.data.hasOwnProperty("joined_member_count")?Ue.data.joined_member_count:null;e.setLatestMemberCount(s,c,P.ts)}else e.removeMember(o);t.sb.currentUser&&o.userId!==t.sb.currentUser.userId&&(l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserDeclinedInvitation(e,i,o)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_DECLINED_INVITATION,payload:{channel:e,inviter:i,invitee:o}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_TYPING_START:case Dt.CATEGORY_TYPING_END:l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var i=new a(Ue.data);Ue.category===Dt.CATEGORY_TYPING_START?e.updateTypingStatus(i,!0):e.updateTypingStatus(i,!1),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onTypingStatusUpdated(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_TYPING_STATUS_UPDATED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_ENTER:case Dt.CATEGORY_CHANNEL_EXIT:d.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var i=Ue.data.hasOwnProperty("participant_count")?Ue.data.participant_count:null,o=e.setLatestParticipantCount(i,P.ts),s=new a(Ue.data);Ue.category===Dt.CATEGORY_CHANNEL_ENTER?(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserEntered(e,s),o&&r.onChannelParticipantCountChanged([e])})),B.send({source:Ce.EVENT_CHANNEL_ENTER,payload:{channel:e,user:s}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserExited(e,s),o&&r.onChannelParticipantCountChanged([e])})),B.send({source:Ce.EVENT_CHANNEL_EXIT,payload:{channel:e,user:s}}))}}));break;case Dt.CATEGORY_USER_CHANNEL_MUTE:case Dt.CATEGORY_USER_CHANNEL_UNMUTE:var Fe=Ue.category===Dt.CATEGORY_USER_CHANNEL_MUTE,je=c({},Ue.data);Fe&&(je.restriction_type=o.RestrictionType.MUTED);var ze=Fe?new o(je):new a(Ue.data),He=Fe?"muted":"unmuted";Ue.isOpenChannel()?d.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):Fe?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,ze)})),B.send({source:Ce.EVENT_USER_MUTED,payload:{channel:e,user:ze}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,ze)})),B.send({source:Ce.EVENT_USER_UNMUTED,payload:{channel:e,user:ze}}))})):l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):(t.sb.currentUser&&ze.userId===t.sb.currentUser.userId&&(e.myMutedState=He),Array.isArray(e.members)&&e.members.filter((function(e){return e&&e.userId===ze.userId})).forEach((function(e){e.isMuted=Fe,e.restrictionInfo=new E(je)})),Fe?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,ze)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_MUTED,payload:{channel:e,user:ze}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,ze)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_USER_UNMUTED,payload:{channel:e,user:ze}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Dt.CATEGORY_USER_CHANNEL_BAN:case Dt.CATEGORY_USER_CHANNEL_UNBAN:var Be=Ue.category===Dt.CATEGORY_USER_CHANNEL_BAN,Ge=c({},Ue.data);Be&&(Ge.restriction_type=o.RestrictionType.BANNED);var Ve=Be?new o(Ge):new a(Ue.data);Ue.isOpenChannel()?d.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):Be?(t.sb.currentUser&&Ve.userId===t.sb.currentUser.userId&&(delete d.enteredChannels[Ue.channelUrl],t.cls.FileMessageQueue.delete(Ue.channelUrl)),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,Ve)})),B.send({source:Ce.EVENT_USER_BANNED,payload:{channel:e,user:Ve}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,Ve)})),B.send({source:Ce.EVENT_USER_UNBANNED,payload:{channel:e,user:Ve}}))})):l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else if(Be){if(t.sb.currentUser&&Ve.userId===t.sb.currentUser.userId&&(e.isPublic||l.removeCachedChannel(Ue.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var a=Ue.data.hasOwnProperty("member_count")?Ue.data.member_count:null,i=Ue.data.hasOwnProperty("joined_member_count")?Ue.data.joined_member_count:null;e.setLatestMemberCount(a,i,P.ts)}else e.removeMember(Ve),e.updateJoinedMemberCount();Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,Ve)})),B.send({source:Ce.EVENT_USER_BANNED,payload:{channel:e,user:Ve}})}else Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,Ve)})),B.send({source:Ce.EVENT_USER_UNBANNED,payload:{channel:e,user:Ve}})}));break;case Dt.CATEGORY_CHANNEL_FREEZE:case Dt.CATEGORY_CHANNEL_UNFREEZE:Ue.isOpenChannel()?d.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):(e.isFrozen=Ue.data.freeze,d.cachedChannels[e.url]=e,Ue.category===Dt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),B.send({source:Ce.EVENT_CHANNEL_FROZEN,payload:{channel:e}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),B.send({source:Ce.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})))})):l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):(e.isFrozen=Ue.data.freeze,l.cachedChannels[e.url]=e,Ue.category===Dt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_FROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Dt.CATEGORY_CHANNEL_DELETED:Ue.isGroupChannel()?l.removeCachedChannel(Ue.channelUrl):d.removeCachedChannel(Ue.channelUrl);var qe=Ue.channelUrl,Ke=Ue.isGroupChannel()?"group":"open";Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelDeleted(qe,Ke)})),z.remove([qe]).then((function(){B.send({source:Ce.EVENT_CHANNEL_DELETED,payload:{channelUrl:qe,channelType:Ke}})})).catch((function(e){t.handleCacheError(e)}));break;case Dt.CATEGORY_CHANNEL_PROP_CHANGED:Ue.isOpenChannel()?d.getChannelWithoutCache(Ue.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}}))})):l.getChannelWithoutCache(Ue.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(D.command,"`"),Ue.category);else{var a=e.unreadMessageCount,i=e.unreadMentionCount;e.myCountPreference!==l.CountPreference.ALL&&(e.myCountPreference===l.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?i=0:e.myCountPreference===l.CountPreference.UNREAD_MENTION_COUNT_ONLY?a=0:(a=0,i=0)),e._setGroupChannelUnreadCount(a,i),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_META_DATA_CHANGED:case Dt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var We=Ue.data.hasOwnProperty("created"),Ye=Ue.data.hasOwnProperty("updated"),Qe=Ue.data.hasOwnProperty("deleted");(Ue.isOpenChannel()?d.getChannel(Ue.channelUrl,O.INTERNAL_CALL):l.getChannel(Ue.channelUrl,O.INTERNAL_CALL)).then((function(e){var n=Ue.data.created,r=Ue.data.updated,a=Ue.data.deleted,i=P.ts;We&&e._addOrUpdateCachedMetaData(n,i),Ye&&e._addOrUpdateCachedMetaData(r,i),Qe&&e._markAsDeletedCachedMetaData(a,i),Object.keys(t.sb.channelHandlers).forEach((function(i){var o=t.sb.channelHandlers[i];Ue.category===Dt.CATEGORY_CHANNEL_META_DATA_CHANGED?(We&&o.onMetaDataCreated(e,n),Ye&&o.onMetaDataUpdated(e,r),Qe&&o.onMetaDataDeleted(e,a),(We||Ye)&&B.send({source:Ce.EVENT_CHANNEL_METADATA_UPDATED,payload:{channel:e,metaData:c(c({},n),r)}}),Qe&&B.send({source:Ce.EVENT_CHANNEL_METADATA_DELETED,payload:{channel:e,metaData:c({},a)}})):(We&&o.onMetaCountersCreated(e,n),Ye&&o.onMetaCountersUpdated(e,r),Qe&&o.onMetaCountersDeleted(e,a),(We||Ye)&&B.send({source:Ce.EVENT_CHANNEL_METACOUNTER_UPDATED,payload:{channel:e,metaData:c(c({},n),r)}}),Qe&&B.send({source:Ce.EVENT_CHANNEL_METACOUNTER_DELETED,payload:{channel:e,metaData:c({},a)}}))}))})).catch((function(e){return X.debug("Discard command:","`".concat(D.command,"`"),Ue.category)}));break;case Dt.CATEGORY_CHANNEL_HIDE:case Dt.CATEGORY_CHANNEL_UNHIDE:l.getChannel(Ue.channelUrl,O.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(D.command,"`"),Ue.category):Ue.category===Dt.CATEGORY_CHANNEL_HIDE?(e.isHidden=!0,Ue.data&&(Ue.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=Ue.data.allow_auto_unhide?l.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:l.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),Ue.data.hasOwnProperty("hide_previous_messages")&&Ue.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),P.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=P.ts_message_offset),l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelHidden(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_HIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.upsert([e]).then((function(){B.send({source:Ce.EVENT_CHANNEL_UNHIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})))}))}break;case"USEV":var Je=new Dt(P);switch(Je.category){case Pt.CATEGORY_USER_BLOCK:case Pt.CATEGORY_USER_UNBLOCK:var Xe=Je.data.blocker.user_id,$e=Je.data.blockee.user_id;Object.keys(l.cachedChannels).forEach((function(e){var n=l.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===Xe?n.memberMap[$e].isBlockedByMe=Je.category===Pt.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===$e&&(n.memberMap[Xe].isBlockingMe=Je.category===Pt.CATEGORY_USER_BLOCK))}catch(e){}}));break;case Pt.CATEGORY_FRIEND_DISCOVERED:var Ze=Je.data.friend_discoveries.map((function(e){return new a(e)}));Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onFriendsDiscovered(Ze)}))}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:X.debug("Discard command:","`".concat(D.command,"`"))}}}},{key:"handleCacheError",value:function(e){X.error(e)}}]),e}(),Rt=200,Ut={},Lt={},Ft=function(){function e(t){d(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,H.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return h(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(X.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var n=H.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED)if(navigator&&"boolean"==typeof navigator.onLine)if(navigator.onLine){for(r.state=n.State.SENDING,0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-Rt);(new Date).getTime()-this.latestTimestampToSendMessage<Rt;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,(function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,this._finalizeMessage();else Ke.ready().then((function(e){if(e){for(r.state=n.State.SENDING,0===t.latestTimestampToSendMessage&&(t.latestTimestampToSendMessage=(new Date).getTime()-Rt);(new Date).getTime()-t.latestTimestampToSendMessage<Rt;);t.latestTimestampToSendMessage=(new Date).getTime(),t._sendUploadedMessage(r,(function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,t._finalizeMessage()}));else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(X.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=H.get(this._iid).FileMessageQueue;t.state=r.State.UPLOADING,t.error?(this.messageQueue.map((function(e){return e.requestId})).indexOf(t.requestId)>-1&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)):navigator&&"boolean"==typeof navigator.onLine?navigator.onLine?this._uploadFile(t,(function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),t.response=null,this._handleMessageQueueUpdated("update"),this._finalizeUpload(t.requestId)):Ke.ready().then((function(e){e?n._uploadFile(t,(function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),t.response=null,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId))}));break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=H.get(this._iid).FileMessageQueue,t=this.messageQueue.filter((function(t){return t.state===e.State.PENDING}));if(t.length>0){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=H.get(this._iid),r=n.Command,a=n.FileMessage,i=e.fileInfo,o=r.bFile(c(c({},i),{},{requestId:e.requestId,channelUrl:this.channel.url,url:i.file,metaArrays:i.metaArrays})),s=Sa.getInstance(this._iid),l=I.get(this._iid);s.getConnectionState()===s.ConnectionState.OPEN||!s.currentUser||s.connecting||s.reconnecting?s.sendCommand(o,(function(e,n){if(s.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var l=new a(o.getJsonElement());l.requestedMentionUserIds=i.mentionedUserIds,t(n,l)}else{var c=new a(e.getJsonElement());t(null,c)}})):l.container.apiClient.sendFileMessage(c(c({reqId:e.requestId,channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},i),{},{fileUrl:i.file,fileName:i.name,fileSize:i.size,fileType:i.type,metaArrays:i.metaArrays}),(function(e,n){var r=new a(e?o.getJsonElement():n);e&&(r.requestedMentionUserIds=i.mentionedUserIds),t(e,r)}))}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var a=H.get(this._iid).FileMessageQueue;I.get(this._iid).container.apiClient.uploadFile(c(c({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),(function(r,i){if(r)e.state=a.State.SENT,e.error=r,e.response=null,t(n);else{var o="object"===u(i)?i:JSON.parse(i);n.file=o.url,n.thumbnailSizes=o.hasOwnProperty("thumbnails")?o.thumbnails:[],n.requireAuth=!!o.hasOwnProperty("require_auth")&&o.require_auth,n.size=o.hasOwnProperty("file_size")?o.file_size:n.size,t(n)}}))}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map((function(e){return e.requestId})).indexOf(e);if(t>-1){var n=this.uploadQueue.splice(t,1);n.length>0&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=this,t=I.get(this._iid),n=t.container.localCacheEnabled,r=t.container.isErrorFirstInCallback,a=Sa.getInstance(this._iid),i=bt.of(this._iid),o=Ae.of(this._iid),s=Ne.of(this._iid),l=H.get(this._iid).FileMessageQueue,c=this.messageQueue[0],u=c.pendingMessage;if(c&&c.state===l.State.SENT){c.state=l.State.DONE;var d=c.response;d&&u&&(d._isAutoResendRegistered=u._isAutoResendRegistered);var p=c.error,h=p?new F(p.message,p.code):null,f=c.fileInfo.callback;if(d&&!p){d.reqId=u.reqId,d.requestState=a.MessageRequestState.SUCCEEDED,d.sendingStatus=a.MessageSendingStatus.SUCCEEDED;var m=a.currentUser;if(m&&d._sender&&m.userId===d._sender.userId&&(m.nickname!==d._sender.nickname&&(m.nickname=d._sender.nickname),m.plainProfileUrl!==d._sender.plainProfileUrl&&(m.plainProfileUrl=d._sender.plainProfileUrl)),this.channel.isGroupChannel())return this.channel.lastMessage=d,Object.keys(a.channelHandlers).forEach((function(t){a.channelHandlers[t].onChannelChanged(e.channel)})),void i.upsert([this.channel]).then((function(){s.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:e.channel}})})).then((function(){return o.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){return o.upsert([d],pe.SUCCEEDED)})).then((function(){$e._completeCurrentAndProcessNextAutoResend(a,d),s.send({source:Ce.EVENT_MESSAGE_SENT,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){f&&(r?f(null,d):f(d,null)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}if(p){if(d&&d._isAutoResendRegistered&&ie.isAutoResendableError(p.code))return this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove");if(c.pendingMessage&&(d=c.pendingMessage._clone()),d&&p.code!==F.INVALID_PARAMETER)if(d.requestState=a.MessageRequestState.FAILED,p.code===F.FILE_UPLOAD_CANCEL_FAILED||p.code===F.REQUEST_CANCELED){if(d.sendingStatus=a.MessageSendingStatus.CANCELED,this.channel.isGroupChannel())return void o.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]}).then((function(){s.send({source:Ce.LOCAL_MESSAGE_CANCELED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){f&&(r?f(h,d):f(d,h)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}else if(d.sendingStatus=a.MessageSendingStatus.FAILED,d.errorCode=p.code,d.requestedMentionUserIds=c.fileInfo.mentionedUserIds,p.code===F.FILE_SIZE_LIMIT_EXCEEDED&&d._messageParams&&d._messageParams.file&&(d._messageParams.file=null),this.channel.isGroupChannel())return void(p.code===F.USER_NOT_MEMBER||p.code===F.CHANNEL_NOT_FOUND?i.remove([this.channel.url]).then((function(){return o.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){s.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){f&&(r?f(h,d):f(d,h)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})):(n&&ie.isAutoResendableError(p.code)&&(d.sendingStatus=a.MessageSendingStatus.PENDING,d.errorCode=0,d._isAutoResendRegistered=!0),o.upsert([d],pe.UNSENT).then((function(){$e._completeCurrentAndProcessNextAutoResend(a,d),s.send({source:Ce.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){var t=d._clone();t.sendingStatus=a.MessageSendingStatus.FAILED,t.errorCode=p.code,t._isAutoResendRegistered=!1,f&&(r?f(h,t):f(t,h)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))))}f&&(r?f(h,d):f(d,h)),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map((function(e){return e.requestId})).indexOf(e);if(n>-1){var r=H.get(this._iid).FileMessageQueue,a=this.messageQueue[n];!a||a.state!==r.State.UPLOADING&&a.state!==r.State.PENDING||(a.state=r.State.SENT,a.response=null,a.error=new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var i=r.uploadRequest[e];if(i)return"function"==typeof i.abort?i.abort():"function"==typeof i.cancel&&i.cancel("Upload has been canceled."),t(null,!0),!0;t(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"getByChannelUrl",value:function(e){return H.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=H.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=H.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){Lt[this._iid]={}}},{key:"queueMap",get:function(){return Lt[this._iid]||(Lt[this._iid]={}),Lt[this._iid]}},{key:"uploadRequest",get:function(){return Ut[this._iid]||(Ut[this._iid]={}),Ut[this._iid]}}]),e}();Ft.Job=function e(t){var n=t.fileInfo,r=t.requestId,a=t.pendingMessage,i=t.state,o=t.error,s=void 0===o?null:o,l=t.response,c=void 0===l?null:l;d(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=a,this.state=i||Ft.State.PENDING,this.error=s,this.response=c};var jt,zt={},Ht=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,a=e.cacheLimit,i=void 0===a?256:a,o=e.blockHashBase,s=void 0===o?2:o,l=e.blockHashMultiplier,c=void 0===l?10:l,u=e.blockHashConstant,d=void 0===u?11:u,p=e.transactionApplyDelay,h=void 0===p?200:p;return zt[t]||(this.itemSizeLimit=r,this.cacheLimit=i,this.blockHashBase=s,this.blockHashMultiplier=c,this.blockHashConstant=d,this.transactionApplyDelay=h,zt[t]=this),zt[t]}return e.get=function(e){return zt[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(jt||(jt={}));var Bt,Gt=function(e){function t(t){var n=t.code,r=void 0===n?jt.UNKNOWN_ERROR:n,a=t.message,i=void 0===a?"Unknown error occurred.":a,o=e.call(this,i)||this;return o.code=r,o}return D(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:jt.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:jt.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:jt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:jt.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:jt.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:jt.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:jt.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:jt.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:jt.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:jt.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:jt.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:jt.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:jt.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:jt.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:jt.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:jt.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:jt.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:jt.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:jt.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:jt.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:jt.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:jt.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:jt.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(Bt||(Bt={}));var Vt,qt=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw Gt.circularReferenceFound;t.set(e,!0);var n=null;if(Array.isArray(e))n=e.map((function(e){return qt(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=qt(e[r],t);return t.delete(e),n}return e},Kt=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw Gt.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Wt=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},Yt=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},Qt=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e)if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!Qt(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!Qt(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var a=e[r];for(var i in a)switch(i){case"/eq":case"=":if((o=t[r])!==(s=a[i]))return!1;break;case"/neq":case"!=":if((o=t[r])===(s=a[i]))return!1;break;case"/gt":case">":var o=t[r],s=a[i];if(!(Kt(o,s)>0))return!1;break;case"/gte":case">=":if(o=t[r],s=a[i],!(Kt(o,s)>=0))return!1;break;case"/lt":case"<":if(o=t[r],s=a[i],!(Kt(o,s)<0))return!1;break;case"/lte":case"<=":if(o=t[r],s=a[i],!(Kt(o,s)<=0))return!1;break;case"/in":if(o=t[r],!(s=a[i]).includes(o))return!1;break;case"/nin":if(o=t[r],(s=a[i]).includes(o))return!1;break;case"/contain":if(o=t[r],s=a[i],!o.includes(s))return!1;break;case"/regex":if(o=t[r],!(s=a[i]).test(o))return!1;break;case"/where":if(o=t[r],!(0,a[i])(o))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}return!0}return e(t)},Jt=function(){},Xt=function(){return Promise.resolve()},$t=function(e){return e},Zt=function(e,t){t(null)};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Vt||(Vt={}));var en,tn,nn,rn=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,a=void 0===r?null:r,i=e.iterator,o=e.map,s=void 0===o?$t:o,l=e.backward,c=void 0===l?Xt:l,u=e.forward,d=void 0===u?Xt:u,p=e.complete,h=void 0===p?Jt:p;this._prevValue=n,this._nextValue=a,this._error=null,this._map=s,this._backward=c,this._forward=d,this._iterator=i,this._complete=h}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return M(this,void 0,void 0,(function(){var e,t,n;return R(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return M(this,void 0,void 0,(function(){var e,t,n;return R(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),an=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.blockManager,o=e.indexer;this.condition=n,this.backward=a,this._blockManager=i,this._indexer=o}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var a in this._indexer.fields){var i=this._indexer.fields[a],o=1;if("-"===i[0]&&(i=i.slice(1),o=-1),this.condition[i])if("object"==typeof this.condition[i]){var s=o>0?n:t;for(var l in this.condition[i])if(s.includes(l))for(var c=r;c>=0;c--)if(o*Kt(this._indexer.origin[c].columnValues[a],this.condition[i][l])<=0){r=c;break}}else for(c=r;c>=0;c--)if(o*Kt(this._indexer.origin[c].columnValues[a],this.condition[i])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var u=0;if("function"!=typeof this.condition){var d=function(r){var a=p._indexer.fields[r],i=1;if("-"===a[0]&&(a=a.slice(1),i=-1),p.condition[a])if("object"==typeof p.condition[a])Object.keys(p.condition[a]).forEach((function(o){if((i>0?t:n).includes(o))for(var s=u;s<e._indexer.origin.length;s++)if(i*Kt(e._indexer.origin[s].columnValues[r],e.condition[a][o])>=0){u=s;break}}));else for(var o=u;o<p._indexer.origin.length;o++)if(i*Kt(p._indexer.origin[o].columnValues[r],p.condition[a])>=0){u=o;break}},p=this;for(a=0;a<this._indexer.fields.length;a++)d(a)}return Math.max(u-1,0)},e.prototype.each=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,l=this;return R(this,(function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[++n]){if(!l._indexer.origin[++t])return!1;n=0}return!0}return!1},a=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[--n]){if(!l._indexer.origin[--t])return!1;n=l._indexer.origin[t].keys.length-1}return!0}return!1},i=null,!this._indexer.origin[t])return[3,4];o=this.backward?a:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if(s=c.sent(),Qt(this.condition,s))return i=s,[3,4];c.label=3;case 3:if(o())return[3,1];c.label=4;case 4:return[4,new Promise((function(o){var s=new rn({initialNextValue:qt(i),iterator:e,forward:function(){return M(l,void 0,void 0,(function(){var e,i;return R(this,(function(o){switch(o.label){case 0:e=this.backward?a:r,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=o.sent(),Qt(this.condition,i)?[2,qt(i)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return M(l,void 0,void 0,(function(){var e,i;return R(this,(function(o){switch(o.label){case 0:e=this.backward?r:a,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=o.sent(),Qt(this.condition,i)?[2,qt(i)]:[3,1];case 3:return[2,null]}}))}))},complete:o});e(s)}))];case 5:return[2,c.sent()]}}))}))},e}(),on=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.mutex,o=e.blockManager,s=e.indexer;this._mutex=i,this._iterator=new an({condition:n,backward:a,blockManager:o,indexer:s})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),M(this,void 0,void 0,(function(){var t,n,r,a,i=this;return R(this,(function(o){switch(o.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw Gt.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each((function(e){return M(i,void 0,void 0,(function(){return R(this,(function(a){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return o.sent(),this._mutex.unlock(),[2,r];case 4:throw a=o.sent(),this._mutex.unlock(),a;case 5:return[2]}}))}))},e.prototype.count=function(){return M(this,void 0,void 0,(function(){var e,t,n=this;return R(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return M(n,void 0,void 0,(function(){return R(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),sn=function(e){return"nest@"+e},ln=function(e,t){return sn(e)+"/"+t},cn=function(e,t){return ln(e,t)+".metadata"},un=function(e,t){return ln(e,t)+"/block."},dn=function(e,t){return ln(e,t)+"/blob."},pn=function(e,t,n,r){return void 0===r&&(r=0),""+dn(e,t)+n+"."+r},hn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this._store=r}return e.prototype._makeShards=function(e,t){var n=Math.max(this._store.itemSizeLimit-1024,0);if(n>0){for(var r=Math.ceil(e.data.length/n)+"."+e.type+"."+t,a=[],i=0;i<e.data.length;i+=n){var o=e.data.slice(i,i+n);a.push(o)}return{blobId:r,shards:a}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){var n=new FileReader;n.onload=function(){t({data:n.result,type:e.type})},n.readAsDataURL(e)}))];case 1:return[2,t.sent()]}}))}))},e.prototype._decode=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o;return R(this,(function(s){switch(s.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,s.sent().blob()];case 2:return[2,s.sent()];case 3:for(t=[],n=atob(e.data.split(",")[1]),r=0;r<n.length;r+=512){for(a=n.slice(r,r+512),i=new Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);t.push(new Uint8Array(i))}return[2,new Blob(t,{type:e.type})]}}))}))},e.prototype.get=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,l;return R(this,(function(c){switch(c.label){case 0:if(t=[],n=e.split("."),r=n[0],a=n[1],!((i=parseInt(r))>0))return[3,6];o=0,c.label=1;case 1:return o<i?(s=pn(this.dbname,this.collectionName,e,o),[4,this._store.get(s)]):[3,4];case 2:if(!(l=c.sent())||!l.d)throw Gt.storeBrokenBlob;t.push(l.d),c.label=3;case 3:return o++,[3,1];case 4:return[4,this._decode({data:t.join(""),type:a})];case 5:return[2,c.sent()];case 6:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t=""+Date.now()),M(this,void 0,void 0,(function(){var n,r,a,i,o,s,l;return R(this,(function(c){switch(c.label){case 0:return n=[],[4,this._encode(e)];case 1:if(r=c.sent(),a=this._makeShards(r,t),i=a.blobId,o=a.shards,!i)return[3,3];for(s=0;s<o.length;s++)l=pn(this.dbname,this.collectionName,i,s),n.push({key:l,value:{d:o[s]},generation:1});return[4,this._store.setMany(n)];case 2:if(c.sent().some((function(e){return e instanceof Error})))throw Gt.storeWriteFailed;return[2,i];case 3:return[2,null]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a;return R(this,(function(i){switch(i.label){case 0:if(t=[],n=e.split(".")[0],!((r=parseInt(n))>0))return[3,2];for(a=0;a<r;a++)t.push(pn(this.dbname,this.collectionName,e,a));return[4,this._store.removeMany(t)];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return e=dn(this.dbname,this.collectionName),t=[],[4,this._store.getAllKeys()];case 1:for(n=o.sent(),r=0,a=n;r<a.length;r++)(i=a[r]).startsWith(e)&&t.push(i);return[4,this._store.removeMany(n)];case 2:return o.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(en||(en={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(tn||(tn={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(nn||(nn={}));var fn=[tn.PENDING,tn.VOLATILE],mn={},_n=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return mn[t]||(this.dbname=t,this._items=[],this._limit=r,mn[t]=this),mn[t]}return e.get=function(e){return mn[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=nn.DEFAULT),M(this,void 0,void 0,(function(){var r,a;return R(this,(function(i){switch(i.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(a=i.sent())&&(r={key:t,value:a,generation:1,state:n===nn.PERSISTENT?tn.PERSISTENT:tn.VOLATILE},this.put(r)),[3,3];case 2:n===nn.PERSISTENT&&(r.state=tn.PERSISTENT),i.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=nn.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===nn.PERSISTENT&&(r.state=tn.PERSISTENT),t!==nn.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){if(this._limit>0){var t=this._items.map((function(e){return e.key})).indexOf(e.key);if(t>-1)fn.includes(this._items[t].state)&&fn.includes(e.state)?(this._items.splice(t,1),this._items.push(e)):(this._items[t].state=e.state,this._items[t].generation=e.generation,this._items[t].value=e.value);else{this._items.push(e);var n=this._items.filter((function(e){return e.state===tn.VOLATILE})).length-this._limit;if(n>0){for(var r=[],a=0,i=this._items;a<i.length;a++){var o=i[a];o.state===tn.VOLATILE&&n>0?n--:r.push(o)}this._items=r}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==tn.VOLATILE}))},e}(),yn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return ln(e,t)+"/trans.metadata"}(t,n),this.recordsetKey=function(e,t){return ln(e,t)+"/trans.recordset"}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,e),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var a=e[r],i=[],o=a.requests.length-1;o>=0;o--){var s=a.requests[o],l=s.data;n[l.key]||(i.unshift(s),n[l.key]=!0)}i.length>0&&(a.requests=i,t.unshift(a))}return t},e.prototype._applyRecord=function(e,t){return M(this,void 0,void 0,(function(){var n,r,a,i,o,s,l,c,u;return R(this,(function(d){switch(d.label){case 0:n=_n.get(this.dbname),r=t.generation,a=t.requests,i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(a.map((function(e){return P(P({},e.data),{generation:r})})))];case 2:for(o=d.sent(),s=0;s<a.length;s++)o[s]instanceof Error&&(i||(i=o[s]),l=a[s].data,n.put(P(P({},l),{generation:r,state:tn.PERSISTENT})));return[3,4];case 3:return c=d.sent(),i=c,[3,4];case 4:return i?[3,6]:(u=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:u,generation:r})]);case 5:return d.sent(),this._onWrite.forEach((function(e){e(a.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){return e(i)})),d.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a;return R(this,(function(i){switch(i.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=i.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=i.sent(),n=0,r=t,i.label=3;case 3:return n<r.length?(a=r[n],[4,this._applyRecord(t,a)]):[3,6];case 4:i.sent(),i.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case en.COMMIT:this._onCommit.set(t,n);break;case en.WRITE:this._onWrite.set(t,n);break;case en.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){void 0===t&&(t=null),this._requests.push({data:e,options:t}),_n.get(this.dbname).put(P({state:tn.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,t){void 0===t&&(t=null);for(var n=_n.get(this.dbname),r=0,a=e;r<a.length;r++){var i=a[r];this._requests.push({data:i,options:t}),n.put(P({state:tn.PENDING,generation:this.generation},i))}},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){return _n.get(this.dbname).clearByCondition((function(e){return e.state===tn.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,l,c,u,d,p=this;return R(this,(function(h){switch(h.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},s=e.length-1;s>=0;s--)r=e[s],c=r.data,n[c.key]||(n[c.key]=!0,t.unshift(r));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return i=h.sent(),[4,this._store.set({key:this.recordsetKey,value:i,generation:this.generation})];case 2:return h.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(h.sent(),o=_n.get(this.dbname),s=0;s<t.length;s++)l=t[s],c=l.data,u=l.options,o.put(P(P({},c),{generation:a.generation,state:u&&u.persistent?tn.PERSISTENT:tn.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),d=Ht.get(this.dbname),setTimeout((function(){try{p._applyRecord(i,a)}catch(e){p._onError.forEach((function(t){return t(e)}))}}),d.transactionApplyDelay),h.label=4;case 4:return[2]}}))}))},e}(),gn=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,a=void 0===r?[]:r,i=e.limit;this.blockId=t,this.keyName=n,this.limit=i,this._items=U([],a,!0)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this;return this._items.find((function(n){var r=n[t.keyName];return e===r}))},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),vn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,a=e.hashFunction,i=void 0===a?Wt:a,o=e.transaction,s=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=i,this.metadata=r,this._transaction=o,this._store=s}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,a=t,i=""+function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Wt)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant}),""+un(n,r)+a+"."+i;var n,r,a,i},e.prototype._findBlock=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i;return R(this,(function(o){switch(o.label){case 0:t=_n.get(this.dbname),n=this.metadata.blockLevel,o.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((a=o.sent())&&(i=gn.createFromCacheItem(a)).getItemByKey(e))return[2,i];o.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return M(this,void 0,void 0,(function(){var n,r,a,i,o;return R(this,(function(s){switch(s.label){case 0:return n=Ht.get(this.dbname),r=this.createBlockId(e),a=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,_n.get(this.dbname).find(this._store,r)];case 1:return i=s.sent(),(o=i?gn.createFromCacheItem(i):new gn({blockId:r,keyName:this.keyName,items:[],limit:a})).add(t)?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return R(this,(function(s){switch(s.label){case 0:return e=un(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=s.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:for(s.sent(),r=_n.get(this.dbname),a=0,i=n;a<i.length;a++)o=i[a],r.remove(o);return[2]}}))}))},e}(),bn=function(){function e(e){var t=this,n=e.dbname,r=e.collectionName,a=e.keyName,i=e.fields,o=e.transaction,s=e.store;this._origin=[],this._table=[],this.dbname=n,this.collectionName=r,this.keyName=a,this.fields=i,this.indexerKey=function(e,t,n){return ln(e,t)+"/index."+n}(this.dbname,this.collectionName,this.fields.join(">")),this._transaction=o,this._store=s,this._transaction.on(en.COMMIT,this.indexerKey,(function(){return t.commit()})),this._transaction.on(en.ERROR,this.indexerKey,(function(){return t.abort()}))}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];return r[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];if(r[1]){var i=this._table[a].keys.indexOf(t);if(i>-1)return this._table[a].keys.splice(i,1),0===this._table[a].keys.length&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){for(var t,n,r=[],a=0,i=this.fields;a<i.length;a++){var o=i[a];if("-"===o[0]&&(o=o.slice(1)),void 0,n=typeof(t=e[o]),null!==t&&"undefined"!==n&&"boolean"!==n&&"number"!==n&&"string"!==n)throw Gt.indexTypesNotMatch;r.push(e[o])}return r},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,a=Kt(e[n],t[n]);if(0!==a)return r*a}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),a=this.diff(e,this._table[r].columnValues);if(a>0)t=r+1;else{if(!(a<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return M(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,l,c,u,d;return R(this,(function(p){switch(p.label){case 0:return[4,(e=_n.get(this.dbname)).find(this._store,this.indexerKey,nn.PERSISTENT)];case 1:return(t=p.sent())?[3,7]:(n=un(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=p.sent(),a=0,i=r,p.label=3;case 3:return a<i.length?(o=i[a]).startsWith(n)?[4,e.find(this._store,o,nn.NO_CACHE)]:[3,5]:[3,6];case 4:for(s=p.sent(),l=gn.createFromCacheItem(s),c=0,u=l.items;c<u.length;c++)d=u[c],this._addItem(d);p.label=5;case 5:return a++,[3,3];case 6:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,8];case 7:this._origin=t.value,this._table=qt(this._origin),p.label=8;case 8:return[2]}}))}))},e.prototype.drop=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return _n.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}}))}))},e.prototype.addItem=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=qt(this._origin)},e.prototype.abort=function(){this._table=qt(this._origin)},e}(),En=function(){function e(e){var t;this._locked=!1,this._resolvers=[],this.id=(t=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))),this.key=e}return Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},enumerable:!1,configurable:!0}),e.prototype.wait=function(){var e=this;return new Promise((function(t){e._resolvers.push(t)}))},e.prototype.lock=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return this._locked?[4,this.wait()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._locked=!0,[2]}}))}))},e.prototype.unlock=function(){this._locked&&(this._resolvers.length>0?this._resolvers.shift()():this._locked=!1)},e}(),wn=function(){function e(e){var t=this,n=e.dbname,r=e.collectionName,a=e.keyName,i=e.keyHash,o=e.indexes,s=e.store;this._state=Bt.INIT,this._metadata=null,this._indexers=[],this.dbname=n,this.name=r,this.keyName=a,this.indexes=U([[a]],o.filter((function(e){return bn.createKey(e)!==t.keyName})),!0),this._keyHash=i,this._store=s,this._mutex=new En(function(e,t){return ln(e,t)+".lock"}(n,r)),this._blobContainer=new hn({dbname:n,collectionName:r,store:s}),this._transaction=new yn({dbname:n,collectionName:r,store:s})}return e.metadataOf=function(e,t,n){return M(this,void 0,void 0,(function(){var r;return R(this,(function(a){switch(a.label){case 0:return r=cn(e,t),[4,n.get(r)];case 1:return[2,a.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.init=function(){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,l,c,u,d,p,h=this;return R(this,(function(f){switch(f.label){case 0:return[4,this._mutex.lock()];case 1:f.sent(),f.label=2;case 2:return f.trys.push([2,9,,10]),t=Ht.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=f.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:for(f.sent(),this._blockManager=new vn({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=U([],this.indexes,!0),a=[],i=r.map((function(e){return bn.createKey(e)})),o=n?n.indexes.map((function(e){return bn.createKey(e)})):[],s=0,l=o;s<l.length;s++)c=l[s],i.includes(c)||a.push(bn.parseKey(c));return(u=[]).push.apply(u,r.map((function(e){var t=new bn({dbname:h.dbname,collectionName:h.name,keyName:h.keyName,fields:e,transaction:h._transaction,store:h._store});return h._indexers.push(t),t.ensure()}))),u.push.apply(u,a.map((function(e){return new bn({dbname:h.dbname,collectionName:h.name,keyName:h.keyName,fields:e,transaction:h._transaction,store:h._store}).drop()}))),[4,Promise.all(u)];case 5:return f.sent(),[4,this._transaction.commit()];case 6:return f.sent(),i.sort().join(",")===o.sort().join(",")?[3,8]:(d=cn(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata,generation:1})]);case 7:f.sent(),f.label=8;case 8:return this._state=Bt.READY,this._mutex.unlock(),[3,10];case 9:throw p=f.sent(),this._mutex.unlock(),p;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=Bt.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);for(var t=bn.createKey(e),n=0,r=this._indexers;n<r.length;n++){var a=r[n];if(t===bn.createKey(a.fields))return a}return null},e.prototype._upgradeBlockLevel=function(){return M(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return e=cn(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return M(this,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return a.sent()?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:a.sent(),a.label=5;case 5:n=0,r=this._indexers,a.label=6;case 6:return n<r.length?[4,r[n].addItem(e)]:[3,9];case 7:a.sent(),a.label=8;case 8:return n++,[3,6];case 9:return[3,11];case 10:throw Gt.collectionInsertDuplicate;case 11:return[2]}}))}))},e.prototype._requestUpsert=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return R(this,(function(l){switch(l.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=l.sent())?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:l.sent(),l.label=5;case 5:r=0,a=this._indexers,l.label=6;case 6:return r<a.length?[4,(s=a[r]).addItem(e)]:[3,9];case 7:l.sent(),l.label=8;case 8:return r++,[3,6];case 9:return[3,16];case 10:return[4,this._blockManager.putToBlock(t,e)];case 11:l.sent(),i=0,o=this._indexers,l.label=12;case 12:return i<o.length?0===(s=o[i]).diff(s.getColumnValues(n),s.getColumnValues(e))?[3,15]:[4,s.removeItem(n)]:[3,16];case 13:return l.sent(),[4,s.addItem(e)];case 14:l.sent(),l.label=15;case 15:return i++,[3,12];case 16:return[2]}}))}))},e.prototype._requestUpdate=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=o.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,7];case 2:o.sent(),r=0,a=this._indexers,o.label=3;case 3:return r<a.length?0===(i=a[r]).diff(i.getColumnValues(n),i.getColumnValues(e))?[3,6]:[4,i.removeItem(n)]:[3,7];case 4:return o.sent(),[4,i.addItem(e)];case 5:o.sent(),o.label=6;case 6:return r++,[3,3];case 7:return[2]}}))}))},e.prototype._requestRemove=function(e){return M(this,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,6];case 2:a.sent(),n=0,r=this._indexers,a.label=3;case 3:return n<r.length?[4,r[n].removeItem(t)]:[3,6];case 4:a.sent(),a.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype._requestClear=function(){return M(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:n.sent(),e=0,t=this._indexers,n.label=2;case 2:return e<t.length?[4,t[e].clear()]:[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}}))}))},e.prototype.getByKey=function(e){return M(this,void 0,void 0,(function(){var t,n;return R(this,(function(r){switch(r.label){case 0:return this._state!==Bt.READY?[3,6]:[4,this._mutex.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,qt(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw Gt.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){return void 0===e&&(e={}),this._state===Bt.READY?new on({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return this._state!==Bt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Gt.collectionKeyNotGiven;return[4,this._requestInsert(qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Gt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i=this;return R(this,(function(o){switch(o.label){case 0:return this._state!==Bt.READY?[3,11]:[4,this._mutex.lock()];case 1:o.sent(),o.label=2;case 2:if(o.trys.push([2,8,,10]),e.some((function(e){return!i._hasPropertyOfKeyName(e)})))throw Gt.collectionKeyNotGiven;t=0,n=e,o.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestInsert(qt(r))]):[3,6];case 4:o.sent(),o.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return o.sent(),this._mutex.unlock(),[2,e];case 8:return a=o.sent(),[4,this._transaction.clear()];case 9:throw o.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw Gt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.upsertOne=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return this._state!==Bt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Gt.collectionKeyNotGiven;return[4,this._requestUpsert(qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Gt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i=this;return R(this,(function(o){switch(o.label){case 0:return this._state!==Bt.READY?[3,11]:[4,this._mutex.lock()];case 1:o.sent(),o.label=2;case 2:if(o.trys.push([2,8,,10]),e.some((function(e){return!i._hasPropertyOfKeyName(e)})))throw Gt.collectionKeyNotGiven;t=0,n=e,o.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestUpsert(qt(r))]):[3,6];case 4:o.sent(),o.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return o.sent(),this._mutex.unlock(),[2,e];case 8:return a=o.sent(),[4,this._transaction.clear()];case 9:throw o.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw Gt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.update=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return this._state!==Bt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Gt.collectionKeyNotGiven;return[4,this._requestUpdate(qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Gt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return M(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return R(this,(function(l){switch(l.label){case 0:return this._state!==Bt.READY?[3,12]:[4,this._mutex.lock()];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,9,,11]),n=[],[4,new an({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each((function(r){return M(s,void 0,void 0,(function(){var a,i;return R(this,(function(o){if(r.error)throw r.stop(),r.error;if(r.hasNext){if(a=r.nextValue,Qt(e,a)&&t.set){if("function"!=typeof t.set)for(i in t.set)a[i]=t.set[i];else t.set(a);n.push(a)}r.next()}else r.stop();return[2]}))}))}))];case 3:l.sent(),r=0,a=n,l.label=4;case 4:return r<a.length?(i=a[r],[4,this._requestUpdate(qt(i))]):[3,7];case 5:l.sent(),l.label=6;case 6:return r++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return l.sent(),this._mutex.unlock(),[2,n];case 9:return o=l.sent(),[4,this._transaction.clear()];case 10:throw l.sent(),this._mutex.unlock(),o;case 11:return[3,13];case 12:throw this._transaction.clear(),Gt.collectionNotReady;case 13:return[2]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return this._state!==Bt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Gt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o=this;return R(this,(function(s){switch(s.label){case 0:return this._state!==Bt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,9,,10]),t=[],[4,new an({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each((function(n){return M(o,void 0,void 0,(function(){var r,a;return R(this,(function(i){if(n.error)throw n.stop(),n.error;return n.hasNext?(r=n.nextValue,Qt(e,r)&&(a=r[this.keyName],t.push(a)),n.next()):n.stop(),[2]}))}))}))];case 3:s.sent(),n=0,r=t,s.label=4;case 4:return n<r.length?(a=r[n],[4,this._requestRemove(a)]):[3,7];case 5:s.sent(),s.label=6;case 6:return n++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return s.sent(),this._mutex.unlock(),[2,t];case 9:throw i=s.sent(),this._mutex.unlock(),i;case 10:return[3,12];case 11:throw this._transaction.clear(),Gt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return this._state!==Bt.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw Gt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return void 0===t&&(t=null),M(this,void 0,void 0,(function(){return R(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),Cn={encrypt:function(e){return e},decrypt:function(e){return e}},An={},kn=function(){function e(e){void 0===e&&(e={});var t=e.itemSizeLimit,n=void 0===t?4194304:t,r=e.delay,a=void 0===r?1:r,i=e.encryption,o=void 0===i?Cn:i;this._encryption=o,this.itemSizeLimit=n,this.delay=a,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return An[this.dbname]},set:function(e){An[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,t,n){var r=this;this.observer[e]={},t.forEach((function(t){return r.observer[e][t]=n}))},e.prototype.init=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){return this.dbname=e,An[this.dbname]={},[2]}))}))},e.prototype.getAllKeys=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){return[2,Object.keys(An[this.dbname])]}))}))},e.prototype.get=function(e){return M(this,void 0,void 0,(function(){var t,n;return R(this,(function(r){switch(r.label){case 0:return[4,Yt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.get?t.get(e):null)throw n;return[2,An[this.dbname][e]?this._encryption.decrypt(An[this.dbname][e]):null]}}))}))},e.prototype.set=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return[4,Yt(this.delay)];case 1:if(o.sent(),t=e.key,n=e.value,r=this.observer[t],a=r&&r.set?r.set(t):null)throw a;if(i=this._encryption.encrypt(n),JSON.stringify(i).length<this.itemSizeLimit)return An[this.dbname][t]=i,[2,An[this.dbname][t]];throw Gt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return M(this,void 0,void 0,(function(){var t,n=this;return R(this,(function(r){switch(r.label){case 0:return[4,Yt(this.delay)];case 1:return r.sent(),t=[],e.forEach((function(e){var r=e.key,a=e.value,i=n.observer[r];if(i&&i.set&&i.set(r))t.push(Gt.collectionWriteFailed);else{var o=n._encryption.encrypt(a);JSON.stringify(o).length<n.itemSizeLimit?(An[n.dbname][r]=o,t.push(a)):t.push(Gt.storeItemSizeExceeded)}})),[2,t]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){var t,n;return R(this,(function(r){switch(r.label){case 0:return[4,Yt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.remove?t.remove(e):null)throw n;return An[this.dbname][e]&&delete An[this.dbname][e],[2,e]}}))}))},e.prototype.removeMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i;return R(this,(function(o){switch(o.label){case 0:return[4,Yt(this.delay)];case 1:for(o.sent(),t=0,n=e;t<n.length;t++){if(r=n[t],a=this.observer[r],i=a&&a.remove?a.remove(r):null)throw i;An[this.dbname][r]&&delete An[this.dbname][r]}return[2,e]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,Yt(this.delay)];case 1:return e.sent(),An[this.dbname]={},[2]}}))}))},e}(),Sn="undefined"!=typeof document&&"undefined"!=typeof navigator;Sn&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var Nn=Sn&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");Sn&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),Sn&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),Sn&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var On,Tn=Sn&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),In="NestDBStore",xn=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var t=e.encryption,n=void 0===t?Cn:t;this._window=window,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=n}return e.prototype.init=function(e){return M(this,void 0,void 0,(function(){var t,n=this;return R(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,new Promise((function(e,t){if(Sn)if(Nn){var r=n._indexedDB.open("_testMozilla");r.onerror=function(){return t(Gt.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}else Tn?n._window.indexedDB||!n._window.PointerEvent&&!n._window.MSPointerEvent||t(Gt.storeNotAvailableInPrivateBrowsing):e();else t(Gt.storeNotAvailable)}))];case 1:return r.sent(),t=this,[4,new Promise((function(t,r){var a=n._indexedDB.open(e);a.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(In,{keyPath:"key"})})),a.addEventListener("success",(function(e){return t(e.target.result)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return t._database=r.sent(),[2]}}))}))},e.prototype.getAllKeys=function(){return M(this,void 0,void 0,(function(){var e=this;return R(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(In,"readonly").objectStore(In).getAllKeys();r.addEventListener("success",(function(e){return t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e.prototype.get=function(e){return M(this,void 0,void 0,(function(){var t=this;return R(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var a=t._database.transaction(In,"readonly").objectStore(In).get(e);a.addEventListener("success",(function(e){return n(e.target.result?t._encryption.decrypt(e.target.result.value):null)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.set=function(e){return M(this,void 0,void 0,(function(){var t,n,r=this;return R(this,(function(a){switch(a.label){case 0:return t=e.key,n=e.value,[4,new Promise((function(e,a){var i=r._database.transaction(In,"readwrite").objectStore(In).put({key:t,value:r._encryption.encrypt(n)});i.addEventListener("success",(function(t){e(t.target.result)})),i.addEventListener("error",(function(e){return a(e.target.error)}))}))];case 1:return a.sent(),[2,n]}}))}))},e.prototype.setMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r=this;return R(this,(function(a){switch(a.label){case 0:return t=[],n=this._database.transaction(In,"readwrite").objectStore(In),e.forEach((function(e){var a=e.key,i=e.value;t.push(new Promise((function(e){var t=n.put({key:a,value:r._encryption.encrypt(i)});t.addEventListener("success",(function(t){e(t.target.result)})),t.addEventListener("error",(function(){e(Gt.collectionWriteFailed)}))})))})),[4,Promise.all(t)];case 1:return a.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){var t=this;return R(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var a=t._database.transaction(In,"readwrite").objectStore(In).delete(e);a.addEventListener("success",(function(){return n(e)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.removeMany=function(e){return M(this,void 0,void 0,(function(){var t;return R(this,(function(n){switch(n.label){case 0:return t=this._database.transaction(In,"readwrite").objectStore(In),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var a=t.delete(e);a.addEventListener("success",(function(){return n(e)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 1:return[2,n.sent()]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){var e=this;return R(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(In,"readwrite").objectStore(In).clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e}(),Dn=function(){function e(e){var t=e.AsyncStorage,n=e.encryption,r=void 0===n?Cn:n;this.itemSizeLimit=6291456,this._asyncStorage=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith(this.dbname+"/")},e.prototype._getActualKey=function(e){return this.dbname+"/"+e},e.prototype.init=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){return this.dbname=e,[2]}))}))},e.prototype.getAllKeys=function(){return M(this,void 0,void 0,(function(){var e=this;return R(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substr((e.dbname+"/").length)}))]}}))}))},e.prototype.get=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a;return R(this,(function(i){switch(i.label){case 0:return n=(t=this._encryption).decrypt,a=(r=JSON).parse,[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,n.apply(t,[a.apply(r,[i.sent()])])]}}))}))},e.prototype.set=function(e){return M(this,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:return t=e.key,n=e.value,(r=JSON.stringify(this._encryption.encrypt(n))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(t),r)]:[3,2];case 1:return a.sent(),[2,JSON.parse(r)];case 2:throw Gt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return R(this,(function(l){switch(l.label){case 0:t=[],n=0,r=e,l.label=1;case 1:if(!(n<r.length))return[3,8];a=r[n],l.label=2;case 2:return l.trys.push([2,6,,7]),i=a.key,o=a.value,(s=JSON.stringify(this._encryption.encrypt(o))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(i),s)]:[3,4];case 3:return l.sent(),t.push(o),[3,5];case 4:t.push(Gt.storeItemSizeExceeded),l.label=5;case 5:return[3,7];case 6:return l.sent(),t.push(Gt.collectionWriteFailed),[3,7];case 7:return n++,[3,1];case 8:return[2,t]}}))}))},e.prototype.remove=function(e){return M(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return t.sent(),[2,e]}}))}))},e.prototype.removeMany=function(e){return M(this,void 0,void 0,(function(){var t,n,r;return R(this,(function(a){switch(a.label){case 0:t=0,n=e,a.label=1;case 1:return t<n.length?(r=n[t],[4,this._asyncStorage.removeItem(this._getActualKey(r))]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2,e]}}))}))},e.prototype.clear=function(){return M(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},e}(),Pn=function(){function e(){}return e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,U(["[NESTDB][LOG]"],e,!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,U(["[NESTDB][WARNING]"],e,!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,U(["[NESTDB][ERROR]"],e,!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(On||(On={}));var Mn,Rn,Un,Ln,Fn,jn,zn,Hn=function(){function e(e){var t=e.name,n=e.version,r=e.store,a=e.config;this.name=t,this._version=n,this._state=On.INIT,this._config=a||new Ht({dbname:t}),this._store=r,this._event={success:Jt,error:Jt,upgrade:Zt},this._collections=new Map,this._globalMutex=new En(this.name+".lock"),new _n({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.commitSchema=function(e){return M(this,void 0,void 0,(function(){var t=this;return R(this,(function(n){switch(n.label){case 0:return this._state!==On.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return M(t,void 0,void 0,(function(){var t,n,r,a;return R(this,(function(i){switch(i.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,a=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new wn({dbname:this.name,collectionName:t,keyName:n,keyHash:e.keyHash||null,indexes:a,store:this._store})),[4,this._collections.get(t).init()];case 1:return i.sent(),[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw Gt.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){return M(this,void 0,void 0,(function(){var e,t,n,r=this;return R(this,(function(a){switch(a.label){case 0:return[4,this._globalMutex.lock()];case 1:if(a.sent(),this._state===On.OPENED)return[3,6];this._state=On.OPENING,a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this._store.init(this.name)];case 3:return a.sent(),i=this.name,e=sn(i)+".metadata",[4,this._store.get(e)];case 4:return t=a.sent()||{version:0,collectionNames:[]},[2,new Promise((function(n,a){var i=function(n){t.version<r._version?r._event.upgrade(t.version,(function(a){return M(r,void 0,void 0,(function(){var r;return R(this,(function(i){switch(i.label){case 0:if(a)return[3,5];t.version++,t.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:e,value:t,generation:this._version})];case 2:return i.sent(),n({continued:!0}),[3,4];case 3:return r=i.sent(),n({continued:!1,err:r}),[3,4];case 4:return[3,6];case 5:n({continued:!1,err:a}),i.label=6;case 6:return[2]}}))}))})):n({continued:!1})},o=function(e){var s=e.continued,l=void 0!==s&&s,c=e.err,u=void 0===c?null:c;if(l)setTimeout((function(){return i(o)}),10);else if(u)Pn.error(u.message),r._globalMutex.unlock(),r._event.error(u),a(u);else{var d=[];t.collectionNames.forEach((function(e){r._collections.has(e)||d.push(M(r,void 0,void 0,(function(){var t,n;return R(this,(function(r){switch(r.label){case 0:return[4,wn.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new wn({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){r._state=On.OPENED,r._globalMutex.unlock(),r._event.success(),n()})).catch((function(e){Pn.error(e.message),r._globalMutex.unlock(),r._event.error(e),a(e)}))}};i(o)}))];case 5:switch((n=a.sent()).code){case jt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:Pn.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new kn({});break;default:Pn.error(n.message)}return this._globalMutex.unlock(),this._event.error(n),[3,6];case 6:return[2]}var i}))}))},e.prototype.close=function(){this._state=On.CLOSED,this._collections.forEach((function(e){return e.close()}))},e.prototype.reset=function(){return M(this,void 0,void 0,(function(){var e,t=this;return R(this,(function(n){switch(n.label){case 0:return(e=_n.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(sn(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){if("function"==typeof this._event[e])switch(e){case"upgrade":this._event[e]=Zt;break;default:this._event[e]=Jt}},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),Bn=function(){function e(){}return e.create=function(){return Math.floor(1e5*Math.random())+"-"+(new Date).getTime()},e}();!function(e){e.AND="AND",e.OR="OR"}(Mn||(Mn={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Rn||(Rn={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Un||(Un={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper"}(Ln||(Ln={})),function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(Fn||(Fn={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(jn||(jn={})),function(e){e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(zn||(zn={}));var Gn=function(){function e(){this._iid=null,this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:Mn.AND},this.includeEmpty=!1,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Un.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Ln.ALL,this.publicChannelFilter=Fn.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=jn.ALL,this.hiddenChannelFilter=zn.UNHIDDEN,this.includeFrozen=!0}return Object.defineProperty(e,"MemberStateFilter",{get:function(){return Un},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SuperChannelFilter",{get:function(){return Ln},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PublicChannelFilter",{get:function(){return Fn},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnreadChannelFilter",{get:function(){return jn},enumerable:!1,configurable:!0}),Object.defineProperty(e,"HiddenChannelFilter",{get:function(){return zn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype._isFriend=function(e){return!!e.friendDiscoveryKey||!!e.friendName},Object.defineProperty(e.prototype,"iid",{set:function(e){this._iid=e},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={searchQuery:t,searchFields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=Mn.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t=new e;t.setSearchFilter(this.searchFilter.searchFields,this.searchFilter.searchQuery),t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){var t=this._searchFilter,n=t.searchQuery,r=t.searchFields;if(n&&r&&r.length>0&&!r.some((function(t){switch(t){case Rn.CHANNEL_NAME:return e.name.toLowerCase().includes(n.toLowerCase());case Rn.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(n.toLowerCase())}));default:return!0}})))return!1;var a=this._userIdsFilter,i=a.includeMode,o=a.queryType,s=a.userIds,l=I.get(this._iid).get("currentUserId"),c=e.members.map((function(e){return e.userId}));if(i){if(s.length>0)switch(o){case Mn.AND:if(s.some((function(e){return!c.includes(e)})))return!1;break;case Mn.OR:if(s.every((function(e){return!c.includes(e)})))return!1}}else{if(s.includes(l)||s.push(l),e.members.length>s.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=U([],e,!0).sort(),r=U([],t,!0).sort(),a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0}(s,c))return!1}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^"+this.customTypeStartsWithFilter).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var u=this.nicknameContainsFilter.toLowerCase();if(e.members.every((function(e){return!e.nickname.toLowerCase().includes(u)})))return!1}if(this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.memberStateFilter)switch(this.memberStateFilter){case Un.JOINED:if("joined"!==e.myMemberState)return!1;break;case Un.INVITED:if("invited"!==e.myMemberState)return!1;break;case Un.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case Un.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case zn.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case zn.HIDDEN:if(!e.isHidden)return!1;break;case zn.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case zn.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter)switch(this.unreadChannelFilter){case jn.UNREAD_MESSAGE:if(0===e.unreadMessageCount)return!1}if(this.publicChannelFilter)switch(this.publicChannelFilter){case Fn.PUBLIC:if(!e.isPublic)return!1;break;case Fn.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Ln.SUPER:if(!e.isSuper)return!1;break;case Ln.NON_SUPER:if(e.isSuper)return!1}return!0},e.QueryType=Mn,e.SearchField=Rn,e}(),Vn=function(){function e(e){var t=e.iid;this._iid=t,this._filter=new Gn,this._filter.iid=this._iid,this._order=We.LATEST_LAST_MESSAGE,this._limit=20}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this._filter.iid=this._iid,this},e.prototype.setOrder=function(e){return this._order=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new gt({iid:this._iid,filter:this._filter,order:this._order,limit:this._limit})},e}(),qn=function(){function e(e){var t=e.iid,n=e.channel;this._iid=t,this._channel=n,this._startingPoint=Date.now(),this._filter=new Fe,this._limit=100}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this},e.prototype.setStartingPoint=function(e){return this._startingPoint=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new $e({iid:this._iid,channel:this._channel,startingPoint:this._startingPoint,filter:this._filter,limit:this._limit})},e}(),Kn={},Wn={},Yn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,Xn=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).channelType=xt.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=n.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=n.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r.invitedAt=0,r.joinedAt=0,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},Yn.set(g(r),{}),Qn.set(g(r),{start:0,end:0}),Jn.set(g(r),0),e&&r._update(e),r}return h(n,[{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}},{key:"createMessageCollection",value:function(){return new qn({iid:this._iid,channel:this})}},{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=I.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=this,n=H.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.User,o=n.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:a.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:a.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt")&&(this.cachedReadReceiptStatus={},Object.keys(e.read_receipt).forEach((function(n){var r=e.read_receipt[n];t.updateReadReceipt(n,parseInt(r))}))),e.hasOwnProperty("delivery_receipt")&&"object"===u(e.delivery_receipt)&&null!==e.delivery_receipt&&(this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),Object.keys(e.delivery_receipt).forEach((function(n){var r=e.delivery_receipt[n];t.updateDeliveryReceipt(n,parseInt(r))}))),e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var s=0;s<e.members.length;s++){var l=new o(e.members[s]);this.members.push(l),this.memberMap[l.userId]=l}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||a.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===u(e.last_message)&&e.last_message?e.last_message instanceof St?this.lastMessage=e.last_message:this.lastMessage=r.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===u(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=a.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var n=H.get(this._iid).Member,r=this.removeMember(e);r&&r.state===n.JOINED&&(e.state=n.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,t),this.updateDeliveryReceipt(e.userId,t)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return ie.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,H.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,H.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return H.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=nt.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=H.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?I.get(e._iid).container.apiClient.updateGroupChannel(c(c({},r),{},{operatorUserIds:r.operatorUserIds}),(function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)})):n(nt.error,null)}),n);if(3===t.length){var o=new i;return o.channelUrl=this.url,o.name=t[0],"string"==typeof t[1]?o.coverUrl=t[1]:o.coverImage=t[1],o.data=t[2],this.updateChannel(o,n)}if(4===t.length){var s=new i;return s.channelUrl=this.url,s.isDistinct=t[0],s.name=t[1],"string"==typeof t[1]?s.coverUrl=t[2]:s.coverImage=t[2],s.data=t[3],this.updateChannel(s,n)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.isDistinct=t[0],l.name=t[1],"string"==typeof t[2]?l.coverUrl=t[2]:l.coverImage=t[2],l.data=t[3],l.customType=t[4],this.updateChannel(l,n)}return le(this._iid,(function(e){return e(nt.error,null)}),n)}},{key:"invite",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return!!e.userId&&"string"==typeof e.userId}))}}),new nt({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){return e(nt.error,null)}),t):this.inviteWithUserIds(e.map((function(e){return e.userId})),t)}},{key:"inviteWithUserIds",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.inviteToGroupChannel({channelUrl:n.url,userIds:e},(function(e,r){var a=null;e||(a=H.get(n._iid).GroupChannel.upsert(r)),t(e,a)}))}),t)}},{key:"acceptInvitation",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",optional:!0,defaultValue:null}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.acceptInvitation({channelUrl:n.url,accessCode:e},(function(e,r){var a=null;e||((a=H.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)}))}),t)}},{key:"declineInvitation",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},(function(n,r){var a=null;if(!n){var i=H.get(t._iid).GroupChannel;(a=i.upsert(r)).myMemberState="none",t.isPublic||i.removeCachedChannel(t.url)}e(n,a)}))}),e)}},{key:"join",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",optional:!0,defaultValue:null}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.joinGroupChannel({channelUrl:n.url,accessCode:e},(function(e,r){var a=null;e||((a=H.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)}))}),t)}},{key:"leave",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},(function(t,n){return e(t,null)}))}),e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new nt({type:"string",optional:!0,defaultValue:""}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new nt({type:"string"}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=H.get(this._iid).Member;this.joinedMemberCount=this.members.filter((function(t){return t.state===e.JOINED})).length}}},{key:"setLatestMemberCount",value:function(e,t,n){var r=!1;return"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=Jn.get(this)&&(Jn.set(this,n),r=t!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=t),r}},{key:"hide",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"boolean",optional:!0,defaultValue:!1}),new nt({type:"boolean",optional:!0,defaultValue:!0}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.hideGroupChannel({channelUrl:r.url,hidePreviousMessages:e,allowAutoUnhide:t},(function(a,i){if(!a){var o=H.get(r._iid).GroupChannel;r.isHidden=!0,r.hiddenState=t?o.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:o.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&r._setGroupChannelUnreadCount(0,0),i.hasOwnProperty("ts_message_offset")&&(r._messageOffsetTimestamp=i.ts_message_offset),o.cachedChannels[r.url]=r}n(a,i)}))}),n)}},{key:"unhide",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},(function(n,r){if(!n){var a=H.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=a.HiddenState.UNHIDDEN,a.cachedChannels[t.url]=t}e(n,r)}))}),e)}},{key:"freeze",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},(function(n,r){if(!n){var a=H.get(t._iid).GroupChannel;t.isFrozen=!0,a.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"unfreeze",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},(function(n,r){if(!n){var a=H.get(t._iid).GroupChannel;t.isFrozen=!1,a.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},(function(n,r){n||H.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)}))}),e)}},{key:"markAsRead",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid).Command,r=Sa.getInstance(t._iid),a=n.bRead({channelUrl:t.url});r.sendCommand(a,(function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}if(a)e(a,null);else if(r.currentUser){var o=bt.of(t._iid),s=Ne.of(t._iid);t.updateReadReceipt(r.currentUser.userId,n.getJsonElement().ts);var l=!1;(t.unreadMessageCount>0||t.unreadMentionCount>0)&&(t._setGroupChannelUnreadCount(0,0),Object.keys(r.channelHandlers).forEach((function(e){r.channelHandlers[e].onChannelChanged(t)})),l=!0),e(null,null),o.upsert([t]).then((function(){l&&s.send({source:Ce.EVENT_CHANNEL_CHANGED,payload:{channel:t}}),s.send({source:Ce.EVENT_READ_RECEIPT_UPDATED,payload:{channel:t}})})).catch((function(e){X.error(e)}))}else{var c=new SendBirdException("Connection should be made first.",SendBirdException.CONNECTION_REQUIRED);e(c,null)}}))}),e)}},{key:"getUnreadMemberCount",value:function(e){var t=I.get(this._iid),n=H.get(this._iid).Member,r=t.container.currentUserId;if(e instanceof St&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){for(var a=0,i=e.createdAt,o=this.members,s=0;s<o.length;s++){var l=o[s];r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||(this.cachedReadReceiptStatus[l.userId]||0)<i&&a++}return a}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,t=Sa.getInstance(this._iid),n=t.currentUser?t.currentUser.userId:null;I.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:n},(function(t,r){if(t)X.debug(t);else{var a=r.hasOwnProperty("ts")?r.ts:0;e.updateDeliveryReceipt(n,a)}}))}},{key:"getUndeliveredMemberCount",value:function(e){var t=I.get(this._iid),n=H.get(this._iid).Member,r=t.container.currentUserId;if(this.cachedDeliveryReceiptStatus&&e instanceof St&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){var a,i=e.createdAt,o=0,s=N(this.members);try{for(s.s();!(a=s.n()).done;){var l=a.value;r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||this.cachedDeliveryReceiptStatus[l.userId]<i&&o++}}catch(e){s.e(e)}finally{s.f()}return o}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Sa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof St&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[i.userId]||0)>=e.createdAt&&r.push(i)}return r}return[]}},{key:"getUnreadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Sa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof St&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[i.userId]||0)<e.createdAt&&r.push(i)}return r}return[]}},{key:"getReadStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Sa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r={},a=Object.keys(this.cachedReadReceiptStatus),i=function(i){var o=a[i];if(!t&&o===n.currentUser.userId)return"continue";var s=e.cachedReadReceiptStatus[o],l=e.members.filter((function(e){return e.userId===o}));r[o]={user:l.length>0?l[0]:null,last_seen_at:parseInt(s)}},o=0;o<a.length;o++)i(o);return r}return{}}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=Sa.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Sa.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=Qn.get(this);if(t-r.start>=n){r.end=0,r.start=t;var a=H.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(a,null)}}},{key:"endTyping",value:function(){var e=Sa.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=Qn.get(this);if(t-r.end>=n){r.start=0,r.end=t;var a=H.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(a,null)}}},{key:"invalidateTypingStatus",value:function(){var e=Yn.get(this),t=(new Date).getTime(),n=!1;return Object.keys(e).forEach((function(r){var a=e[r].ts;t-a>=1e4&&(delete e[r],n=!0)})),n}},{key:"getTypingMembers",value:function(){var e=this,t=Yn.get(this),n=[];return Object.keys(t).forEach((function(t){var r=e.memberMap[t];r&&n.push(r)})),n}},{key:"getTypingUsers",value:function(){var e=Yn.get(this),t=[];return Object.keys(e).forEach((function(n){var r=e[n].user;t.push(r)})),t}},{key:"updateTypingStatus",value:function(e,t){var n=Yn.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=Yn.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n=this,r=H.get(this._iid),a=r.ScheduledUserMessage,i=r.ScheduledUserMessageParams,o=null,s=C(nt.parse(arguments,[new nt({type:i,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new nt({type:"callback"})]),3);return o=s[0],e=s[1],t=s[2],le(this._iid,(function(t){o?t(o,null):I.get(n._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:n.url,isOpenChannel:!1},(function(e,r){var i=null;if(!e){i=new a(r);var o=Sa.getInstance(n._iid).currentUser;o&&i._sender&&o.userId===i._sender.userId&&(o.nickname=i._sender.nickname,o.plainProfileUrl=i._sender.plainProfileUrl,o.metaData=i._sender.metaData)}t(e,i)}))}),t)}},{key:"getPushPreference",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(n,r){var a=null;if(!n){try{a=r.enable}catch(e){a=!1}t.isPushEnabled=a}e&&e(n,a)}))}),e)}},{key:"setPushPreference",value:function(e,t){var n=this;return le(this._iid,(function(t){var r=H.get(n._iid).GroupChannel;I.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},(function(e,a){e||(n.isPushEnabled=a.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,a)}))}),t)}},{key:"getMyPushTriggerOption",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(r,a){var i=null;if(!r){try{i=a.push_trigger_option||n.PushTriggerOption.DEFAULT}catch(e){X.debug(e)}t.myPushTriggerOption=i}e(r,i)}))}),e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n=this,r=H.get(this._iid).GroupChannel,a=null,i=C(nt.parse(arguments,[new nt({type:r.PushTriggerOption}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):I.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,pushTriggerOption:e},(function(e,r){var a=null;if(!e){try{a=r.push_trigger_option}catch(e){X.debug(e)}n.myPushTriggerOption=a}t(e,a)}))}),t)}},{key:"setMyCountPreference",value:function(e,t){var n=this,r=H.get(this._iid).GroupChannel,a=null,i=C(nt.parse(arguments,[new nt({type:r.CountPreference}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):I.get(n._iid).container.apiClient.setMyCountPreference({channelUrl:n.url,countPreference:e},(function(e,a){var i=null;e||(i=n.myCountPreference=a.count_preference,n._setGroupChannelUnreadCount(n.unreadMessageCount,n.unreadMentionCount),r.cachedChannels[n.url]=n),t(e,i)}))}),t)}},{key:"resetMyHistory",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},(function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var a=H.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,a.cachedChannels[t.url]=t}e(n,r)}))}),e)}}],[{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper",BROADCAST_ONLY:"broadcast_only"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return Kn[this._iid]||(Kn[this._iid]={}),Kn[this._iid]}},{key:"createGroupChannelCollection",value:function(){return new Vn({iid:this._iid})}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid),n=t.User,r=t.Member,a=t.GroupChannel,i=t.BaseMessage,o=t.UserMessage,s=t.FileMessage,l=t.AdminMessage,d=Ct.deserialize(e),p=function(e){return null!=e&&"object"===u(e)?e.messageType===i.MESSAGE_TYPE_USER?new o(o.objectify(c(c({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===i.MESSAGE_TYPE_FILE?new s(s.objectify(c(c({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(c(c({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(d.lastMessage);return new a({channel_url:d.url,name:d.name,cover_url:d.coverUrl,data:d.data,custom_type:d.customType,invited_at:d.invitedAt,created_at:d.createdAt/1e3,joined_ts:d.joinedAt,is_access_code_required:d.isAccessCodeRequired,is_distinct:d.isDistinct,is_super:d.isSuper,is_broadcast:d.isBroadcast,is_public:d.isPublic,is_discoverable:d.isDiscoverable,is_hidden:d.isHidden,is_ephemeral:d.isEphemeral,is_muted:d.myMutedState,is_push_enabled:d.isPushEnabled,freeze:d.isFrozen,unread_message_count:d.unreadMessageCount,unread_mention_count:d.unreadMentionCount,push_trigger_option:d.myPushTriggerOption,count_preference:d.myCountPreference,hidden_state:d.hiddenState,member_count:d.memberCount,joined_member_count:d.joinedMemberCount,member_state:d.myMemberState,my_role:d.myRole,user_last_read:d.myLastRead,ts_message_offset:d.messageOffsetTimestamp,message_survival_seconds:d.messageSurvivalSeconds,read_receipt:d.cachedReadReceiptStatus,delivery_receipt:d.cachedDeliveryReceiptStatus,members:d.members.map((function(e){return r.objectify(c({},e))})),last_message:p,created_by:null!==d.creator&&void 0!==d.creator&&"object"===u(d.creator)?n.objectify(d.creator):null,inviter:null!==d.inviter&&void 0!==d.inviter&&"object"===u(d.inviter)?n.objectify(d.inviter):null,cached_primary_key:d.cachedPrimaryKey})}},{key:"upsert",value:function(e){var t=H.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=H.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){Kn[this._iid]={},H.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"string",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"callback"})]),4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return le(this._iid,(function(e){e(n,null)}),t);var i=H.get(this._iid).GroupChannel;return i.cachedChannels[e]?le(this._iid,(function(t){t(null,i.cachedChannels[e])}),t):i.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"string",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"callback"})]),4);return r=i[0],e=i[1],a=i[2],t=i[3],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:a,showMember:!0},(function(e,r){var a=null;e||(a=n.upsert(r)),t(e,a)}))}),t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n=this,r=H.get(this._iid).GroupChannelParams,a=null,i=C(nt.parse(arguments,[new nt({type:r,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):(e.isPublic||(e.accessCode=null),I.get(n._iid).container.apiClient.createGroupChannel(c(c({},e),{},{isDistinct:!0}),(function(e,r){var a=null;if(!e){var i=H.get(n._iid).GroupChannel;a={channel:new i(r),isCreated:r.is_created},i.cachedChannels[a.channel.url]=a.channel}t(e,a)})))}),t)}},{key:"createChannel",value:function(){var e=this,t=nt.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=H.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?I.get(e._iid).container.apiClient.createGroupChannel(r,(function(e,t){var r=null;e||(r=new a(t),a.cachedChannels[r.url]=r),n(e,r)})):n(nt.error,null)}),n);if(Array.isArray(t[0])){var o=new i;switch(t.length){case 1:o.addUsers(t[0]);break;case 2:o.addUsers(t[0]),o.isDistinct=t[1];break;case 3:o.addUsers(t[0]),o.isDistinct=t[1],o.customType=t[2];break;case 5:o.addUsers(t[0]),o.isDistinct=t[1],o.name=t[2],"string"==typeof t[3]?o.coverUrl=t[3]:o.coverImage=t[3],o.data=t[4];break;case 6:o.addUsers(t[0]),o.isDistinct=t[1],o.name=t[2],"string"==typeof t[3]?o.coverUrl=t[3]:o.coverImage=t[3],o.data=t[4],o.customType=t[5];break;default:return le(this._iid,(function(e){return e(nt.error,null)}),n)}return n?a.createChannel(o,n):a.createChannel(o)}return le(this._iid,(function(e){return e(nt.error,null)}),n)}},{key:"createChannelWithUserIds",value:function(){var e=nt.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=H.get(this._iid),r=n.GroupChannel,a=new(0,n.GroupChannelParams);switch(e.length){case 1:a.addUserIds(e[0]);break;case 2:a.addUserIds(e[0]),a.isDistinct=e[1];break;case 3:a.addUserIds(e[0]),a.isDistinct=e[1],a.customType=e[2];break;case 5:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4];break;case 6:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4],a.customType=e[5];break;default:return le(this._iid,(function(e){return e(nt.error,null)}),t)}return r.createChannel(a,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,H.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,H.get(this._iid).PublicGroupChannelListQuery)}},{key:"markAsReadAllLastSentAt",get:function(){return Wn[this._iid]||0},set:function(e){Wn[this._iid]=e}},{key:"getChannelCount",value:function(e,t){return Sa.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Sa.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=nt.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Sa.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,A(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Sa.getInstance(this._iid).getTotalUnreadChannelCount(e)}}]),n}(xt),$n=function(e){function t(t){var n=e.call(this,t)||this;return n.state="",n.role="",n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.restrictionInfo=null,t&&n._update(t),n}return D(t,e),t.objectify=function(e){var t=H.get(this._iid),n=t.User,r=t.RestrictedUser,a=t.RestrictionInfo,i=e.state,o=e.role,s=void 0===o?"":o,l=e.isMuted,c=void 0!==l&&l,u=e.isBlockedByMe,d=void 0!==u&&u,p=e.isBlockingMe,h=void 0!==p&&p,f=e.restrictionInfo,m=void 0===f?null:f,_=c?r.objectify(e):n.objectify(e);if(_.state=i,_.role=s,_.is_muted=c,_.is_blocked_by_me=d,_.is_blocking_me=h,m){var y=a.objectify(m);_.restriction_type=y.restriction_type,_.muted_description=y.description,_.muted_end_at=y.end_at}return _},t.buildFromSerializedData=function(e){var t=H.get(this._iid).Member,n=Ct.deserialize(e);return new t(t.objectify(P({},n)))},t.prototype._update=function(e){var t=H.get(this._iid),n=t.RestrictedUser,r=t.RestrictionInfo;this.state=e.state,this.role=e.role||Xn.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me),this.isMuted&&(this.restrictionInfo=new r(e),this.restrictionInfo.restrictionType=n.RestrictionType.MUTED)},t.prototype.parse=function(e){this._update(e)},Object.defineProperty(t,"JOINED",{get:function(){return"joined"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVITED",{get:function(){return"invited"},enumerable:!1,configurable:!0}),t}(Nt),Zn=function(e){function t(t){var n=e.call(this,t)||this;return n.role="",n.isBlockedByMe=!1,t&&n._update(t),n}return D(t,e),t.objectify=function(e){var t=H.get(this._iid).User,n=e.role,r=void 0===n?"":n,a=e.isBlockedByMe,i=void 0!==a&&a,o=t.objectify(e);return o.role=r,o.is_blocked_by_me=i,o},t.buildFromSerializedData=function(e){var t=H.get(this._iid).Sender,n=Ct.deserialize(e);return new t(t.objectify(P({},n)))},t.prototype.parse=function(e){this._update(e)},t.prototype._update=function(e){this.role=e.role||Xn.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)},t}(Nt),er=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).restrictionInfo=null,e&&r._update(e),r}return h(n,[{key:"_update",value:function(e){var t=H.get(this._iid).RestrictionInfo;this.restrictionInfo=new t(e)}}],[{key:"RestrictionType",get:function(){return{MUTED:"muted",BANNED:"banned"}}},{key:"objectify",value:function(e){var t=H.get(this._iid),n=t.User,r=t.RestrictionInfo,a=e.restrictionInfo,i=void 0===a?{}:a;return c(c({},n.objectify(e)),r.objectify(i))}}]),n}(Nt),tr=function(){function e(e){this.emojiHash=null,this.emojiCategories=null,e&&this._update(e)}return e.prototype._update=function(e){var t=H.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new t(e)})):[]},e}(),nr=function(){function e(e){this.id=null,this.name=null,this.url=null,this.emojis=null,e&&this._update(e)}return e.prototype._update=function(e){var t=H.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map((function(e){return new t(e)})):[]},e}(),rr=function(){function e(e){this.key=null,this.url=null,e&&this._update(e)}return e.prototype._update=function(e){this.key=e.key,this.url=e.url},e}(),ar={},ir={},or=new WeakMap,sr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).channelType=xt.CHANNEL_TYPE_OPEN,r.participantCount=0,or.set(g(r),0),r.operators=[],e&&r._update(e),r}return h(n,[{key:"_update",value:function(e){var t=H.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map((function(e){return new t(e)})))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,H.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,H.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,H.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map((function(e){return e.userId})).indexOf(e)>-1}},{key:"refresh",value:function(e){return H.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid).Command.bEnter({channelUrl:t.url}),r=Sa.getInstance(t._iid);r.sendCommand(n,(function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}a?(a=a?new F(a.message,a.code):null,e(a,null)):(H.get(t._iid).OpenChannel.enteredChannels[t.url]=t,Ne.of(t._iid).send({source:Ce.EVENT_CHANNEL_ENTER,payload:{channel:t}}),t.refresh((function(){return e(null,null)})))}))}),e)}},{key:"exit",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid),r=n.Command,a=n.FileMessageQueue,i=r.bExit({channelUrl:t.url}),o=Sa.getInstance(t._iid);o.sendCommand(i,(function(n,r){if(o.getErrorFirstCallback()){var i=[n,r];r=i[0],n=i[1]}r?(r=r?new F(r.message,r.code):null,e(r,null)):(delete H.get(t._iid).OpenChannel.enteredChannels[t.url],a.delete(t.url),Ne.of(t._iid).send({source:Ce.EVENT_CHANNEL_EXIT,payload:{channel:t}}),e(null,null))}))}),e)}},{key:"updateChannel",value:function(){var e=this,t=nt.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=H.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?I.get(e._iid).container.apiClient.updateOpenChannel(r,(function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)})):n(nt.error,null)}),n);if(3===t.length){var o=new i;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],o.operatorUserIds=this.operators.map((function(e){return e.userId})),this.updateChannel(o,n)}if(4===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],Array.isArray(t[3])&&(s.operatorUserIds=t[3]),this.updateChannel(s,n)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.name=t[0],l.coverUrlOrImage=t[1],l.data=t[2],Array.isArray(t[3])&&(l.operatorUserIds=t[3]),l.customType=t[4],this.updateChannel(l,n)}return le(this._iid,(function(e){return e(nt.error,null)}),n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=nt.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,A(e).concat([t]));default:return le(this._iid,(function(e){return e(nt.error,null)}),t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new nt({type:"string",optional:!0,defaultValue:""}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!1},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.banUser({channelUrl:r.url,userId:e,description:null,seconds:t,isGroupChannel:!1},(function(e,t){n(e,null)}))}),n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"setLatestParticipantCount",value:function(e,t){var n=!1;return"number"==typeof e&&"number"==typeof t&&t>=or.get(this)&&(or.set(this,t),n=e!==this.participantCount,this.participantCount=e),n}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},(function(n,r){n||(delete H.get(t._iid).OpenChannel.cachedChannels[t.url],H.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)}))}),e)}}],[{key:"cachedChannels",get:function(){return ar[this._iid]||(ar[this._iid]={}),ar[this._iid]}},{key:"enteredChannels",get:function(){return ir[this._iid]||(ir[this._iid]={}),ir[this._iid]}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid),n=t.User,r=t.OpenChannel,a=Ct.deserialize(e);return new r({channel_url:a.url,name:a.name,cover_url:a.coverUrl,data:a.data,custom_type:a.customType,created_at:a.createdAt/1e3,freeze:a.isFrozen,is_ephemeral:a.isEphemeral,participant_count:a.participantCount,operators:a.operators.map((function(e){return n.objectify(e)}))})}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"string",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"callback"})]),4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return le(this._iid,(function(e){e(n,null)}),t);var i=H.get(this._iid).OpenChannel;return i.cachedChannels[e]?le(this._iid,(function(t){t(null,i.cachedChannels[e])}),t):i.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"string",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"callback"})]),4);return r=i[0],e=i[1],a=i[2],t=i[3],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:a},(function(e,r){var a=null;e||(a=H.get(n._iid).OpenChannel.upsert(r)),t(e,a)}))}),t)}},{key:"createChannel",value:function(){var e=this,t=nt.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=H.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r._validate()?I.get(e._iid).container.apiClient.createOpenChannel(r,(function(t,r){var a=null;t||(a=H.get(e._iid).OpenChannel.upsert(r)),n(t,a)})):n(nt.error,null)}),n);var o=new i;switch(t.length){case 0:break;case 1:o.name=t[0];break;case 2:o.name=t[0],o.coverUrlOrImage=t[1];break;case 3:o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2];break;case 4:o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],o.operatorUserIds=t[3];break;case 5:o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],o.operatorUserIds=t[3],o.customType=t[4];break;default:return le(this._iid,(function(e){return e(nt.error,null)}),n)}return n?a.createChannel(o,n):a.createChannel(o)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=nt.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,A(e).concat([t]));default:return le(this._iid,(function(e){return e(nt.error,null)}),t)}}},{key:"upsert",value:function(e){var t=new(0,H.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],H.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){ar[this._iid]={},H.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){ir[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,H.get(this._iid).OpenChannelListQuery)}}]),n}(xt),lr="default",cr=function(){function e(e){this.name=lr,this.volume=1,e&&this._update(e)}return e.prototype._update=function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)},e.objectify=function(e){var t=e.name,n=void 0===t?lr:t,r=e.volume;return{name:n,volume:void 0===r?1:r}},e.prototype.serialize=function(){return Ct.serialize(this)},e}(),ur=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.value=Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))?t:[]}return e.prototype.encode=function(){return{key:this.key,value:this.value||[]}},e}(),dr=new WeakMap,pr=function(){function e(t){d(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],dr.set(this,null),this._parentMessageId=null,this.data=null,this.customType=null,this.pushNotificationDeliveryOption=null,this.appleCriticalAlertOptions=null,this.isReplyToChannel=!1,t&&this._update(t)}return h(e,[{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=H.get(this._iid).BaseMessageParams;Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=Sa.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=Sa.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map((function(e){return e.key}))},set:function(e){var t=H.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=H.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var a,i=this._metaArrays.map((function(e){return e.key})).indexOf(r.key);i<0?this._metaArrays.push(r):(a=this._metaArrays[i].value).push.apply(a,A(r.value))}}}}},{key:"rootMessageId",get:function(){return dr.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){dr.set(this,e),this._parentMessageId=e}},{key:"_serialize",value:function(e){return Ct.serialize(this,(function(t){t.hasOwnProperty("_mentionType")&&(t.mentionType=t._mentionType,delete t._mentionType),t.hasOwnProperty("_mentionedUserIds")&&(t.mentionedUserIds=t._mentionedUserIds,delete t._mentionedUserIds),t.hasOwnProperty("_cachedMentionedUsers")&&(t.cachedMentionedUsers=t._cachedMentionedUsers,delete t._cachedMentionedUsers),t.hasOwnProperty("_cachedMentionedUserIds")&&(t.cachedMentionedUserIds=t._cachedMentionedUserIds,delete t._cachedMentionedUserIds),t.hasOwnProperty("_metaArrays")&&(t.metaArrays=t._metaArrays,delete t._metaArrays),t.hasOwnProperty("_parentMessageId")&&(t.parentMessageId=t._parentMessageId,delete t._parentMessageId),e&&e(t)}))}},{key:"_update",value:function(e){e.hasOwnProperty("mention_type")&&(this._mentionType=e.mention_type),e.hasOwnProperty("mentioned_user_ids")&&(this._mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("cached_mentioned_users")&&(this._cachedMentionedUsers=e.cached_mentioned_users),e.hasOwnProperty("cached_mentioned_user_ids")&&(this._cachedMentionedUserIds=e.cached_mentioned_user_ids),e.hasOwnProperty("meta_arrays")&&(this._metaArrays=e.meta_arrays.map((function(e){return new ur(e.key,e.value)}))),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=e.parent_message_id),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("custom_type")&&(this.customType=e.custom_type),e.hasOwnProperty("push_notification_delivery_option")&&(this.pushNotificationDeliveryOption=e.push_notification_delivery_option),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new cr(e.apple_critical_alert_options)),e.hasOwnProperty("is_reply_to_channel")&&(this.isReplyToChannel=e.is_reply_to_channel)}},{key:"_validate",value:function(){var e=H.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=dr.get(this);return Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every((function(e){return"string"==typeof e}))&&Array.isArray(this._metaArrays)&&this._metaArrays.every((function(e){return e instanceof n}))&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map((function(e){return t.PushNotificationDeliveryOption[e]})).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof cr)&&"boolean"==typeof this.isReplyToChannel}}],[{key:"_objectify",value:function(t){var n=t.mentionType,r=void 0===n?e.MentionType.USERS:n,a=t.mentionedUserIds,i=void 0===a?[]:a,o=t.cachedMentionedUsers,s=void 0===o?[]:o,l=t.cachedMentionedUserIds,c=void 0===l?[]:l,u=t.metaArrays,d=void 0===u?[]:u,p=t.parentMessageId,h=void 0===p?null:p,f=t.pushNotificationDeliveryOption,m=void 0===f?null:f,_=t.appleCriticalAlertOptions,y=void 0===_?null:_,g=t.isReplyToChannel;return{mention_type:r,mentioned_user_ids:i,cached_mentioned_users:s,cached_mentioned_user_ids:c,meta_arrays:d,parent_message_id:h,push_notification_delivery_option:m,apple_critical_alert_options:y,is_reply_to_channel:void 0!==g&&g}}},{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),hr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).message=null,r.pollId=void 0,r._translationTargetLanguages=[],e&&r._update(e),r}return h(n,[{key:"serialize",value:function(){return w(_(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_translationTargetLanguages")&&(e.translationTargetLanguages=e._translationTargetLanguages,delete e._translationTargetLanguages)}))}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}},{key:"_update",value:function(e){w(_(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("translation_target_languages")&&(this._translationTargetLanguages=e.translation_target_languages),e.hasOwnProperty("poll_id")&&(this.pollId=e.poll_id)}},{key:"_validate",value:function(){return w(_(n.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every((function(e){return"string"==typeof e}))&&("number"==typeof this.pollId||null===this.pollId||void 0===this.pollId)}}],[{key:"objectify",value:function(e){var t=e.message,n=void 0===t?null:t,r=e.data,a=void 0===r?null:r,i=e.customType,o=void 0===i?null:i,s=e.translationTargetLanguages,l=void 0===s?[]:s,u=e.pollId,d=void 0===u?void 0:u;return c(c({},pr._objectify(e)),{},{message:n,data:a,custom_type:o,translation_target_languages:l,poll_id:d})}}]),n}(pr),fr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=St.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],r.poll=null,r._messageParams=null,e&&r._update(e),r}return h(n,[{key:"applyPollUpdateEvent",value:function(e){var t=H.get(this._iid),n=t.Poll,r=t.PollUpdateEvent,a=null,i=C(nt.parse(arguments,[new nt({type:r,constraint:function(e){return Object.values(n.Status).includes(e.status)}})]),2);if(a=i[0],e=i[1],!a&&this.poll&&this.poll.id===e.poll.id){if(e.status===n.Status.REMOVED)return this.poll=new n(n.objectify(this.poll)),this.poll.details.status=e.status,!0;if(this.poll.details.updatedAt<e.poll.details.updatedAt)return this.poll=e.poll,!0}return!1}},{key:"applyPollVoteEvent",value:function(e){var t=H.get(this._iid).PollVoteEvent,n=null,r=C(nt.parse(arguments,[new nt({type:t})]),2);if(n=r[0],e=r[1],!n&&this.poll&&this.poll.id===e.pollId){var a,i=N(this.poll.details.options);try{for(i.s();!(a=i.n()).done;)if(a.value._applyEvent(e))return!0}catch(n){i.e(n)}finally{i.f()}}return!1}},{key:"_update",value:function(e){var t=Sa.getInstance(this._iid),n=H.get(this._iid),r=n.Sender,a=n.Plugin,i=n.Poll;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map((function(e){return new a(e)}))),this.poll=null,e.hasOwnProperty("poll")&&(this.poll=new i(e.poll)),e.hasOwnProperty("message_params")&&(this._messageParams=new hr(e.message_params))}},{key:"sender",get:function(){var e=Sa.getInstance(this._iid),t=H.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Sa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ie.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return w(_(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){return H.get(this._iid).UserMessage.buildFromSerializedData(this.serialize())}}],[{key:"objectify",value:function(e){var t=Sa.getInstance(this._iid),n=H.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,o=n.User,s=n.UserMessage,l=n.FileMessage,u=n.AdminMessage,d=n.ThreadInfo,p=n.OGMetaData,h=n.Plugin,f=n.AppleCriticalAlertOptions,m=n.Poll,_=n.UserMessageParams,y=e.messageId,g=e.reqId,v=void 0===g?"":g,b=e.user,E=e.channel,w=e.message,C=e.data,A=void 0===C?"":C,k=e.customType,S=void 0===k?"":k,N=e.mentionType,O=void 0===N?a.MentionType.USERS:N,T=e.mentionedUsers,I=void 0===T?[]:T,x=e.mentionedUserIds,D=void 0===x?[]:x,P=e.requestedMentionUserIds,M=void 0===P?[]:P,R=e.reactions,U=void 0===R?[]:R,L=e.metaArrays,F=void 0===L?[]:L,j=e.rootMessageId,z=void 0===j?0:j,B=e.parentMessageId,G=void 0===B?0:B,V=e.parentMessageText,q=void 0===V?"":V,K=e.threadInfo,W=void 0===K?null:K,Y=e.isReplyToChannel,Q=void 0!==Y&&Y,J=e.parentMessage,X=void 0===J?null:J,$=e.translations,Z=void 0===$?{}:$,ee=e.sendingStatus,te=e.errorCode,ne=void 0===te?0:te,re=e.silent,ae=void 0!==re&&re,ie=e.isGlobalBlocked,oe=void 0!==ie&&ie,se=e.messageSurvivalSeconds,le=void 0===se?-1:se,ce=e.ogMetaData,ue=void 0===ce?null:ce,de=e.isOperatorMessage,pe=void 0!==de&&de,he=e.plugins,fe=void 0===he?[]:he,me=e.appleCriticalAlertOptions,_e=e.poll,ye=void 0===_e?null:_e,ge=e.createdAt,ve=e.updatedAt,be=void 0===ve?0:ve,Ee=e.messageParams,we=void 0===Ee?null:Ee,Ce=e.isAutoResendRegistered,Ae=void 0!==Ce&&Ce,ke={};if(ke.req_id=v,ke.msg_id=y,ke.user=i.objectify(c({},b)),ke.channel_url=E.url,ke.channel_type=E.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,ke.message=w,ke.data=A,ke.custom_type=S,ke.translations=Z,ke.is_global_block=!!oe,ke.ts=ge,ke.updated_at=be,ke.mention_type=O,ke.mentioned_users=I.map((function(e){return o.objectify(e)})),ke.mentioned_user_ids=D,ke.requested_mention_user_ids=M,ke.reactions=U.map((function(e){return e.serialize()})),ke.metaarray={},F.forEach((function(e){var t=e.key;ke.metaarray[t]=e.value})),ke.metaarray_key_order=F.map((function(e){return e.key})),ke.root_message_id=z,ke.parent_message_id=G,ke.parent_message_text=q,W&&(ke.thread_info=d.objectify(W)),ke.is_reply_to_channel=Q,X)switch(X.messageType){case r.MESSAGE_TYPE_USER:ke.parent_message_info=s.objectify(X);break;case r.MESSAGE_TYPE_FILE:ke.parent_message_info=l.objectify(X);break;case r.MESSAGE_TYPE_ADMIN:ke.parent_message_info=u.objectify(X)}return ke.sending_status=y>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,ee&&(ke.sending_status=ee),ke.silent=!!ae,ke.error_code=ne,ke.message_survival_seconds=le,ue&&(ke.og_tag=p.objectify(ue)),ke.is_op_msg=!!pe,ke.plugins=fe.map((function(e){return h.objectify(e)})),ye&&(ke.poll=m.objectify(ye)),me&&(ke.apple_critical_alert_options=f.objectify(me)),we&&(ke.message_params=_.objectify(we)),ke.is_auto_resend_registered=Ae,ke}},{key:"build",value:function(e,t,n,r,a,i,o,s,l,c,u,d,p,h,f,m,_,y,g,v,b,E,w,C,A,k,S,N,O,T){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:a,data:i,customType:o,mentionType:h,mentionedUsers:f,mentionedUserIds:v,requestedMentionUserIds:E,reactions:p,metaArrays:d,rootMessageId:m,parentMessageId:_,parentMessageText:y,threadInfo:g,translations:s,sendingStatus:b,errorCode:w,isGlobalBlocked:l,messageSurvivalSeconds:C,ogMetaData:A,isOperatorMessage:k,plugins:S,appleCriticalAlertOptions:N,poll:O,createdAt:c,updatedAt:u,messageParams:T})}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid).UserMessage,n=Ct.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender,messageParams:n.messageParams?new hr(hr.objectify(n.messageParams)):null})))}}]),n}(St),mr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).fileName=null,r.mimeType=null,r.fileSize=null,r._isUpdate=!1,r._file=null,r._fileType=null,r._fileUrl=null,r._thumbnailSizes=[],e&&r._update(e),r}return h(n,[{key:"serialize",value:function(){return w(_(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_isUpdate")&&(e.isUpdate=e._isUpdate,delete e._isUpdate),e.hasOwnProperty("_file")&&(e.file=e._file,delete e._file),e.hasOwnProperty("_fileType")&&(e.fileType=e._fileType,delete e._fileType),e.hasOwnProperty("_fileUrl")&&(e.fileUrl=e._fileUrl,delete e._fileUrl),e.hasOwnProperty("_thumbnailSizes")&&(e.thumbnailSizes=e._thumbnailSizes,delete e._thumbnailSizes)}))}},{key:"file",get:function(){return this._file},set:function(e){ie.isFile(e)&&(this._fileUrl=null,this._file=e,oe.isFile(e)?this._fileType="file":oe.isBlob(e)&&(this._fileType="blob"))}},{key:"fileType",get:function(){return this._fileType}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==u(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}},{key:"_update",value:function(e){w(_(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("file_name")&&(this.fileName=e.file_name),e.hasOwnProperty("mime_type")&&(this.mimeType=e.mime_type),e.hasOwnProperty("file_size")&&(this.fileSize=e.file_size),e.hasOwnProperty("is_update")&&(this._isUpdate=e.is_update),e.hasOwnProperty("file")&&(this._file=e.file),e.hasOwnProperty("file_type")&&(this._fileType=e.file_type),e.hasOwnProperty("file_url")&&(this._fileUrl=e.file_url),e.hasOwnProperty("thumbnail_sizes")&&(this._thumbnailSizes=e.thumbnail_sizes)}},{key:"_validate",value:function(){return w(_(n.prototype),"_validate",this).call(this)&&(this._isUpdate||ie.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&(null===this._thumbnailSizes||this._thumbnailSizes.every((function(e){return"object"===u(e)&&e.maxWidth>0&&e.maxHeight>0})))}}],[{key:"objectify",value:function(e){var t=e.fileName,n=void 0===t?null:t,r=e.mimeType,a=void 0===r?null:r,i=e.fileSize,o=void 0===i?null:i,s=e.data,l=void 0===s?null:s,u=e.customType,d=void 0===u?null:u,p=e.isUpdate,h=void 0!==p&&p,f=e.file,m=void 0===f?null:f,_=e.fileType,y=void 0===_?null:_,g=e.fileUrl,v=void 0===g?null:g,b=e.thumbnailSizes,E=void 0===b?[]:b;return c(c({},pr._objectify(e)),{},{file_name:n,mime_type:a,file_size:o,data:l,custom_type:d,is_update:h,file:m,file_type:y,file_url:v,thumbnail_sizes:E})}}]),n}(pr),_r=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=St.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r._messageParams=null,e&&r._update(e),r}return h(n,[{key:"_update",value:function(e){var t=Sa.getInstance(this._iid),n=I.get(this._iid).container.auth,r=H.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,e.hasOwnProperty("url")&&(this.plainUrl=e.url.split("?auth=")[0]),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=e.type,e.hasOwnProperty("custom")&&(this.data=e.custom),e.hasOwnProperty("file")){var a=e.file;a.hasOwnProperty("url")&&(this.plainUrl=a.url),a.hasOwnProperty("name")&&(this.name=a.name),a.hasOwnProperty("size")&&(this.size=a.size),a.hasOwnProperty("type")&&(this.type=a.type),a.hasOwnProperty("custom")&&(this.data=a.custom)}if(Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i=0;i<this.thumbnails.length;i++)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[i].plainUrl;this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),e.hasOwnProperty("message_params")&&(this._messageParams=new mr(e.message_params))}},{key:"sender",get:function(){var e=Sa.getInstance(this._iid),t=H.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Sa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ie.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return w(_(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){var e=H.get(this._iid).FileMessage.buildFromSerializedData(this.serialize());if(this._messageParams&&e._messageParams){var t=this._messageParams.file;t&&oe.isBlob(t)&&(e._messageParams.file=t.slice())}return e}}],[{key:"objectify",value:function(e){var t=Sa.getInstance(this._iid),n=H.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,o=n.User,s=n.UserMessage,l=n.FileMessage,u=n.AdminMessage,d=n.ThreadInfo,p=n.OGMetaData,h=n.FileMessageParams,f=n.AppleCriticalAlertOptions,m=e.messageId,_=e.reqId,y=void 0===_?"":_,g=e.user,v=void 0===g?{}:g,b=e.channel,E=e.plainUrl,w=e.name,C=void 0===w?null:w,A=e.type,k=e.size,S=void 0===k?0:k,N=e.data,O=void 0===N?"":N,T=e.customType,I=void 0===T?"":T,x=e.mentionType,D=void 0===x?a.MentionType.USERS:x,P=e.mentionedUsers,M=void 0===P?[]:P,R=e.mentionedUserIds,U=void 0===R?[]:R,L=e.requestedMentionUserIds,F=void 0===L?[]:L,j=e.reactions,z=void 0===j?[]:j,B=e.metaArrays,G=void 0===B?[]:B,V=e.rootMessageId,q=void 0===V?0:V,K=e.parentMessageId,W=void 0===K?0:K,Y=e.parentMessageText,Q=void 0===Y?"":Y,J=e.threadInfo,X=void 0===J?null:J,$=e.isReplyToChannel,Z=void 0!==$&&$,ee=e.parentMessage,te=void 0===ee?null:ee,ne=e.thumbnails,re=void 0===ne?[]:ne,ae=e.requireAuth,ie=void 0!==ae&&ae,oe=e.sendingStatus,se=e.errorCode,le=void 0===se?0:se,ce=e.silent,ue=void 0!==ce&&ce,de=e.isGlobalBlocked,pe=void 0!==de&&de,he=e.messageSurvivalSeconds,fe=void 0===he?-1:he,me=e.ogMetaData,_e=void 0===me?null:me,ye=e.isOperatorMessage,ge=void 0!==ye&&ye,ve=e.appleCriticalAlertOptions,be=e.createdAt,Ee=e.updatedAt,we=void 0===Ee?0:Ee,Ce=e.messageParams,Ae=void 0===Ce?null:Ce,ke=e.isAutoResendRegistered,Se=void 0!==ke&&ke,Ne={};Ne.req_id=y,Ne.msg_id=m,Ne.user=i.objectify(c({},v)),Ne.channel_url=b.url,Ne.channel_type=b.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,Ne.url=E,Ne.name=C,Ne.type=A,Ne.size=S,Ne.custom=O,Ne.custom_type=I,Ne.thumbnails=re,Ne.require_auth=ie,Ne.is_global_block=!!pe,Ne.ts=be,Ne.updated_at=we,Ne.mention_type=D,Ne.mentioned_users=M.map((function(e){return o.objectify(e)})),Ne.mentioned_user_ids=U,Ne.requested_mention_user_ids=F,Ne.reactions=z.map((function(e){return e.serialize()})),Ne.metaarray={};for(var Oe=0;Oe<G.length;Oe++){var Te=G[Oe].key;Ne.metaarray[Te]=G[Oe].value}if(Ne.metaarray_key_order=G.map((function(e){return e.key})),Ne.root_message_id=q,Ne.parent_message_id=W,Ne.parent_message_text=Q,X&&(Ne.thread_info=d.objectify(X)),Ne.is_reply_to_channel=Z,te)switch(te.messageType){case r.MESSAGE_TYPE_USER:Ne.parent_message_info=s.objectify(te);break;case r.MESSAGE_TYPE_FILE:Ne.parent_message_info=l.objectify(te);break;case r.MESSAGE_TYPE_ADMIN:Ne.parent_message_info=u.objectify(te)}return Ne.sending_status=m>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,oe&&(Ne.sending_status=oe),Ne.silent=!!ue,Ne.error_code=le,Ne.message_survival_seconds=fe,_e&&(Ne.og_tag=p.objectify(_e)),Ne.is_op_msg=!!ge,ve&&(Ne.apple_critical_alert_options=f.objectify(ve)),Ae&&(Ne.message_params=h.objectify(Ae)),Ne.is_auto_resend_registered=Se,Ne}},{key:"build",value:function(e,t,n,r,a,i,o,s,l,c,u,d,p,h,f,m,_,y,g,v,b,E,w,C,A,k,S,N,O,T,I,x){return this.objectify({messageId:t,reqId:e,user:n,channel:r,plainUrl:a,name:i,type:o,size:s,data:l,customType:c,mentionType:y,mentionedUsers:g,mentionedUserIds:C,requestedMentionUserIds:k,reactions:_,metaArrays:m,rootMessageId:v,parentMessageId:b,parentMessageText:E,threadInfo:w,thumbnails:p,requireAuth:h,sendingStatus:A,errorCode:S,isGlobalBlocked:u,messageSurvivalSeconds:N,ogMetaData:O,isOperatorMessage:T,appleCriticalAlertOptions:I,createdAt:d,updatedAt:f,messageParams:x})}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid).FileMessage,n=Ct.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender,messageParams:n.messageParams?new mr(mr.objectify(n.messageParams)):null})))}}]),n}(St),yr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=St.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},e&&r._update(e),r}return h(n,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=H.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,a=t.UserMessage,i=t.FileMessage,o=t.AdminMessage,s=t.User,l=t.ThreadInfo,c=t.OGMetaData,u=e.messageId,d=e.channel,p=e.message,h=e.data,f=void 0===h?"":h,m=e.customType,_=void 0===m?"":m,y=e.mentionType,g=void 0===y?r.MentionType.USERS:y,v=e.mentionedUsers,b=void 0===v?[]:v,E=e.reactions,w=void 0===E?[]:E,C=e.metaArrays,A=void 0===C?[]:C,k=e.rootMessageId,S=void 0===k?0:k,N=e.parentMessageId,O=void 0===N?0:N,T=e.parentMessageText,I=void 0===T?"":T,x=e.threadInfo,D=void 0===x?null:x,P=e.isReplyToChannel,M=void 0!==P&&P,R=e.parentMessage,U=void 0===R?null:R,L=e.translations,F=void 0===L?{}:L,j=e.silent,z=void 0!==j&&j,B=e.ogMetaData,G=void 0===B?null:B,V=e.createdAt,q=e.updatedAt,K=void 0===q?0:q,W={msg_id:u,channel_url:d.url,channel_type:d.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:p,data:f,custom_type:_,silent:z,ts:V,updated_at:K};W.translations=F,W.mention_type=g,W.mentioned_users=b.map((function(e){return s.objectify(e)})),W.reactions=w.map((function(e){return e.serialize()})),W.metaarray={};for(var Y=0;Y<A.length;Y++){var Q=A[Y].key;W.metaarray[Q]=A[Y].value}if(W.metaarray_key_order=A.map((function(e){return e.key})),W.root_message_id=S,W.parent_message_id=O,W.parent_message_text=I,D&&(W.thread_info=l.objectify(D)),W.is_reply_to_channel=M,U)switch(U.messageType){case n.MESSAGE_TYPE_USER:W.parent_message_info=a.objectify(U);break;case n.MESSAGE_TYPE_FILE:W.parent_message_info=i.objectify(U);break;case n.MESSAGE_TYPE_ADMIN:W.parent_message_info=o.objectify(U)}return G&&(W.og_tag=c.objectify(G)),W}},{key:"build",value:function(e,t,n,r,a,i,o,s,l,c,u,d,p,h,f,m,_){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:a,mentionType:u,mentionedUsers:d,reactions:c,metaArrays:l,rootMessageId:p,parentMessageId:h,parentMessageText:f,threadInfo:m,translations:i,ogMetaData:_,createdAt:o,updatedAt:s})}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid).AdminMessage,n=Ct.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType}})))}}]),n}(St),gr=function(){function e(t){d(this,e);var n=H.get(this._iid),r=n.BaseMessage,a=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=a.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=a.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,t&&this._update(t)}return h(e,[{key:"sender",get:function(){var e=Sa.getInstance(this._iid),t=H.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"_update",value:function(t){var n=this,r=H.get(this._iid),a=r.User,i=r.Sender,o=r.BaseMessageParams,s=r.MessageMetaArray,l=r.AppleCriticalAlertOptions;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new i(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var c=t.hasOwnProperty("metaarray")?t.metaarray:{},u=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(c).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var d=0;d<u.length;d++){var p=u[d];this.metaArrays.push(new s(p,c[p]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:o.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach((function(e){var t=new a(e);n.mentionedUsers.push(t)})),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:o.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code))),t.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(t.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=H.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===u(e)&&e){var t=H.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),vr=function(){function e(){this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return e.createFromJson=function(e){var t=H.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,a=e.thread_info,i=e.root_message_id,o=e.channel_url,s=e.channel_type;if(a&&"object"==typeof a&&("string"==typeof i||"number"==typeof i)&&"string"==typeof o&&"string"==typeof s&&[n.CHANNEL_TYPE_GROUP,n.CHANNEL_TYPE_OPEN].includes(s)){var l=new this;return l.threadInfo=new r(a),l.targetMessageId=parseInt(i+""),l.channelUrl=o,l.channelType=s,l}return null},e}(),br=function(){function e(){d(this,e),this.poll=null,this.status=null}return h(e,null,[{key:"createFromJson",value:function(e){var t=H.get(this._iid).Poll,n=e.poll;if("object"===u(n)){var r=new this;return r.poll=new t(n),r.status=n.status,r}return null}}]),e}(),Er=function(){function e(){d(this,e),this.pollId=null,this.updatedVoteCounts=null,this.votedAt=null}return h(e,null,[{key:"createFromJson",value:function(e){var t=e.poll_id,n=e.updated_vote_counts,r=e.ts;if("number"==typeof t&&Array.isArray(e.updated_vote_counts)&&"number"==typeof r){var a=new this;return a.pollId=t,a.updatedVoteCounts=n.map((function(e){return{optionId:e.option_id,voteCount:e.vote_count}})),a.votedAt=r,a}return null}}]),e}(),wr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==t.metaDataValuesFilter.length>0&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Cr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadBannedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).RestrictedUser,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.banned_list.map((function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.BANNED,t}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Ar=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadBlockedUserList(c(c({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),kr=function(){function e(){d(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadFriendList(c(c({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasMore=!!o,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Sr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Xn.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Xn.SuperChannelFilter.ALL,this.publicChannelFilter=Xn.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Xn.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.hiddenChannelFilter=Xn.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return h(e,[{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){Object.keys(e.QueryType).map((function(t){return e.QueryType[t]})).indexOf(t)>-1&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}},{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return Ct.serialize(this,(function(e){e.isLoading=!1}))}},{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid),r=n.GroupChannel,a=n.GroupChannelListQuery;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[a.ORDER_CHRONOLOGICAL,a.ORDER_LATEST_LAST_MESSAGE,a.CHANNEL_NAME_ALPHABETICAL,a.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(a.QueryType).map((function(e){return a.QueryType[e]})).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(t.superChannelFilter)>-1&&Object.keys(r.PublicChannelFilter).map((function(e){return r.PublicChannelFilter[e]})).indexOf(t.publicChannelFilter)>-1&&Object.keys(r.UnreadChannelFilter).map((function(e){return r.UnreadChannelFilter[e]})).indexOf(t.unreadChannelFilter)>-1&&Object.keys(r.HiddenChannelFilter).map((function(e){return r.HiddenChannelFilter[e]})).indexOf(t.hiddenChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"string"!=typeof t.metadataKey&&null!==t.metadataKey||!Array.isArray(t.metadataValues)||!t.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof t.metadataValueStartsWith&&null!==t.metadataValueStartsWith||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(nt.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadGroupChannelList(c(c({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter})).then((function(n){var r=H.get(t._iid).GroupChannel,a=String(n.next);t._token=a,t.hasNext=!!a;var i=n.channels;if(!i||!Array.isArray(i))throw new F("Failed at loading group channels.",F.MALFORMED_DATA);var o=i.map((function(e){return"number"==typeof n.ts&&(e.ts=n.ts),r.upsert(e)}));t.isLoading=!1,e(null,o)})).catch((function(n){t.isLoading=!1,e(n,null)}))):e(null,[])}),e)}}],[{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}},{key:"buildFromSerializedData",value:function(e){var t=H.get(this._iid).GroupChannel,n=Ct.deserialize(e),r=t.createMyGroupChannelListQuery();return Object.keys(n).forEach((function(e){r.hasOwnProperty(e)&&(r[e]=n[e])})),r}}]),e}(),Nr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=Xn.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid),r=n.GroupChannel,a=n.Member,i=n.MemberListQuery;"number"==typeof t.limit&&t.limit>0&&Object.keys(i.MutedMemberFilter).map((function(e){return i.MutedMemberFilter[e]})).indexOf(t.mutedMemberFilter)>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(i.Order).map((function(e){return i.Order[e]})).indexOf(t.order)>-1&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadMemberList(c(c({},t),{},{channelUrl:t._channelUrl,token:t._token}),(function(n,r){var i=null;if(!n){var o=String(r.next);t._token=o,t.hasNext=!!o,i=r.members.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(nt.error,null)}),e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),Or=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadMutedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).RestrictedUser,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.muted_list.map((function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.MUTED,t}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Tr=function(){function e(){d(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){!("number"==typeof t.limit&&t.limit>0&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(nt.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadOpenChannelList(c(c({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).OpenChannel,o=String(r.next);t._token=o,t.hasNext=!!o;var s=r.channels;s&&Array.isArray(s)?a=s.map((function(e){return"number"==typeof r.ts&&(e.ts=r.ts),i.upsert(e)})):n=new F("Failed at loading open channels.",F.MALFORMED_DATA)}t.isLoading=!1,e(n,a)}))):e(null,[])}),e)}}]),e}(),Ir=new WeakMap,xr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Ir.set(this,t)}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){if("number"==typeof t.limit&&t.limit>0)if(t.isLoading)e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=Ir.get(t);I.get(t._iid).container.apiClient.loadOperatorList(c(c({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.operators.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))}else e(null,[]);else e(nt.error,null)}),e)}}]),e}(),Dr=new WeakMap,Pr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&Dr.set(this,t.channelUrl)}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadParticipantList(c(c({},t),{},{channelUrl:Dr.get(t),token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.participants.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Mr=new WeakMap,Rr=function(){function e(t,n){var r=n.limit,a=void 0===r?20:r,i=n.reverse,o=void 0!==i&&i,s=n.exactMatch,l=void 0!==s&&s,c=n.channelUrl,u=void 0===c?"":c,p=n.channelCustomType,h=void 0===p?"":p,f=n.messageTimestampFrom,m=void 0===f?null:f,_=n.messageTimestampTo,y=void 0===_?null:_,g=n.order,v=void 0===g?"score":g,b=n.advancedQuery,E=void 0!==b&&b,w=n.targetFields,C=void 0===w?null:w;d(this,e),this.isLoading=!1,this.hasNext=!0,Mr.set(this,{keyword:t,limit:a,reverse:o,exactMatch:l,channelUrl:u,channelCustomType:h,messageTimestampFrom:m,messageTimestampTo:y,order:v,advancedQuery:E,targetFields:C,previousToken:"",nextToken:""})}return h(e,[{key:"key",get:function(){return Mr.get(this).keyword}},{key:"limit",get:function(){return Mr.get(this).limit}},{key:"reverse",get:function(){return Mr.get(this).reverse}},{key:"exactMatch",get:function(){return Mr.get(this).exactMatch}},{key:"channelUrl",get:function(){return Mr.get(this).channelUrl}},{key:"channelCustomType",get:function(){return Mr.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return Mr.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return Mr.get(this).messageTimestampTo}},{key:"order",get:function(){return Mr.get(this).order}},{key:"next",value:function(e){var t=this,n=H.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.OpenChannel;return le(this._iid,(function(e){var n=Mr.get(t),o=n.keyword,s=n.limit,l=n.reverse,c=n.exactMatch,u=n.channelUrl,d=n.channelCustomType,p=n.messageTimestampFrom,h=n.messageTimestampTo,f=n.order,m=n.advancedQuery,_=n.targetFields,y=n.nextToken;!("number"==typeof s&&s>0&&s<=1e3&&"boolean"==typeof l&&"boolean"==typeof c)||"string"!=typeof u&&null!==u||"string"!=typeof d&&null!==d||"number"!=typeof p&&null!==p||"number"!=typeof h&&null!==h||!(["score","ts"].indexOf(f)>=0)||"boolean"!=typeof m&&null!==m||!Array.isArray(_)&&null!==_?e(nt.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.searchMessages({keyword:o,limit:s,reverse:l,exactMatch:c,channelUrl:u,channelCustomType:d,messageTimestampFrom:p,messageTimestampTo:h,order:f,advancedQuery:m,targetFields:_,nextToken:y},(function(n,o){var s=null;n||(s=[],o.results.forEach((function(e){if(e.channel.hasOwnProperty("members")){var t=new a(e.channel);a.cachedChannels[t.url]=t,s.push(r.buildMessage(e,t))}else{var n=new i(e.channel);i.cachedChannels[n.url]=n,s.push(r.buildMessage(e,n))}})),t.hasNext=o.has_next,Mr.get(t).nextToken=o.end_cursor),t.isLoading=!1,e(n,s)}))):e(null,[])}),e)}}]),e}(),Ur=new WeakMap,Lr=new WeakMap,Fr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,Lr.set(this,Number.MAX_SAFE_INTEGER),Ur.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return h(e,[{key:"load",value:function(e,t,n,r){var a=this,i=H.get(this._iid),o=i.BaseChannel,s=i.BaseMessage,l=null,c=C(nt.parse(arguments,[new nt({type:"number",optional:!0,defaultValue:this.limit}),new nt({type:"boolean",optional:!0,defaultValue:this.reverse}),new nt({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(o.MessageTypeFilter).map((function(e){return o.MessageTypeFilter[e]})).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new nt({type:"callback"})]),5);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],le(this._iid,(function(r){if(("string"!=typeof a.customTypeFilter&&null!==a.customTypeFilter||!Array.isArray(a.customTypesFilter)||!a.customTypesFilter.every((function(e){return"string"==typeof e||null===e}))||!Array.isArray(a.senderUserIdsFilter)||!a.senderUserIdsFilter.every((function(e){return"string"==typeof e}))||"boolean"!=typeof a.includeMetaArray||null!==a.includeReaction&&"boolean"!=typeof a.includeReaction||null!==a.includeReactions&&"boolean"!=typeof a.includeReactions||"boolean"!=typeof a.includeThreadInfo||null!==a.includeReplies&&"boolean"!=typeof a.includeReplies||!(null===a.replyType||"string"==typeof a.replyType&&Object.values(s.ReplyType).includes(a.replyType))||null!==a.includeParentMessageText&&"boolean"!=typeof a.includeParentMessageText||null!==a.includeParentMessageInfo&&"boolean"!=typeof a.includeParentMessageInfo||"boolean"!=typeof a.showSubchannelMessagesOnly)&&(l=nt.error),l)r(l,null);else{if(a.limit=e,a.reverse=t,a.messageTypeFilter=n,"number"==typeof a.messageTypeFilter)switch(a.messageTypeFilter){case 0:a.messageTypeFilter=o.MessageTypeFilter.ALL;break;case 1:a.messageTypeFilter=o.MessageTypeFilter.USER;break;case 2:a.messageTypeFilter=o.MessageTypeFilter.FILE;break;case 3:a.messageTypeFilter=o.MessageTypeFilter.ADMIN}if(a.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(a.hasMore){a.isLoading=!0;var i=Ur.get(a);I.get(a._iid).container.apiClient.getMessageList({channel:i,token:Lr.get(a)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:a.messageTypeFilter,customType:a.customTypeFilter,customTypes:a.customTypesFilter,senderUserIds:a.senderUserIdsFilter,includeMetaArray:a.includeMetaArray,includeReaction:a.includeReaction,includeReactions:a.includeReactions,includeReplies:a.includeReplies,includeParentMessageText:a.includeParentMessageText,includeThreadInfo:a.includeThreadInfo,replyType:a.replyType,includeParentMessageInfo:a.includeParentMessageInfo,showSubchannelMessagesOnly:a.showSubchannelMessagesOnly,includePollDetails:a.includePollDetails}).then((function(t){var n=t.messages.map((function(e){return o.buildMessage(e,i)}));(0===n.length||n.length<e)&&(a.hasMore=!1);var s=Lr.get(a);Lr.set(a,Math.min.apply(Math,A(n.map((function(e){return e.createdAt}))).concat([s]))),a.isLoading=!1,r(null,n)})).catch((function(e){a.isLoading=!1,r(e,null)}))}else r(null,[])}}),r)}}]),e}(),jr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Sr.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=Xn.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.includeFrozen=!0,this.includeMetaData=!0}return h(e,[{key:"next",value:function(t){var n=this;return le(this._iid,(function(t){var r=H.get(n._iid).GroupChannel;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(e.MembershipType).map((function(t){return e.MembershipType[t]})).indexOf(n.membershipFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(n.superChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"string"!=typeof n.metadataKey&&null!==n.metadataKey||!Array.isArray(n.metadataValues)||!n.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof n.metadataValueStartsWith&&null!==n.metadataValueStartsWith||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?t(nt.error,null):n.isLoading?t(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,I.get(n._iid).container.apiClient.loadPublicGroupChannelList(c(c({},n),{},{token:n._token}),(function(e,a){var i=null;if(!e){var o=String(a.next);n._token=o,n.hasNext=!!o;var s=a.channels;s&&Array.isArray(s)?i=s.map((function(e){return"number"==typeof a.ts&&(e.ts=a.ts),r.upsert(e)})):e=new F("Failed at loading group channels.",F.MALFORMED_DATA)}n.isLoading=!1,t(e,i)}))):t(null,[])}),t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),zr=new WeakMap,Hr=new WeakMap,Br=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.token,i=void 0===a?"":a,o=t.limit,s=void 0===o?20:o;d(this,e),this.channelUrl=r,this.token=i,this.limit=s,zr.set(this,!1),Hr.set(this,!0)}return h(e,[{key:"isLoading",get:function(){return!!zr.get(this)}},{key:"hasNext",get:function(){return!!Hr.get(this)}},{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"string"==typeof t.channelUrl&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(zr.set(t,!0),I.get(t._iid).container.apiClient.getPollList(c({},t),(function(n,r){if(n)zr.set(t,!1),e(n,null);else{var a=H.get(t._iid).Poll,i=r.hasOwnProperty("polls")&&Array.isArray(r.polls)?r.polls.map((function(e){return new a(e)})):[],o=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=o,zr.set(t,!1),Hr.set(t,!!o),e(null,i)}}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Gr=new WeakMap,Vr=new WeakMap,qr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.pollId,i=void 0===a?null:a,o=t.optionId,s=void 0===o?null:o,l=t.token,c=void 0===l?"":l,u=t.limit,p=void 0===u?100:u;d(this,e),this.channelUrl=r,this.pollId=i,this.optionId=s,this.token=c,this.limit=p,Gr.set(this,!1),Vr.set(this,!0)}return h(e,[{key:"isLoading",get:function(){return!!Gr.get(this)}},{key:"hasNext",get:function(){return!!Vr.get(this)}},{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"string"==typeof t.channelUrl&&"number"==typeof t.pollId&&"number"==typeof t.optionId&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(Gr.set(t,!0),I.get(t._iid).container.apiClient.getPollOptionVoterList(c({},t),(function(n,r){if(n)Gr.set(t,!1),e(n,null);else{var a=H.get(t._iid).User,i=r.hasOwnProperty("voters")&&Array.isArray(r.voters)?r.voters.map((function(e){return new a(e)})):[],o=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=o,Gr.set(t,!1),Vr.set(t,!!o),e(null,i)}}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),Kr=function(){function e(){d(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter((function(e){return e.hasOwnProperty("userId")})).length===e.length&&(t=e.map((function(e){return e.userId})))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter((function(e){return"string"==typeof e})).length===e.length&&(t=e)}})}return h(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(ie.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId})).map((function(e){return e.userId}));(t=this._invitedUserIds).push.apply(t,A(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return"string"==typeof e}));(t=this._invitedUserIds).push.apply(t,A(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),Wr=function(){function e(){d(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return h(e,[{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every((function(e){return e.hasOwnProperty("userId")}))&&(this._operatorUserIds=e.map((function(e){return e.userId})))}},{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||ie.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl&&/^\w+$/.test(this.channelUrl)||null===this.channelUrl)}}]),e}(),Yr=function(e){m(n,e);var t=b(n);function n(e){var r;return d(this,n),(r=t.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,e&&r._update(e),r}return h(n,[{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}},{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,a,i){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&t>=1&&t<=12&&"number"==typeof n&&n>=1&&n<=31&&"number"==typeof r&&r>=0&&r<=24&&"number"==typeof a&&a>=0&&a<=60&&"string"==typeof i&&i.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+a.toString()).substr(-2),this.timezone=i)}}]),n}(hr),Qr=function e(){d(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=Xn.SuperChannelFilter.ALL},Jr=function(){function e(){d(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.includeParentMessageInfo=null,this.includePollDetails=!1}return h(e,[{key:"_validate",value:function(){var e=H.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),Xr=function(){function e(){d(this,e);var t=H.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return h(e,[{key:"_validate",value:function(){var e=H.get(this._iid),t=e.BaseChannel,n=e.BaseMessage;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(t.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(n.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.showSubchannelMessagesOnly&&"boolean"==typeof this.includePollDetails}},{key:"belongsTo",value:function(e){var t=H.get(this._iid),n=t.BaseChannel,r=t.UserMessageParams,a=t.FileMessageParams,i=t.BaseMessage;if(this.messageType!==n.MessageTypeFilter.ALL){if(e instanceof r&&this.messageType!==n.MessageTypeFilter.USER)return!1;if(e instanceof a&&this.messageType!==n.MessageTypeFilter.FILE)return!1}if(Array.isArray(this.customTypes)&&this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if("string"==typeof this.customType&&this.customType!==e.customType)return!1;if(Array.isArray(this.senderUserIds)&&this.senderUserIds.length>0){var o=Sa.getInstance(e._iid);if(!o||!o.currentUser||!this.senderUserIds.includes(o.currentUser.userId))return!1}if("string"==typeof this.replyType&&e.parentMessageId){if(this.replyType===i.ReplyType.NONE)return!1;if(this.replyType===i.ReplyType.ONLY_REPLY_TO_CHANNEL&&!e.isReplyToChannel)return!1}else if(!1===this.includeReplies&&e.parentMessageId)return!1;return!0}}]),e}(),$r=function(){function e(){d(this,e);var t=H.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeParentMessageText=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return h(e,[{key:"_validate",value:function(){var e=H.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),Zr=function(){function e(){d(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return h(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(BaseMessage.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),ea=function(){function e(){d(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return h(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e}))||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),ta=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?null:n,a=t.options,i=void 0===a?null:a,o=t.data,s=void 0===o?null:o,l=t.isAnonymous,c=void 0===l?null:l,u=t.allowUserSuggestion,p=void 0===u?null:u,h=t.allowMultipleVotes,f=void 0===h?null:h,m=t.closeAt,_=void 0===m?null:m;d(this,e),this.title=r,this.options=i,this.data=s,this.isAnonymous=c,this.allowUserSuggestion=p,this.allowMultipleVotes=f,this.closeAt=_}return h(e,[{key:"_validate",value:function(){return"string"==typeof this.title&&(Array.isArray(this.options)&&this.options.length>0&&this.options.every((function(e){return"string"==typeof e}))||null===this.options)&&("string"==typeof this.data||null==this.data)&&("boolean"==typeof this.isAnonymous||null===this.isAnonymous)&&("boolean"==typeof this.allowUserSuggestion||null===this.allowUserSuggestion)&&("boolean"==typeof this.allowMultipleVotes||null===this.allowMultipleVotes)&&("number"==typeof this.closeAt||null===this.closeAt)}}]),e}(),na=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.pollId,i=void 0===a?null:a,o=t.showPartialVoters,s=void 0!==o&&o;d(this,e),this.channelUrl=r,this.pollId=i,this.showPartialVoters=s}return h(e,[{key:"_validate",value:function(){return"string"==typeof this.channelUrl&&"number"==typeof this.pollId&&"boolean"==typeof this.showPartialVoters}}]),e}(),ra=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},aa=function(){this.onFriendsDiscovered=function(){},this.onTotalUnreadMessageCountUpdated=function(){}},ia=function e(){d(this,e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){},this.onPollUpdated=function(e){},this.onPollVoted=function(e){}},oa=function e(t){if(d(this,e),t){var n=H.get(this._iid),r=n.User,a=n.BaseChannel;this.reader=new r(t.user),this.timestamp=parseInt(t.ts),this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):a.CHANNEL_TYPE_GROUP}},sa=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=0),this.key=e,this.userIds=t,this.updatedAt=n;for(var r={},a=0,i=this.userIds;a<i.length;a++)r[i[a]]=this.updatedAt;this._version=r}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.createFromJson=function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&n.length>0&&"number"==typeof r?new this(t,n,r):null},e.prototype.serialize=function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}},e.prototype._applyEvent=function(e){if(e.key===this.key&&(!this._version[e.userId]||this._version[e.userId]<e.updatedAt)){var t=this.userIds.indexOf(e.userId);switch(e.operation){case"add":t<0&&this.userIds.push(e.userId);break;case"delete":t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}},e}(),la=function(){function e(e){this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,e&&this._update(e)}return e.objectify=function(e){var t=H.get(this._iid).User,n=e.replyCount,r=void 0===n?0:n,a=e.mostRepliedUsers,i=void 0===a?[]:a,o=e.lastRepliedAt,s=void 0===o?0:o,l=e.updatedAt,c=void 0===l?0:l,u={};return u.reply_count=r,Array.isArray(i)&&i.every((function(e){return e instanceof t}))&&(u.most_replies=i.map((function(e){return t.objectify(e)}))),u.last_replied_at=s,u.updated_at=c,u},e.build=function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})},e.prototype._update=function(e){var t=H.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every((function(e){return"object"==typeof e}))&&(this.mostRepliedUsers=e.most_replies.map((function(e){return new t(e)}))),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))},e}(),ca=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e&&this._update(e)}return e.objectify=function(e){var t=H.get(this._iid).OGImage,n=e.title,r=void 0===n?null:n,a=e.url,i=void 0===a?null:a,o=e.description,s=void 0===o?null:o,l=e.defaultImage,c=void 0===l?null:l,u={};return u["og:title"]=r,u["og:url"]=i,u["og:description"]=s,c&&(u["og:image"]=t.objectify(c)),u},e.prototype._update=function(e){var t=H.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))},e}(),ua=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,e&&this._update(e)}return e.objectify=function(e){var t=e.url,n=void 0===t?null:t,r=e.secureUrl,a=void 0===r?null:r,i=e.type,o=void 0===i?null:i,s=e.width,l=void 0===s?0:s,c=e.height,u=void 0===c?0:c,d=e.alt,p=void 0===d?null:d,h={};return h.url=n,h.secure_url=a,h.type=o,h.width=l,h.height=u,h.alt=p,h},e.prototype._update=function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)},e}(),da=function(){function e(e){this.type=null,this.vendor=null,this.detail={},e&&this._update(e)}return e.objectify=function(e){var t=e.type,n=void 0===t?"":t,r=e.vendor,a=void 0===r?"":r,i=e.detail,o=void 0===i?{}:i,s={};return s.type=n,s.vendor=a,s.detail=o,s},e.prototype._update=function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"==typeof e.detail&&!Array.isArray(e.detail)&&(this.detail=e.detail)},e}(),pa=function(){function e(t){d(this,e),this.id=0,this.title="",this.details=null,this._update(t)}return h(e,[{key:"update",value:function(e,t){var n=this,r=H.get(this._iid).PollParams,a=null,i=C(nt.parse(arguments,[new nt({type:r,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(a)t(a,null);else{var r={text:e.data};I.get(n._iid).container.apiClient.updatePoll(c(c({pollId:n.id},e),{},{data:r}),(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).Poll)(r);t(null,a)}}))}}),t)}},{key:"delete",value:function(e){var t=this,n=null,r=C(nt.parse(arguments,[new nt({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):I.get(t._iid).container.apiClient.deletePoll({pollId:t.id},(function(t,n){e(t||null,null)}))}),e)}},{key:"addOption",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"string"}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.addPollOption({channelUrl:e,pollId:r.id,text:t},(function(e,t){if(e)n(e,null);else{var a=new(0,H.get(r._iid).Poll)(t);n(null,a)}}))}),n)}},{key:"vote",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"array",constraint:function(e){return e.every((function(e){return"number"==typeof e}))}}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.votePoll({channelUrl:e,pollId:r.id,optionIds:t},(function(e,t){if(e)n(e,null);else{var a=new(0,H.get(r._iid).Poll)(t);n(null,a)}}))}),n)}},{key:"close",value:function(e){var t=this,n=null,r=C(nt.parse(arguments,[new nt({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):I.get(t._iid).container.apiClient.closePoll({pollId:t.id},(function(n,r){if(n)e(n,null);else{var a=new(0,H.get(t._iid).Poll)(r);e(null,a)}}))}),e)}},{key:"_update",value:function(e){var t=H.get(this._iid).PollDetails;this.id=parseInt(e.id),this.title=e.title,e.hasOwnProperty("options")&&e.hasOwnProperty("is_anonymous")&&e.hasOwnProperty("allow_user_suggestion")&&e.hasOwnProperty("allow_multiple_votes")&&e.hasOwnProperty("close_at")&&e.hasOwnProperty("voter_count")&&e.hasOwnProperty("status")&&e.hasOwnProperty("created_by")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("updated_at")&&(this.details=new t(e))}}],[{key:"Status",get:function(){return{OPEN:"open",CLOSED:"closed",REMOVED:"removed"}}},{key:"objectify",value:function(e){var t=H.get(this._iid).PollDetails,n=e.id,r=void 0===n?0:n,a=e.title,i=void 0===a?"":a,o=e.details,s=void 0===o?null:o,l=c({},s?t.objectify(s):{});return l.id=r,l.title=i,l}},{key:"get",value:function(e,t){var n=this,r=H.get(this._iid).PollRetrievalParams,a=null,i=C(nt.parse(arguments,[new nt({type:r,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):I.get(n._iid).container.apiClient.getPoll(c({},e),(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).Poll)(r);t(null,a)}}))}),t)}},{key:"create",value:function(e,t){var n=this,r=H.get(this._iid).PollParams,a=null,i=C(nt.parse(arguments,[new nt({type:r,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(a)t(a,null);else{var r={text:e.data};I.get(n._iid).container.apiClient.createPoll(c(c({},e),{},{data:r}),(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).Poll)(r);t(null,a)}}))}}),t)}}]),e}(),ha=function(){function e(t){d(this,e),this.options=[],this.data=null,this.isAnonymous=!1,this.allowUserSuggestion=!1,this.allowMultipleVotes=!1,this.closeAt=-1,this.voterCount=0,this.votedOptionIds=[],this.status="",this.createdBy=null,this.createdAt=0,this.updatedAt=0,this._update(t)}return h(e,[{key:"_update",value:function(e){var t=H.get(this._iid).PollOption;e.hasOwnProperty("options")&&Array.isArray(e.options)&&(this.options=e.options.map((function(e){return new t(e)})));try{this.data=JSON.parse(e.data)}catch(t){this.data=e.data}this.isAnonymous=!!e.hasOwnProperty("is_anonymous")&&e.is_anonymous,this.allowUserSuggestion=!!e.hasOwnProperty("allow_user_suggestion")&&e.allow_user_suggestion,this.allowMultipleVotes=!!e.hasOwnProperty("allow_multiple_votes")&&e.allow_multiple_votes,this.closeAt=parseInt(e.close_at),this.voterCount=parseInt(e.voter_count),e.hasOwnProperty("voted_option_ids")&&Array.isArray(e.voted_option_ids)&&(this.votedOptionIds=e.voted_option_ids.map((function(e){return parseInt(e)}))),this.status=e.status,this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"objectify",value:function(e){var t=H.get(this._iid).PollOption,n=e.options,r=void 0===n?[]:n,a=e.data,i=void 0===a?null:a,o=e.isAnonymous,s=void 0!==o&&o,l=e.allowUserSuggestion,c=void 0!==l&&l,u=e.allowMultipleVotes,d=void 0!==u&&u,p=e.closeAt,h=void 0===p?-1:p,f=e.voterCount,m=void 0===f?0:f,_=e.votedOptionIds,y=void 0===_?[]:_,g=e.status,v=void 0===g?"":g,b=e.createdBy,E=void 0===b?"":b,w=e.createdAt,C=void 0===w?0:w,A=e.updatedAt,k=void 0===A?0:A,S={};return S.options=r.map((function(e){return t.objectify(e)})),S.data=JSON.stringify(i),S.is_anonymous=s,S.allow_user_suggestion=c,S.allow_multiple_votes=d,S.close_at=h,S.voter_count=m,S.voted_option_ids=y,S.status=v,S.created_by=E,S.created_at=C,S.updated_at=k,S}}]),e}(),fa=new WeakMap,ma=function(){function e(t){d(this,e),this.pollId=0,this.id=0,this.text="",this.voteCount=0,this.partialVoters=[],this.createdBy="",this.createdAt=0,this.updatedAt=0,fa.set(this,null),this._update(t)}return h(e,[{key:"lastVotedAt",get:function(){return fa.get(this)}},{key:"update",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.updatePollOption({pollId:n.pollId,optionId:n.id,text:e},(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).Poll)(r);t(null,a)}}))}),t)}},{key:"delete",value:function(e){var t=this,n=null,r=C(nt.parse(arguments,[new nt({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):I.get(t._iid).container.apiClient.deletePollOption({pollId:t.pollId,optionId:t.id},(function(t,n){e(t||null,null)}))}),e)}},{key:"_applyEvent",value:function(e){return this.id===e.optionId&&this.lastVotedAt<e.votedAt&&(this.voteCount=e.voteCount,fa.set(this,e.votedAt),!0)}},{key:"_update",value:function(e){var t=H.get(this._iid).User;this.pollId=parseInt(e.poll_id),this.id=parseInt(e.id),this.text=e.text,this.voteCount=parseInt(e.vote_count),e.hasOwnProperty("partial_voter_list")&&Array.isArray(e.partial_voter_list)&&(this.partialVoters=e.partial_voter_list.map((function(e){return new t(e)}))),this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"VoteAction",get:function(){return{CAST:"cast",CANCEL:"cancel"}}},{key:"objectify",value:function(e){var t=H.get(this._iid).User,n=e.pollId,r=void 0===n?0:n,a=e.id,i=void 0===a?0:a,o=e.text,s=void 0===o?"":o,l=e.voteCount,c=void 0===l?0:l,u=e.partialVoters,d=void 0===u?[]:u,p=e.createdBy,h=void 0===p?"":p,f=e.createdAt,m=void 0===f?0:f,_=e.updatedAt,y=void 0===_?0:_,g={};return g.poll_id=r,g.id=i,g.text=s,g.vote_count=c,Array.isArray(d)&&(g.partial_voter_list=d.filter((function(e){return e instanceof t})).map((function(e){return t.objectify(e)}))),g.created_by=h,g.created_at=m,g.updated_at=y,g}},{key:"get",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"number"}),new nt({type:"number"}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.getPollOption({channelUrl:e,pollId:t,optionId:n},(function(e,t){if(e)r(e,null);else{var n=new(0,H.get(a._iid).PollOption)(t);r(null,n)}}))}),r)}}]),e}(),_a=function(){function e(t){d(this,e),this.restrictionType=null,this.description=null,this.endAt=-1,t&&this._update(t)}return h(e,[{key:"_update",value:function(e){e.hasOwnProperty("restriction_type")&&(this.restrictionType=e.restriction_type),e.hasOwnProperty("description")?this.description=e.description:e.hasOwnProperty("muted_description")&&(this.description=e.muted_description),e.hasOwnProperty("end_at")?this.endAt=parseInt(e.end_at):e.hasOwnProperty("muted_end_at")&&(this.endAt=parseInt(e.muted_end_at))}}],[{key:"objectify",value:function(e){var t=e.restrictionType,n=void 0===t?null:t,r=e.description,a=void 0===r?null:r,i=e.endAt,o=void 0===i?-1:i,s={};return s.restriction_type=n,s.description=a,s.end_at=o,s}}]),e}(),ya=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return h(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==t.metaDataValues.length>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,I.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),(function(n,r){var a=null;if(!n){var i=H.get(t._iid).User,o=String(r.next);t._token=o,t.hasNext=!!o,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(nt.error,null)}),e)}}]),e}(),ga=new WeakMap,va=function(){function e(t){d(this,e),this.isLoading=!1,ga.set(this,t)}return h(e,[{key:"prev",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,(function(r){var o,s=H.get(i._iid).BaseChannel,l=C(nt.parse(a,[new nt({type:"number"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"function"})]),5);if(o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],o)r(o,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var c=ga.get(i);I.get(i._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return s.buildMessage(e,c)}));i.isLoading=!1,r(null,t)})).catch((function(e){i.isLoading=!1,r(e,null)}))}}),r)}},{key:"next",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,(function(r){var o,s=H.get(i._iid).BaseChannel,l=C(nt.parse(a,[new nt({type:"number"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"function"})]),5);if(o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],o)r(o,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var c=ga.get(i);I.get(i._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return s.buildMessage(e,c)}));i.isLoading=!1,r(null,t)})).catch((function(e){i.isLoading=!1,r(e,null)}))}}),r)}},{key:"load",value:function(e,t,n,r,a){var i=arguments,o=this;return le(this._iid,(function(a){var s,l=H.get(o._iid).BaseChannel,c=C(nt.parse(i,[new nt({type:"number"}),new nt({type:"number"}),new nt({type:"number"}),new nt({type:"boolean"}),new nt({type:"callback"})]),6);if(s=c[0],e=c[1],t=c[2],n=c[3],r=c[4],a=c[5],s)a(s,null);else if(o.isLoading)a(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{o.isLoading=!0;var u=ga.get(o);I.get(o._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return l.buildMessage(e,u)}));o.isLoading=!1,a(null,t)})).catch((function(e){o.isLoading=!1,a(e,null)}))}}),a)}}]),e}(),ba=function(){function e(t){var n=this;if(d(this,e),this.state=0,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t((function(e){0===n.state&&(n.state=1,n._value=e)}),(function(e){0===n.state&&(n.state=2,n._reason=e)}))}return h(e,[{key:"length",get:function(){return 1}},{key:"then",value:function(t,n){var r=this,a=this;switch(this.state){case 0:setTimeout((function(){return r.then(t,n)}),100);break;case 1:t&&"function"==typeof t&&(a=t(this._value));break;case 2:n&&"function"==typeof n&&(a=n(this._reason))}return a instanceof e?a:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.catch(t)}),100);break;case 1:break;case 2:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.finally(t)}),100);break;case 1:case 2:r=t()}return r instanceof e?r:this}}],[{key:"all",value:function(t){return new e((function(n,r){if(Array.isArray(t)||"string"==typeof t)if(t.length>0){for(var a=[],i=0;i<t.length;i++)t[i]instanceof e?a.push(t[i]):a.push(e.resolve(t[i]));var o=new Array(a.length).fill(null),s=a.length,l=function(e,t,a){t?r(t):(s--,o[e]=a,s<=0&&n(o))};a.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(u(t)," ").concat(t," is not iterable")))}))}},{key:"resolve",value:function(t){return new e((function(e){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}}]),e}(),Ea=function(){"undefined"==typeof Promise&&("undefined"!=typeof window?window.Promise=ba:void 0!==n.g?n.g.Promise=ba:"undefined"!=typeof self?self.Promise=ba:"undefined"!=typeof globalThis&&(globalThis.Promise=ba)),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},wa=3e5,Ca=null,Aa={},ka=!1,Sa=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),Ea();var r=!1;if((n.newInstance||!Ca||Ca&&n.appId!==Ca.getApplicationId()&&Ca.getConnectionState()===Ca.ConnectionState.CLOSED)&&(r=!0,Ca=this),r){try{if(!n.hasOwnProperty("appId"))return X.warn("Must be set appId."),Ca=null,null}catch(e){return X.warn("Must be set appId."),Ca=null,null}var a=Bn.create();Object.defineProperty(this,"_iid",{get:function(){return a}}),Aa[a]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new rt(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:xt.MessageTypeFilter},this.GroupChannelFilter=Gn,this.MessageFilter=Fe,this.GroupChannelCollection={GroupChannelOrder:We},this.MessageCollection={MessageCollectionInitPolicy:Pe},this.CollectionEventSource=Ce,this._currentUserId=null;var i={User:Nt,Member:$n,RestrictedUser:er,GroupChannel:Xn,OpenChannel:sr,UserMessage:fr,FileMessage:_r,AdminMessage:yr,GroupChannelListQuery:Sr,MemberListQuery:Nr,GroupChannelParams:Kr,OpenChannelParams:Wr,BaseMessageParams:pr,UserMessageParams:hr,FileMessageParams:mr,ScheduledUserMessageParams:Yr,GroupChannelTotalUnreadMessageCountParams:Qr,MessageRetrievalParams:Jr,MessageListParams:Xr,ThreadedMessageListParams:$r,MessageChangeLogsParams:Zr,GroupChannelChangeLogsParams:ea,PollParams:ta,PollRetrievalParams:na,MessageMetaArray:ur,UserEventHandler:aa,SessionHandler:at,ChannelHandler:ia,ConnectionHandler:ra,AppleCriticalAlertOptions:cr,Poll:pa,PollOption:ma},o={SessionManager:it,BaseChannel:xt,BaseMessage:St,UserListQuery:ya,ApplicationUserListQuery:wr,BannedUserListQuery:Cr,BlockedUserListQuery:Ar,FriendListQuery:kr,MutedUserListQuery:Or,OpenChannelListQuery:Tr,OperatorListQuery:xr,ParticipantListQuery:Pr,MessageListQuery:va,PreviousMessageListQuery:Fr,MessageSearchQuery:Rr,PublicGroupChannelListQuery:jr,PollListQuery:Br,PollVoterListQuery:qr,ScheduledUserMessage:gr,ThreadInfo:la,ThreadInfoUpdateEvent:vr,OGMetaData:ca,OGImage:ua,Plugin:da,Command:lt,Sender:Zn,ReadStatus:oa,Reaction:sa,ReactionEvent:Et,Emoji:rr,EmojiCategory:nr,EmojiContainer:tr,PollDetails:ha,PollUpdateEvent:br,PollVoteEvent:Er,RestrictionInfo:_a,FileMessageQueue:Ft},s=new H(this._iid,c(c({},i),o));this.BaseMessage={ReplyType:St.ReplyType,getMessage:s.BaseMessage.getMessage.bind(s.BaseMessage)},Object.keys(s).forEach((function(e){i[e]&&(t[e]=s[e])}));var l={encrypt:function(e){return e},decrypt:function(e){return e}};I.create(a,{appId:n.appId,pinger:new Z(this),apiClient:new ue(this),wsAdapter:new tt(this),commandHandler:new Mt(this),onlineDetector:new ot(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:O.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,nestdb:null,currentUserId:null,localCacheEnabled:"boolean"==typeof n.localCacheEnabled&&n.localCacheEnabled,localCacheLock:new $,debugCache:!1,encryption:l,store:new xn({encryption:l}),preference:null,auth:new j,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(O.SDK_VERSION,"/").concat(t,"/").concat(n)},sessionManager:new s.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1,autoResendQueue:[],isProcessingAutoResend:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=wa&&(this._websocketResponseTimeout=e)},includePollDetails:!1},fe.of(a).addObserver({onConnect:function(){t.isCacheEnabled&&!t.getIsProcessingAutoResend()&&(0===t.getAutoResendQueue().length?$e._processPendingMessages(t).then((function(){$e._processNextAutoResend(t)})):$e._processNextAutoResend(t))},onDisconnect:function(){}})}return Ca}return h(e,[{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return I.get(this._iid).container.appInfo}},{key:"isCacheEnabled",get:function(){return I.get(this._iid).container.localCacheEnabled}},{key:"ekey",get:function(){var e=I.get(this._iid).container.auth;return e?e.eKey:""}},{key:"getApplicationId",value:function(){return I.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return ka}},{key:"setDebugMode",value:function(e){ka=e,X.mode=e?X.Mode.DEBUG:X.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return I.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&I.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getAutoResendQueue",value:function(){return I.get(this._iid).container.autoResendQueue}},{key:"getIsProcessingAutoResend",value:function(){return I.get(this._iid).container.isProcessingAutoResend}},{key:"setIsProcessingAutoResend",value:function(e){I.get(this._iid).set("isProcessingAutoResend",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=I.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=I.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=I.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"getMemoryStoreForDebugging",value:function(){var e=I.get(this._iid);return e.container.debugCache&&e.container.store instanceof kn?e.container.store:null}},{key:"useMemoryAsDatabaseForDebugging",value:function(){var e=I.get(this._iid);e.container.debugCache=!0,e.container.store=new kn}},{key:"useAsyncStorageAsDatabase",value:function(e){var t=I.get(this._iid);t.container.store=new Dn({AsyncStorage:e,encryption:t.container.encryption})}},{key:"initializeDatabase",value:function(e,t){var n=this,r=I.get(this._iid),a=r.container,i=a.appId,o=a.nestdb,s=a.store,l=a.localCacheEnabled;return le(this._iid,(function(t){if(l)if(o)t(null);else{var a=r.container.nestdb=new Hn({name:"sendbird=".concat(i,"-").concat(e,".db"),version:1,store:s});a.on("upgrade",(function(e,t){switch(e){case 0:a.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[_e.NAME_ALPHABETICAL,_e.CHRONOLOGICAL,_e.LATEST_LAST_MESSAGE]},{collectionName:"SucceededMessage",keyName:"messageId",keyHash:function(e,t){return Math.floor(parseInt(e)/t)},index:[ye.LATEST]},{collectionName:"UnsentMessage",keyName:"reqId",index:[ye.LATEST_UNSENT]}]).then((function(){return t()})).catch((function(e){throw e}));break;default:t()}})),a.on("error",(function(e){X.error("Database initialize failed with an error: ",e),t(e)})),a.on("success",(function(){r.container.currentUserId=e,new bt({iid:n._iid,collection:a.collection("GroupChannel")}),new Ae({iid:n._iid,collections:{succeeded:a.collection("SucceededMessage"),unsent:a.collection("UnsentMessage")}}),X.debug("Database initialize succeeded."),t(null)})),a.open()}else r.container.currentUserId=e,new bt({iid:n._iid,collection:null}),new Ae({iid:n._iid,collections:{succeeded:null,unsent:null}}),t(null)}),t)}},{key:"clearDatabase",value:function(e){var t=I.get(this._iid),n=t.container.nestdb;return le(this._iid,(function(e){if(n){var r=null;n.close(),n.reset().then((function(){X.debug("Database clear succeeded."),t.container.nestdb=null})).catch((function(e){X.error("Database clear failed with an error: ",e),r=e})).finally((function(){return e(r)}))}else e(null)}),e)}},{key:"connect",value:function(e,t,n,r,a){var i=this,o=I.get(this._iid),s=o.container,l=s.wsAdapter,c=s.onlineDetector,u=s.localCacheEnabled;o.remove("firstConnectedAt"),c&&c.start();var d=null,p=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new nt({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new nt({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new nt({type:"callback"})]),6);return d=p[0],e=p[1],t=p[2],n=p[3],r=p[4],a=p[5],le(this._iid,(function(a){if(d)a(d,null);else if(i.customApiHost=n,i.customWsHost=r,i.connecting=!0,i.reconnecting=!1,i.isReconnectingOnError=!1,i.reconnectTimer&&(clearTimeout(i.reconnectTimer),i.reconnectTimer=null,i.onReconnectTimerCancel=null),i.getConnectionState()===i.ConnectionState.OPEN&&i.currentUser&&i.currentUser.userId===e)i.connecting=!1,a(null,i.currentUser);else if(u&&(i._currentUserId=e),i.connectionCallbacks.push(a),1===i.connectionCallbacks.length){l.disconnect({clearSession:!0,err:null},null);var s=o.container,c=s.nestdb,p=s.localCacheLock;c?l.connect(e,t):p.lock((function(n){i.initializeDatabase(e).then((function(){n(),l.connect(e,t)})).catch((function(e){o.container.localCacheEnabled=!1,n(),a(e,null)}))}))}}),a)}},{key:"reconnect",value:function(){var e=this,t=I.get(this._iid).container,n=t.wsAdapter,r=t.auth,a=t.localCacheLock;if(r.sessionKey&&this.currentUser){var i=!0;return n.reconnectCount>0&&(i=!1),a.lock((function(t){n.disconnect({clearSession:!1,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},null),n.reconnectCount=0,n.reconnect(e.currentUser.userId,i),t()})),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return le(this._iid,(function(e){var n=I.get(t._iid).container,r=n.localCacheLock,a=n.wsAdapter,i=n.onlineDetector;i&&i.stop(),r.lock((function(n){a.disconnect({clearSession:!0,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},(function(){t.clearDatabase((function(){n(),e(null)}))}))}))}),e)}},{key:"setBackgroundState",value:function(){var e=I.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new F("Websocket connection failed.",F.WEBSOCKET_CONNECTION_FAILED)},null),fe.of(this._iid).invokeDisconnect()):e.set("closedByGoingBackground",!1))}},{key:"isInBackground",get:function(){return I.get(this._iid).container.isInBackground}},{key:"setForegroundState",value:function(){var e=I.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,a=t.isInBackground,i=t.closedByGoingBackground;a&&r&&(e.set("isInBackground",!1),i&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){I.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){I.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=I.get(this._iid).container,r=n.extensions;n.supportedExtensionKeys.indexOf(e)>-1&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(0,H.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,H.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,H.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,H.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(0,H.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return le(this._iid,(function(t){n.ConnectionManager.ready((function(r,a){if(r)t(r,null);else{var i=I.get(n._iid).container,o=i.wsAdapter,s=i.ackStateMap;if(null==o||null==o.client||o.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,c={handler:t,timer:setTimeout((function(){t(new F("Command received no ack.",F.ACK_TIMEOUT),null),delete s[l]}),n.Options.websocketResponseTimeout)};s[l]=c,o.client.send(e,(function(e){e&&(clearTimeout(c.timer),t(e,null))}))}else o.client.send(e,t)}}),!1)}),t).catch((function(e){X.error(e)}))}},{key:"setSessionHandler",value:function(e){I.get(this._iid).container.sessionManager.setHandler(e)}},{key:"addUserEventHandler",value:function(e,t){t instanceof H.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof H.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof H.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:"string",nullable:!0}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},(function(a,i){var o=null;a||(r.currentUser&&(e&&(r.currentUser.nickname=e),t&&(r.currentUser.plainProfileUrl=t)),o=r.currentUser),n(a,o)}))}),n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:"file",nullable:!0}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},(function(t,a){var i=null;t||(r.currentUser&&(e&&(r.currentUser.nickname=e),a.profile_url&&(r.currentUser.plainProfileUrl=a.profile_url)),i=r.currentUser),n(t,i)}))}),n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},(function(r,a){var i=null;r||(n.currentUser&&e&&(n.currentUser._preferredLanguages=e),i=n.currentUser),t(r,i)}))}),t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?I.get(n._iid).container.apiClient.registerGCMPushToken({token:e},(function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.GCMPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):n.currentUser?I.get(n._iid).container.apiClient.unregisterGCMPushToken({token:e},(function(e,n){t(e,null)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?I.get(n._iid).container.apiClient.registerAPNSPushToken({token:e},(function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.APNSPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e.length>0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):n.currentUser?I.get(n._iid).container.apiClient.unregisterAPNSPushToken({token:e},(function(e,n){t(e,null)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.unregisterAllPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:"array",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new nt({type:"callback"})]),5);i=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var s=H.get(this._iid).GroupChannelChangeLogsParams,l=null;if(i){var u=C(nt.parse(arguments,[new nt({type:"string",nullable:!0}),new nt({type:s,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),4);i=u[0],e=u[1],l=u[2],r=u[3]}else(l=new s).customTypes=t,l.includeEmpty=n,l.includeFrozen=!0;return le(this._iid,(function(t){i?t(i,null):I.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:null,token:e},l)).then((function(e){var n=H.get(a._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),i=e.deleted,o=e.has_more,s=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:o,token:s})})).catch((function(e){t(e,null)}))}),r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"number",constraint:function(e){return e>=0}}),new nt({type:"array",optional:!0,nullable:!0,defaultValue:null}),new nt({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new nt({type:"callback"})]),5);i=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var s=H.get(this._iid).GroupChannelChangeLogsParams,l=null;if(i){var u=C(nt.parse(arguments,[new nt({type:"number",constraint:function(e){return e>=0}}),new nt({type:s,constraint:function(e){return e._validate()}}),new nt({type:"callback"})]),4);i=u[0],e=u[1],l=u[2],r=u[3]}else(l=new s).customTypes=t,l.includeEmpty=n,l.includeFrozen=!0;return le(this._iid,(function(t){i?t(i,null):I.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:e,token:null},l)).then((function(e){var n=H.get(a._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),i=e.deleted,o=e.has_more,s=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:o,token:s})})).catch((function(e){t(e,null)}))}),r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getChannelInvitationPreference({},(function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)}))}),e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"boolean"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},(function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)}))}),t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getDoNotDisturb({},(function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)}))}),e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,a,i,o){var s=this,l=null,c=C(nt.parse(arguments,[new nt({type:"boolean"}),new nt({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new nt({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new nt({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new nt({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new nt({type:"string"}),new nt({type:"callback"})]),8);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],a=c[5],i=c[6],o=c[7],le(this._iid,(function(o){l?o(l,null):I.get(s._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:a,timezone:i},(function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),o(e,n)}))}),o)}},{key:"getSnoozePeriod",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getSnoozePeriod({},(function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)}))}),e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var a=this,i=null,o=C(nt.parse(arguments,[new nt({type:"boolean"}),new nt({type:"number",constraint:function(e){return e>0}}),new nt({type:"number",constraint:function(e){return e>0}}),new nt({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):I.get(a._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},(function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)}))}),r)}},{key:"blockUser",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new nt({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.blockUser({blockedUserId:e},(function(e,n){var r=null;e||(r=new Nt(n)),t(e,r)}))}),t)}},{key:"unblockUser",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new nt({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.unblockUser({unblockedUserId:e},(function(e,n){t(e,null)}))}),t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getPushTriggerOption({},(function(t,n){e(t,n?n.push_trigger_option:null)}))}),e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return le(this._iid,(function(t){Object.keys(n.PushTriggerOption).map((function(e){return n.PushTriggerOption[e]})).indexOf(e)>-1?I.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},(function(e,n){t(e,n?n.push_trigger_option:null)})):t(nt.error,null)}),t)}},{key:"getGroupChannelCount",value:function(e,t){var n=this,r=H.get(this._iid).GroupChannel,a=null,i=C(nt.parse(arguments,[new nt({type:r.MemberStateFilter,optional:!0,defaultValue:r.MemberStateFilter.ALL}),new nt({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):I.get(n._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},(function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)}))}),t)}},{key:"getTotalUnreadChannelCount",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getTotalUnreadChannelCount({},(function(t,n){var r=null;t||(r=parseInt(n.unread_count)),e(t,r)}))}),e)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n=this,r=H.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadMessageCountParams,o=null,s=C(nt.parse(arguments,[new nt({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))||e instanceof i}}),new nt({type:"callback"})]),3);return o=s[0],e=s[1],t=s[2],le(this._iid,(function(t){if(o)t(o,null);else{var r=a.SuperChannelFilter.ALL;if(e instanceof i){var s=e;e=s.channelCustomTypesFilter,r=s.superChannelFilter}I.get(n._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:r},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getUnreadItemCount",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return Object.keys(Xn.UnreadItemKey).map((function(e){return Xn.UnreadItemKey[e]})).indexOf(e)>-1}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){if(r)t(r,null);else{var a=e.filter((function(t,n){return e.indexOf(t)===n}));I.get(n._iid).container.apiClient.getUnreadItemCount({keys:a},(function(e,n){t(e,n)}))}}),t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=I.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=I.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var t=0;return Object.keys(e.custom_types).forEach((function(n){t+=e.custom_types[n]})),t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=I.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r=this,a=null,i=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new nt({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):I.get(r._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},(function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}}))}),n)}},{key:"getPushTemplate",value:function(e){var t=this;return le(this._iid,(function(e){I.get(t._iid).container.apiClient.getPushTemplate({},(function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)}))}),e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return le(this._iid,(function(t){[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?I.get(n._iid).container.apiClient.setPushTemplate({templateName:e},(function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)})):t(nt.error,null)}),t)}},{key:"markAsReadAll",value:function(e){var t=this;return le(this._iid,(function(e){var n=H.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new F("MarkAsRead rate limit exceeded.",F.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,I.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},(function(a,i){a||Object.keys(n.cachedChannels).forEach((function(e){t.currentUser&&n.cachedChannels[e].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[e]._setGroupChannelUnreadCount(0,0)})),e(a,null)})))}),e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){if(r)t(r,null);else{var a=(new Date).getTime();I.get(n._iid).container.apiClient.markAsReadAll({channelUrls:e},(function(r,i){r||e.forEach((function(e){Xn.cachedChannels[e]&&(n.currentUser&&Xn.cachedChannels[e].updateReadReceipt(n.currentUser.userId,a),Xn.cachedChannels[e]._setGroupChannelUnreadCount(0,0))})),t(r,null)}))}}),t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&H.get(this._iid).GroupChannel.getChannel(e,O.INTERNAL_CALL,(function(e,t){e||t.markAsDelivered()}))}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string",optional:!0,defaultValue:null}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getFriendChangeLogsByToken({token:e},(function(e,r){var a=null;if(!e){var i=H.get(n._iid).User;a={updatedUsers:r.updated.map((function(e){return new i(e)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next}}t(e,a)}))}),t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return e.hasOwnProperty("friendDiscoveryKey")}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},(function(e,n){t(e,n)}))}),t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},(function(e,n){t(e,n)}))}),t)}},{key:"addFriends",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.addFriends({userIds:e},(function(e,r){var a=null;if(!e){var i=H.get(n._iid).User;a=r.users.map((function(e){return new i(e)}))}t(e,a)}))}),t)}},{key:"deleteFriend",value:function(e,t){var n=null,r=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.deleteFriends({userIds:e},(function(e,n){t(e,n)}))}),t)}},{key:"getAllEmoji",value:function(e){var t=this,n=null,r=C(nt.parse(arguments,[new nt({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):I.get(t._iid).container.apiClient.getAllEmoji((function(n,r){if(n)e(n,null);else{var a=new(0,H.get(t._iid).EmojiContainer)(r);e(null,a)}}))}),e)}},{key:"getEmojiCategory",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"number",constraint:function(e){return e>=0}}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getEmojiCategory({categoryId:e},(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).EmojiCategory)(r);t(null,a)}}))}),t)}},{key:"getEmoji",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"string"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.getEmoji({emojiKey:e},(function(e,r){if(e)t(e,null);else{var a=new(0,H.get(n._iid).Emoji)(r);t(null,a)}}))}),t)}},{key:"getAllowFriendDiscovery",value:function(e){var t=this,n=null,r=C(nt.parse(arguments,[new nt({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):I.get(t._iid).container.apiClient.getAllowFriendDiscovery((function(t,n){var r=n.allow_friend_discovery;t?e(t,null):e(null,r)}))}),e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n=this,r=null,a=C(nt.parse(arguments,[new nt({type:"boolean"}),new nt({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):I.get(n._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},(function(n,r){n?t(n,null):t(null,e)}))}),t)}},{key:"clearCachedMessages",value:function(e){var t=Ae.of(this._iid);return t?Promise.all(e.map((function(e){return t.clearByChannelUrl(e)}))):Promise.resolve([])}},{key:"_getCurrentUserDataKey",value:function(){return"sendbird:".concat(this._currentUserId,"@currentUserData")}},{key:"_populateVaultFromCurrentUserData",value:function(e){var t=I.get(this._iid),n=t.container.auth,r=H.get(this._iid).User,a=e.currentUser,i=e.maxUnreadCountOfSuperGroupChannel,o=e.profileImageEncryption,s=e.sessionKey,l=e.eKey,c=e.appInfo,u=e.connectedAt,d=e.firstConnectedAt,p=e.concurrentCallLimit,h=e.backOffDelay;a&&(this.currentUser=r.buildFromSerializedData(a)),i&&t.set("maxUnreadCountOfSuperGroupChannel",i),o&&t.set("profileImageEncryption",o),n?(s&&(n.sessionKey=s),l&&(n.ekey=l)):X.debug("Auth should have been created when populating current user data."),c&&t.set("appInfo",new et(c)),u&&t.set("connectedAt",u),d&&t.set("firstConnectedAt",d),p&&t.set("concurrentCallLimit",p),h&&t.set("backOffDelay",h)}}],[{key:"version",get:function(){return O.SDK_VERSION}},{key:"LogLevel",get:function(){return X.supportedLogLevels}},{key:"getInstance",value:function(e){return e?Aa[e]:Ca}},{key:"getLogLevel",value:function(){return X.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(X.supportedLogLevels);if(t.includes(e))X.logLevel=e;else{X.logLevel=X.defaultLogLevel;var n=t.map((function(e){return"'".concat(e,"'")})).join(", ");X.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(X.defaultLogLevel,"`."))}}}]),e}();return Sa}(n(9644),n(2707),n(2326))},2707:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},2326:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},8901:(e,t,n)=>{var r=n(6062),a=n(629);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1472:(e,t,n)=>{var r=n(6062),a=n(3770);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},6939:(e,t,n)=>{var r=n(6062),a=n(1330);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},9801:(e,t,n)=>{var r=n(6062),a=n(7747);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},6206:(e,t,n)=>{var r=n(6062),a=n(8119);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},3261:(e,t,n)=>{var r=n(6062),a=n(9082);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4918:(e,t,n)=>{var r=n(6062),a=n(5955);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},7966:(e,t,n)=>{var r=n(6062),a=n(5889);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},504:(e,t,n)=>{var r=n(6062),a=n(3796);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1846:(e,t,n)=>{var r=n(6062),a=n(1027);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},2965:(e,t,n)=>{var r=n(6062),a=n(6662);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},209:(e,t,n)=>{var r=n(6062),a=n(5582);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},2563:(e,t,n)=>{var r=n(6062),a=n(1456);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},7951:(e,t,n)=>{var r=n(6062),a=n(5351);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},6610:(e,t,n)=>{var r=n(6062),a=n(8587);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},2493:(e,t,n)=>{var r=n(6062),a=n(1135);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},8946:(e,t,n)=>{var r=n(6062),a=n(6977);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},8684:(e,t,n)=>{var r=n(6062),a=n(5899);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1300:(e,t,n)=>{var r=n(6062),a=n(9195);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1085:(e,t,n)=>{var r=n(6062),a=n(4770);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1143:(e,t,n)=>{var r=n(6062),a=n(9711);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},7078:(e,t,n)=>{var r=n(6062),a=n(7585);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},73:(e,t,n)=>{var r=n(6062),a=n(7298);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},5906:(e,t,n)=>{var r=n(6062),a=n(5206);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},8942:(e,t,n)=>{var r=n(6062),a=n(3801);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},3898:(e,t,n)=>{var r=n(6062),a=n(8451);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4934:(e,t,n)=>{var r=n(6062),a=n(2848);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},3804:(e,t,n)=>{var r=n(6062),a=n(8092);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4042:(e,t,n)=>{var r=n(6062),a=n(7392);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},8786:(e,t,n)=>{var r=n(6062),a=n(3705);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},9420:(e,t,n)=>{var r=n(6062),a=n(592);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4294:(e,t,n)=>{var r=n(6062),a=n(2774);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},5694:(e,t,n)=>{var r=n(6062),a=n(2733);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},7583:(e,t,n)=>{var r=n(6062),a=n(8212);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},243:(e,t,n)=>{var r=n(6062),a=n(3654);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},3291:(e,t,n)=>{var r=n(6062),a=n(767);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},3032:(e,t,n)=>{var r=n(6062),a=n(7546);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]),r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},6062:(e,t,n)=>{"use strict";var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function o(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],a=0;a<e.length;a++){var s=e[a],l=t.base?s[0]+t.base:s[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=o(u),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:u,updater:m(p,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function m(e,t){var n,r,a;if(t.singleton){var i=f++;n=h||(h=l(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=l(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=o(n[r]);i[a].references--}for(var l=s(e,t),c=0;c<n.length;c++){var u=o(n[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=l}}}},4896:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},659:(e,t,n)=>{"use strict";n.d(t,{default:()=>Km});var r=n(2779),a=n.n(r),i=n(9297),o=n.n(i),s=[];Object.freeze(s);var l={};function c(){return++Pe.mobxGuid}function u(e){throw d(!1,e),"X"}function d(e,t){if(!e)throw new Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is a production build."))}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}Object.freeze(l);var h=function(){};function f(e){return null!==e&&"object"==typeof e}function m(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function _(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function y(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return f(e)&&!0===e[n]}}function g(e){return e instanceof Map}function v(e){return e instanceof Set}function b(e){return e&&e.toString?e.toString():new String(e).toString()}function E(e){return null===e?null:"object"==typeof e?""+e:e}var w="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,C=Symbol("mobx administration"),A=function(){function e(e){void 0===e&&(e="Atom@"+c()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ee.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.reportObserved=function(){return je(this)},e.prototype.reportChanged=function(){Le(),function(e){e.lowestObserverState!==ee.STALE&&(e.lowestObserverState=ee.STALE,e.observers.forEach((function(t){t.dependenciesState===ee.UP_TO_DATE&&(t.isTracing!==te.NONE&&ze(t,e),t.onBecomeStale()),t.dependenciesState=ee.STALE})))}(this),Fe()},e.prototype.toString=function(){return this.name},e}(),k=y("Atom",A);function S(e,t,n){void 0===t&&(t=h),void 0===n&&(n=h);var r=new A(e);return t!==h&&rt("onBecomeObserved",r,t,undefined),n!==h&&nt(r,n),r}var N={identity:function(e,t){return e===t},structural:function(e,t){return Qt(e,t)},default:function(e,t){return Object.is(e,t)},shallow:function(e,t){return Qt(e,t,1)}},O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function I(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function x(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function D(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}var P=Symbol("mobx did run lazy initializers"),M=Symbol("mobx pending decorators"),R={},U={};function L(e,t){var n=t?R:U;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return F(this),this[e]},set:function(t){F(this),this[e]=t}})}function F(e){var t,n;if(!0!==e[P]){var r=e[M];if(r){_(e,P,!0);var a=D(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var i=I(a),o=i.next();!o.done;o=i.next()){var s=r[o.value];s.propertyCreator(e,s.prop,s.descriptor,s.decoratorTarget,s.decoratorArguments)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}}}function j(e,t){return function(){var n,r=function(r,a,i,o){if(!0===o)return t(r,a,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,M)){var s=r[M];_(r,M,T({},s))}return r[M][a]={prop:a,propertyCreator:t,descriptor:i,decoratorTarget:r,decoratorArguments:n},L(a,e)};return z(arguments)?(n=s,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function z(e){return(2===e.length||3===e.length)&&("string"==typeof e[1]||"symbol"==typeof e[1])||4===e.length&&!0===e[3]}function H(e,t,n){return dt(e)?e:Array.isArray(e)?$.array(e,{name:n}):m(e)?$.object(e,void 0,{name:n}):g(e)?$.map(e,{name:n}):v(e)?$.set(e,{name:n}):e}function B(e){return e}function G(e){d(e);var t=j(!0,(function(t,n,r,a,i){var o=r?r.initializer?r.initializer.call(t):r.value:void 0;zt(t).addObservableProp(n,o,e)})),n=("undefined"!=typeof process&&process.env,t);return n.enhancer=e,n}var V={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function q(e){return null==e?V:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(V);var K=G(H),W=G((function(e,t,n){return null==e||qt(e)||xt(e)||Rt(e)||Ft(e)?e:Array.isArray(e)?$.array(e,{name:n,deep:!1}):m(e)?$.object(e,void 0,{name:n,deep:!1}):g(e)?$.map(e,{name:n,deep:!1}):v(e)?$.set(e,{name:n,deep:!1}):u(!1)})),Y=G(B),Q=G((function(e,t,n){return Qt(e,t)?t:e}));function J(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?B:H}var X={box:function(e,t){arguments.length>2&&Z("box");var n=q(t);return new Ae(e,J(n),n.name,!0,n.equals)},array:function(e,t){arguments.length>2&&Z("array");var n=q(t);return St(e,J(n),n.name)},map:function(e,t){arguments.length>2&&Z("map");var n=q(t);return new Mt(e,J(n),n.name)},set:function(e,t){arguments.length>2&&Z("set");var n=q(t);return new Lt(e,J(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&Z("object");var r=q(n);if(!1===r.proxy)return it({},e,t,r);var a=ot(r),i=gt(it({},void 0,void 0,r));return st(i,e,t,a),i},ref:Y,shallow:W,deep:K,struct:Q},$=function(e,t,n){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return K.apply(null,arguments);if(dt(e))return e;var r=m(e)?$.object(e,t,n):Array.isArray(e)?$.array(e,t):g(e)?$.map(e,t):v(e)?$.set(e,t):e;if(r!==e)return r;u(!1)};function Z(e){u("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(X).forEach((function(e){return $[e]=X[e]}));var ee,te,ne=j(!1,(function(e,t,n,r,a){var i=n.get,o=n.set,s=a[0]||{};zt(e).addComputedProp(e,t,T({get:i,set:o,context:e},s))})),re=ne({equals:N.structural}),ae=function(e,t,n){if("string"==typeof t)return ne.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return ne.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new ke(r)};ae.struct=re,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(ee||(ee={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(te||(te={}));var ie=function(e){this.cause=e};function oe(e){return e instanceof ie}function se(e){switch(e.dependenciesState){case ee.UP_TO_DATE:return!1;case ee.NOT_TRACKING:case ee.STALE:return!0;case ee.POSSIBLY_STALE:for(var t=fe(!0),n=pe(),r=e.observing,a=r.length,i=0;i<a;i++){var o=r[i];if(Se(o)){if(Pe.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return he(n),me(t),!0}if(e.dependenciesState===ee.STALE)return he(n),me(t),!0}}return _e(e),he(n),me(t),!1}}function le(e){var t=e.observers.size>0;Pe.computationDepth>0&&t&&u(!1),Pe.allowStateChanges||!t&&"strict"!==Pe.enforceActions||u(!1)}function ce(e,t,n){var r=fe(!0);_e(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Pe.runId;var a,i=Pe.trackingDerivation;if(Pe.trackingDerivation=e,!0===Pe.disableErrorBoundaries)a=t.call(n);else try{a=t.call(n)}catch(e){a=new ie(e)}return Pe.trackingDerivation=i,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=ee.UP_TO_DATE,a=0,i=e.unboundDepsCount,o=0;o<i;o++)0===(s=n[o]).diffValue&&(s.diffValue=1,a!==o&&(n[a]=s),a++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=a,e.newObserving=null,i=t.length;i--;)0===(s=t[i]).diffValue&&Re(s,e),s.diffValue=0;for(;a--;){var s;1===(s=n[a]).diffValue&&(s.diffValue=0,Me(s,e))}r!==ee.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),me(r),a}function ue(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Re(t[n],e);e.dependenciesState=ee.NOT_TRACKING}function de(e){var t=pe();try{return e()}finally{he(t)}}function pe(){var e=Pe.trackingDerivation;return Pe.trackingDerivation=null,e}function he(e){Pe.trackingDerivation=e}function fe(e){var t=Pe.allowStateReads;return Pe.allowStateReads=e,t}function me(e){Pe.allowStateReads=e}function _e(e){if(e.dependenciesState!==ee.UP_TO_DATE){e.dependenciesState=ee.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=ee.UP_TO_DATE}}var ye=0,ge=1,ve=Object.getOwnPropertyDescriptor((function(){}),"name");function be(e,t,n){var r=function(){return Ee(e,t,n||this,arguments)};return r.isMobxAction=!0,r}function Ee(e,t,n,r){var a=function(e,t,n){var r=pe();Le();var a={prevDerivation:r,prevAllowStateChanges:we(!0),prevAllowStateReads:fe(!0),notifySpy:!1,startTime:0,actionId:ge++,parentActionId:ye};return ye=a.actionId,a}();try{return t.apply(n,r)}catch(e){throw a.error=e,e}finally{!function(e){ye!==e.actionId&&u("invalid action stack. did you forget to finish an action?"),ye=e.parentActionId,void 0!==e.error&&(Pe.suppressReactionErrors=!0),Ce(e.prevAllowStateChanges),me(e.prevAllowStateReads),Fe(),he(e.prevDerivation),e.notifySpy,Pe.suppressReactionErrors=!1}(a)}}function we(e){var t=Pe.allowStateChanges;return Pe.allowStateChanges=e,t}function Ce(e){Pe.allowStateChanges=e}ve&&ve.configurable;var Ae=function(e){function t(t,n,r,a,i){void 0===r&&(r="ObservableValue@"+c()),void 0===a&&(a=!0),void 0===i&&(i=N.default);var o=e.call(this,r)||this;return o.enhancer=n,o.name=r,o.equals=i,o.hasUnreportedChange=!1,o.value=n(t,void 0,r),o}return function(e,t){function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value,(e=this.prepareNewValue(e))!==Pe.UNCHANGED&&this.setNewValue(e)},t.prototype.prepareNewValue=function(e){if(le(this),vt(this)){var t=Et(this,{object:this,type:"update",newValue:e});if(!t)return Pe.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Pe.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),wt(this)&&At(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return bt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ct(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return E(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(A),ke=(y("ObservableValue",Ae),function(){function e(e){this.dependenciesState=ee.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ee.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+c(),this.value=new ie(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=te.NONE,d(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+c(),e.set&&(this.setter=be(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?N.structural:N.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){e.lowestObserverState===ee.UP_TO_DATE&&(e.lowestObserverState=ee.POSSIBLY_STALE,e.observers.forEach((function(t){t.dependenciesState===ee.UP_TO_DATE&&(t.dependenciesState=ee.POSSIBLY_STALE,t.isTracing!==te.NONE&&ze(t,e),t.onBecomeStale())})))}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.get=function(){this.isComputing&&u("Cycle detected in computation "+this.name+": "+this.derivation),0!==Pe.inBatch||0!==this.observers.size||this.keepAlive?(je(this),se(this)&&this.trackAndCompute()&&function(e){e.lowestObserverState!==ee.STALE&&(e.lowestObserverState=ee.STALE,e.observers.forEach((function(t){t.dependenciesState===ee.POSSIBLY_STALE?t.dependenciesState=ee.STALE:t.dependenciesState===ee.UP_TO_DATE&&(e.lowestObserverState=ee.UP_TO_DATE)})))}(this)):se(this)&&(this.warnAboutUntrackedRead(),Le(),this.value=this.computeValue(!1),Fe());var e=this.value;if(oe(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(oe(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){d(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else d(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===ee.NOT_TRACKING,n=this.computeValue(!0),r=t||oe(e)||oe(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Pe.computationDepth++,e)t=ce(this,this.derivation,this.scope);else if(!0===Pe.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new ie(e)}return Pe.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(ue(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,a=void 0;return function(e,t){void 0===t&&(t=l);var n,r=t&&t.name||e.name||"Autorun@"+c();if(t.scheduler||t.delay){var a=et(t),i=!1;n=new Be(r,(function(){i||(i=!0,a((function(){i=!1,n.isDisposed||n.track(o)})))}),t.onError,t.requiresObservable)}else n=new Be(r,(function(){this.track(o)}),t.onError,t.requiresObservable);function o(){e(n)}return n.schedule(),n.getDisposer()}((function(){var i=n.get();if(!r||t){var o=pe();e({type:"update",object:n,newValue:i,oldValue:a}),he(o)}r=!1,a=i}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return E(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}()),Se=y("ComputedValue",ke),Ne=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Oe={};function Te(){return"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:Oe}var Ie,xe=!0,De=!1,Pe=((Ie=Te()).__mobxInstanceCount>0&&!Ie.__mobxGlobals&&(xe=!1),Ie.__mobxGlobals&&Ie.__mobxGlobals.version!==(new Ne).version&&(xe=!1),xe?Ie.__mobxGlobals?(Ie.__mobxInstanceCount+=1,Ie.__mobxGlobals.UNCHANGED||(Ie.__mobxGlobals.UNCHANGED={}),Ie.__mobxGlobals):(Ie.__mobxInstanceCount=1,Ie.__mobxGlobals=new Ne):(setTimeout((function(){De||u("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ne));function Me(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Re(e,t){e.observers.delete(t),0===e.observers.size&&Ue(e)}function Ue(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Pe.pendingUnobservations.push(e))}function Le(){Pe.inBatch++}function Fe(){if(0==--Pe.inBatch){Ve();for(var e=Pe.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ke&&n.suspend())}Pe.pendingUnobservations=[]}}function je(e){var t=Pe.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&Pe.inBatch>0&&Ue(e),!1)}function ze(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===te.BREAK){var n=[];He(lt(e),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ke?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function He(e,t,n){t.length>=1e3?t.push("(and many more)"):(t.push(""+new Array(n).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return He(e,t,n+1)})))}var Be=function(){function e(e,t,n,r){void 0===e&&(e="Reaction@"+c()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=ee.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+c(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=te.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pe.pendingReactions.push(this),Ve())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Le(),this._isScheduled=!1,se(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(e){this.reportExceptionInDerivation(e)}}Fe()}},e.prototype.track=function(e){if(!this.isDisposed){Le(),this._isRunning=!0;var t=ce(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ue(this),oe(t)&&this.reportExceptionInDerivation(t.cause),Fe()}},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Pe.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Pe.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),Pe.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Le(),ue(this),Fe()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[C]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=ht(e);if(!r)return u(!1);r.isTracing===te.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?te.BREAK:te.LOG}(this,e)},e}(),Ge=function(e){return e()};function Ve(){Pe.inBatch>0||Pe.isRunningReactions||Ge(qe)}function qe(){Pe.isRunningReactions=!0;for(var e=Pe.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,a=n.length;r<a;r++)n[r].runReaction()}Pe.isRunningReactions=!1}var Ke=y("Reaction",Be);function We(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Ye(){u(!1)}function Qe(e){return function(t,n,r){if(r){if(r.value)return{value:be(e,r.value),enumerable:!1,configurable:!0,writable:!0};var a=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return be(e,a.call(this))}}}return Je(e).apply(this,arguments)}}function Je(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){_(this,n,Xe(e,t))}})}}var Xe=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?be(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?be(e,t):1===arguments.length&&"string"==typeof e?Qe(e):!0!==r?Qe(t).apply(null,arguments):void _(e,t,be(e.name||t,n.value,this))};function $e(e,t,n){_(e,t,be(t,n.bind(e)))}Xe.bound=function(e,t,n,r){return!0===r?($e(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return $e(this,t,n.value||n.initializer.call(this)),this[t]},set:Ye}:{enumerable:!1,configurable:!0,set:function(e){$e(this,t,e)},get:function(){}}};var Ze=function(e){return e()};function et(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ze}function tt(e,t,n){void 0===n&&(n=l);var r,a,i,o=n.name||"Reaction@"+c(),s=Xe(o,n.onError?(r=n.onError,a=t,function(){try{return a.apply(this,arguments)}catch(e){r.call(this,e)}}):t),u=!n.scheduler&&!n.delay,d=et(n),p=!0,h=!1,f=n.compareStructural?N.structural:n.equals||N.default,m=new Be(o,(function(){p||u?_():h||(h=!0,d(_))}),n.onError,n.requiresObservable);function _(){if(h=!1,!m.isDisposed){var t=!1;m.track((function(){var n=e(m);t=p||!f(i,n),i=n})),p&&n.fireImmediately&&s(i,m),p||!0!==t||s(i,m),p&&(p=!1)}}return m.schedule(),m.getDisposer()}function nt(e,t,n){return rt("onBecomeUnobserved",e,t,n)}function rt(e,t,n,r){var a="function"==typeof r?Kt(t,n):Kt(t),i="function"==typeof r?r:n,o=e+"Listeners";return a[o]?a[o].add(i):a[o]=new Set([i]),"function"!=typeof a[e]?u(!1):function(){var e=a[o];e&&(e.delete(i),0===e.size&&delete a[o])}}function at(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.computedConfigurable,a=e.disableErrorBoundaries,i=e.reactionScheduler,o=e.reactionRequiresObservable,s=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((Pe.pendingReactions.length||Pe.inBatch||Pe.isRunningReactions)&&u("isolateGlobalState should be called before MobX is running any reactions"),De=!0,xe&&(0==--Te().__mobxInstanceCount&&(Te().__mobxGlobals=void 0),Pe=new Ne)),void 0!==t){var l=void 0;switch(t){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:u("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Pe.enforceActions=l,Pe.allowStateChanges=!0!==l&&"strict"!==l}void 0!==n&&(Pe.computedRequiresReaction=!!n),void 0!==o&&(Pe.reactionRequiresObservable=!!o),void 0!==s&&(Pe.observableRequiresReaction=!!s,Pe.allowStateReads=!Pe.observableRequiresReaction),void 0!==r&&(Pe.computedConfigurable=!!r),void 0!==a&&(!0===a&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Pe.disableErrorBoundaries=!!a),i&&function(e){var t=Ge;Ge=function(n){return e((function(){return t(n)}))}}(i)}function it(e,t,n,r){var a=ot(r=q(r));return F(e),zt(e,r.name,a.enhancer),t&&st(e,t,n,a),e}function ot(e){return e.defaultDecorator||(!1===e.deep?Y:K)}function st(e,t,n,r){var a,i;Le();try{var o=w(t);try{for(var s=I(o),l=s.next();!l.done;l=s.next()){var c=l.value,u=Object.getOwnPropertyDescriptor(t,c),d=(n&&c in n?n[c]:u.get?ne:r)(e,c,u,!0);d&&Object.defineProperty(e,c,d)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}}finally{Fe()}}function lt(e,t){return ct(Kt(e,t))}function ct(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(ct)),r}function ut(e,t){return null!=e&&(void 0!==t?!!qt(e)&&e[C].values.has(t):qt(e)||!!e[C]||k(e)||Ke(e)||Se(e))}function dt(e){return 1!==arguments.length&&u(!1),ut(e)}function pt(e,t,n){if(2!==arguments.length||Ft(e))if(qt(e)){var r=e[C];r.values.get(t)?r.write(t,n):r.addObservableProp(t,n,r.defaultEnhancer)}else if(Rt(e))e.set(t,n);else if(Ft(e))e.add(t);else{if(!xt(e))return u(!1);"number"!=typeof t&&(t=parseInt(t,10)),d(t>=0,"Not a valid index: '"+t+"'"),Le(),t>=e.length&&(e.length=t+1),e[t]=n,Fe()}else{Le();var a=t;try{for(var i in a)pt(e,i,a[i])}finally{Fe()}}}function ht(e){switch(e.length){case 0:return Pe.trackingDerivation;case 1:return Kt(e[0]);case 2:return Kt(e[0],e[1])}}function ft(e,t){void 0===t&&(t=void 0),Le();try{return e.apply(t)}finally{Fe()}}function mt(e){return e[C]}function _t(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e}Object.create(Error.prototype);var yt={has:function(e,t){if(t===C||"constructor"===t||t===P)return!0;var n=mt(e);return _t(t)?n.has(t):t in e},get:function(e,t){if(t===C||"constructor"===t||t===P)return e[t];var n=mt(e),r=n.values.get(t);if(r instanceof A){var a=r.get();return void 0===a&&n.has(t),a}return _t(t)&&n.has(t),e[t]},set:function(e,t,n){return!!_t(t)&&(pt(e,t,n),!0)},deleteProperty:function(e,t){return!!_t(t)&&(mt(e).remove(t),!0)},ownKeys:function(e){return mt(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return u("Dynamic observable objects cannot be frozen"),!1}};function gt(e){var t=new Proxy(e,yt);return e[C].proxy=t,t}function vt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function bt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Et(e,t){var n=pe();try{for(var r=D(e.interceptors||[]),a=0,i=r.length;a<i&&(d(!(t=r[a](t))||t.type,"Intercept handlers should return nothing or a change object"),t);a++);return t}finally{he(n)}}function wt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Ct(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function At(e,t){var n=pe(),r=e.changeListeners;if(r){for(var a=0,i=(r=r.slice()).length;a<i;a++)r[a](t);he(n)}}var kt={get:function(e,t){return t===C?e[C]:"length"===t?e[C].getArrayLength():"number"==typeof t?Ot.get.call(e,t):"string"!=typeof t||isNaN(t)?Ot.hasOwnProperty(t)?Ot[t]:e[t]:Ot.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t&&e[C].setArrayLength(n),"number"==typeof t&&Ot.set.call(e,t,n),"symbol"==typeof t||isNaN(t)?e[t]=n:Ot.set.call(e,parseInt(t),n),!0},preventExtensions:function(e){return u("Observable arrays cannot be frozen"),!1}};function St(e,t,n,r){void 0===n&&(n="ObservableArray@"+c()),void 0===r&&(r=!1);var a,i,o,s=new Nt(n,t,r);a=s.values,i=C,o=s,Object.defineProperty(a,i,{enumerable:!1,writable:!1,configurable:!0,value:o});var l=new Proxy(s.values,kt);if(s.proxy=l,e&&e.length){var u=we(!0);s.spliceWithArray(0,0,e),Ce(u)}return l}var Nt=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new A(e||"ObservableArray@"+c()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return bt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ct(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var r=this;le(this.atom);var a=this.values.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=1===arguments.length?a-e:null==t?0:Math.max(0,Math.min(t,a-e)),void 0===n&&(n=s),vt(this)){var i=Et(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!i)return s;t=i.removedCount,n=i.added}n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}));var o=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,o),this.dehanceValues(o)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,D([e,t],n));var a=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),a},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&!1,a=wt(this),i=a||r?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),a&&At(this,i)},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&!1,a=wt(this),i=a||r?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),a&&At(this,i)},e}(),Ot={intercept:function(e){return this[C].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[C].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[C];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=this[C];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray(e);case 2:return a.spliceWithArray(e,t)}return a.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[C].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[C];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[C].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[C];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[C],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[C];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[C],r=n.values;if(e<r.length){le(n.atom);var a=r[e];if(vt(n)){var i=Et(n,{type:"update",object:n.proxy,index:e,newValue:t});if(!i)return;t=i.newValue}(t=n.enhancer(t,a))!==a&&(r[e]=t,n.notifyArrayChildUpdate(e,t,a))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(e){"function"==typeof Array.prototype[e]&&(Ot[e]=function(){var t=this[C];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(e){"function"==typeof Array.prototype[e]&&(Ot[e]=function(t,n){var r=this,a=this[C];return a.atom.reportObserved(),a.dehanceValues(a.values)[e]((function(e,a){return t.call(n,e,a,r)}),n)})})),["reduce","reduceRight"].forEach((function(e){Ot[e]=function(){var t=this,n=this[C];n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(e,a,i){return a=n.dehanceValue(a),r(e,a,i,t)},n.values[e].apply(n.values,arguments)}}));var Tt,It=y("ObservableArrayAdministration",Nt);function xt(e){return f(e)&&It(e[C])}var Dt,Pt={},Mt=function(){function e(e,t,n){if(void 0===t&&(t=H),void 0===n&&(n="ObservableMap@"+c()),this.enhancer=t,this.name=n,this[Tt]=Pt,this._keysAtom=S(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Pe.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Ae(this._has(e),B,this.name+"."+b(e)+"?",!1);this._hasMap.set(e,r),nt(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(vt(this)){var r=Et(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(le(this._keysAtom),vt(this)&&!(r=Et(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=wt(this),r=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return ft((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&At(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Pe.UNCHANGED){var r=wt(this),a=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;n.setNewValue(t),r&&At(this,a)}},e.prototype._addValue=function(e,t){var n=this;le(this._keysAtom),ft((function(){var r=new Ae(t,n.enhancer,n.name+"."+b(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var r=wt(this);r&&At(this,r?{type:"add",object:this,name:e,newValue:t}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=this.keys();return Zt({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:e.get(a)}}})},e.prototype.entries=function(){var e=this,t=this.keys();return Zt({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:[a,e.get(a)]}}})},e.prototype[(Tt=C,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,r;try{for(var a=I(this),i=a.next();!i.done;i=a.next()){var o=x(i.value,2),s=o[0],l=o[1];e.call(t,l,s,this)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return Rt(e)&&(e=e.toJS()),ft((function(){var n=we(!0);try{m(e)?function(e){var t=new Set;for(var n in e)t.add(n);return Object.getOwnPropertySymbols(e).forEach((function(n){Object.getOwnPropertyDescriptor(e,n).enumerable&&t.add(n)})),Array.from(t)}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=x(e,2),r=n[0],a=n[1];return t.set(r,a)})):g(e)?(e.constructor!==Map&&u("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&u("Cannot initialize map from "+e)}finally{Ce(n)}})),this},e.prototype.clear=function(){var e=this;ft((function(){de((function(){var t,n;try{for(var r=I(e.keys()),a=r.next();!a.done;a=r.next()){var i=a.value;e.delete(i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.replace=function(e){var t=this;return ft((function(){var n,r,a,i,o=function(e){if(g(e)||Rt(e))return e;if(Array.isArray(e))return new Map(e);if(m(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return u("Cannot convert to map from '"+e+"'")}(e),s=new Map,l=!1;try{for(var c=I(t._data.keys()),d=c.next();!d.done;d=c.next()){var p=d.value;if(!o.has(p))if(t.delete(p))l=!0;else{var h=t._data.get(p);s.set(p,h)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}try{for(var f=I(o.entries()),_=f.next();!_.done;_=f.next()){var y=x(_.value,2),v=(p=y[0],h=y[1],t._data.has(p));if(t.set(p,h),t._data.has(p)){var b=t._data.get(p);s.set(p,b),v||(l=!0)}}}catch(e){a={error:e}}finally{try{_&&!_.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}if(!l)if(t._data.size!==s.size)t._keysAtom.reportChanged();else for(var E=t._data.keys(),w=s.keys(),C=E.next(),A=w.next();!C.done;){if(C.value!==A.value){t._keysAtom.reportChanged();break}C=E.next(),A=w.next()}t._data=s})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var r=I(this),a=r.next();!a.done;a=r.next()){var i=x(a.value,2),o=i[0],s=i[1];n["symbol"==typeof o?o:b(o)]=s}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map((function(t){return b(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return Ct(this,e)},e.prototype.intercept=function(e){return bt(this,e)},e}(),Rt=y("ObservableMap",Mt),Ut={},Lt=function(){function e(e,t,n){if(void 0===t&&(t=H),void 0===n&&(n="ObservableSet@"+c()),this.name=n,this[Dt]=Ut,this._data=new Set,this._atom=S(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;ft((function(){de((function(){var t,n;try{for(var r=I(e._data.values()),a=r.next();!a.done;a=r.next()){var i=a.value;e.delete(i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.forEach=function(e,t){var n,r;try{for(var a=I(this),i=a.next();!i.done;i=a.next()){var o=i.value;e.call(t,o,o,this)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if(le(this._atom),vt(this)&&!(r=Et(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){ft((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=wt(this),r=n?{type:"add",object:this,newValue:e}:null;n&&At(this,r)}return this},e.prototype.delete=function(e){var t=this;if(vt(this)&&!(r=Et(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=wt(this),r=n?{type:"delete",object:this,oldValue:e}:null;return ft((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&At(this,r),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Zt({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,n=Array.from(this._data.values());return Zt({next:function(){return t<n.length?{value:e.dehanceValue(n[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Ft(e)&&(e=e.toJS()),ft((function(){var n=we(!0);try{Array.isArray(e)||v(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&u("Cannot initialize set from "+e)}finally{Ce(n)}})),this},e.prototype.observe=function(e,t){return Ct(this,e)},e.prototype.intercept=function(e){return bt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[(Dt=C,Symbol.iterator)]=function(){return this.values()},e}(),Ft=y("ObservableSet",Lt),jt=function(){function e(e,t,n,r){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=r,this.keysAtom=new A(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,r=this.values.get(e);if(r instanceof ke)r.set(t);else{if(vt(this)){if(!(i=Et(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=i.newValue}if((t=r.prepareNewValue(t))!==Pe.UNCHANGED){var a=wt(this),i=a?{type:"update",object:this.proxy||n,oldValue:r.value,name:e,newValue:t}:null;r.setNewValue(t),a&&At(this,i)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var r=!!this.values.get(e);return n=new Ae(r,B,this.name+"."+b(e)+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(vt(this)){var a=Et(this,{object:this.proxy||r,name:e,type:"add",newValue:t});if(!a)return;t=a.newValue}var i=new Ae(t,n,this.name+"."+b(e),!1);this.values.set(e,i),t=i.value,Object.defineProperty(r,e,function(e){return Ht[e]||(Ht[e]={configurable:!0,enumerable:!0,get:function(){return this[C].read(e)},set:function(t){this[C].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var r,a,i,o=this.target;n.name=n.name||this.name+"."+b(t),this.values.set(t,new ke(n)),(e===o||(r=e,a=t,!(i=Object.getOwnPropertyDescriptor(r,a))||!1!==i.configurable&&!1!==i.writable))&&Object.defineProperty(e,t,function(e){return Bt[e]||(Bt[e]={configurable:Pe.computedConfigurable,enumerable:!1,get:function(){return Gt(this).read(e)},set:function(t){Gt(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(vt(this)&&!(o=Et(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Le();var n=wt(this),r=this.values.get(e),a=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var i=this.pendingKeys.get(e);i&&i.set(!1)}delete this.target[e];var o=n?{type:"remove",object:this.proxy||t,oldValue:a,name:e}:null;n&&At(this,o)}finally{Fe()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return Ct(this,e)},e.prototype.intercept=function(e){return bt(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=wt(this),r=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&At(this,r),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var r=I(this.values),a=r.next();!a.done;a=r.next()){var i=x(a.value,2),o=i[0];i[1]instanceof Ae&&n.push(o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e}();function zt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=H),Object.prototype.hasOwnProperty.call(e,C))return e[C];m(e)||(t=(e.constructor.name||"ObservableObject")+"@"+c()),t||(t="ObservableObject@"+c());var r=new jt(e,new Map,b(t),n);return _(e,C,r),r}var Ht=Object.create(null),Bt=Object.create(null);function Gt(e){return e[C]||(F(e),e[C])}var Vt=y("ObservableObjectAdministration",jt);function qt(e){return!!f(e)&&(F(e),Vt(e[C]))}function Kt(e,t){if("object"==typeof e&&null!==e){if(xt(e))return void 0!==t&&u(!1),e[C].atom;if(Ft(e))return e[C];if(Rt(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||u(!1),r)}var r;if(F(e),t&&!e[C]&&e[t],qt(e))return t?((r=e[C].values.get(t))||u(!1),r):u(!1);if(k(e)||Se(e)||Ke(e))return e}else if("function"==typeof e&&Ke(e[C]))return e[C];return u(!1)}function Wt(e,t){return e||u("Expecting some object"),void 0!==t?Wt(Kt(e,t)):k(e)||Se(e)||Ke(e)||Rt(e)||Ft(e)?e:(F(e),e[C]?e[C]:void u(!1))}var Yt=Object.prototype.toString;function Qt(e,t,n){return void 0===n&&(n=-1),Jt(e,t,n)}function Jt(e,t,n,r,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var o=Yt.call(e);if(o!==Yt.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Xt(e),t=Xt(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!("function"==typeof l&&l instanceof l&&"function"==typeof c&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),a=a||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return a[u]===t;if(r.push(e),a.push(t),s){if((u=e.length)!==t.length)return!1;for(;u--;)if(!Jt(e[u],t[u],n-1,r,a))return!1}else{var d=Object.keys(e),p=void 0;if(u=d.length,Object.keys(t).length!==u)return!1;for(;u--;)if(!$t(t,p=d[u])||!Jt(e[p],t[p],n-1,r,a))return!1}return r.pop(),a.pop(),!0}function Xt(e){return xt(e)?e.slice():g(e)||Rt(e)||v(e)||Ft(e)?Array.from(e.entries()):e}function $t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zt(e){return e[Symbol.iterator]=en,e}function en(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");if("object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:We,extras:{getDebugName:function(e,t){return(void 0!==t?Kt(e,t):qt(e)||Rt(e)||Ft(e)?Wt(e):Kt(e)).name}},$mobx:C}),!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!We)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var tn=n(2268),nn=n.n(tn);function rn(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}((0,i.useState)(0),2)[1];return(0,i.useCallback)((function(){e((function(e){return e+1}))}),[])}var an,on={},sn=(an="observerBatching","function"==typeof Symbol?Symbol.for(an):"__$mobx-react "+an+"__");function ln(e){e()}function cn(e){return lt(e)}var un,dn=new Set;function pn(){void 0===un&&(un=setTimeout(hn,1e4))}function hn(){un=void 0;var e=Date.now();dn.forEach((function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,dn.delete(t))})),dn.size>0&&pn()}var fn=!1,mn=[],_n={};function yn(e){return"observer"+e}function gn(e,t,n){void 0===t&&(t="observed"),void 0===n&&(n=_n);var r,a=function(e){return function(){fn?mn.push(e):e()}}((n.useForceUpdate||rn)()),i=o().useRef(null);if(!i.current){var s=new Be(yn(t),(function(){l.mounted?a():(s.dispose(),i.current=null)})),l=function(e){return{cleanAt:Date.now()+1e4,reaction:e}}(s);i.current=l,r=i,dn.add(r),pn()}var c=i.current.reaction;return o().useDebugValue(c,cn),o().useEffect((function(){var e;return e=i,dn.delete(e),i.current?i.current.mounted=!0:(i.current={reaction:new Be(yn(t),(function(){a()})),cleanAt:1/0},a()),function(){i.current.reaction.dispose(),i.current=null}}),[]),function(e){fn=!0,mn=[];try{var t=e();fn=!1;var n=mn.length>0?mn:void 0;return o().useLayoutEffect((function(){n&&n.forEach((function(e){return e()}))}),[n]),t}finally{fn=!1}}((function(){var t,n;if(c.track((function(){try{t=e()}catch(e){n=e}})),n)throw n;return t}))}var vn=function(){return(vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function bn(e,t){var n,r,a,o=vn({forwardRef:!1},t),s=e.displayName||e.name,l=function(t,n){return gn((function(){return e(t,n)}),s)};return l.displayName=s,n=o.forwardRef?(0,i.memo)((0,i.forwardRef)(l)):(0,i.memo)(l),r=e,a=n,Object.keys(r).forEach((function(e){En[e]||Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(r,e))})),n.displayName=s,n}var En={$$typeof:!0,render:!0,compare:!0,type:!0};function wn(e){var t=e.children,n=e.render,r=t||n;return"function"!=typeof r?null:gn(r)}function Cn(e,t,n,r,a){var i="children"===t?"render":"children",o="function"==typeof e[t],s="function"==typeof e[i];return o&&s?new Error("MobX Observer: Do not use children and render in the same time in`"+n):o||s?null:new Error("Invalid prop `"+a+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}wn.propTypes={children:Cn,render:Cn},wn.displayName="Observer",function(e){e||(e=ln),at({reactionScheduler:e}),("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:on)[sn]=!0}(tn.unstable_batchedUpdates);var An=n(4229),kn=n.n(An),Sn=n(3140);function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tn,In=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(e instanceof Date))throw Error("getFormattedDateString argument needs an instance of Date");var r=Nn(t?e.toString().split(" "):e.toUTCString().split(" "),5),a=r[1],i=r[2],o=r[3],s=r[4].split(":");n||s.pop();var l=s.join(":");return"".concat(a," ").concat(i," ").concat(o,", ").concat(l)},xn=function(e){if("number"!=typeof e)throw Error("getLocalEpoch argument needs a number");return 1e3*e},Dn=function(e){return"0".concat(e).slice(-2)},Pn=function(e){var t=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);return"".concat(Dn(t),":").concat(Dn(n),":").concat(Dn(r))};const Mn=function(e){return e-(Tn?xn(Tn.get().utc().unix()):Tn)};function Rn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Un(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Rn(i,r,a,o,s,"next",e)}function s(e){Rn(i,r,a,o,s,"throw",e)}o(void 0)}))}}var Ln,Fn={},jn=function(){var e=Un(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,Sn.isEmptyObject)(Fn)){e.next=5;break}return e.next=3,Ln.send({website_status:1});case 3:Fn.website_status=e.sent,"website_status"in(t=Fn.website_status)&&(0,Sn.isEmptyObject)((0,Sn.getCurrencies)())&&(0,Sn.setCurrencies)(t.website_status);case 5:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}(),zn=function(){var e=Un(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn();case 2:return e.abrupt("return",Ln.send(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hn=function(e,t){return Ln.p2pSubscribe(e,(function(e){t.map((function(t){return t(e)}))}))},Bn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=t},Gn=n(7108);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qn(e,t,n[t])}))}return e}function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t,n){return t&&Yn(e.prototype,t),n&&Yn(e,n),e}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?Jn(e):t}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}var tr={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},nr=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Wn(this,e),this.init(t,n)}return Qn(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||tr,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Kn({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),rr=function(){function e(){Wn(this,e),this.observers={}}return Qn(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function ar(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function ir(e){return null==e?"":""+e}function or(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function sr(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function a(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(a())return{};var o=r(i.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return a()?{}:{obj:e,k:r(i.shift())}}function lr(e,t,n){var r=sr(e,t,Object);r.obj[r.k]=n}function cr(e,t){var n=sr(e,t),r=n.obj,a=n.k;if(r)return r[a]}function ur(e,t,n){var r=cr(e,n);return void 0!==r?r:cr(t,n)}function dr(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):dr(e[r],t[r],n):e[r]=t[r]);return e}function pr(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var hr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function fr(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return hr[e]})):e}var mr="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function _r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),a=e,i=0;i<r.length;++i){if(!a)return;if("string"==typeof a[r[i]]&&i+1<r.length)return;if(void 0===a[r[i]]){for(var o=2,s=r.slice(i,i+o).join(n),l=a[s];void 0===l&&r.length>i+o;)o++,l=a[s=r.slice(i,i+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var c=r.slice(i+o).join(n);return c?_r(l,c,n):void 0}a=a[r[i]]}return a}}var yr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Wn(this,t),n=Xn(this,$n(t).call(this)),mr&&rr.call(Jn(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return er(t,e),Qn(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=cr(this.data,o);return s||!i||"string"!=typeof n?s:_r(this.data&&this.data[e]&&this.data[e][t],n,a)}},{key:"addResource",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var o=[e,t];n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),lr(this.data,o,r),a.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var a in n)"string"!=typeof n[a]&&"[object Array]"!==Object.prototype.toString.apply(n[a])||this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=cr(this.data,o)||{};r?dr(s,n,a):s=Kn({},s,n),lr(this.data,o,s),i.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Kn({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(rr),gr={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var i=this;return e.forEach((function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,a))})),t}},vr={},br=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wn(this,t),n=Xn(this,$n(t).call(this)),mr&&rr.call(Jn(n)),or(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,Jn(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=nr.create("translator"),n}return er(t,e),Qn(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:e,namespaces:a};var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(a=o.shift()),e=o.join(r)}return"string"==typeof a&&(a=[a]),{key:e,namespaces:a}}},{key:"translate",value:function(e,n,r){var a=this;if("object"!==Vn(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),s=o.key,l=o.namespaces,c=l[l.length-1],u=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(d){var p=n.nsSeparator||this.options.nsSeparator;return c+p+s}return s}var h=this.resolve(e,n),f=h&&h.res,m=h&&h.usedKey||s,_=h&&h.exactUsedKey||s,y=Object.prototype.toString.apply(f),g=["[object Number]","[object Function]","[object RegExp]"],v=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&f&&"string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f&&g.indexOf(y)<0&&("string"!=typeof v||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,Kn({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(i){var E="[object Array]"===y,w=E?[]:{},C=E?_:m;for(var A in f)if(Object.prototype.hasOwnProperty.call(f,A)){var k="".concat(C).concat(i).concat(A);w[A]=this.translate(k,Kn({},n,{joinArrays:!1,ns:l})),w[A]===k&&(w[A]=f[A])}f=w}}else if(b&&"string"==typeof v&&"[object Array]"===y)(f=f.join(v))&&(f=this.extendTranslation(f,e,n,r));else{var S=!1,N=!1,O=void 0!==n.count&&"string"!=typeof n.count,T=t.hasDefaultValue(n),I=O?this.pluralResolver.getSuffix(u,n.count):"",x=n["defaultValue".concat(I)]||n.defaultValue;!this.isValidLookup(f)&&T&&(S=!0,f=x),this.isValidLookup(f)||(N=!0,f=s);var D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:f,P=T&&x!==f&&this.options.updateMissing;if(N||S||P){if(this.logger.log(P?"updateKey":"missingKey",u,c,s,P?x:f),i){var M=this.resolve(s,Kn({},n,{keySeparator:!1}));M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],U=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&U&&U[0])for(var L=0;L<U.length;L++)R.push(U[L]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var F=function(e,t,r){a.options.missingKeyHandler?a.options.missingKeyHandler(e,c,t,P?r:D,P,n):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,c,t,P?r:D,P,n),a.emit("missingKey",e,c,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?R.forEach((function(e){a.pluralResolver.getSuffixes(e).forEach((function(t){F([e],s+t,n["defaultValue".concat(t)]||x)}))})):F(R,s,x))}f=this.extendTranslation(f,e,n,h,r),N&&f===s&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(s)),(N||S)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,r,a){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Kn({},n,{interpolation:Kn({},this.options.interpolation,n.interpolation)}));var o,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=Kn({},this.options.interpolation.defaultVariables,c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return a&&a[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):i.translate.apply(i,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,p="string"==typeof d?[d]:d;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=gr.handle(p,e,t,this.options&&this.options.postProcessPassResolved?Kn({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,a,i,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var d=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(i=e,!vr["".concat(h[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(i)&&(vr["".concat(h[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!o.isValidLookup(t)){a=n;var i,l,u=c,h=[u];for(o.i18nFormat&&o.i18nFormat.addLookupKeys?o.i18nFormat.addLookupKeys(h,c,n,e,s):(d&&(i=o.pluralResolver.getSuffix(n,s.count)),d&&p&&h.push(u+i),p&&h.push(u+="".concat(o.options.contextSeparator).concat(s.context)),d&&h.push(u+=i));l=h.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}(rr);function Er(e){return e.charAt(0).toUpperCase()+e.slice(1)}var wr=function(){function e(t){Wn(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nr.create("languageUtils")}return Qn(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Er(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Er(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Er(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],i=function(e){e&&(n.isSupportedCode(e)?a.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach((function(e){a.indexOf(e)<0&&i(n.formatLanguageCode(e))})),a}}]),e}(),Cr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ar={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function kr(){var e={};return Cr.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Ar[t.fc]}}))})),e}var Sr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Wn(this,e),this.languageUtils=t,this.options=n,this.logger=nr.create("pluralResolver"),this.rules=kr()}return Qn(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var a=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[a];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?o():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Nr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wn(this,e),this.logger=nr.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return Qn(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:fr,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?pr(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?pr(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?pr(t.nestingPrefix):t.nestingPrefixEscaped||pr("$t("),this.nestingSuffix=t.nestingSuffix?pr(t.nestingSuffix):t.nestingSuffixEscaped||pr(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var a,i,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var a=ur(t,l,e);return s.alwaysFormat?s.format(a,void 0,n,Kn({},r,t,{interpolationkey:e})):a}var i=e.split(s.formatSeparator),o=i.shift().trim(),c=i.join(s.formatSeparator).trim();return s.format(ur(t,l,o),c,n,Kn({},r,t,{interpolationkey:o}))};this.resetRegExp();var d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(o=0;a=t.regex.exec(e);){if(void 0===(i=u(a[1].trim())))if("function"==typeof d){var n=d(e,a,r);i="string"==typeof n?n:""}else{if(p){i=a[0];continue}s.logger.warn("missed to pass in variable ".concat(a[1]," for interpolating ").concat(e)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=ir(i));var l=t.safeValue(i);if(e=e.replace(a[0],l),p?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Kn({},i);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),a="{".concat(r[1]);e=r[0],a=(a=this.interpolate(a,o)).replace(/'/g,'"');try{o=JSON.parse(a),t&&(o=Kn({},t,o))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(a)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=ir(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((function(e,t){return a.format(e,t,i.lng,Kn({},i,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}(),Or=function(e){function t(e,n,r){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Wn(this,t),a=Xn(this,$n(t).call(this)),mr&&rr.call(Jn(a)),a.backend=e,a.store=n,a.services=r,a.languageUtils=r.languageUtils,a.options=i,a.logger=nr.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,i.backend,i),a}return er(t,e),Qn(t,[{key:"queueLoad",value:function(e,t,n,r){var a=this,i=[],o=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&a.store.hasResourceBundle(e,t)?a.state[s]=2:a.state[s]<0||(1===a.state[s]?o.indexOf(s)<0&&o.push(s):(a.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),i.indexOf(s)<0&&i.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(i.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:i,pending:o,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),a=r[0],i=r[1];t&&this.emit("failedLoading",a,i,t),n&&this.store.addResourceBundle(a,i,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,s,l,c,u;r=n.loaded,s=i,(c=(l=sr(r,[a],Object)).obj)[u=l.k]=c[u]||[],c[u].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&a<5?setTimeout((function(){r.read.call(r,e,t,n,a+1,2*i,o)}),i):o(s,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(a," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(a),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Kn({},i,{isUpdate:a})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(rr);function Tr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===Vn(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===Vn(e[2])||"object"===Vn(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Ir(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function xr(){}const Dr=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Wn(this,t),e=Xn(this,$n(t).call(this)),mr&&rr.call(Jn(e)),e.options=Ir(n),e.services={},e.logger=nr,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),Xn(e,Jn(e));setTimeout((function(){e.init(n,r)}),0)}return e}return er(t,e),Qn(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Kn({},Tr(),this.options,Ir(t)),this.format=this.options.interpolation.format,n||(n=xr),!this.options.isClone){this.modules.logger?nr.init(r(this.modules.logger),this.options):nr.init(null,this.options);var a=new wr(this.options);this.store=new yr(this.options.resources,this.options);var i=this.services;i.logger=nr,i.resourceStore=this.store,i.languageUtils=a,i.pluralResolver=new Sr(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new Nr(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Or(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new br(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.length>0&&"dev"!==o[0]&&(this.options.lng=o[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var s=ar(),l=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),s.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),s}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xr,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var a=[],i=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return i(e)})),this.options.preload&&this.options.preload.forEach((function(e){return i(e)})),this.services.backendConnector.load(a,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=ar();return e||(e=this.languages),t||(t=this.options.ns),n||(n=xr),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&gr.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=ar();this.emit("languageChanging",e);var a=function(a){e||a||!n.services.languageDetector||(a=[]);var i="string"==typeof a?a:n.services.languageUtils.getBestMatchFromCodes(a);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,a){a?(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a),n.translator.changeLanguage(a),n.isLanguageChangingTo=void 0,n.emit("languageChanged",a),n.logger.log("languageChanged",a)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,a=function e(t,a){var i;if("object"!==Vn(a)){for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([t,a].concat(s))}else i=Kn({},a);i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns;var c=r.options.keySeparator||".",u=n?"".concat(n).concat(c).concat(t):t;return r.t(u,i)};return"string"==typeof e?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],a=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||!(!o(r,e)||a&&!o(i,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=ar();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=ar();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],a=e.filter((function(e){return r.indexOf(e)<0}));return a.length?(this.options.preload=r.concat(a),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xr,a=Kn({},this.options,n,{isClone:!0}),i=new t(a);return["store","services","language"].forEach((function(t){i[t]=e[t]})),i.services=Kn({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new br(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(a,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(rr));function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr,Ur={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Lr=o().createContext();Qn((function e(){Wn(this,e),this.usedNamespaces={}}),[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]);var Fr={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ur=Mr(Mr({},Ur),e)}(e.options.react),function(e){Rr=e}(e)}};function jr(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function zr(e,t){if(null==e)return{};var n,r,a=jr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hr=n(4896),Br=n.n(Hr),Gr=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Vr(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(Br()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var a=new RegExp(Gr),i=null;null!==(i=a.exec(e));)if(i[0].trim())if(i[1]){var o=i[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),t.attrs[s[0]]=s[1],a.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var qr=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Kr=/^\s*$/,Wr=Object.create(null);const Yr=function(e,t){t||(t={}),t.components||(t.components=Wr);var n,r=[],a=[],i=-1,o=!1;if(0!==e.indexOf("<")){var s=e.indexOf("<");r.push({type:"text",content:-1===s?e:e.substring(0,s)})}return e.replace(qr,(function(s,l){if(o){if(s!=="</"+n.name+">")return;o=!1}var c,u="/"!==s.charAt(1),d=s.startsWith("\x3c!--"),p=l+s.length,h=e.charAt(p);if(d){var f=Vr(s);return i<0?(r.push(f),r):((c=a[i]).children.push(f),r)}if(u&&(i++,"tag"===(n=Vr(s)).type&&t.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!h||"<"===h||n.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===i&&r.push(n),(c=a[i-1])&&c.children.push(n),a[i]=n),(!u||n.voidElement)&&(i>-1&&(n.voidElement||n.name===s.slice(2,-1))&&(i--,n=-1===i?r:a[i]),!o&&"<"!==h&&h)){c=-1===i?r:a[i].children;var m=e.indexOf("<",p),_=e.slice(p,-1===m?void 0:m);Kr.test(_)&&(_=" "),(m>-1&&i+c.length>=0||" "!==_)&&c.push({type:"text",content:_})}})),r};function Qr(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Jr={};var Xr=["format"],$r=["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"];function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function na(e){return e?e&&e.children?e.children:e.props&&e.props.children:[]}function ra(e){return Array.isArray(e)?e:[e]}function aa(e,t){if(!e)return"";var n="",r=ra(e),a=t.transKeepBasicHtmlNodesFor||[];return r.forEach((function(e,r){if("string"==typeof e)n+="".concat(e);else if(o().isValidElement(e)){var i=Object.keys(e.props).length,s=a.indexOf(e.type)>-1,l=e.props.children;if(!l&&s&&0===i)n+="<".concat(e.type,"/>");else if(l||s&&0===i)if(e.props.i18nIsDynamicList)n+="<".concat(r,"></").concat(r,">");else if(s&&1===i&&"string"==typeof l)n+="<".concat(e.type,">").concat(l,"</").concat(e.type,">");else{var c=aa(l,t);n+="<".concat(r,">").concat(c,"</").concat(r,">")}else n+="<".concat(r,"></").concat(r,">")}else if(null===e)Qr("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===Vn(e)){var u=e.format,d=zr(e,Xr),p=Object.keys(d);if(1===p.length){var h=u?"".concat(p[0],", ").concat(u):p[0];n+="{{".concat(h,"}}")}else Qr("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else Qr("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),n}function ia(e){var t=e.children,n=e.count,r=e.parent,a=e.i18nKey,s=e.tOptions,l=void 0===s?{}:s,c=e.values,u=e.defaults,d=e.components,p=e.ns,h=e.i18n,f=e.t,m=zr(e,$r),_=(0,i.useContext)(Lr)||{},y=_.i18n,g=_.defaultNS,v=h||y||Rr;if(!v)return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&Jr[t[0]]||("string"==typeof t[0]&&(Jr[t[0]]=new Date),Qr.apply(void 0,t))}("You will need to pass in an i18next instance by using i18nextReactModule"),t;var b=f||v.t.bind(v)||function(e){return e},E=ea(ea({},Ur),v.options&&v.options.react),w=p||b.ns||g||v.options&&v.options.defaultNS;w="string"==typeof w?[w]:w||["translation"];var C=u||aa(t,E)||E.transEmptyNodeValue||a,A=E.hashTransKey,k=a||(A?A(C):C),S=c?l.interpolation:{interpolation:ea(ea({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},N=ea(ea(ea(ea({},l),{},{count:n},c),S),{},{defaultValue:C,ns:w}),O=function(e,t,n,r,a){if(""===t)return[];var i=r.transKeepBasicHtmlNodesFor||[],s=t&&new RegExp(i.join("|")).test(t);if(!e&&!s)return[t];var l={};!function e(t){ra(t).forEach((function(t){"string"!=typeof t&&(ta(t)?e(na(t)):"object"!==Vn(t)||o().isValidElement(t)||Object.assign(l,t))}))}(e);var c=Yr("<0>".concat(t,"</0>")),u=ea(ea({},l),a);function d(e,t,n){var r=na(e),a=h(r,t.children,n);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return o().isValidElement(e)}))}(r)&&0===a.length?r:a}function p(e,t,n,r,a){e.dummy&&(e.children=t),n.push(o().cloneElement(e,ea(ea({},e.props),{},{key:r}),a?void 0:t))}function h(t,a,l){var c=ra(t);return ra(a).reduce((function(t,a,f){var m,_,y,g=a.children&&a.children[0]&&a.children[0].content&&n.services.interpolator.interpolate(a.children[0].content,u,n.language);if("tag"===a.type){var v=c[parseInt(a.name,10)];!v&&1===l.length&&l[0][a.name]&&(v=l[0][a.name]),v||(v={});var b=0!==Object.keys(a.attrs).length?(m={props:a.attrs},(y=ea({},_=v)).props=Object.assign(m.props,_.props),y):v,E=o().isValidElement(b),w=E&&ta(a,!0)&&!a.voidElement,C=s&&"object"===Vn(b)&&b.dummy&&!E,A="object"===Vn(e)&&null!==e&&Object.hasOwnProperty.call(e,a.name);if("string"==typeof b){var k=n.services.interpolator.interpolate(b,u,n.language);t.push(k)}else if(ta(b)||w)p(b,d(b,a,l),t,f);else if(C){var S=h(c,a.children,l);t.push(o().cloneElement(b,ea(ea({},b.props),{},{key:f}),S))}else if(Number.isNaN(parseFloat(a.name)))if(A)p(b,d(b,a,l),t,f,a.voidElement);else if(r.transSupportBasicHtmlNodes&&i.indexOf(a.name)>-1)if(a.voidElement)t.push(o().createElement(a.name,{key:"".concat(a.name,"-").concat(f)}));else{var N=h(c,a.children,l);t.push(o().createElement(a.name,{key:"".concat(a.name,"-").concat(f)},N))}else if(a.voidElement)t.push("<".concat(a.name," />"));else{var O=h(c,a.children,l);t.push("<".concat(a.name,">").concat(O,"</").concat(a.name,">"))}else if("object"!==Vn(b)||E)1===a.children.length&&g?t.push(o().cloneElement(b,ea(ea({},b.props),{},{key:f}),g)):t.push(o().cloneElement(b,ea(ea({},b.props),{},{key:f})));else{var T=a.children[0]?g:null;T&&t.push(T)}}else if("text"===a.type){var I=r.transWrapTextNodes,x=n.services.interpolator.interpolate(a.content,u,n.language);I?t.push(o().createElement(I,{key:"".concat(a.name,"-").concat(f)},x)):t.push(x)}return t}),[])}return na(h([{dummy:!0,children:e||[]}],c,ra(e||[]))[0])}(d||t,k?b(k,N):C,v,E,N),T=void 0!==r?r:E.defaultTransParent;return T?o().createElement(T,m,O):O}function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var sa=function(e){var t=e.i18n_default_text,n=e.values,r=e.components,a=e.options,o=e.i18n;return i.createElement(ia,{i18n:o,defaults:t,values:n,components:r,tOptions:a})};sa.displayName="Localize";var la=function(e){return function(t){return i.createElement(sa,oa({i18n:e},t))}};la.displayName="withI18n",sa.propTypes={components:kn().arrayOf(kn().node),i18n:kn().object.isRequired,i18n_default_text:kn().string,options:kn().object,values:kn().object};const ca=la,ua=JSON.parse('{"121738739":"Send","185142749":"Price","323002325":"Post ad","345132964":"{{field_name}} below minimum value","490988014":"Create ads","554135844":"Edit","753727511":"Type","830703311":"My profile","909755348":"Min transaction","1035893169":"Delete","1080990424":"Confirm","1103731601":"Your ads are paused","1162965175":"Buyer","1371193412":"Cancel","1705774792":"Buy/sell","1872130211":"{{field_name}} has exceed maximum length","2142425493":"Ad ID","-494667560":"Orders","-679691613":"My ads","-1916020233":"Send amount","-1597110099":"Receive","-1127004033":"Receive amount","-55126326":"Seller","-1406830100":"Payment method","-459192118":"Advertiser notes","-1267880283":"{{field_name}} is required","-1179827369":"Create new ad","-1664159494":"Country","-1876891031":"Currency","-1016171176":"Asset","-548979988":"Fixed price","-1995606668":"Amount","-258187437":"Min. transaction","-1587158002":"Max. transaction","-1595035175":"Advertiser note","-2110980818":"{{field_name}} is too low","-1417052966":"Payment Method","-806152028":"Your ads are running","-1454557528":"MyProfile"}'),da=JSON.parse('{"50672601":"Comprado","68867477":"ID de la orden {{ id }}","121738739":"Enviar","145959105":"Elija un alias","246815378":"Una vez establecido, su alias no se puede cambiar.","323002325":"Publicar anuncio","324970564":"Datos de contacto del vendedor","338910048":"Se mostrará a los otros usuarios como","346163411":"Comprar {{ id }}","349630134":"Estos campos se basan en la actividad de los últimos 30 días: Comprar, Vender, Finalización y tiempo prom. de lanzamiento.","364681129":"Datos de contacto","375577530":"Para utilizar el DP2P debe elegir un nombre para mostrar (de usuario) y verificar su identidad.","416167062":"Recibirá","424668491":"expirado","452752527":"Tasa (1 {{ currency }})","460477293":"Ingresar mensaje","473688701":"Introduzca una cantidad válida","482271786":"Configuración de privacidad","501523417":"No tiene órdenes.","523301614":"Liberar {{amount}} {{currency}}","525380157":"Comprar la orden {{offered_currency}}","531912261":"Nombre del banco, número de cuenta, nombre del beneficiario","580715136":"¡Por favor regístrese con nosotros!","587882987":"Anunciantes","592082899":"No puede repetir un carácter más de 5 veces.","649549724":"No he recibido ningún pago.","671582270":"La cantidad máx disponible es {{value}}","683273691":"Tasa (1 {{ account_currency }})","728383001":"He recibido más de la cantidad acordada.","767789372":"Esperar el pago","782834680":"Tiempo restante","791324098":"Total de órdenes","830703311":"Mi perfil","838024160":"Detalles del banco","842911528":"No mostrar este mensaje de nuevo.","873437248":"Instrucciones (opcional)","876086855":"Complete el formulario de evaluación financiera","887667868":"Orden","915127158":"Si cancela este pedido, no podrá utilizar DP2P durante {{block_duration}} horas.","949859957":"Enviar","954233511":"Vendido","988380202":"Sus instrucciones","1001160515":"Vender","1020552673":"Está creando un anuncio para comprar <0>{{ target_amount }} {{ target_currency }}</0> ...","1024155025":"Si cancela su pedido {{cancellation_limit}} veces en {{cancellation_period}} horas, no podrá usar DP2P durante {{block_duration}} horas. <br /> ({{number_of_cancels_remaining}} cancelaciones restantes.)","1035893169":"Borrar","1041078003":"Limite: {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Orden máx.","1057127276":"{{- avg_release_time_in_minutes}} min","1080990424":"Confirmar","1103731601":"Sus anuncios están pausados","1106073960":"Ha creado un anuncio","1119887091":"Verificación","1137964885":"Solo puede contener letras, números y caracteres especiales .- _ @.","1141515080":"El cajero DP2P no está disponible en su país.","1151608942":"Cantidad total","1157877436":"{{field_name}} no debe exceder la Cantidad","1161621759":"Elija su alias","1162965175":"Comprador","1202500203":"Pagar ahora","1236083813":"Sus detalles de pago","1258285343":"Algo salió mal","1286797620":"Activo","1287051975":"El alias es demasiado largo","1326475003":"Activar","1328352136":"Vender {{ account_currency }}","1337027601":"Ha vendido {{offered_amount}} {{offered_currency}}","1347724133":"He pagado {{amount}} {{currency}}.","1364774599":"(Comprar {{- buy_completion_rate }})","1366244749":"Límites","1371193412":"Cancelar","1430413419":"El máximo es {{value}} {{currency}}","1467483693":"Órdenes pasadas","1474532322":"Clasificar por","1538160426":"Asegúrese de haber pagado {{amount}} {{currency}} a {{other_user_name}}.","1583335572":"Si su anuncio no recibe una orden durante {{adverts_archive_period}} días, se desactivará.","1587250288":"ID del anuncio {{advert_id}} ","1589127544":"He pagado {{amount}} {{currency}}","1607051458":"Buscar por apodo","1623916605":"No pude realizar el pago completo.","1654365787":"Desconocido","1675716253":"Límite mín.","1678804253":"Comprar {{ currency }}","1690094221":"Límite de comprar/vender ({{currency}})","1734661732":"Su saldo de DP2P es {{ dp2p_balance }}","1752096323":"{{field_name}} no debe estar por debajo del límite mín.","1752646100":"Saldo DP2P = depósitos que no se pueden revertir (transferencias bancarias, etc.) + una parte de los depósitos que se pueden revertir (pagos con tarjeta de crédito, etc.)","1794470010":"He realizado el pago completo, pero el vendedor no ha liberado los fondos.","1794474847":"He recibido el pago","1798116519":"Cantidad disponible","1812964994":"Vender ({{currency}})","1824755021":"p.ej. los detalles de su cuenta bancaria/billetera electrónica","1842172737":"Ha recibido {{offered_amount}} {{offered_currency}}","1848044659":"No tiene anuncios.","1881862381":"Su límite de compra/venta se restablece a las 00:00 GMT todos los días.","1893264068":"Cantidad de venta","1923443894":"Inactivo","1928240840":"Vender {{ currency }}","1976156928":"Enviará","1992961867":"Tasa (1 {{currency}})","2005611694":"Realización","2029375371":"Instrucciones de pago","2039361923":"Está creando un anuncio para vender...","2062662999":"Comprar ({{currency}})","2063890788":"Cancelado","2086563542":"Tipo de cambio (predeterminado)","2087814509":"Saldo disponible","2091671594":"Estado","2121837513":"El mínimo es {{value}} {{currency}}","2142425493":"ID de anuncio","2144972362":"Utilice el chat en vivo para comunicarse con nuestro equipo de atención al cliente y obtener ayuda.","2146619399":"Límites: {{min}}–{{max}} {{currency}}","-1540251249":"Comprar {{ account_currency }}","-1267880283":"Se requiere {{field_name}}","-2019083683":"{{field_name}} solo puede incluir letras, números, espacios y cualquiera de estos símbolos: -+.,\'#@():;","-222920564":"{{field_name}} ha excedido la longitud máxima","-857786650":"Revise su estado de verificación.","-612892886":"Necesitaremos que suba sus documentos para verificar su identidad.","-2090325029":"La verificación de identidad se completó.","-1101273282":"Se requiere alias","-919203928":"El alias es demasiado corto","-1907100457":"No se puede iniciar, finalizar con o repetir caracteres especiales.","-2125702445":"Instrucciones","-1274358564":"Límite máx.","-1995606668":"Cantidad","-1965472924":"Tarifa fija","-1081775102":"{{field_name}} no debe estar por encima del límite máximo","-885044836":"{{field_name}} no debe exceder el límite máximo","-1764050750":"Detalles de pago","-1207312691":"Completado","-688728873":"Expirado","-1951641340":"En disputa","-1738697484":"Confirmar pago","-559149524":"Esperar el lanzamiento","-1597110099":"Recibir","-892663026":"Sus datos de contacto","-55126326":"Vendedor","-1875343569":"Detalles de pago del vendedor","-92830427":"Instrucciones del vendedor","-1940034707":"Instrucciones del comprador","-137444201":"Comprar","-1102534097":"Sin anuncios","-979459594":"Comprar/Vender","-1769852749":"N/A","-781045632":"Tiempo prom. de lanzamiento","-2017825013":"Entendido","-1186622577":"Identificación verificada","-907053343":"Dirección verificada","-1837059346":"Comprar / Vender","-494667560":"Órdenes","-679691613":"Mis anuncios","-2144314441":"Cantidad de compra","-1974067943":"Sus datos bancarios","-1135933077":"Mostrar los anuncios correspondientes","-2033454751":"Ver los anuncios que coinciden con su saldo y límite de DP2P.","-1657433201":"No hay anuncios coincidentes.","-198897319":"Tasa de finalización: {{total_completion_rate}}%","-101756270":"Límite {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"Comprar {{account_currency}}","-1035421133":"Vender {{account_currency}}","-1325806155":"No hay anuncios.","-1845037007":"Página del anunciante","-1285759343":"Buscar","-1005884051":"Tasa de finalización","-1638172550":"Para habilitar esta función, debe completar lo siguiente:","-278618671":"Su cajero DP2P está bloqueado","-1561775203":"Comprar {{currency}}","-1527285935":"Vender {{currency}}","-1654157453":"Tasa fija (1 {{currency}})","-379708059":"Orden mín.","-1459289144":"Esta información será visible para todos.","-2061807537":"Algo no está bien","-329713179":"Ok","-458710804":"Está creando un anuncio para comprar <0>{{ target_amount }} {{ target_currency }}</0> por <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Está creando un anuncio para vender <0>{{ target_amount }} {{ target_currency }}</0> por <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Está creando un anuncio para vender <0>{{ target_amount }} {{ target_currency }}</0> ...","-514789442":"Está creando un anuncio para comprar...","-1179827369":"Crear nuevo anuncio","-392043307":"¿Desea eliminar este anuncio?","-854930519":"Ya NO se podrá restaurar.","-372210670":"Tasa (1 {{account_currency}})","-1395240684":"Vender {{ id }}","-1318334333":"Desactivar","-1667041441":"Tasa (1 {{ offered_currency }})","-806152028":"Sus anuncios están publicados","-1003919851":"Saldo DP2P disponible","-721514112":"Plantilla de anuncio","-179005984":"Guardar","-1596761987":"Mostrar mi nombre real ({{full_name}})","-270004636":"Comprar / Vender ({{currency}})","-532709160":"Su alias","-2008992756":"¿Desea cancelar esta orden?","-2026176944":"No cancele si ya ha realizado el pago.","-1989544601":"Cancelar esta orden","-492996224":"No cancelar","-510341549":"He recibido menos de la cantidad acordada.","-650030360":"He pagado más de la cantidad acordada.","-1192446042":"Si su queja no aparece aquí, comuníquese con nuestro equipo de Atención al cliente.","-573132778":"Queja","-792338456":"¿Cuál es su queja?","-567498463":"¿Confirmar pago?","-1485778481":"¿Ha recibido el pago?","-403938778":"Por favor confirme que recibió los fondos solamente después de haber verificado su cuenta de banco o billetera electrónica.","-2000877952":"He recibido {{amount}} {{currency}}","-563116612":"Aún no he pagado","-1392383387":"He pagado","-418870584":"Cancelar orden","-727273667":"Reclamar","-2016990049":"Vender la orden {{offered_currency}}","-811190405":"Tiempo","-1797318839":"En caso de disputa, solo consideraremos la comunicación a través del canal de chat de Deriv P2P.","-283017497":"Reintentar","-2052184983":"ID de la orden","-2096350108":"Contraparte","-750202930":"Órdenes activas","-471540636":"He recibido {{amount}} {{currency}}.","-2054589794":"Se le ha prohibido temporalmente el uso de nuestros servicios debido a múltiples intentos de cancelación. Vuelva a intentarlo después de {{date_time}} GMT.","-1971628122":"Esta función solo está disponible para cuentas reales en USD en este momento.","-1709848333":"DP2P está listo para usted"}'),pa=JSON.parse('{"50672601":"Acheté","68867477":"ID de commande {{ id }}","121738739":"Envoyer","145959105":"Choisissez un nom","246815378":"Une fois choisi, votre pseudo ne peut pas être modifié.","323002325":"Publier annonce","324970564":"Coordonnées du vendeur","338910048":"Vous apparaitrez aux autres utilisateurs comme","346163411":"Acheter {{ id }}","349630134":"Ces champs sont basés sur l\'activité des 30 derniers jours: Achat, Vente, Achèvement et Moy. de durée d\'achèvement.","364681129":"Informations de contact","375577530":"Pour utiliser le DP2P, vous devez choisir un nom d\'affichage (un surnom) et vérifier votre identité.","416167062":"Vous receverez","424668491":"expiré","452752527":"Taux (1 {{ currency }})","460477293":"Entrez le message","473688701":"Saisissez un montant","482271786":"Paramètre de confidentialité","501523417":"Vous n\'avez aucune commande.","523301614":"Débloquer {{currency}}{{amount}}","525380157":"Acheter ordre {{offered_currency}}","531912261":"Nom de la banque, numéro de compte, nom du bénéficiaire","580715136":"Inscrivez-vous avec nous!","587882987":"Annonceurs","592082899":"Impossible de répéter un caractère plus de 5 fois.","649549724":"Je n\'ai reçu aucun paiement.","671582270":"Le montant maximum disponible est de {{value}}","683273691":"Taux (1 {{ account_currency }})","728383001":"Je n\'ai reçu plus que le montant convenu.","767789372":"Attendez pour le paiement","782834680":"Temps restant","791324098":"Total des commandes","830703311":"Mon profil","838024160":"Coordonnées bancaires","842911528":"Ne pas montrer de nouveau ce message.","873437248":"Instructions (facultatif)","876086855":"Remplissez le formulaire d\'évaluation financière","887667868":"Ordre","915127158":"Si vous annulez cette demande, vous serez bloqué pour utiliser DP2P pendant {{block_duration}} heures.","949859957":"Envoyer","954233511":"Vendu","988380202":"Vos instructions","1001160515":"Vente","1020552673":"Vous créez une annonce pour acheter <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"Si vous annulez votre demande {{cancellation_limit}} fois en {{cancellation_period}} heures, vous serez bloqué pour utiliser DP2P pendant {{block_duration}} heures. . <br /> ({{number_of_cancels_remaining}} annulations restantes.)","1035893169":"Supprimer","1041078003":"Limite {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Ordre maximum","1057127276":"{{- avg_release_time_in_minutes}} min","1080990424":"Confirmer","1103731601":"Vos annonces sont en pause","1106073960":"Vous avez créé une annonce","1119887091":"Vérification","1137964885":"Ne peut contenir que des lettres, des chiffres et des caractères spéciaux .- _ @.","1141515080":"La caisse DP2P n\'est pas disponible dans votre pays.","1151608942":"Montant total","1157877436":"{{field_name}} ne doit pas dépasser le Montant","1161621759":"Choisissez votre pseudo","1162965175":"Acheteur","1202500203":"Payez maintenant","1236083813":"Vos informations de paiement","1258285343":"Oups, un problème est survenu","1286797620":"Actif","1287051975":"Le pseudo est trop long","1326475003":"Activer","1328352136":"Vendre {{ account_currency }}","1337027601":"Vous avez vendu {{offered_amount}} {{offered_currency}}","1347724133":"J\'ai payé {{amount}} {{currency}}.","1364774599":"(Acheter {{- buy_completion_rate }})","1366244749":"Limites","1371193412":"Annuler","1430413419":"Le maximum est {{currency}}{{value}}","1467483693":"Historique des trades","1474532322":"Trier par","1538160426":"Veuillez vous assurer que vous avez payé {{amount}} {{currency}} à {{other_user_name}}.","1583335572":"Si l\'annonce ne reçoit pas de demande pendant {{adverts_archive_period}} jours, elle sera désactivée.","1587250288":"ID d\'annonce {{advert_id}} ","1589127544":"J\'ai payé {{amount}} {{currency}}","1607051458":"Recherche par pseudo","1623916605":"Je n\'ai pas pu effectuer le paiement intégral.","1654365787":"Inconnu","1675716253":"Limite minimale","1678804253":"Acheter {{ currency }}","1690094221":"Limite d\'achat/vente ({{currency}})","1734661732":"Votre solde DP2P est de {{ dp2p_balance }}","1752096323":"{{field_name}} ne doit pas être inférieur à la limite minimale","1752646100":"Solde DP2P = dépôts non annulables (virements bancaires, etc.) + une partie des dépôts pouvant être annulés (paiements par carte de crédit, etc.)","1794470010":"J\'ai effectué le paiement intégral, mais le vendeur n\'a pas débloqué les fonds.","1794474847":"J\'ai reçu des fonds","1798116519":"Montant disponible","1812964994":"Vendre ({{currency}})","1824755021":"par exemple. les détails de votre compte bancaire / portefeuille électronique","1842172737":"Vous avez reçu {{offered_amount}} {{offered_currency}}","1848044659":"Vous n\'avez aucune annonce.","1881862381":"Votre limite d\'achat/vente est réinitialisée quotidiennement à 00:00 GMT.","1893264068":"Montant de vente","1923443894":"Inactif","1928240840":"Vendre {{ currency }}","1976156928":"Vous enverrez","1992961867":"Taux (1 {{currency}})","2005611694":"Achevé","2029375371":"Instructions de paiement","2039361923":"Vous créez une annonce pour vendre...","2062662999":"Acheter ({{currency}})","2063890788":"Annulé","2086563542":"Taux de change (par défaut)","2087814509":"Balance disponible","2091671594":"Statut","2121837513":"Le minimum est {{currency}}{{value}}","2142425493":"Nº. d\'annonce","2144972362":"Veuillez utiliser le chat en direct pour contacter notre équipe d\'assistance clientèle afin d\'obtenir de l\'aide.","2146619399":"Limites : {{min}}–{{max}} {{currency}}","-1540251249":"Acheter {{ account_currency }}","-1267880283":"{{field_name}} est obligatoire","-2019083683":"{{field_name}} ne peut contenir que des lettres, des chiffres, des espaces et l\'un de ces symboles : -+.,\'#@():;","-222920564":"{{field_name}} a excédé la longueur maximale","-857786650":"Vérifiez votre statut de vérification.","-612892886":"Nous aurons besoin que vous téléchargiez vos documents pour vérifier votre identité.","-2090325029":"La vérification d\'identité est terminée.","-1101273282":"Un pseudo est requis","-919203928":"Le pseudo est trop court","-1907100457":"Impossible de commencer, de terminer par ou de répéter des caractères spéciaux.","-2125702445":"Instructions","-1274358564":"Limite maximale","-1995606668":"Montant","-1965472924":"Taux fixe","-1081775102":"{{field_name}} ne doit pas être inférieur à la limite maximale","-885044836":"{{field_name}} ne doit pas dépasser la limite maximale","-1764050750":"Détails de paiement","-1207312691":"Achevé","-688728873":"Expiré","-1951641340":"En litige","-1738697484":"Confirmez le paiement","-559149524":"Attendez le déblocage","-1597110099":"Recevoir","-892663026":"Détails de votre contact","-55126326":"Vendeur","-1875343569":"Coordonnées de paiement du vendeur","-92830427":"Instructions du vendeur","-1940034707":"Instructions de l\'acheteur","-137444201":"Acheter","-1102534097":"Pas de pubs","-979459594":"Achat/Vente","-1769852749":"N/A","-781045632":"Délai moyen de déblocage","-2017825013":"C\'est compris","-1186622577":"Identité vérifiée","-907053343":"Adresse vérifiée","-1837059346":"Achat / Vente","-494667560":"Ordres","-679691613":"Mes annonces","-2144314441":"Acheter le montant","-1974067943":"Vos coordonnées bancaires","-1135933077":"Afficher les annonces correspondantes","-2033454751":"Consultez les annonces qui correspondent à votre solde et à votre limite DP2P.","-1657433201":"Il n\'y a pas d\'annonces correspondantes.","-198897319":"Taux d\'achèvement: {{total_completion_rate}}%","-101756270":"Limites {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"Acheter {{account_currency}}","-1035421133":"Vendre {{account_currency}}","-1325806155":"Il n\'y a pas d\'annonces.","-1845037007":"Page de l\'annonceur","-1285759343":"Rechercher","-1005884051":"Taux d\'achèvement","-1638172550":"Pour activer cette fonctionnalité, vous devez effectuer les opérations suivantes:","-278618671":"Votre caisse DP2P est verrouillée","-1561775203":"Acheter {{currency}}","-1527285935":"Vendre {{currency}}","-1654157453":"Taux fixe (1 {{currency}})","-379708059":"Ordre minimum","-1459289144":"Ces informations seront visibles par tous.","-2061807537":"Quelque chose ne va pas","-329713179":"Ok","-458710804":"Vous créez une annonce pour acheter <0>{{ target_amount }} {{ target_currency }}</0> pour <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Vous créez une annonce pour vendre <0>{{ target_amount }} {{ target_currency }}</0> pour <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Vous créez une annonce pour vendre <0>{{ target_amount }} {{ target_currency }}</0>...","-514789442":"Vous créez une annonce pour acheter...","-1179827369":"Créer une nouvelle annonce","-392043307":"Voulez-vous supprimer cette annonce?","-854930519":"Vous ne pourrez PAS le restaurer.","-372210670":"Taux (1 {{account_currency}})","-1395240684":"Vendre {{ id }}","-1318334333":"Désactiver","-1667041441":"Taux (1 {{ offered_currency }})","-806152028":"Vos annonces sont diffusées","-1003919851":"Balance DP2P disponible","-721514112":"Modèle d\'annonce","-179005984":"Sauvegarder","-1596761987":"Afficher mon vrai nom ({{full_name}})","-270004636":"Achat / Vente ({{currency}})","-532709160":"Votre pseudo","-2008992756":"Voulez-vous annuler cette commande?","-2026176944":"Merci de ne pas annuler si vous avez déjà fait un paiement.","-1989544601":"Annuler cet ordre","-492996224":"Ne pas annuler","-510341549":"J\'ai reçu moins que le montant convenu.","-650030360":"J\'ai payé plus que le montant convenu.","-1192446042":"Si votre réclamation n\'est pas répertoriée ici, veuillez contacter notre équipe Service client.","-573132778":"Plainte","-792338456":"Quelle est votre plainte?","-567498463":"Confirmez le paiement?","-1485778481":"Avez-vous reçu un paiement?","-403938778":"Veuillez confirmer uniquement après avoir vérifié votre compte bancaire ou votre portefeuille électronique pour vous assurer que vous avez reçu le paiement.","-2000877952":"J\'ai reçu {{amount}}{{currency}}","-563116612":"Je n\'ai pas encore payé","-1392383387":"J\'ai payé","-418870584":"Annuler l\'ordre","-727273667":"Se plaindre","-2016990049":"Vendre ordre {{offered_currency}}","-811190405":"Heure","-1797318839":"En cas de litige, nous ne prendrons en compte que la communication par le canal de chat P2P de Deriv.","-283017497":"Réessayer","-2052184983":"Nº. d\'ordre","-2096350108":"Contrepartie","-750202930":"Trades actifs","-471540636":"J\'ai reçu {{amount}}{{currency}}.","-2054589794":"Vous avez été temporairement interdit d\'utiliser nos services en raison de plusieurs tentatives d\'annulation. Réessayez après {{date_time}} GMT.","-1971628122":"Cette fonction n\'est pour l\'instant disponible que pour les comptes en argent réel en USD.","-1709848333":"DP2P est prêt pour vous"}'),ha=JSON.parse('{"50672601":"Membeli","68867477":"ID order {{ id }}","121738739":"Mengirim","145959105":"Pilih nama panggilan\\n","246815378":"Setelah ditetapkan, nama panggilan Anda tidak dapat diubah.","323002325":"Pasang iklan","324970564":"Rincian kontak Penjual","338910048":"Anda akan muncul kepada pengguna lain sebagai","346163411":"Beli {{ id }}","349630134":"Kolom berikut adalah berisikan beberapa aktivitas 30 hari terakhir: Beli, Jual, Penyelesaian, dan Rata-rata waktu rilis.","364681129":"Rincian kontak","375577530":"Untuk menggunakan DP2P, Anda harus memilih nama tampilan (nama panggilan) dan memverifikasi identitas Anda.","416167062":"Anda akan menerima","424668491":"berakhir","452752527":"Harga (1 {{ currency }})","460477293":"Masukkan pesan","473688701":"Masukkan jumlah yang valid","482271786":"Pengaturan privasi","501523417":"Anda tidak memiliki order.","523301614":"Rilis {{amount}} {{currency}}","525380157":"Beli order {{offered_currency}}","531912261":"Nama bank, nomor rekening, nama penerima","580715136":"Mendaftarlah dengan kami!","587882987":"Pengiklan","592082899":"Tidak dapat mengulangi karakter lebih dari 5 kali.","649549724":"Saya belum menerima pembayaran apapun.","671582270":"Jumlah maksimum yang tersedia adalah {{value}}","683273691":"Harga (1 {{ account_currency }})","728383001":"Dana yang saye terima lebih dari jumlah yang disepakati.","767789372":"Tunggu pembayaran","782834680":"Sisa waktu","791324098":"Total order","830703311":"Profil saya","838024160":"Detail bank","842911528":"Jangan tampilkan pesan ini lagi.","873437248":"Instruksi (opsional)","876086855":"Lengkapi formulir penilaian keuangan","887667868":"Order","915127158":"Jika Anda membatalkan order ini, Anda akan diblokir menggunakan DP2P selama {{block_duration}} jam.","949859957":"Kirim","954233511":"Terjual","988380202":"Instruksi Anda","1001160515":"Jual","1020552673":"Anda membuat iklan untuk membeli <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"Jika Anda membatalkan order {{cancellation_limit}} kali dalam {{cancellation_period}} jam, Anda akan diblokir dari penggunaan DP2P selama {{block_duration}} jam. <br /> ({{number_of_cancels_remaining}} pembatalan tersisa.)","1035893169":"Hapus","1041078003":"Batas {{min_order_amount_limit_display}}–{{max_order_amount_limit_display}} {{currency}}","1052094244":"Order maksimum","1057127276":"{{- avg_release_time_in_minutes}} menit","1080990424":"Mengkonfirmasi","1103731601":"Iklan Anda dijeda","1106073960":"Anda sudah memasang iklan","1119887091":"Verifikasi","1137964885":"Hanya dapat berisi huruf, angka, dan karakter khusus . - _ @.","1141515080":"Kasir DP2P tidak tersedia di negara Anda.","1151608942":"Jumlah total","1157877436":"{{field_name}} tidak boleh melebihi jumlah","1161621759":"Pilih nama panggilan Anda","1162965175":"Pembeli","1202500203":"Bayar sekarang","1236083813":"Rincian pembayaran Anda","1258285343":"Sesuatu telah terjadi","1286797620":"Aktif","1287051975":"Nama panggilan terlalu panjang","1326475003":"Mengaktifkan","1328352136":"Jual {{ account_currency }}","1337027601":"Anda telah menjual sejumlah {{offered_amount}} {{offered_currency}}","1347724133":"Saya telah membayar {{amount}} {{currency}}.","1364774599":"(Beli {{- buy_completion_rate }})","1366244749":"Batasan","1371193412":"Batal","1430413419":"Maksimum adalah {{value}} {{currency}}","1467483693":"Order sebelumnya","1474532322":"Sortir menurut","1538160426":"Pastikan Anda sudah membayar {{amount}}{{currency}} ke {{other_user_name}}.","1583335572":"Jika iklan ini tidak menerima order dalam tempo {{adverts_archive_period}}, maka iklan akan dinonaktifkan.","1587250288":"Ad ID {{advert_id}} ","1589127544":"Saya telah membayar {{amount}} {{currency}}","1607051458":"Cari berdasarkan nama panggilan","1623916605":"Saya tidak dapat melakukan pembayaran penuh.","1654365787":"Tidak diketahui","1675716253":"Batasan minimum","1678804253":"Beli {{ currency }}","1690094221":"Batas Beli/Jual ({{currency}})","1734661732":"Saldo DP2P Anda adalah {{ dp2p_balance }}","1752096323":"{{field_name}} tidak boleh di bawah batasan minimum","1752646100":"Saldo DP2P = deposit yang tidak dapat dibatalkan (melalui tranfer bank, dsb) + sejumlah deposit yanng mungkin dapat dibatalkan (melalui kartu kredit, dsb)","1794470010":"Saya telah melakukan pembayaran penuh, tetapi penjual belum mentransfer dana.","1794474847":"Pembayaran diterima","1798116519":"Jumlah yang tersedia","1812964994":"Jual ({{currency}})","1824755021":"misalnya rincian rekening bank/e-wallet Anda","1842172737":"Anda telah menerima {{offered_amount}} {{offered_currency}}","1848044659":"Anda tidak memiliki iklan.","1881862381":"Batas Beli/Jual Anda direset pada pukul 00:00 GMT setiap hari.","1893264068":"Jumlah jual","1923443894":"Tidak aktif","1928240840":"Jual {{ currency }}","1976156928":"Anda akan mengirim","1992961867":"Harga (1 {{currency}})","2005611694":"Selesai","2029375371":"Instruksi pembayaran","2039361923":"Anda membuat iklan untuk menjual...","2062662999":"Beli ({{currency}})","2063890788":"Dibatalkan","2086563542":"Nilai tukar (Standar)","2087814509":"Saldo yang tersedia","2091671594":"Status","2121837513":"Minimum adalah {{value}} {{currency}}","2142425493":"ID iklan","2144972362":"Silakan gunakan obrolan langsung untuk menghubungi tim Customer Support kami untuk memperoleh bantuan.","2146619399":"Batasan: {{min}}–{{max}} {{currency}}","-1540251249":"Beli {{ account_currency }}","-1267880283":"{{field_name}} diperlukan","-2019083683":"{{field_name}} hanya dapat berisikan huruf, angka, spasi, dan simbol berikut: -+.,\'#@():;","-222920564":"{{field_name}} telah melebihi panjang maksimum","-857786650":"Periksa status verifikasi Anda.","-612892886":"Kami memerlukan Anda untuk mengirim dokumen untuk memverifikasi identitas Anda.","-2090325029":"Verifikasi identitas sudah lengkap.","-1101273282":"Nama panggilan diperlukan","-919203928":"Nama panggilan terlalu pendek","-1907100457":"Tidak dapat memulai, diakhiri dengan, atau mengulang karakter khusus.","-2125702445":"Instruksi","-1274358564":"Batas maksimum","-1995606668":"Jumlah","-1965472924":"Harga tetap","-1081775102":"{{field_name}} tidak boleh di bawah batas maksimum","-885044836":"{{field_name}} tidak boleh melebihi batas maksimum","-1764050750":"Detail pembayaran","-1207312691":"Selesai","-688728873":"Berakhir","-1951641340":"Dalam perselisihan","-1738697484":"Konfirmasi pembayaran","-559149524":"Menunggu rilis","-1597110099":"Menerima","-892663026":"Rincian kontak Anda","-55126326":"Penjual","-1875343569":"Rincian pembayaran penjual","-92830427":"Instruksi penjual","-1940034707":"Instruksi pembeli","-137444201":"Beli","-1102534097":"Tidak ada iklan","-979459594":"Beli/Jual","-1769852749":"N/A","-781045632":"Waktu rilis rata-rata","-2017825013":"Mengerti","-1186622577":"ID terverifikasi","-907053343":"Alamat terverifikasi","-1837059346":"Beli / Jual","-494667560":"Order","-679691613":"Iklan saya","-2144314441":"Jumlah beli","-1974067943":"Detail bank Anda","-1135933077":"Tampilkan iklan yang cocok","-2033454751":"Temukan iklan sesuai dengan saldo dan batas DP2P Anda.","-1657433201":"Tidak terdapat iklan yang cocok.","-198897319":"Tingkat penyelesaian: {{total_completion_rate}}%","-101756270":"Batas {{ min_order }}–{{ max_order }}{{ currency }}","-375836822":"Beli {{account_currency}}","-1035421133":"Jual {{account_currency}}","-1325806155":"Tidak terdapat iklan.","-1845037007":"Halaman pengiklan","-1285759343":"Cari","-1005884051":"Tingkat penyelesaian","-1638172550":"Untuk mengaktifkan fitur ini Anda harus menyelesaikan hal berikut ini:","-278618671":"Kasir DP2P Anda dibatalkan","-1561775203":"Beli {{currency}}","-1527285935":"Jual {{currency}}","-1654157453":"Harga tetap (1 {{currency}})","-379708059":"Order minimal","-1459289144":"Informasi ini dapat dilihat oleh semua orang.","-2061807537":"Telah terjadi error","-329713179":"Ok","-458710804":"Anda membuat iklan untuk membeli <0>{{ target_amount }} {{ target_currency }}</0> untuk <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Anda membuat iklan untuk menjual <0>{{ target_amount }} {{ target_currency }}</0> untuk <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Anda membuat iklan untuk menjual <0>{{ target_amount }}{{ target_currency }}</0>...","-514789442":"Anda membuat iklan untuk membeli...","-1179827369":"Buat iklan baru","-392043307":"Apakah Anda ingin menghapus iklan ini?","-854930519":"Anda TIDAK akan dapat mengembalikannya.","-372210670":"Harga (1 {{account_currency}})","-1395240684":"Jual {{ id }}","-1318334333":"Menonaktifkan","-1667041441":"Harga (1 {{ offered_currency }})","-806152028":"Iklan Anda sedang berjalan","-1003919851":"Saldo DP2P yang tersedia","-721514112":"Templat iklan","-179005984":"Simpan","-1596761987":"Tampilkan nama asli ({{full_name}})","-270004636":"Beli /Jual ({{currency}})","-532709160":"Nama panggilan Anda","-2008992756":"Apakah Anda ingin membatalkan order ini?","-2026176944":"Jangan batalkan jika Anda sudah melakukan pembayaran.","-1989544601":"Batalkan order ini","-492996224":"Jangan batalkan","-510341549":"Dana yang saya terima kurang dari jumlah yang disepakati.","-650030360":"Saya sudah membayar lebih dari jumlah yang disepakati.","-1192446042":"Jika keluhan Anda tidak tercantum di sini, silakan hubungi tim Customer Support kami.","-573132778":"Keluhan","-792338456":"Apa keluhan Anda?","-567498463":"Konfirmasi pembayaran?","-1485778481":"Apakah Anda sudah menerima pembayaran?","-403938778":"Hanya lakukan konfirmasi setelah mengecek rekening bank atau e-wallet Anda untuk memastikan pembayaran telah diterima.","-2000877952":"Saya telah menerima {{amount}} {{currency}}","-563116612":"Saya belum membayar","-1392383387":"Saya sudah membayar","-418870584":"Batalkan order","-727273667":"Komplain","-2016990049":"Jual order {{offered_currency}}","-811190405":"Waktu","-1797318839":"Jika terjadi perselisihan, kami hanya akan mempertimbangkan komunikasi melalui saluran obrolan Deriv P2P.","-283017497":"Coba kembali","-2052184983":"ID order","-2096350108":"Rekanan","-750202930":"Order aktif","-471540636":"Saya telah menerima {{amount}} {{currency}}.","-2054589794":"Anda telah diblokir sementara waktu untuk menggunakan layanan kami berhubung beberapa kali telah melakukan pembatalan transaksi. Coba kembali setelah {{date_time}} GMT.","-1971628122":"Fitur ini hanya tersedia pada akun uang riil dalam USD.","-1709848333":"DP2P sudah tersedia untuk Anda"}'),fa=JSON.parse('{"50672601":"Acquistato","68867477":"ID dell\'ordine {{ id }}","121738739":"Invia","145959105":"Scegli un soprannome","246815378":"Una volta impostato, il soprannome non può essere cambiato.","323002325":"Pubblica annuncio","324970564":"Dettagli contatto venditore","338910048":"Gli utenti visualizzeranno il nome","346163411":"Acquista {{ id }}","349630134":"Questi campi si basano sulle attività degli ultimi 30 giorni: acquisto, vendita, completamento e tempo d\'immissione media di fondi.","364681129":"Dettagli di contatto","375577530":"Per usare DP2P, scegli un nome visualizzato (ossia un soprannome) e verifica la tua identità.","416167062":"Ricevi","424668491":"scaduto","452752527":"Tasso (1 {{ currency }})","460477293":"Inserisci un messaggio","473688701":"Inserisci un importo valido","482271786":"Impostazioni sulla privacy","501523417":"Non hai ordini.","523301614":"Immetti {{amount}} {{currency}}","525380157":"Acquista ordine in {{offered_currency}}","531912261":"Nome della banca, numero di conto, nome del beneficiario","580715136":"Registrati subito!","587882987":"Annunci","592082899":"Non puoi ripetere un carattere per più di 5 volte.","649549724":"Non ho ricevuto alcun pagamento.","671582270":"L\'importo massimo disponibile è {{value}}","683273691":"Tasso (1 {{ account_currency }})","728383001":"Ho ricevuto un importo superiore a quello stabilito.","767789372":"Attendi il termine del pagamento","782834680":"Tempo residuo","791324098":"Ordini totali","830703311":"Il mio profilo","838024160":"Dettagli bancari","842911528":"Non mostrare più questo messaggio.","873437248":"Istruzioni (opzionali)","876086855":"Completa il modulo della valutazione finanziaria","887667868":"Ordine","915127158":"Se annulli l\'ordine, non potrai usare DP2P per {{block_duration}} ore.","949859957":"Invia","954233511":"Venduto","988380202":"Istruzioni","1001160515":"Vendi","1020552673":"Stai creando un annuncio per acquistare <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"Se annulli l\'ordine {{cancellation_limit}} volte in {{cancellation_period}} ore, non potrai usare DP2P per {{block_duration}} ore. <br /> ({{number_of_cancels_remaining}} cancellazioni rimanenti.)","1035893169":"Elimina","1041078003":"Limiti {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Ordine max","1057127276":"{{- avg_release_time_in_minutes}} min","1080990424":"Conferma","1103731601":"I tuoi annunci sono stati sospesi","1106073960":"Hai creato un annuncio","1119887091":"Verifica","1137964885":"Può contenere solo lettere, numeri e i caratteri speciali .- _ @.","1141515080":"La cassa DP2P non è disponibile nel tuo Paese.","1151608942":"Importo totale","1157877436":"{{field_name}} non deve superare l\'importo","1161621759":"Scegli un soprannome","1162965175":"Compratore","1202500203":"Paga ora","1236083813":"Dettagli del pagamento","1258285343":"Ops, qualcosa non ha funzionato","1286797620":"Attivo","1287051975":"Soprannome troppo lungo","1326475003":"Attiva","1328352136":"Vendi {{ account_currency }}","1337027601":"Hai venduto {{offered_amount}} {{offered_currency}}","1347724133":"Ho pagato {{amount}} {{currency}}.","1364774599":"(Acquista {{- buy_completion_rate }})","1366244749":"Limiti","1371193412":"Annulla","1430413419":"Il massimo è {{value}} {{currency}}","1467483693":"Ordini passati","1474532322":"Ordina per","1538160426":"Assicurati di aver pagato {{amount}} {{currency}} a {{other_user_name}}.","1583335572":"Se non ricevi ordini per il tuo annuncio per {{adverts_archive_period}} giorni, questo verrà disattivato.","1587250288":"ID annuncio {{advert_id}} ","1589127544":"Ho pagato {{amount}} {{currency}}","1607051458":"Cerca per soprannome","1623916605":"Non ho potuto effettuare il pagamento completo.","1654365787":"Sconosciuto","1675716253":"Limite minimo","1678804253":"Acquista {{ currency }}","1690094221":"Limiti di acquisto/vendita ({{currency}})","1734661732":"Il tuo saldo DP2P è {{ dp2p_balance }}","1752096323":"{{field_name}} non può essere inferiore al limite minimo","1752646100":"Saldo DP2P = depositi che non possono essere annullati (bonifici bancari ecc.) + una parte dei depositi che potrebbero essere annullati (pagamenti con carta di credito ecc.)","1794470010":"Ho effettuato il pagamento completo ma il venditore non ha emesso fondi.","1794474847":"Ho ricevuto il pagamento","1798116519":"Importo disponibile","1812964994":"Vendi ({{currency}})","1824755021":"e.g. dettagli del conto bancario/del portafoglio elettronico","1842172737":"Hai ricevuto {{offered_amount}} {{offered_currency}}","1848044659":"Non hai annunci.","1881862381":"Il limite di acquisto/vendita verrà reimpostato ogni giorno alle 00:OO GMT.","1893264068":"Vendi importo","1923443894":"Disattivato","1928240840":"Vendi {{ currency }}","1976156928":"Invia","1992961867":"Tasso (1 {{currency}})","2005611694":"Completamento","2029375371":"Istruzioni per il pagamento","2039361923":"Stai creando un annuncio per vendere...","2062662999":"Acquista ({{currency}})","2063890788":"Annullato","2086563542":"Tasso di scambio (predefinito)","2087814509":"Saldo disponibile","2091671594":"Stato","2121837513":"Il minimo è {{value}} {{currency}}","2142425493":"ID annuncio","2144972362":"Sei ti serve aiuto, usa la live chat per contattare il nostro team di assistenza clienti.","2146619399":"Limiti: {{min}}–{{max}} {{currency}}","-1540251249":"Acquista {{ account_currency }}","-1267880283":"{{field_name}} è obbligatorio","-2019083683":"{{field_name}} può comprendere solo lettere, numeri, spazi e i seguenti simboli: -+.,\'#@():;","-222920564":"{{field_name}} ha superato la lunghezza massima","-857786650":"Controlla il tuo stato di verifica.","-612892886":"È necessario caricare i documenti per verificare la tua identità.","-2090325029":"Le verifica dell\'identità è stata completata.","-1101273282":"Soprannome obbligatorio","-919203928":"Soprannome troppo corto","-1907100457":"Non puoi ripetere i caratteri speciali né usarli all\'inizio o alla fine della sequenza.","-2125702445":"Istruzioni","-1274358564":"Limite massimo","-1995606668":"Importo","-1965472924":"Tasso fisso","-1081775102":"{{field_name}} non può essere inferiore al limite massimo","-885044836":"{{field_name}} non può superare il limite massimo","-1764050750":"Dettagli del pagamento","-1207312691":"Completato","-688728873":"Scaduto","-1951641340":"Oggetto della controversia","-1738697484":"Conferma il pagamento","-559149524":"Attendi il rilascio","-1597110099":"Ricevi","-892663026":"Dettagli di contatto personali","-55126326":"Venditore","-1875343569":"Dettagli pagamento venditore","-92830427":"Istruzioni del venditore","-1940034707":"Istruzioni dell\'acquirente","-137444201":"Acquista","-1102534097":"Nessun annuncio","-979459594":"Acquista/Vendi","-1769852749":"N/A","-781045632":"Tempo di immissione medio","-2017825013":"Ho capito","-1186622577":"ID verificato","-907053343":"Indirizzo verificato","-1837059346":"Acquista / Vendi","-494667560":"Ordini","-679691613":"I miei annunci","-2144314441":"Acquista corrispettivo","-1974067943":"Dettagli bancari personali","-1135933077":"Mostra gli annunci corrispondenti","-2033454751":"Vedi gli annunci corrispondenti ai limiti e al saldo DP2P.","-1657433201":"Non ci sono annunci corrispondenti.","-198897319":"Tasso di completamento: {{total_completion_rate}}%","-101756270":"Limiti {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"Acquista {{account_currency}}","-1035421133":"Vendi {{account_currency}}","-1325806155":"Non ci sono annunci.","-1845037007":"Pagina dell\'inserzionista","-1285759343":"Cerca","-1005884051":"Tasso di completamento","-1638172550":"Per disabilitare questa funzione, completa quanto segue:","-278618671":"La tua cassa DP2P è bloccata","-1561775203":"Acquista {{currency}}","-1527285935":"Vendi {{currency}}","-1654157453":"Tasso fisso (1 {{currency}})","-379708059":"Ordine minimo","-1459289144":"Queste informazioni saranno visibili a tutti.","-2061807537":"Qualcosa non va","-329713179":"Ok","-458710804":"Stai creando un annuncio per acquistare <0>{{ target_amount }} {{ target_currency }}</0> per <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Stai creando un annuncio per vendere <0>{{ target_amount }} {{ target_currency }}</0> per <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Stai creando un annuncio per vendere <0>{{ target_amount }} {{ target_currency }}</0>...","-514789442":"Stai creando un annuncio per acquistare...","-1179827369":"Crea nuovo annuncio","-392043307":"Vuoi eliminare questo annuncio?","-854930519":"NON potrai ripristinarlo.","-372210670":"Tasso (1 {{account_currency}})","-1395240684":"Vendi {{ id }}","-1318334333":"Disattiva","-1667041441":"Tasso (1 {{ offered_currency }})","-806152028":"Annunci in riproduzione","-1003919851":"Saldo DP2P disponibile","-721514112":"Modello annuncio","-179005984":"Salva","-1596761987":"Mostra il mio vero nome ({{full_name}})","-270004636":"Acquista / Vendi ({{currency}})","-532709160":"Soprannome","-2008992756":"Vuoi annullare l\'ordine?","-2026176944":"Non annullare l\'ordine se hai già effettuato il pagamento.","-1989544601":"Annulla l\'ordine","-492996224":"Non cancellare","-510341549":"Ho ricevuto un importo inferiore a quello stabilito.","-650030360":"Ho pagato più dell\'importo stabilito.","-1192446042":"Se il tuo reclamo non appare in questo elenco, contatta l\'assistenza clienti.","-573132778":"Reclami","-792338456":"In cosa consiste il tuo reclamo?","-567498463":"Confermi il pagamento?","-1485778481":"Hai ricevuto un pagamento?","-403938778":"Conferma solo dopo aver controllato di aver ricevuto il pagamento su conto bancario o del portafoglio elettronico.","-2000877952":"Ho ricevuto {{amount}} {{currency}}","-563116612":"Non ho ancora pagato","-1392383387":"Ho pagato","-418870584":"Annulla l\'ordine","-727273667":"Invia reclamo","-2016990049":"Vendi ordine in {{offered_currency}}","-811190405":"Orario","-1797318839":"In caso di controversia, solo le comunicazioni sulle chat di P2P Deriv verranno prese in considerazione.","-283017497":"Riprova","-2052184983":"Identificativo dell\'ordine","-2096350108":"Controparte","-750202930":"Ordini attivi","-471540636":"Ho ricevuto {{amount}} {{currency}}.","-2054589794":"Il tuo profilo è stato momentaneamente bloccato e non potrai accedere ai nostri servizi a causa di vari tentativi di annullamento. Riprova nuovamente dopo il giorno {{date_time}} GMT.","-1971628122":"Al momento, questa opzione è disponibile solo per i conti reali in USD.","-1709848333":"DP2P ti sta aspettando"}'),ma=JSON.parse('{"50672601":"Kupiono","68867477":"Numer ID zlecenia {{ id }}","121738739":"Wyślij","145959105":"Wybierz pseudonim","246815378":"Po wybraniu pseudonimu nie można go zmienić.","323002325":"Opublikuj reklamę","324970564":"Dane kontaktowe sprzedającego","338910048":"Inni użytkownicy będą Cię widzieć jako","346163411":"Kup {{ id }}","349630134":"Te pola opierają się na działaniach z ostatnich 30 dni: Kup, Sprzedaj, Ukończenie i Średni czas publikacji.","364681129":"Dane kontaktowe","375577530":"Aby korzystać z DP2P, musisz wybrać nazwę do wyświetlenia (pseudonim) i zweryfikować swoją tożsamość.","416167062":"Otrzymasz","424668491":"wygasło","452752527":"Opłata (1 {{ currency }})","460477293":"Wprowadź wiadomość","473688701":"Podaj prawidłową kwotę","482271786":"Ustawienia prywatności","501523417":"Nie masz żadnych zleceń.","523301614":"Odblokuj {{currency}} {{amount}}","525380157":"Kup {{offered_currency}} zlecenie","531912261":"Nazwa banku, numer rachunku i nazwa odbiorcy","580715136":"Zarejestruj się!","587882987":"Reklamodawcy","592082899":"Nie można powtórzyć znaku więcej niż 5 razy.","649549724":"Nie otrzymano żadnej płatności.","671582270":"Maksymalna dostępna kwota to {{value}}","683273691":"Opłata (1 {{ account_currency }})","728383001":"Otrzymano więcej niż ustalona kwota.","767789372":"Poczekaj na płatność","782834680":"Pozostały czas","791324098":"Wszystkie zlecenia","830703311":"Mój profil","838024160":"Dane banku","842911528":"Nie pokazuj tej wiadomości ponownie.","873437248":"Instrukcje (opcjonalnie)","876086855":"Wypełnij formularz oceny finansowej","887667868":"Zlecenie","915127158":"Jeśli anulujesz to zlecenie, korzystanie z DP2P zostanie zablokowane na {{block_duration}} godzin(y).","949859957":"Prześlij","954233511":"Sprzedane","988380202":"Twoje instrukcje","1001160515":"Sprzedaj","1020552673":"Tworzysz reklamę, aby kupić <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"Jeśli anulujesz swoje zlecenie {{cancellation_limit}} razy w ciągu {{cancellation_period}} godzin, korzystanie z DP2P zostanie zablokowane na {{block_duration}} godzin(y). (Pozostało anulowań: {{number_of_cancels_remaining}}).","1035893169":"Usuń","1041078003":"Limity {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Maks. zlecenie","1057127276":"{{- avg_release_time_in_minutes}} min","1080990424":"Potwierdź","1103731601":"Twoje reklamy są wstrzymane","1106073960":"Utworzono ogłoszenie","1119887091":"Weryfikacja","1137964885":"Może zawierać tylko litery, liczby i znaki specjalne .- _ @.","1141515080":"Kasjer DP2P nie jest dostępny w Twoim kraju.","1151608942":"Całkowita kwota","1157877436":"Pole {{field_name}} nie powinno być wyższe niż Kwota","1161621759":"Wybierz swój pseudonim","1162965175":"Kupujący","1202500203":"Zapłać teraz","1236083813":"Szczegóły Twojej płatności","1258285343":"Ups, coś poszło nie tak","1286797620":"Aktywne","1287051975":"Pseudonim jest za długi","1326475003":"Aktywuj","1328352136":"Sprzedaj {{ account_currency }}","1337027601":"Sprzedano {{offered_currency}} {{offered_amount}}","1347724133":"Zapłacono {{amount}} {{currency}}.","1364774599":"(Kup {{- buy_completion_rate }})","1366244749":"Limity","1371193412":"Anuluj","1430413419":"Maksimum to {{currency}} {{value}}","1467483693":"Przeszłe zlecenia","1474532322":"Sortuj według","1538160426":"Upewnij się, że zapłacono {{amount}} {{currency}} dla {{other_user_name}}.","1583335572":"Jeśli ogłoszenie nie otrzyma zlecenia przez {{adverts_archive_period}} dni, zostanie dezaktywowane.","1587250288":"ID reklamy {{advert_id}} ","1589127544":"Zapłacono {{amount}} {{currency}}","1607051458":"Wyszukaj po pseudonimie","1623916605":"Nie udało się dokonać pełnej płatności.","1654365787":"Nieznany","1675716253":"Min. limit","1678804253":"Kup {{ currency }}","1690094221":"Limit zakupu / sprzedaży ({{currency}})","1734661732":"Twoje saldo DP2P wynosi {{ dp2p_balance }}","1752096323":"Pole {{field_name}} nie powinno być niższe niż Min. limit","1752646100":"Saldo DP2P = nieodwracalne (przelew in blanco itp.) + część wpłat odwracalnych (płatności kartą kredytową itp.)","1794470010":"Dokonano pełnej płatności, ale sprzedający nie przekazał środków.","1794474847":"Otrzymano płatność","1798116519":"Dostępna kwota","1812964994":"Sprzedaj ({{currency}})","1824755021":"np. szczegóły Twojego konta bankowego/e-portfela","1842172737":"Otrzymano {{offered_amount}} {{offered_currency}}","1848044659":"Nie masz żadnych reklam.","1881862381":"Twój limit kupna/sprzedaży resetuje się codziennie o godz. 00:00 GMT.","1893264068":"Kwota sprzedaży","1923443894":"Nieaktywne","1928240840":"Sprzedaj {{ currency }}","1976156928":"Wyślesz","1992961867":"Opłata (1 {{currency}})","2005611694":"Ukończenie","2029375371":"Instrukcje dot. płatności","2039361923":"Tworzysz reklamę, aby sprzedać...","2062662999":"Kup ({{currency}})","2063890788":"Anulowano","2086563542":"Kurs wymiany (domyślny)","2087814509":"Dostępne saldo","2091671594":"Status","2121837513":"Minimum to {{currency}} {{value}}","2142425493":"ID reklamy","2144972362":"Skontaktuj się z naszym działem obsługi klienta przez czat na żywo, aby uzyskać pomoc.","2146619399":"Limity: {{min}}–{{max}} {{currency}}","-1540251249":"Kup {{ account_currency }}","-1267880283":"Pole {{field_name}} jest wymagane","-2019083683":"Pole {{field_name}} może zawierać tylko litery, liczby, spacje i te znaki specjalne: -+.,\'#@():;","-222920564":"Pole {{field_name}} przekroczyło maks. długość","-857786650":"Sprawdź status weryfikacji.","-612892886":"Będziemy musieli przesłać Twoje dokumenty, aby zweryfikować Twoją tożsamość.","-2090325029":"Weryfikacja tożsamości została zakończona.","-1101273282":"Wymagany jest pseudonim","-919203928":"Pseudonim jest za krótki","-1907100457":"Nie można rozpocząć ani zacząć od znaku specjalnego, ani powtórzyć go.","-2125702445":"Instrukcje","-1274358564":"Maks. limit","-1995606668":"Kwota","-1965472924":"Stała stawka","-1081775102":"Pole {{field_name}} nie powinno być niższe niż Maks. limit","-885044836":"Pole {{field_name}} nie powinno przekraczać Maks. limitu","-1764050750":"Szczegóły płatności","-1207312691":"Ukończono","-688728873":"Wygasło","-1951641340":"Trwający spór","-1738697484":"Potwierdź płatność","-559149524":"Czekaj na publikację","-1597110099":"Otrzymaj","-892663026":"Twoje dane kontaktowe","-55126326":"Sprzedający","-1875343569":"Dane płatnicze sprzedającego","-92830427":"Instrukcje sprzedającego","-1940034707":"Instrukcje kupującego","-137444201":"Kup","-1102534097":"Brak reklam","-979459594":"Kup/Sprzedaj","-1769852749":"ND.","-781045632":"Średni czas publikacji","-2017825013":"Rozumiem","-1186622577":"Zweryfikowano ID","-907053343":"Adres zweryfikowany","-1837059346":"Kup / Sprzedaj","-494667560":"Zlecenia","-679691613":"Moje reklamy","-2144314441":"Kwota zakupu","-1974067943":"Dane Twojego banku","-1135933077":"Pokaż pasujące reklamy","-2033454751":"Zobacz reklamy, które odpowiadają Twojemu saldu DP2P i limitom.","-1657433201":"Brak pasujących ogłoszeń.","-198897319":"Wskaźnik ukończenia: {{total_completion_rate}}%","-101756270":"Limity {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"Kup {{account_currency}}","-1035421133":"Sprzedaj {{account_currency}}","-1325806155":"Nie ma żadnych reklam.","-1845037007":"Strona reklamującego","-1285759343":"Szukaj","-1005884051":"Wskaźnik ukończenia","-1638172550":"Aby włączyć tę funkcję, musisz wykonać następujące czynności:","-278618671":"Twoja sekcja Kasjer jest zablokowana","-1561775203":"Kup {{currency}}","-1527285935":"Sprzedaj {{currency}}","-1654157453":"Stała stawka (1 {{currency}})","-379708059":"Min. zlecenie","-1459289144":"Ta informacja będzie widoczna dla wszystkich.","-2061807537":"Coś jest nie tak","-329713179":"Ok","-458710804":"Tworzysz reklamę, aby kupić <0>{{ target_amount }} {{ target_currency }}</0> za <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Tworzysz reklamę, aby sprzedać <0>{{ target_amount }} {{ target_currency }}</0> za <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Tworzysz reklamę, aby sprzedać <0>{{ target_amount }} {{ target_currency }}</0>...","-514789442":"Tworzysz reklamę, aby kupić...","-1179827369":"Utwórz nową reklamę","-392043307":"Chcesz usunąć tę reklamę?","-854930519":"Przywrócenie NIE będzie możliwe.","-372210670":"Opłata (1 {{account_currency}})","-1395240684":"Sprzedaj {{ id }}","-1318334333":"Deaktywuj","-1667041441":"Opłata (1 {{ offered_currency }})","-806152028":"Twoje reklamy są aktywne","-1003919851":"Dostępne saldo DP2P","-721514112":"Szablon reklamy","-179005984":"Zapisz","-1596761987":"Pokaż moje prawdziwe imię i nazwisko ({{full_name}})","-270004636":"Kup / Sprzedaj ({{currency}})","-532709160":"Twój pseudonim","-2008992756":"Chcesz anulować to zlecenie?","-2026176944":"Jeśli dokonano już płatności, nie należy korzystać z opcji anulowania.","-1989544601":"Anuluj to zlecenie","-492996224":"Nie anuluj","-510341549":"Otrzymano mniejszą kwotę niż ustalono.","-650030360":"Zapłacono więcej niż ustalona kwota.","-1192446042":"Jeśli Twoja skarga nie jest tu wyszczególniona, skontaktuj się z działem wsparcia.","-573132778":"Skargi","-792338456":"Czego dotyczy skarga?","-567498463":"Potwierdzić płatność?","-1485778481":"Otrzymano płatność?","-403938778":"Przed potwierdzeniem sprawdź swoje konto w banku lub e-portfelu, aby upewnić się, że płatność wpłynęła.","-2000877952":"Otrzymano {{amount}} {{currency}}","-563116612":"Jeszcze nie zapłacono","-1392383387":"Zapłaciłem","-418870584":"Anuluj zlecenie","-727273667":"Skarga","-2016990049":"Sprzedaj {{offered_currency}} zlecenie","-811190405":"Czas","-1797318839":"W przypadku sporu brana będzie pod uwagę wyłącznie komunikacja przez czat Deriv P2P.","-283017497":"Spróbuj ponownie","-2052184983":"ID zlecenia","-2096350108":"Kontrahent","-750202930":"Aktywne zlecenia","-471540636":"Otrzymano {{amount}} {{currency}}.","-2054589794":"Objęto Cię tymczasowym zakazem korzystania z naszych usług z powodu kilkukrotnych prób anulowania. Spróbuj ponownie po {{date_time}} GMT.","-1971628122":"W chwili obecnej funkcja nie jest dostępna dla kont z prawdziwymi pieniędzmi prowadzonych w USD.","-1709848333":"DP2P jest już gotowy"}'),_a=JSON.parse('{"50672601":"Adquiridos","68867477":"ID do pedido {{ id }}","121738739":"Enviar","145959105":"Escolha um apelido","246815378":"Uma vez definido, seu apelido não pode ser alterado.","323002325":"Postar anúncio","324970564":"Detalhes de contato do vendedor","338910048":"Você aparecerá para outros usuários como","346163411":"Compre {{id}}","349630134":"Esses campos são baseados na atividade dos últimos 30 dias: Compra, Venda, Conclusão e tempo médio de liberação.","364681129":"Detalhes de contato","375577530":"Para usar o DP2P, você precisa escolher um nome de exibição (um apelido) e verificar sua identidade.","416167062":"Você receberá","424668491":"expirado","452752527":"Taxa (1 {{ currency }})","460477293":"Digite a mensagem","473688701":"Digite um valor válido","482271786":"Configuração de privacidade","501523417":"Você não tem anúncios.","523301614":"Liberar {{amount}} {{currency}}","525380157":"Pedido de compra de {{offered_currency}}","531912261":"Nome do banco, número da conta, nome do beneficiário","580715136":"Por favor, registre-se conosco!","587882987":"Anunciantes","592082899":"Não pode repetir caracteres mais de 5 vezes.","649549724":"Eu não recebi nenhum pagamento.","671582270":"O valor máximo disponível é {{value}}","683273691":"Taxa (1 {{ account_currency }})","728383001":"Eu recebi mais do que o valor combinado.","767789372":"Aguarde pagamento","782834680":"Tempo restante","791324098":"Total de pedidos","830703311":"Meu perfil","838024160":"Detalhes bancários","842911528":"Não mostre esta mensagem novamente.","873437248":"Instruções (opcional)","876086855":"Preencha o formulário de Avaliação Financeira","887667868":"Ordem","915127158":"Se você cancelar este pedido, não poderá usar o DP2P por {{block_duration}} horas.","949859957":"Enviar","954233511":"Vendido","988380202":"Suas instruções","1001160515":"Vender","1020552673":"Você está criando um anúncio para comprar <0> {{target_amount}} {{target_currency}} </0> ...","1024155025":"Se você cancelar seu pedido {{cancellation_limit}} vezes em {{cancellation_period}} horas, será impedido de usar o DP2P por {{block_duration}} horas. <br /> ({{number_of_cancels_remaining}} cancelamentos restantes.)","1035893169":"Excluir","1041078003":"Limite {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Pedido máx","1057127276":"{{- avg_release_time_in_minutes}} min","1080990424":"Confirmar","1103731601":"Seus anúncios estão pausados","1106073960":"Você criou um anúncio","1119887091":"Autenticação","1137964885":"Só pode conter letras, números e caracteres especiais .- _ @.","1141515080":"O caixa DP2P não está disponível no seu país.","1151608942":"Valor total","1157877436":"{{field_name}} não deve exceder o Montante","1161621759":"Escolha um apelido","1162965175":"Comprador","1202500203":"Pagar agora","1236083813":"Seus dados de pagamento","1258285343":"Ops, algo deu errado","1286797620":"Ativo","1287051975":"Apelido muito longo","1326475003":"Ativar","1328352136":"Vender {{ account_currency }}","1337027601":"Você vendeu {{offered_amount}} {{offered_currency}}","1347724133":"Eu paguei {{amount}} {{currency}}.","1364774599":"(Comprar {{- buy_completion_rate }})","1366244749":"Limites","1371193412":"Cancelar","1430413419":"O máximo é {{value}} {{currency}}","1467483693":"Pedidos anteriores","1474532322":"Ordenar por","1538160426":"Certifique-se de ter pago {{amount}} {{currency}} a {{other_user_name}}.","1583335572":"Se o anúncio não receber um pedido por {{adverts_archive_period}} dias, ele será desativado.","1587250288":"ID do anúncio {{advert_id}} ","1589127544":"Eu paguei {{amount}} {{currency}}","1607051458":"Pesquise por apelido","1623916605":"Não consegui fazer o pagamento integral.","1654365787":"Desconhecido","1675716253":"Limite mín","1678804253":"Comprar {{ currency }}","1690094221":"Comprar/Vender limite ({{currency}})","1734661732":"Seu saldo DP2P é {{dp2p_balance}}","1752096323":"{{field_name}} não deve estar abaixo do Limite mín","1752646100":"Saldo DP2P = depósitos que não podem ser revertidos (transferências bancárias, etc.) + uma parte dos depósitos que pode ser revertida (pagamentos com cartão de crédito, etc.)","1794470010":"Fiz o pagamento integral, mas o vendedor não liberou os fundos.","1794474847":"Recebi o pagamento","1798116519":"Quantia disponível","1812964994":"Vender ({{currency}})","1824755021":"por exemplo: detalhes de sua conta bancária/e-wallet","1842172737":"Você irá receber {{offered_amount}} {{offered_currency}}","1848044659":"Você não tem anúncios.","1881862381":"Seu limite de compra/venda é redefinido às 00:00 GMT diariamente.","1893264068":"Quantidade de venda","1923443894":"Inativo","1928240840":"Vender {{ currency }}","1976156928":"Você vai enviar","1992961867":"Taxa (1 {{currency}})","2005611694":"Conclusão","2029375371":"Instruções de pagamento","2039361923":"Você está criando um anúncio para vender...","2062662999":"Comprar ({{currency}})","2063890788":"Cancelado","2086563542":"Taxa de câmbio (padrão)","2087814509":"Saldo disponível","2091671594":"Status","2121837513":"O mínimo é {{value}} {{currency}}","2142425493":"ID Anúncio","2144972362":"Use o chat ao vivo para entrar em contato com nossa equipe de Suporte ao Cliente para obter ajuda.","2146619399":"Limites: {{min}}-{{max}} {{currency}}","-1540251249":"Comprar {{ account_currency }}","-1267880283":"{{field_name}} é obrigatório","-2019083683":"{{field_name}} pode incluir apenas letras, números, espaços e qualquer um destes símbolos: -+.,\'#@():;","-222920564":"{{field_name}} excedeu o tamanho máximo","-857786650":"Verifique o seu status de verificação.","-612892886":"Precisamos que você envie seus documentos para verificação de sua identidade.","-2090325029":"A verificação de identidade foi concluída.","-1101273282":"Um Apelido é obrigatório","-919203928":"O apelido é muito curto","-1907100457":"Não pode começar, terminar com ou repetir caracteres especiais.","-2125702445":"Instruções","-1274358564":"Limite máx","-1995606668":"Valor","-1965472924":"Taxa fixa","-1081775102":"{{field_name}} não deve estar abaixo do Limite máx","-885044836":"{{field_name}} não deve exceder o Limite máx","-1764050750":"Detalhes de pagamento","-1207312691":"Concluído","-688728873":"Expirado","-1951641340":"Em disputa","-1738697484":"Confirme o pagamento","-559149524":"Aguarde liberação","-1597110099":"Receber","-892663026":"Seus dados de contato","-55126326":"Vendedor","-1875343569":"Detalhes de pagamento do vendedor","-92830427":"Instruções do vendedor","-1940034707":"Instruções do comprador","-137444201":"Comprar","-1102534097":"Nenhum anúncio","-979459594":"Comprar/Vender","-1769852749":"N/A","-781045632":"Méd. tempo liberação","-2017825013":"Entendi","-1186622577":"Identidade verificada","-907053343":"Endereço verificado","-1837059346":"Comprar/Vender","-494667560":"Pedidos","-679691613":"Meus anúncios","-2144314441":"Valor de compra","-1974067943":"Seus dados bancários","-1135933077":"Mostre os anúncios correspondentes","-2033454751":"Veja os anúncios que correspondem ao seu saldo e limite DP2P.","-1657433201":"Não há anúncios correspondentes.","-198897319":"Taxa de conclusão: {{total_completion_rate}}%","-101756270":"Limite {{min_order}} - {{max_order}} {{currency}}","-375836822":"Comprar {{account_currency}}","-1035421133":"Vendas {{account_currency}}","-1325806155":"Não há anúncios.","-1845037007":"Página do anunciante","-1285759343":"Pesquisar","-1005884051":"Taxa de realização","-1638172550":"Para habilitar este recurso, você deve completar o seguinte:","-278618671":"Seu caixa DP2P está bloqueado","-1561775203":"Comprar {{currency}}","-1527285935":"Vendas {{currency}}","-1654157453":"Taxa fixa (1 {{currency}})","-379708059":"Pedido mín","-1459289144":"Essas informações estarão visíveis para todos.","-2061807537":"Alguma coisa não está certa","-329713179":"Ok","-458710804":"Você está criando um anúncio para comprar <0> {{target_amount}} {{target_currency}} </0> por <0> {{local_amount}} {{local_currency}} </0> ({{price_rate}} { {local_currency}} / {{target_currency}})","-907714482":"Você está criando um anúncio para vender <0> {{target_amount}} {{target_currency}} </0> por <0> {{local_amount}} {{local_currency}} </0> ({{price_rate}} { {local_currency}} / {{target_currency}})","-40669120":"\\nVocê está criando um anúncio para vender <0> {{target_amount}} {{target_currency}} </0> ...","-514789442":"\\nVocê está criando um anúncio para comprar ...","-1179827369":"Criar novo anúncio","-392043307":"Você quer deletar este anúncio?","-854930519":"Você NÃO poderá restaurá-lo(a).","-372210670":"Taxa (1 {{account_currency}})","-1395240684":"Venda {{id}}","-1318334333":"Desativar","-1667041441":"Taxa (1 {{ offered_currency }})","-806152028":"Seus anúncios estão sendo exibidos","-1003919851":"Balanço DP2P disponível","-721514112":"Adicionar modelo","-179005984":"Salvar","-1596761987":"Mostrar meu nome verdadeiro ({{full_name}})","-270004636":"Comprar/Vender ({{currency}})","-532709160":"Seu apelido","-2008992756":"Quer cancelar este pedido?","-2026176944":"Por favor, não cancele se você já tiver feito o pagamento.","-1989544601":"Cancelar este pedido","-492996224":"Não cancele","-510341549":"Eu recebi menos do que o valor combinado.","-650030360":"Eu paguei mais do que o valor combinado.","-1192446042":"Se sua reclamação não estiver listada aqui, entre em contato com nossa equipe de Suporte ao Cliente.","-573132778":"Reclamar","-792338456":"Qual é a sua reclamação?","-567498463":"Confirme o pagamento?","-1485778481":"Você recebeu o pagamento?","-403938778":"Por favor confirme somente após verificar seu banco ou conta da carteira eletrônica para ter certeza de que recebeu o pagamento.","-2000877952":"Eu recebi {{amount}} {{currency}}","-563116612":"Ainda não paguei","-1392383387":"Eu paguei","-418870584":"Cancelar pedido","-727273667":"Reclamar","-2016990049":"Pedido de Venda de {{offered_currency}}","-811190405":"Data","-1797318839":"In case of a dispute, we will only consider the communication through Deriv P2P chat channel.","-283017497":"Tentar novamente","-2052184983":"Número do lance","-2096350108":"Contraparte","-750202930":"Pedidos ativos","-471540636":"Eu recebi {{amount}} {{currency}}.","-2054589794":"Você foi temporariamente impedido de usar nossos serviços devido às várias tentativas de cancelamento. Tente novamente após {{date_time}} GMT.","-1971628122":"No momento este recurso está disponível apenas para contas reais em dólares.","-1709848333":"DP2P está pronto para você"}'),ya=JSON.parse('{"50672601":"Куплено","68867477":"ID ордера {{ id }}","121738739":"Отправить","145959105":"Выберите псевдоним","246815378":"После установки ваш псевдоним не может быть изменен.","323002325":"Разместить объявление","324970564":"Контактные данные продавца","338910048":"Вы будете отображаться другим пользователям как","346163411":"Купить {{ id }}","349630134":"Эти данные основаны на активности за последние 30 дней: покупка, продажа, завершение и средн. время отправки.","364681129":"Контактные данные","375577530":"Чтобы использовать DP2P, вам нужно выбрать отображаемое имя (псевдоним) и подтвердить свою личность.","416167062":"Вы получите","424668491":"время истекло","452752527":"Курс (1 {{ currency }})","460477293":"Введите сообщение","473688701":"Введите действительную сумму","482271786":"Настройки приватности","501523417":"У вас нет ордеров.","523301614":"Отправить {{amount}} {{currency}}","525380157":"Купить ордер {{offered_currency}}","531912261":"Название банка, номер счета, имя получателя","580715136":"Пожалуйста, зарегистрируйтесь!","587882987":"Адверты","592082899":"Символ не может повторяться более 5 раз.","649549724":"Я не получил(а) платеж.","671582270":"Макс. доступная сумма: {{value}}","683273691":"Курс (1 {{ account_currency }})","728383001":"Я получил(а) больше оговоренной суммы.","767789372":"Дождитесь оплаты","782834680":"Осталось времени","791324098":"Всего ордеров","830703311":"Мой профайл","838024160":"Банковские реквизиты","842911528":"Больше не показывать это сообщение.","873437248":"Инструкции (необязательно)","876086855":"Заполните форму финансовой оценки","887667868":"Ордер","915127158":"Если вы отмените этот ордер, ваш доступ на DP2P будет заблокирован на {{block_duration}} ч.","949859957":"Отправить","954233511":"Продано","988380202":"Ваши инструкции","1001160515":"Продать","1020552673":"Вы создаете объявление о покупке <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"Если вы отмените ордер {{cancellation_limit}} раз за {{cancellation_period}} ч., ваш доступ на DP2P будет заблокирован на {{block_duration}} ч. <br />\\n(осталось отмен: {{number_of_cancels_remaining}}.)","1035893169":"Удалить","1041078003":"Лимит: {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"Макс. ордер","1057127276":"{{- avg_release_time_in_minutes}} мин","1080990424":"Подтвердить","1103731601":"Ваши объявления приостановлены","1106073960":"Вы создали объявление","1119887091":"Подтверждение","1137964885":"Может содержать только буквы, цифры и символы .- _ @.","1141515080":"DP2P касса недоступна в вашей стране.","1151608942":"Общая сумма","1157877436":"Значение {{field_name}} не должно превышать Сумму","1161621759":"Выберите псевдоним","1162965175":"Покупатель","1202500203":"Заплатить сейчас","1236083813":"Ваши платежные реквизиты","1258285343":"Упс, что-то пошло не так","1286797620":"Активный","1287051975":"Псевдоним слишком длинный","1326475003":"Активировать","1328352136":"Продать {{ account_currency }}","1337027601":"Вы продали {{offered_amount}} {{offered_currency}}","1347724133":"Я заплатил(а) {{amount}} {{currency}}.","1364774599":"(Покупка {{- buy_completion_rate }})","1366244749":"Лимиты","1371193412":"Отменить","1430413419":"Максимум: {{value}} {{currency}}","1467483693":"Прошлые ордеры","1474532322":"Сортировать по","1538160426":"Пожалуйста, убедитесь, что вы заплатили {{other_user_name}} {{amount}} {{currency}}.","1583335572":"Если ваше объявление не получит ордер в течение {{adverts_archive_period}} дн., оно будет деактивировано.","1587250288":"ID объявления {{advert_id}} ","1589127544":"Я заплатил(а) {{amount}} {{currency}}","1607051458":"Поиск по псевдониму","1623916605":"Мне не удалось произвести полную оплату.","1654365787":"Неизвестный","1675716253":"Мин. лимит","1678804253":"Купить {{ currency }}","1690094221":"Лимит Покупки/Продажи ({{currency}})","1734661732":"Ваш баланс DP2P: {{ dp2p_balance }}","1752096323":"Значение {{field_name}} не должно быть ниже мин. лимита","1752646100":"Баланс DP2P = депозиты, которые не могут быть отменены (банковские переводы и т. д.) + часть депозитов, которые могут быть отменены (платежи по кредитной карте и т. д.)","1794470010":"Я произвел(а) полную оплату, но продавец не отправил средства.","1794474847":"Я получил(а) платеж","1798116519":"Доступная сумма","1812964994":"Продать ({{currency}})","1824755021":"например реквизиты вашего банка/электронного кошелька","1842172737":"Вы получили {{offered_amount}} {{offered_currency}}","1848044659":"У вас нет объявлений.","1881862381":"Лимит покупки/продажи сбрасывается ежедневно в 00:00 GMT.","1893264068":"Сумма продажи","1923443894":"Неактивен","1928240840":"Продать {{ currency }}","1976156928":"Вы отправите","1992961867":"Курс (1 {{currency}})","2005611694":"Завершенные","2029375371":"Платежные инструкции","2039361923":"Вы создаете объявление о продаже...","2062662999":"Купить ({{currency}})","2063890788":"Отменено","2086563542":"Обменный курс (по умолчанию)","2087814509":"Доступный баланс","2091671594":"Статус","2121837513":"Минимум: {{value}} {{currency}}","2142425493":"ID объявления","2144972362":"Пожалуйста, обратитесь за помощью в чат нашей службы поддержки.","2146619399":"Лимиты: {{min}}–{{max}} {{currency}}","-1540251249":"Купить {{ account_currency }}","-1267880283":"{{field_name}} является обязательным","-2019083683":"Текст в поле {{field_name}} может содержать только буквы, цифры, пробелы и следующие символы: - +.,\'#@():;","-222920564":"Текст в поле {{field_name}} превысил макс. длину","-857786650":"Проверьте статус подтверждения.","-612892886":"Вам нужно загрузить документы, подтверждающие вашу личность.","-2090325029":"Проверка личности завершена.","-1101273282":"Требуется псевдоним","-919203928":"Псевдоним слишком короткий","-1907100457":"Не может начинаться и заканчиваться на специальные символы, или повторять их.","-2125702445":"Инструкции","-1274358564":"Макс. лимит","-1995606668":"Сумма","-1965472924":"Фиксированная ставка","-1081775102":"Значение {{field_name}} не должно быть выше макс. лимита","-885044836":"Значение {{field_name}} не должно быть выше макс. лимита","-1764050750":"Платежные реквизиты","-1207312691":"Завершенные","-688728873":"Время истекло","-1951641340":"На рассмотрении","-1738697484":"Подтвердить платёж","-559149524":"Дождитесь отправки","-1597110099":"Получить","-892663026":"Ваши контактные данные","-55126326":"Продавец","-1875343569":"Платежные реквизиты продавца","-92830427":"Инструкции продавца","-1940034707":"Инструкции покупателя","-137444201":"Купить","-1102534097":"Нет объявлений","-979459594":"Купить/Продать","-1769852749":"Н/Д","-781045632":"Средн. время отправки","-2017825013":"Понятно","-1186622577":"ID подтвержден","-907053343":"Адрес подтвержден","-1837059346":"Покупка/продажа","-494667560":"Ордеры","-679691613":"Мои объявления","-2144314441":"Сумма покупки","-1974067943":"Ваши банковские реквизиты","-1135933077":"Показать подходящие объявления","-2033454751":"Смотрите объявления, которые соответствуют вашему балансу и лимитам DP2P.","-1657433201":"Нет подходящих объявлений.","-198897319":"Процент завершения: {{total_completion_rate}}%","-101756270":"Лимиты {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"Купить {{account_currency}}","-1035421133":"Продать {{account_currency}}","-1325806155":"Нет объявлений.","-1845037007":"Страница адвертайзера","-1285759343":"Поиск","-1005884051":"Процент завершения","-1638172550":"Чтобы активировать эту функцию, сделайте следующее:","-278618671":"Ваша DP2P касса заблокирована","-1561775203":"Купить {{currency}}","-1527285935":"Продать {{currency}}","-1654157453":"Фиксированная ставка (1 {{currency}})","-379708059":"Мин. ордер","-1459289144":"Эта информация будет видна всем.","-2061807537":"Что-то пошло не так","-329713179":"Ok","-458710804":"Вы создаете объявление о покупке <0>{{ target_amount }} {{ target_currency }}</0> за <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-907714482":"Вы создаете объявление о продаже <0>{{ target_amount }} {{ target_currency }}</0> за <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})","-40669120":"Вы создаете объявление о продаже <0>{{ target_amount }} {{ target_currency }}</0>...","-514789442":"Вы создаете объявление о покупке...","-1179827369":"Создать новое объявление","-392043307":"Хотите удалить это объявление?","-854930519":"Вы НЕ сможете его восстановить.","-372210670":"Курс (1 {{account_currency}})","-1395240684":"Продать {{ id }}","-1318334333":"Деактивировать","-1667041441":"Курс (1 {{ offered_currency }})","-806152028":"Ваши объявления запущены","-1003919851":"Доступный баланс DP2P","-721514112":"Шаблон объявления","-179005984":"Сохранить","-1596761987":"Показать мое настоящее имя ({{full_name}})","-270004636":"Купить / Продать ({{currency}})","-532709160":"Ваш псевдоним","-2008992756":"Хотите отменить этот ордер?","-2026176944":"Не отменяйте, если вы уже произвели оплату.","-1989544601":"Отменить ордер","-492996224":"Не отменять","-510341549":"Я получил(а) меньше оговоренной суммы.","-650030360":"Я заплатил(а) больше оговоренной суммы.","-1192446042":"Если вашей проблемы нет в этом списке, свяжитесь с нашей Службой поддержки клиентов.","-573132778":"Жалоба","-792338456":"Что случилось?","-567498463":"Подтвердить платёж?","-1485778481":"Вы получили платеж?","-403938778":"Перед подтверждением проверьте свой банковский счет или электронный кошелек и убедитесь, что вы получили платеж.","-2000877952":"Я получил(а) {{amount}} {{currency}}","-563116612":"Я еще не заплатил(а)","-1392383387":"Я заплатил(а)","-418870584":"Отменить ордер","-727273667":"Пожаловаться","-2016990049":"Продать ордер {{offered_currency}}","-811190405":"Время","-1797318839":"В случае возникновения спора мы будем рассматривать историю общения между сторонами спора только в чате Deriv P2P.","-283017497":"Повторить","-2052184983":"ID ордера","-2096350108":"Контрагент","-750202930":"Активные ордеры","-471540636":"Я получил(а) {{amount}} {{currency}}.","-2054589794":"Вам временно закрыт доступ к сервису из-за нескольких попыток отмены. Повторите попытку через {{date_time}} GMT.","-1971628122":"В настоящий момент эта функция доступна только для реальных счетов в USD.","-1709848333":"DP2P готов к работе"}'),ga=JSON.parse('{"80402146":"每一{{currency}}","121738739":"发送","128254690":"To use P2P, you need to choose a display name (a nickname) and verify your identity.","145959105":"选择昵称","165162778":"Install / Open","185142749":"价格","219601515":"前30天的交易","246815378":"Once set, your nickname cannot be changed.","283931873":"您的钱已退还","323002325":"发布广告","338910048":"You will appear to other users as","364276523":"我已收到资金","364681129":"联系详情","424037358":"If you have a problem in using the app or if you have a dispute with the other party that the two of you haven\'t been able to resolve, please email <0>{{support_email}}</0>. Describe your situation, and include your order <1>ID ({{id}})</1>.","424668491":"已过期","473688701":"输入有效的数额","497496291":"您的国家不能使用 P2P 收银台。","523301614":"发放{{amount}}{{currency}}","525380157":"买入 {{offered_currency}} 订单","531912261":"银行名称、账号、受益人姓名","534345761":"过去的订单","580715136":"Please register with us!","587882987":"广告商","592082899":"Cannot repeat a character more than 5 times.","654923624":"稍后您将无法还原它。","753727511":"类型","767789372":"等待付款","782834680":"剩余时间","830703311":"我的个人资料","838024160":"银行详细信息","873437248":"说明（可选）","887667868":"订单","1001160515":"卖出","1035893169":"删除","1052094244":"最大订单","1080990424":"确认","1103731601":"您的广告已暂停","1115743391":"无广告","1119887091":"Verification","1123885281":"Do NOT cancel if you have made payment.","1137964885":"Can only contain letters, numbers, and special characters .- _ @.","1151608942":"总金额","1157877436":"{{field_name}} 不可大于此数额","1161621759":"Choose your nickname","1162965175":"买方","1202500203":"立即付款","1236083813":"Your payment details","1287051975":"昵称太长","1319918895":"您发送","1337027601":"您已卖出 {{offered_amount}} {{offered_currency}}","1347724133":"I have paid {{amount}} {{currency}}.","1366244749":"限额","1371193412":"取消","1430413419":"重大为{{value}}{{currency}}","1438799865":"抵押金","1557777688":"无订单","1630260135":"买者的指示","1675716253":"最小限额","1752096323":"{{field_name}} 不可小于最小限额","1798116519":"可用的金额","1824755021":"e.g. your bank/e-wallet account details","1974741941":"30天完成速率","2010501234":"卖者的指示","2029375371":"付款说明","2063890788":"已取消","2091671594":"状态","2110725090":"未找到广告","2121837513":"最小为{{value}}{{currency}}","2142425493":"广告ID","2146619399":"限额: {{min}}–{{max}} {{currency}}","-559149524":"等待发布","-1738697484":"确认付款","-688728873":"已过期","-1207312691":"已完成","-317653322":"银行转汇","-1971628122":"当前仅真实美元资金账户可用此功能。","-1837059346":"买入 / 卖出","-494667560":"订单","-679691613":"我的广告","-1267880283":"{{field_name}} 是必填项","-2019083683":"{{field_name}} 只允许字母、数字、空格和以下任一符号: -+.,\'#@():;","-222920564":"{{field_name}} 已超过最大长度","-55126326":"卖方","-1406830100":"付款方式","-1995606668":"金额","-104528077":"您收到","-1974067943":"您的银行详细信息","-892663026":"您的详细联系信息","-1663813192":"费率（1美元）","-137444201":"买入","-1179827369":"创建新广告","-984979283":"Fixed rate (1 USD)","-379708059":"最小订单","-1228411932":"所有人可看到此信息","-2125702445":"说明","-1274358564":"重大限额","-1965472924":"Fixed rate","-1554285138":"最小为{{value}}","-1081775102":"{{field_name}} 不可小于最大限额","-885044836":"{{field_name}} 不可大于最大限额","-1921076361":"您正在创建{{buy_or_sell}} 的广告","-612680489":"为<0>{{total_amount}} {{local_currency}}</0> ({{price_rate}} {{local_currency}}/{{currency}})","-1667041441":"费率 (1 {{ offered_currency }})","-1714083126":"删除此广告","-806152028":"您的广告正在推行","-1207102445":"交易","-1102130036":"{{buy_trades}} 买入","-493393954":"{{sell_trades}} 卖出","-557631354":"平均发布时间","-1101273282":"昵称是必填项","-919203928":"昵称太短","-1907100457":"Cannot start, end with, or repeat special characters.","-532709160":"您的昵称","-2008992756":"Do you want to cancel this order?","-1989544601":"取消订单","-492996224":"不要取消","-2092218983":"出错了吗？","-759124288":"Close","-567498463":"Confirm payment?","-825073472":"Please make sure that you\'ve paid {{amount}} {{currency}} to {{advertiser_name}}.","-563116612":"I haven\'t paid yet","-1392383387":"我已付款","-1485778481":"Have you received payment?","-1844236332":"Please check your bank account or e-wallet to make sure you have received payment.","-727273667":"控诉","-418870584":"取消订单","-1956755526":"{{offered_amount}} {{offered_currency}} 已存入您的账户","-330924578":"Seller has been refunded","-294557818":"费率 (1 {{offer_currency}})","-815169709":"卖者的付款指示","-2051409111":"卖者的详细联系信息","-1597110099":"接收","-2052184983":"订单ID","-811190405":"时间","-979459594":"买入/卖出","-2096350108":"相对方","-1856944846":"可用订单","-2016990049":"卖出 {{offered_currency}} 订单","-471540636":"I have received {{amount}} {{currency}}.","-1709848333":"DP2P is ready for you","-857786650":"Check your verification status.","-1219721129":"We’ll need you to upload your documents to verify \\n    your identity.","-2090325029":"Identity verification is complete.","-1263329152":"Your P2P cashier has been blocked. Please contact customer support."}'),va=JSON.parse('{"50672601":"購入","68867477":"訂單 ID {{ id }}","121738739":"傳送","145959105":"選擇暱稱","246815378":"設定後，您的暱稱就無法更改。","323002325":"張貼廣告","324970564":"賣方的詳細聯繫資訊","338910048":"您將對其他使用者顯示為","346163411":"買入 {{ id }}","349630134":"這些欄位基於最近30天的活動：買、賣、完成和平均發佈時間。","364681129":"聯繫詳情","375577530":"要使用 DP2P，您需選擇一個顯示名稱（暱稱）並驗證您的身份。","416167062":"您將收到","424668491":"已過期","452752527":"費率 (1 {{ currency }})","460477293":"輸入消息","473688701":"輸入有效的數值","482271786":"隱私設定","501523417":"無訂單.","523301614":"發放{{amount}}{{currency}}","525380157":"買入 {{offered_currency}} 訂單","531912261":"銀行名稱、帳號、受益人姓名","580715136":"請向我們註冊！","587882987":"廣告商","592082899":"同一字元不能重覆超過5次。","649549724":"我還未收到任何款項。","671582270":"最大允許金額為 {{value}}","683273691":"費率 (1 {{ account_currency }})","728383001":"我收到的金額比約定的金額更大。","767789372":"等待付款","782834680":"剩餘時間","791324098":"訂單總數","830703311":"我的個人資料","838024160":"銀行詳細資料","842911528":"別再顯示此消息。","873437248":"說明(可選)","876086855":"完成金融評估表","887667868":"訂單","915127158":"如您取消此訂單，{{block_duration}} 小時内您將被禁使用 DP2P 。","949859957":"提交","954233511":"已賣出","988380202":"您的指示","1001160515":"賣出","1020552673":"您正在建立廣告以買入 <0>{{ target_amount }} {{ target_currency }}</0>...","1024155025":"如您在{{cancellation_period}} 小時内取消訂單{{cancellation_limit}} 次，{{block_duration}} 小時内您將被禁使用 DP2P 。 <br />(剩餘取消次數為{{number_of_cancels_remaining}} 次。)","1035893169":"刪除","1041078003":"限額 {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}","1052094244":"最大訂單","1057127276":"{{- avg_release_time_in_minutes}} 分鐘","1080990424":"確認","1103731601":"您的廣告已暫停","1106073960":"您已建立廣告","1119887091":"驗證","1137964885":"只可包含字母、數字和 .-_ @ 這些特殊字元。","1141515080":"您的國家不能使用 DP2P 收銀台。","1151608942":"總金額","1157877436":"{{field_name}} 不可大於此數值","1161621759":"選擇您的暱稱","1162965175":"買方","1202500203":"立即付款","1236083813":"您的付款詳細資料","1258285343":"糟糕，出錯了","1286797620":"活躍","1287051975":"暱稱太長","1326475003":"啓用","1328352136":"賣出 {{ account_currency }}","1337027601":"您已賣出 {{offered_amount}} {{offered_currency}}","1347724133":"我已付了 {{amount}} {{currency}}。","1364774599":"(買入 {{- buy_completion_rate }})","1366244749":"限額","1371193412":"取消","1430413419":"最大為{{value}}{{currency}}","1467483693":"過去的訂單","1474532322":"排序方式","1538160426":"請確認您已付了 {{amount}} {{currency}} 給 {{other_user_name}}。","1583335572":"如廣告連續 {{adverts_archive_period}} 天沒接到訂單將被停用。","1587250288":"廣告 ID {{advert_id}} ","1589127544":"我已付了 {{amount}} {{currency}}","1607051458":"按暱稱搜尋","1623916605":"我無法全額付款。","1654365787":"未知","1675716253":"最小限額","1678804253":"買入 {{ currency }}","1690094221":"買/賣限制 ({{currency}})","1734661732":"您的 DP2P 餘額是 {{ dp2p_balance }}","1752096323":"{{field_name}} 不可小於最小限額","1752646100":"DP2P餘額=不可撤回的存款（銀行轉帳等）+可被撤回的部分存款（信用卡付款等）","1794470010":"我已经全额付款，但是卖方还没有釋放这笔款项。","1794474847":"我已收到款項","1798116519":"可用的金額","1812964994":"賣出 ({{currency}})","1824755021":"例如您的銀行/電子錢包帳戶詳細資料","1842172737":"您已收到 {{offered_amount}} {{offered_currency}}","1848044659":"您沒有廣告。","1881862381":"您的買入、賣出限額每天00:00 GMT 重設。","1893264068":"賣出金額","1923443894":"非使用中","1928240840":"賣出 {{ currency }}","1976156928":"您將傳送","1992961867":"費率 (1 {{currency}})","2005611694":"完成","2029375371":"付款說明","2039361923":"您正在建立廣告以賣出...","2062662999":"買入 ({{currency}})","2063890788":"已取消","2086563542":"預設的兌換率","2087814509":"可用的餘額","2091671594":"狀況","2121837513":"最小為{{value}}{{currency}}","2142425493":"廣告ID","2144972362":"如需要幫助，請通過即時聊天與我們的客服團隊聯繫。","2146619399":"限額: {{min}}–{{max}} {{currency}}","-1540251249":"買入 {{ account_currency }}","-1267880283":"{{field_name}} 為必填項","-2019083683":"{{field_name}} 僅允許字母、數字、空格和以下任一符號: -+.,\'#@():;","-222920564":"{{field_name}} 已超過最大長度","-857786650":"查看您的驗證狀態。","-612892886":"我們需要您上傳文件以驗證您的身份。","-2090325029":"身份驗證已完成。","-1101273282":"暱稱為必填項","-919203928":"暱稱太短","-1907100457":"不可以特殊字元開頭、結尾或重覆。","-2125702445":"說明","-1274358564":"最大限額","-1995606668":"金額","-1965472924":"固定費率","-1081775102":"{{field_name}} 不可小於最小最大限額","-885044836":"{{field_name}} 不可大於最大限額","-1764050750":"付款詳細資料","-1207312691":"已完成","-688728873":"已過期","-1951641340":"爭議中","-1738697484":"確認付款","-559149524":"等待發布","-1597110099":"接收","-892663026":"您的詳細聯繫訊息","-55126326":"賣方","-1875343569":"賣方的詳細付款資訊","-92830427":"賣方的指示","-1940034707":"買方的指示","-137444201":"買入","-1102534097":"無廣告","-979459594":"買入/賣出","-1769852749":"不可用","-781045632":"平均發布時間","-2017825013":"知道了","-1186622577":"ID 已驗證","-907053343":"地址已驗證","-1837059346":"買入 / 賣出","-494667560":"訂單","-679691613":"我的廣告","-2144314441":"購入金額","-1974067943":"您的銀行詳細資料","-1135933077":"顯示匹配的廣告","-2033454751":"查看與 DP2P 餘額和限額匹配的廣告。","-1657433201":"沒有匹配的廣告。","-198897319":"完成速率: {{total_completion_rate}}%","-101756270":"限額 {{ min_order }}–{{ max_order }} {{ currency }}","-375836822":"買入 {{account_currency}}","-1035421133":"賣出 {{account_currency}}","-1325806155":"沒有廣告。","-1845037007":"廣告商頁面","-1285759343":"搜尋","-1005884051":"完成速率","-1638172550":"要啟用此功能，您必須完成以下操作：","-278618671":"您的DP2P收銀台已鎖定","-1561775203":"買入 {{currency}}","-1527285935":"賣出 {{currency}}","-1654157453":"固定費率 (1{{currency}})","-379708059":"最小訂單","-1459289144":"所有人可看到此訊息.","-2061807537":"出現問題","-329713179":"確定","-458710804":"您正在建立廣告以<0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }}) 買入<0>{{ target_amount }} {{ target_currency }}</0>","-907714482":"您正在建立廣告以 <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }}) 賣出<0>{{ target_amount }} {{ target_currency }}</0>","-40669120":"您正在建立廣告以賣出<0>{{ target_amount }} {{ target_currency }}</0>...","-514789442":"您正在建立廣告以買入...","-1179827369":"新增廣告","-392043307":"要刪除此廣告?","-854930519":"您將無法還原它。","-372210670":"費率 (1 {{account_currency}})","-1395240684":"賣出 {{ id }}","-1318334333":"停用","-1667041441":"費率 (1 {{ offered_currency }})","-806152028":"您的廣告正在推行","-1003919851":"可用的 DP2P 餘額","-721514112":"廣告範本","-179005984":"儲存","-1596761987":"顯示我的真實姓名 ({{full_name}})","-270004636":"買入 /賣出 ({{currency}})","-532709160":"您的暱稱","-2008992756":"要取消此訂單?","-2026176944":"如您已付款，請別取消。","-1989544601":"取消訂單","-492996224":"不要取消","-510341549":"我收到的金額比約定的金額更小。","-650030360":"我支付的金額比約定的金額更大。","-1192446042":"如果您的投訴未在此處列出，請聯繫我們的客戶支援團隊.","-573132778":"投訴","-792338456":"您的投訴是甚麼?","-567498463":"確認付款?","-1485778481":"是否已收到款?","-403938778":"請僅在檢查您的銀行或電子錢包帳戶之後才確認，以確保您已收到付款.","-2000877952":"我已收到 {{amount}} {{currency}}","-563116612":"我還未付款","-1392383387":"我已付款","-418870584":"取消訂單","-727273667":"控訴","-2016990049":"賣出 {{offered_currency}} 訂單","-811190405":"時間","-1797318839":"如有爭議，我們只會考慮通過Deriv P2P聊天頻道進行的溝通。","-283017497":"重試","-2052184983":"訂單ID","-2096350108":"相對方","-750202930":"使用中的訂單","-471540636":"我已收到 {{amount}} {{currency}}。","-2054589794":"由於多次嘗試取消，您已被暫時禁止使用我們的服務。請於GMT{{date_time}} 之後重試。","-1971628122":"當前僅真實美元資金帳戶可用此功能。","-1709848333":"DP2P 已為您準備就緒"}');function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){wa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ca="EN",Aa=Ca,ka={resources:{ACH:{translations:Ea({},{})},EN:{translations:Ea({},ua)},ES:{translations:Ea({},da)},FR:{translations:Ea({},pa)},ID:{translations:Ea({},ha)},IT:{translations:Ea({},fa)},PL:{translations:Ea({},ma)},PT:{translations:Ea({},_a)},RU:{translations:Ea({},ya)},VI:{translations:Ea({},ya)},ZH_CN:{translations:Ea({},ga)},ZH_TW:{translations:Ea({},va)}},react:{hashTransKey:function(e){return(0,Gn.str)(e)}},lng:Aa,fallbackLng:"EN",ns:["translations"],defaultNS:"translations"};Dr.use(Fr).init(ka);var Sa=ca(Dr),Na=function(e,t){return e?Dr.t((0,Gn.str)(e),Ea({defaultValue:e},t)):""},Oa=Object.freeze({BUY:"buy",SELL:"sell"});function Ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ia,xa,Da,Pa,Ma,Ra,Ua,La,Fa,ja,za,Ha,Ba,Ga,Va,qa,Ka,Wa,Ya,Qa,Ja,Xa,$a,Za,ei,ti,ni,ri,ai,ii,oi,si,li,ci,ui,di,pi,hi,fi,mi,_i,yi,gi,vi,bi,Ei,wi,Ci,Ai,ki,Si,Ni,Oi,Ti,Ii,xi,Di=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order_details=t,this.loginid=n,this.server_time=r,Object.keys(this.order_details).forEach((function(e){a[e]=t[e]}))}var t,n;return t=e,(n=[{key:"is_buy_order",get:function(){return this.order_details.type===Oa.BUY}},{key:"is_sell_order",get:function(){return this.order_details.type===Oa.SELL}},{key:"is_buyer_cancelled_order",get:function(){return"cancelled"===this.order_details.status}},{key:"is_buyer_confirmed_order",get:function(){return"buyer-confirmed"===this.order_details.status}},{key:"is_completed_order",get:function(){return"completed"===this.order_details.status}},{key:"is_disputed_order",get:function(){return"disputed"===this.order_details.status}},{key:"is_dispute_refunded_order",get:function(){return"dispute-refunded"===this.order_details.status}},{key:"is_dispute_completed_order",get:function(){return"dispute-completed"===this.order_details.status}},{key:"is_expired_order",get:function(){return"timed-out"===this.order_details.status}},{key:"is_incoming_order",get:function(){return!!this.order_details.is_incoming}},{key:"is_pending_order",get:function(){return"pending"===this.order_details.status}},{key:"is_refunded_order",get:function(){return"refunded"===this.order_details.status}},{key:"is_my_ad",get:function(){return this.order_details.advertiser_details.loginid===this.loginid}},{key:"is_inactive_order",get:function(){return this.is_buyer_cancelled_order||this.is_refunded_order||this.is_completed_order||this.is_dispute_completed_order||this.is_dispute_refunded_order}},{key:"is_active_order",get:function(){return!this.is_inactive_order}},{key:"is_finalised_order",get:function(){return this.is_completed_order||this.is_buyer_cancelled_order||this.is_refunded_order}},{key:"is_ongoing_order",get:function(){return this.is_buyer_confirmed_order||this.is_buyer_cancelled_order}},{key:"has_timer_expired",get:function(){var e=this.server_time.get(),t=(0,Sn.toMoment)(this.order_details.expiry_time);return e.isAfter(t)}},{key:"remaining_seconds",get:function(){var e=this.server_time.get();return(0,Sn.toMoment)(this.order_details.expiry_time).diff(e,"seconds")}},{key:"should_highlight_disabled",get:function(){return this.is_buyer_cancelled_order||this.is_expired_order||this.is_refunded_order||this.is_disputed_order||this.is_dispute_refunded_order||this.has_timer_expired&&!this.is_completed_order&&!this.is_dispute_completed_order}},{key:"should_highlight_alert",get:function(){return!this.has_timer_expired&&(this.is_my_ad?this.is_buy_order?this.is_pending_order:this.is_buyer_confirmed_order:this.is_buy_order?this.is_buyer_confirmed_order:this.is_pending_order)}},{key:"should_highlight_danger",get:function(){return!this.has_timer_expired&&(this.is_my_ad?this.is_buy_order?this.is_buyer_confirmed_order:this.is_pending_order:this.is_buy_order?this.is_pending_order:this.is_buyer_confirmed_order)}},{key:"should_highlight_success",get:function(){return this.is_completed_order||this.is_dispute_completed_order}},{key:"should_show_cancel_and_paid_button",get:function(){return!this.has_timer_expired&&(this.is_buy_order?!this.is_my_ad&&this.is_pending_order&&this.is_active_order:this.is_my_ad&&this.is_pending_order&&this.is_active_order)}},{key:"should_show_complain_and_received_button",get:function(){return!this.is_finalised_order&&(this.is_sell_order?(this.is_expired_order||this.is_ongoing_order&&this.has_timer_expired)&&!this.is_my_ad:(this.is_expired_order||this.is_ongoing_order&&this.has_timer_expired)&&this.is_my_ad)}},{key:"should_show_only_complain_button",get:function(){return!this.is_finalised_order&&(this.is_sell_order?this.is_expired_order||this.is_ongoing_order&&this.has_timer_expired:(this.is_expired_order||this.is_ongoing_order&&this.has_timer_expired)&&!this.is_my_ad)}},{key:"should_show_only_received_button",get:function(){return this.is_disputed_order?!this.is_incoming_order&&this.is_sell_order||this.is_incoming_order&&this.is_buy_order:this.is_buy_order?this.is_my_ad&&this.is_buyer_confirmed_order:!this.is_my_ad&&this.is_buyer_confirmed_order}},{key:"should_show_order_footer",get:function(){return this.should_show_cancel_and_paid_button||this.should_show_complain_and_received_button||this.should_show_only_complain_button||this.should_show_only_received_button}},{key:"should_show_order_timer",get:function(){return!this.is_finalised_order&&(this.is_pending_order||this.is_ongoing_order)}},{key:"status_string",get:function(){if(this.is_completed_order||this.is_dispute_completed_order)return Na("Completed");if(this.is_buyer_cancelled_order)return Na("Cancelled");if(this.is_refunded_order||this.is_dispute_refunded_order)return Na("Expired");if(this.is_disputed_order)return Na("Under dispute");if(this.is_expired_order||this.has_timer_expired)return Na("Expired");if(this.is_pending_order){var e=Na("Wait for payment"),t=Na("Pay now");return this.is_my_ad?this.is_buy_order?e:t:this.is_buy_order?t:e}if(this.is_buyer_confirmed_order){var n=Na("Confirm payment"),r=Na("Wait for release");return this.is_my_ad?this.is_buy_order?n:r:this.is_buy_order?r:n}return Na("Unknown")}},{key:"labels",get:function(){return this.is_buy_order?this.is_my_ad?{other_party_role:Na("Buyer"),left_send_or_receive:Na("Receive"),right_send_or_receive:Na("Send"),payment_details:Na("Your payment details"),contact_details:Na("Your contact details"),instructions:Na("Your instructions"),result_string:Na("You sold {{offered_amount}} {{offered_currency}}",{offered_amount:this.order_details.amount_display,offered_currency:this.order_details.account_currency})}:{other_party_role:Na("Seller"),left_send_or_receive:Na("Send"),right_send_or_receive:Na("Receive"),payment_details:Na("Seller's payment details"),contact_details:Na("Seller's contact details"),instructions:Na("Seller's instructions"),result_string:Na("You've received {{offered_amount}} {{offered_currency}}",{offered_amount:this.order_details.amount_display,offered_currency:this.order_details.account_currency})}:this.is_my_ad?{other_party_role:Na("Seller"),left_send_or_receive:Na("Send"),right_send_or_receive:Na("Receive"),payment_details:Na("Seller's payment details"),contact_details:Na("Seller's contact details"),instructions:Na("Your instructions"),result_string:Na("You've received {{offered_amount}} {{offered_currency}}",{offered_amount:this.order_details.amount_display,offered_currency:this.order_details.account_currency})}:{other_party_role:Na("Buyer"),left_send_or_receive:Na("Receive"),right_send_or_receive:Na("Send"),payment_details:Na("Your payment details"),contact_details:Na("Your contact details"),instructions:Na("Buyer's instructions"),result_string:Na("You sold {{offered_amount}} {{offered_currency}}",{offered_amount:this.order_details.amount_display,offered_currency:this.order_details.account_currency})}}},{key:"my_user_details",get:function(){return this.is_my_ad?this.order_details.advertiser_details:this.order_details.client_details}},{key:"other_user_details",get:function(){return this.is_my_ad?this.order_details.client_details:this.order_details.advertiser_details}},{key:"order_expiry_milliseconds",get:function(){return xn(this.order_details.expiry_time)}},{key:"order_purchase_datetime",get:function(){return In(new Date(xn(this.order_details.created_time)),!0)}},{key:"purchase_time",get:function(){return In(new Date(xn(this.order_details.created_time)),!0)}}])&&Ta(t.prototype,n),e}(),Pi=function(e,t,n){return new Di(e,t,n)},Mi="active";function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){Fi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||zi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){if(e){if("string"==typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bi(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?Wi(e):t}function Wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ji,Xi,$i,Zi,eo,to,no,ro,ao,io,oo,so,lo,co,uo,po,ho,fo,mo,_o,yo,go,vo,bo,Eo,wo,Co,Ao,ko,So,No,Oo,To,Io,xo,Do,Po,Mo=(Ia=$.ref,xa=Xe.bound,Da=Xe.bound,Pa=Xe.bound,Ma=Xe.bound,Ra=Xe.bound,Ua=Xe.bound,La=Xe.bound,Fa=Xe.bound,ja=Xe.bound,za=Xe.bound,Ha=Xe.bound,Ba=Xe.bound,Ga=Xe.bound,Va=Xe.bound,qa=Xe.bound,Ka=Xe.bound,Wa=Xe.bound,Ya=Xe.bound,Qa=Xe.bound,Ja=Xe.bound,Xa=Xe.bound,$a=Xe.bound,Za=Xe.bound,ei=Xe.bound,ti=Xe.bound,ni=Xe.bound,ri=Xe.bound,ai=Xe.bound,ii=Xe.bound,oi=Xe.bound,si=Xe.bound,li=Xe.bound,ui=Qi((ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yi(e);if(t){var a=Yi(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ki(this,n)}}(a);function a(){var e;Gi(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Bi(e=r.call.apply(r,[this].concat(n)),"active_index",ui,Wi(e)),Bi(e,"active_notification_count",di,Wi(e)),Bi(e,"advertiser_id",pi,Wi(e)),Bi(e,"inactive_notification_count",hi,Wi(e)),Bi(e,"is_advertiser",fi,Wi(e)),Bi(e,"is_blocked",mi,Wi(e)),Bi(e,"is_listed",_i,Wi(e)),Bi(e,"is_loading",yi,Wi(e)),Bi(e,"is_restricted",gi,Wi(e)),Bi(e,"nickname",vi,Wi(e)),Bi(e,"nickname_error",bi,Wi(e)),Bi(e,"notification_count",Ei,Wi(e)),Bi(e,"order_table_type",wi,Wi(e)),Bi(e,"orders",Ci,Wi(e)),Bi(e,"parameters",Ai,Wi(e)),Bi(e,"poi_status",ki,Wi(e)),Bi(e,"props",Si,Wi(e)),Bi(e,"should_show_real_name",Ni,Wi(e)),Bi(e,"should_show_popup",Oi,Wi(e)),Bi(e,"user_blocked_until",Ti,Wi(e)),Bi(e,"is_high_risk_fully_authed_without_fa",Ii,Wi(e)),e.list_item_limit=(0,Sn.isMobile)()?10:50,e.path={buy_sell:0,orders:1,my_ads:2,my_profile:3},e.ws_subscriptions={},e.service_token_timeout=void 0,e.getLocalStorageSettings=function(){return JSON.parse(localStorage.getItem("p2p_settings")||"{}")},e.poiStatusText=function(e){switch(e){case"pending":case"rejected":return i.createElement(Sa,{i18n_default_text:"Check your verification status."});case"none":default:return i.createElement(Sa,{i18n_default_text:"We’ll need you to upload your documents to verify your identity."});case"verified":return i.createElement(Sa,{i18n_default_text:"Identity verification is complete."})}},Bi(e,"setWebsocketInit",xi,Wi(e)),e.validatePopup=function(e){var t={nickname:[function(e){return!!e},function(e){return e.length>=2},function(e){return e.length<=24},function(e){return/^[a-zA-Z0-9\\.@_-]{2,24}$/.test(e)},function(e){return/^(?!(.*(.)\\2{4,})|.*[\\.@_-]{2,}|^([\\.@_-])|.*([\\.@_-])$)[a-zA-Z0-9\\.@_-]{2,24}$/.test(e)},function(e){return Array.from(e).every((function(t){return(e.match(new RegExp("."===t?"\\".concat(t):t,"g"))||[]).length<=5}))}]},n=[Na("Nickname is required"),Na("Nickname is too short"),Na("Nickname is too long"),Na("Can only contain letters, numbers, and special characters .- _ @."),Na("Cannot start, end with, or repeat special characters."),Na("Cannot repeat a character more than 5 times.")],r={};return Object.entries(t).forEach((function(t){var a=ji(t,2),i=a[0],o=a[1].findIndex((function(t){return!t(e[i])}));if(-1!==o)switch(i){case"nickname":default:r[i]=n[o]}})),r},e}return t=a,(n=[{key:"client",get:function(){var e;return(null===(e=this.props)||void 0===e?void 0:e.client)||{}}},{key:"blocked_until_date_time",get:function(){return In(new Date(xn(this.user_blocked_until)),!1,!0)}},{key:"is_active_tab",get:function(){return this.order_table_type===Mi}},{key:"is_barred",get:function(){return!!this.user_blocked_until}},{key:"is_my_profile_tab_visible",get:function(){return this.is_advertiser&&!this.root_store.my_profile_store.should_hide_my_profile_tab}},{key:"is_unsupported_account",get:function(){var e,t;return(null===(e=this.client)||void 0===e?void 0:e.is_virtual)||"USD"!==(null===(t=this.client)||void 0===t?void 0:t.currency)}},{key:"should_show_dp2p_blocked",get:function(){return this.is_blocked||this.is_high_risk_fully_authed_without_fa}},{key:"createAdvertiser",value:function(e){var t=this;zn({p2p_advertiser_create:1,name:e}).then((function(e){var n=t.root_store,r=n.sendbird_store,a=n.buy_sell_store,i=e.p2p_advertiser_create;e.error?t.setNicknameError(e.error.message):(t.setAdvertiserId(i.id),t.setIsAdvertiser(!!i.is_approved),t.setNickname(i.name),t.setNicknameError(void 0),r.handleP2pAdvertiserInfo(e),t.toggleNicknamePopup(),a.hideVerification())}))}},{key:"getLocalStorageSettingsForLoginId",value:function(){var e=this.getLocalStorageSettings()[this.client.loginid];return(0,Sn.isEmptyObject)(e)?{is_cached:!1,notifications:[]}:e}},{key:"handleNotifications",value:function(e,t){var n=this.root_store.order_store,r=this.client,a=this.props,i=this.getLocalStorageSettingsForLoginId(),o=i.is_cached,s=i.notifications;t.forEach((function(t){var i=Pi(t,r.loginid,a.server_time),l=s.find((function(e){return e.order_id===t.id})),c=e.find((function(e){return e.id===t.id})),u=t.id===n.order_id,d={order_id:t.id,is_seen:u,is_active:i.is_active_order};if(c)c.status!==t.status&&(l?(l.is_seen=u,l.is_active=i.is_active_order):s.push(d));else if(!l)if(o)s.push(d);else{var p=["pending","buyer-confirmed"].includes(t.status);s.push(Li(Li({},d),{},{is_seen:u||!p}))}})),this.updateP2pNotifications(s)}},{key:"handleTabClick",value:function(e){this.setActiveIndex(e),this.setParameters(null)}},{key:"onMount",value:function(){var e=this;this.setIsLoading(!0),this.setIsBlocked(!1),this.setIsHighRiskFullyAuthedWithoutFa(!1),this.disposeUserBarredReaction=tt((function(){return e.user_blocked_until}),(function(t){if("number"==typeof t){var n=e.props.server_time.get(),r=(0,Sn.toMoment)(t);e.user_blocked_timeout=setTimeout((function(){e.setUserBlockedUntil(null)}),r.diff(n))}})),zn({get_account_status:1}).then((function(t){var n=t.error,r=t.get_account_status;if(n||"high"!==r.risk_classification)n&&(e.setIsHighRiskFullyAuthedWithoutFa(!1),e.setIsBlocked(!1),e.setIsLoading(!1));else{var a=function(e){return e.every((function(e){return r.status.includes(e)}))},i=a(["cashier_locked"]),o=a(["age_verification","authenticated"]),s=!a(["age_verification","authenticated"]),l=a(["authenticated","document_expired"]),c=o&&a(["financial_assessment_not_complete"]),u=o&&!a(["financial_assessment_not_complete"]),d=s&&a(["financial_assessment_not_complete"]);if(c)return e.setIsHighRiskFullyAuthedWithoutFa(!0),void e.setIsLoading(!1);i||s||l||d?(e.setIsBlocked(!0),e.setIsLoading(!1)):u&&e.setIsLoading(!1)}var p=e.root_store.sendbird_store;e.ws_subscriptions={advertiser_subscription:Hn({p2p_advertiser_info:1,subscribe:1},[e.updateAdvertiserInfo,function(e){return p.handleP2pAdvertiserInfo(e)}]),order_list_subscription:Hn({p2p_order_list:1,subscribe:1,offset:0,limit:e.list_item_limit},[e.setP2pOrderList])},e.ws_subscriptions&&e.setIsLoading(!1)}))}},{key:"onUnmount",value:function(){var e=this;clearTimeout(this.service_token_timeout),clearTimeout(this.user_blocked_timeout),Object.keys(this.ws_subscriptions).forEach((function(t){return e.ws_subscriptions[t].unsubscribe()})),"function"==typeof this.disposeUserBarredReaction&&this.disposeUserBarredReaction()}},{key:"onNicknamePopupClose",value:function(){this.setShouldShowPopup(!1)}},{key:"redirectTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setActiveIndex(this.path[e]),this.setParameters(t)}},{key:"setActiveIndex",value:function(e){this.active_index=e}},{key:"setActiveNotificationCount",value:function(e){this.active_notification_count=e}},{key:"setAdvertiserId",value:function(e){this.advertiser_id=e}},{key:"setAppProps",value:function(e){this.props=e}},{key:"setInactiveNotificationCount",value:function(e){this.inactive_notification_count=e}},{key:"setIsAdvertiser",value:function(e){this.is_advertiser=e}},{key:"setIsBlocked",value:function(e){this.is_blocked=e}},{key:"setIsHighRiskFullyAuthedWithoutFa",value:function(e){this.is_high_risk_fully_authed_without_fa=e}},{key:"setIsListed",value:function(e){this.is_listed=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setIsRestricted",value:function(e){this.is_restricted=e}},{key:"setNickname",value:function(e){this.nickname=e}},{key:"setNicknameError",value:function(e){this.nickname_error=e}},{key:"setNotificationCount",value:function(e){this.notification_count=e}},{key:"setOrderTableType",value:function(e){this.root_store.order_store.setIsLoading(!0),this.order_table_type=e}},{key:"setP2pOrderList",value:function(e){if(e.error)this.ws_subscriptions.order_list_subscription.unsubscribe();else{var t=e.p2p_order_list,n=e.p2p_order_info,r=this.root_store.order_store;if(t){var a=t.list;this.handleNotifications(r.orders,a),a.forEach((function(e){return r.syncOrder(e)}))}else if(n){var i=r.orders.findIndex((function(e){return e.id===n.id})),o=function(e){return function(e){if(Array.isArray(e))return Hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.orders);i<0?o.unshift(n):o[i]=n,this.handleNotifications(r.orders,o),r.syncOrder(n)}}}},{key:"setParameters",value:function(e){this.parameters=e}},{key:"setPoiStatus",value:function(e){this.poi_status=e}},{key:"setShouldShowRealName",value:function(e){this.should_show_real_name=e}},{key:"setShouldShowPopup",value:function(e){this.should_show_popup=e}},{key:"setUserBlockedUntil",value:function(e){this.user_blocked_until=e}},{key:"toggleNicknamePopup",value:function(){this.setShouldShowPopup(!this.should_show_popup),this.setNicknameError(void 0)}},{key:"updateAdvertiserInfo",value:function(e){var t=this,n=e.p2p_advertiser_info;if(e.error){if(this.ws_subscriptions.advertiser_subscription.unsubscribe(),"RestrictedCountry"===e.error.code)this.setIsRestricted(!0);else if("AdvertiserNotFound"===e.error.code)this.setIsAdvertiser(!1);else if("PermissionDenied"===e.error.code)return this.setIsBlocked(!0),void this.setIsLoading(!1)}else this.setAdvertiserId(n.id),this.setIsAdvertiser(!!n.is_approved),this.setIsListed(!!n.is_listed),this.setNickname(n.name),this.setUserBlockedUntil(n.blocked_until),this.setShouldShowRealName(!!n.show_name);this.is_advertiser||zn({get_account_status:1}).then((function(e){if(!e.error){var n=e.get_account_status.authentication.identity;t.setPoiStatus(n.status)}})),this.setIsLoading(!1)}},{key:"updateP2pNotifications",value:function(e){var t,n=e.filter((function(e){return!1===e.is_seen})),r=n.length,a=n.filter((function(e){return e.is_active})).length,i=r-a,o=this.getLocalStorageSettingsForLoginId();o.is_cached=!0,o.notifications=e;var s=this.getLocalStorageSettings();s[this.client.loginid]=o,localStorage.setItem("p2p_settings",JSON.stringify(s)),this.setNotificationCount(r),this.setActiveNotificationCount(a),this.setInactiveNotificationCount(i),"function"==typeof(null===(t=this.props)||void 0===t?void 0:t.setNotificationCount)&&this.props.setNotificationCount(r)}}])&&Vi(t.prototype,n),a}(Bn)).prototype,"active_index",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),di=Qi(ci.prototype,"active_notification_count",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pi=Qi(ci.prototype,"advertiser_id",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=Qi(ci.prototype,"inactive_notification_count",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fi=Qi(ci.prototype,"is_advertiser",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mi=Qi(ci.prototype,"is_blocked",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_i=Qi(ci.prototype,"is_listed",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yi=Qi(ci.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gi=Qi(ci.prototype,"is_restricted",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vi=Qi(ci.prototype,"nickname",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bi=Qi(ci.prototype,"nickname_error",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ei=Qi(ci.prototype,"notification_count",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wi=Qi(ci.prototype,"order_table_type",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mi}}),Ci=Qi(ci.prototype,"orders",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ai=Qi(ci.prototype,"parameters",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ki=Qi(ci.prototype,"poi_status",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=Qi(ci.prototype,"props",[Ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ni=Qi(ci.prototype,"should_show_real_name",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oi=Qi(ci.prototype,"should_show_popup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ti=Qi(ci.prototype,"user_blocked_until",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=Qi(ci.prototype,"is_high_risk_fully_authed_without_fa",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qi(ci.prototype,"client",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"client"),ci.prototype),Qi(ci.prototype,"blocked_until_date_time",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"blocked_until_date_time"),ci.prototype),Qi(ci.prototype,"is_active_tab",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"is_active_tab"),ci.prototype),Qi(ci.prototype,"is_barred",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"is_barred"),ci.prototype),Qi(ci.prototype,"is_my_profile_tab_visible",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"is_my_profile_tab_visible"),ci.prototype),Qi(ci.prototype,"is_unsupported_account",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"is_unsupported_account"),ci.prototype),Qi(ci.prototype,"should_show_dp2p_blocked",[ae],Object.getOwnPropertyDescriptor(ci.prototype,"should_show_dp2p_blocked"),ci.prototype),Qi(ci.prototype,"createAdvertiser",[xa],Object.getOwnPropertyDescriptor(ci.prototype,"createAdvertiser"),ci.prototype),Qi(ci.prototype,"handleNotifications",[Da],Object.getOwnPropertyDescriptor(ci.prototype,"handleNotifications"),ci.prototype),Qi(ci.prototype,"handleTabClick",[Pa],Object.getOwnPropertyDescriptor(ci.prototype,"handleTabClick"),ci.prototype),Qi(ci.prototype,"onMount",[Ma],Object.getOwnPropertyDescriptor(ci.prototype,"onMount"),ci.prototype),Qi(ci.prototype,"onUnmount",[Ra],Object.getOwnPropertyDescriptor(ci.prototype,"onUnmount"),ci.prototype),Qi(ci.prototype,"onNicknamePopupClose",[Ua],Object.getOwnPropertyDescriptor(ci.prototype,"onNicknamePopupClose"),ci.prototype),Qi(ci.prototype,"redirectTo",[La],Object.getOwnPropertyDescriptor(ci.prototype,"redirectTo"),ci.prototype),Qi(ci.prototype,"setActiveIndex",[Fa],Object.getOwnPropertyDescriptor(ci.prototype,"setActiveIndex"),ci.prototype),Qi(ci.prototype,"setActiveNotificationCount",[ja],Object.getOwnPropertyDescriptor(ci.prototype,"setActiveNotificationCount"),ci.prototype),Qi(ci.prototype,"setAdvertiserId",[za],Object.getOwnPropertyDescriptor(ci.prototype,"setAdvertiserId"),ci.prototype),Qi(ci.prototype,"setAppProps",[Ha],Object.getOwnPropertyDescriptor(ci.prototype,"setAppProps"),ci.prototype),Qi(ci.prototype,"setInactiveNotificationCount",[Ba],Object.getOwnPropertyDescriptor(ci.prototype,"setInactiveNotificationCount"),ci.prototype),Qi(ci.prototype,"setIsAdvertiser",[Ga],Object.getOwnPropertyDescriptor(ci.prototype,"setIsAdvertiser"),ci.prototype),Qi(ci.prototype,"setIsBlocked",[Va],Object.getOwnPropertyDescriptor(ci.prototype,"setIsBlocked"),ci.prototype),Qi(ci.prototype,"setIsHighRiskFullyAuthedWithoutFa",[qa],Object.getOwnPropertyDescriptor(ci.prototype,"setIsHighRiskFullyAuthedWithoutFa"),ci.prototype),Qi(ci.prototype,"setIsListed",[Ka],Object.getOwnPropertyDescriptor(ci.prototype,"setIsListed"),ci.prototype),Qi(ci.prototype,"setIsLoading",[Wa],Object.getOwnPropertyDescriptor(ci.prototype,"setIsLoading"),ci.prototype),Qi(ci.prototype,"setIsRestricted",[Ya],Object.getOwnPropertyDescriptor(ci.prototype,"setIsRestricted"),ci.prototype),Qi(ci.prototype,"setNickname",[Qa],Object.getOwnPropertyDescriptor(ci.prototype,"setNickname"),ci.prototype),Qi(ci.prototype,"setNicknameError",[Ja],Object.getOwnPropertyDescriptor(ci.prototype,"setNicknameError"),ci.prototype),Qi(ci.prototype,"setNotificationCount",[Xa],Object.getOwnPropertyDescriptor(ci.prototype,"setNotificationCount"),ci.prototype),Qi(ci.prototype,"setOrderTableType",[$a],Object.getOwnPropertyDescriptor(ci.prototype,"setOrderTableType"),ci.prototype),Qi(ci.prototype,"setP2pOrderList",[Za],Object.getOwnPropertyDescriptor(ci.prototype,"setP2pOrderList"),ci.prototype),Qi(ci.prototype,"setParameters",[ei],Object.getOwnPropertyDescriptor(ci.prototype,"setParameters"),ci.prototype),Qi(ci.prototype,"setPoiStatus",[ti],Object.getOwnPropertyDescriptor(ci.prototype,"setPoiStatus"),ci.prototype),Qi(ci.prototype,"setShouldShowRealName",[ni],Object.getOwnPropertyDescriptor(ci.prototype,"setShouldShowRealName"),ci.prototype),Qi(ci.prototype,"setShouldShowPopup",[ri],Object.getOwnPropertyDescriptor(ci.prototype,"setShouldShowPopup"),ci.prototype),Qi(ci.prototype,"setUserBlockedUntil",[ai],Object.getOwnPropertyDescriptor(ci.prototype,"setUserBlockedUntil"),ci.prototype),xi=Qi(ci.prototype,"setWebsocketInit",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e,t){!function(e){Ln=e}(e)}}}),Qi(ci.prototype,"toggleNicknamePopup",[oi],Object.getOwnPropertyDescriptor(ci.prototype,"toggleNicknamePopup"),ci.prototype),Qi(ci.prototype,"updateAdvertiserInfo",[si],Object.getOwnPropertyDescriptor(ci.prototype,"updateAdvertiserInfo"),ci.prototype),Qi(ci.prototype,"updateP2pNotifications",[li],Object.getOwnPropertyDescriptor(ci.prototype,"updateP2pNotifications"),ci.prototype),ci),Ro=function(e){return((e.toString().split(".")||[])[1]||[]).length},Uo=function(e){if(!e)return"??";var t=["#fc4400","#ff8c00","#092694","#527bb5","#3f6fe5","#6b4bb6","#db69e1","#ca0051","#3f6fe5","#f43f83","#6aba8d","#3fdce5","#1fb8bf","#9ed178","#71bd0e","#ff6444"];return t[(e.split().reduce((function(t,n,r){var a=e.charCodeAt(r)+((t<<5)-t);return a&a}),0)%t.length+t.length)%t.length]},Lo=function(e){return e&&e.substr(0,2).toUpperCase()};function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Go(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?Vo(e):t}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Wo,Yo,Qo,Jo,Xo,$o,Zo,es,ts,ns,rs,as,is,os,ss,ls,cs,us,ds,ps,hs,fs,ms,_s,ys,gs,vs,bs,Es,ws,Cs,As,ks,Ss,Ns,Os,Ts,Is,xs,Ds,Ps,Ms,Rs,Us,Ls,Fs,js,zs,Hs,Bs,Gs,Vs,qs,Ks,Ws,Ys=(Ji=Xe.bound,Xi=Xe.bound,$i=Xe.bound,Zi=Xe.bound,eo=Xe.bound,to=Xe.bound,no=Xe.bound,ro=Xe.bound,ao=Xe.bound,io=Xe.bound,oo=Xe.bound,so=Xe.bound,lo=Xe.bound,co=Xe.bound,uo=Xe.bound,po=Xe.bound,ho=Xe.bound,fo=Xe.bound,mo=Xe.bound,_o=Xe.bound,yo=Xe.bound,vo=Ko((go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qo(e);if(t){var a=qo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Go(this,n)}}(a);function a(){var e;zo(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return jo(e=r.call.apply(r,[this].concat(n)),"active_index",vo,Vo(e)),jo(e,"ad",bo,Vo(e)),jo(e,"advertiser_first_name",Eo,Vo(e)),jo(e,"advertiser_last_name",wo,Vo(e)),jo(e,"advertiser_info",Co,Vo(e)),jo(e,"adverts",Ao,Vo(e)),jo(e,"counterparty_type",ko,Vo(e)),jo(e,"api_error_message",So,Vo(e)),jo(e,"form_error_message",No,Vo(e)),jo(e,"has_more_adverts_to_load",Oo,Vo(e)),jo(e,"is_loading",To,Vo(e)),jo(e,"is_loading_adverts",Io,Vo(e)),jo(e,"is_submit_disabled",xo,Vo(e)),jo(e,"show_ad_popup",Do,Vo(e)),jo(e,"submitForm",Po,Vo(e)),e}return t=a,(n=[{key:"account_currency",get:function(){var e;return null===(e=this.advert)||void 0===e?void 0:e.account_currency}},{key:"advert",get:function(){return this.root_store.buy_sell_store.selected_ad_state}},{key:"advertiser_details",get:function(){var e;return(null===(e=this.advert)||void 0===e?void 0:e.advertiser_details)||{}}},{key:"advertiser_details_id",get:function(){var e,t;return null===(e=this.advert)||void 0===e||null===(t=e.advertiser_details)||void 0===t?void 0:t.id}},{key:"advertiser_details_name",get:function(){var e,t;return null===(e=this.advert)||void 0===e||null===(t=e.advertiser_details)||void 0===t?void 0:t.name}},{key:"advertiser_full_name",get:function(){return"".concat(this.advertiser_first_name," ").concat(this.advertiser_last_name)}},{key:"short_name",get:function(){return Lo(this.advertiser_details_name)}},{key:"loadMoreAdvertiserAdverts",value:function(e){var t=this,n=e.startIndex,r=this.root_store.general_store;return this.setIsLoadingAdverts(!0),new Promise((function(e){zn({p2p_advert_list:1,counterparty_type:t.counterparty_type,advertiser_id:t.advertiser_details_id,offset:n,limit:r.list_item_limit}).then((function(n){if(n.error)t.setErrorMessage(n.error);else{var a=n.p2p_advert_list.list;t.setAdverts(a),t.setHasMoreAdvertsToLoad(a.length>=r.list_item_limit)}t.setIsLoadingAdverts(!1),e()}))}))}},{key:"getAdvertiserInfo",value:function(){var e=this;this.setIsLoading(!0),zn({p2p_advertiser_info:1,id:this.advertiser_details_id}).then((function(t){if(t.error)e.setErrorMessage(t.error);else{var n=t.p2p_advertiser_info;e.setAdvertiserInfo(n),e.setAdvertiserFirstName(n.first_name),e.setAdvertiserLastName(n.last_name)}e.setIsLoading(!1)}))}},{key:"handleTabItemClick",value:function(e){this.setActiveIndex(e),0===e?this.setCounterpartyType(Oa.BUY):this.setCounterpartyType(Oa.SELL)}},{key:"onCancelClick",value:function(){this.setShowAdPopup(!1)}},{key:"onConfirmClick",value:function(e){this.root_store.general_store.redirectTo("orders",{order_info:e,nav:{location:"buy_sell"}})}},{key:"onMount",value:function(){this.getAdvertiserInfo()}},{key:"onTabChange",value:function(){this.setAdverts([]),this.loadMoreAdvertiserAdverts({startIndex:0})}},{key:"setActiveIndex",value:function(e){this.active_index=e}},{key:"setAd",value:function(e){this.ad=e}},{key:"setAdvertiserFirstName",value:function(e){this.advertiser_first_name=e}},{key:"setAdvertiserLastName",value:function(e){this.advertiser_last_name=e}},{key:"setAdvertiserInfo",value:function(e){this.advertiser_info=e}},{key:"setAdverts",value:function(e){this.adverts=e}},{key:"setCounterpartyType",value:function(e){this.counterparty_type=e}},{key:"setErrorMessage",value:function(e){this.api_error_message=e}},{key:"setFormErrorMessage",value:function(e){this.form_error_message=e}},{key:"setHasMoreAdvertsToLoad",value:function(e){this.has_more_adverts_to_load=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setIsLoadingAdverts",value:function(e){this.is_loading_adverts=e}},{key:"setIsSubmitDisabled",value:function(e){this.is_submit_disabled=e}},{key:"setShowAdPopup",value:function(e){this.show_ad_popup=e}},{key:"setSubmitForm",value:function(e){this.submitForm=e}},{key:"showAdPopup",value:function(){this.root_store.general_store.is_advertiser?this.setShowAdPopup(!0):this.root_store.buy_sell_store.showVerification()}}])&&Ho(t.prototype,n),a}(Bn)).prototype,"active_index",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bo=Ko(go.prototype,"ad",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Eo=Ko(go.prototype,"advertiser_first_name",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wo=Ko(go.prototype,"advertiser_last_name",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Co=Ko(go.prototype,"advertiser_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ao=Ko(go.prototype,"adverts",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ko=Ko(go.prototype,"counterparty_type",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oa.BUY}}),So=Ko(go.prototype,"api_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),No=Ko(go.prototype,"form_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oo=Ko(go.prototype,"has_more_adverts_to_load",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),To=Ko(go.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Io=Ko(go.prototype,"is_loading_adverts",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xo=Ko(go.prototype,"is_submit_disabled",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Do=Ko(go.prototype,"show_ad_popup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Po=Ko(go.prototype,"submitForm",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),Ko(go.prototype,"account_currency",[ae],Object.getOwnPropertyDescriptor(go.prototype,"account_currency"),go.prototype),Ko(go.prototype,"advert",[ae],Object.getOwnPropertyDescriptor(go.prototype,"advert"),go.prototype),Ko(go.prototype,"advertiser_details",[ae],Object.getOwnPropertyDescriptor(go.prototype,"advertiser_details"),go.prototype),Ko(go.prototype,"advertiser_details_id",[ae],Object.getOwnPropertyDescriptor(go.prototype,"advertiser_details_id"),go.prototype),Ko(go.prototype,"advertiser_details_name",[ae],Object.getOwnPropertyDescriptor(go.prototype,"advertiser_details_name"),go.prototype),Ko(go.prototype,"advertiser_full_name",[ae],Object.getOwnPropertyDescriptor(go.prototype,"advertiser_full_name"),go.prototype),Ko(go.prototype,"short_name",[ae],Object.getOwnPropertyDescriptor(go.prototype,"short_name"),go.prototype),Ko(go.prototype,"getAdvertiserInfo",[Ji],Object.getOwnPropertyDescriptor(go.prototype,"getAdvertiserInfo"),go.prototype),Ko(go.prototype,"handleTabItemClick",[Xi],Object.getOwnPropertyDescriptor(go.prototype,"handleTabItemClick"),go.prototype),Ko(go.prototype,"onCancelClick",[$i],Object.getOwnPropertyDescriptor(go.prototype,"onCancelClick"),go.prototype),Ko(go.prototype,"onConfirmClick",[Zi],Object.getOwnPropertyDescriptor(go.prototype,"onConfirmClick"),go.prototype),Ko(go.prototype,"onMount",[eo],Object.getOwnPropertyDescriptor(go.prototype,"onMount"),go.prototype),Ko(go.prototype,"setActiveIndex",[to],Object.getOwnPropertyDescriptor(go.prototype,"setActiveIndex"),go.prototype),Ko(go.prototype,"setAd",[no],Object.getOwnPropertyDescriptor(go.prototype,"setAd"),go.prototype),Ko(go.prototype,"setAdvertiserFirstName",[ro],Object.getOwnPropertyDescriptor(go.prototype,"setAdvertiserFirstName"),go.prototype),Ko(go.prototype,"setAdvertiserLastName",[ao],Object.getOwnPropertyDescriptor(go.prototype,"setAdvertiserLastName"),go.prototype),Ko(go.prototype,"setAdvertiserInfo",[io],Object.getOwnPropertyDescriptor(go.prototype,"setAdvertiserInfo"),go.prototype),Ko(go.prototype,"setAdverts",[oo],Object.getOwnPropertyDescriptor(go.prototype,"setAdverts"),go.prototype),Ko(go.prototype,"setCounterpartyType",[so],Object.getOwnPropertyDescriptor(go.prototype,"setCounterpartyType"),go.prototype),Ko(go.prototype,"setErrorMessage",[lo],Object.getOwnPropertyDescriptor(go.prototype,"setErrorMessage"),go.prototype),Ko(go.prototype,"setFormErrorMessage",[co],Object.getOwnPropertyDescriptor(go.prototype,"setFormErrorMessage"),go.prototype),Ko(go.prototype,"setHasMoreAdvertsToLoad",[uo],Object.getOwnPropertyDescriptor(go.prototype,"setHasMoreAdvertsToLoad"),go.prototype),Ko(go.prototype,"setIsLoading",[po],Object.getOwnPropertyDescriptor(go.prototype,"setIsLoading"),go.prototype),Ko(go.prototype,"setIsLoadingAdverts",[ho],Object.getOwnPropertyDescriptor(go.prototype,"setIsLoadingAdverts"),go.prototype),Ko(go.prototype,"setIsSubmitDisabled",[fo],Object.getOwnPropertyDescriptor(go.prototype,"setIsSubmitDisabled"),go.prototype),Ko(go.prototype,"setShowAdPopup",[mo],Object.getOwnPropertyDescriptor(go.prototype,"setShowAdPopup"),go.prototype),Ko(go.prototype,"setSubmitForm",[_o],Object.getOwnPropertyDescriptor(go.prototype,"setSubmitForm"),go.prototype),Ko(go.prototype,"showAdPopup",[yo],Object.getOwnPropertyDescriptor(go.prototype,"showAdPopup"),go.prototype),go),Qs=function(e){return/^(\d+\.)?\d+$/.test(e)},Js=function(e){return e.length>=1&&e.length<=300},Xs=function(e){return/^(?:[\t-\r #'-\)\+-;@-Za-z\xA0\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BEF\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D66-\u0D6F\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F29\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD30-\uDD39\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC66-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF39]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(e)};function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function el(e){return function(e){if(Array.isArray(e))return nl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tl(e,t){if(e){if("string"==typeof e)return nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nl(e,t):void 0}}function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ol(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function sl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cl(e,t){return(cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ul(e,t){return!t||"object"!==$s(t)&&"function"!=typeof t?dl(e):t}function dl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pl(e){return(pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hl(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var fl,ml,_l,yl,gl,vl,bl,El,wl,Cl,Al,kl,Sl,Nl,Ol,Tl,Il,xl,Dl,Pl,Ml,Rl,Ul,Ll,Fl,jl,zl,Hl,Bl,Gl,Vl,ql,Kl,Wl,Yl,Ql,Jl,Xl,$l,Zl,ec,tc,nc,rc,ac,ic,oc,sc,lc,cc,uc,dc,pc,hc,fc,mc,_c,yc,gc=(Wo=Xe.bound,Yo=Xe.bound,Qo=Xe.bound,Jo=Xe.bound,Xo=Xe.bound,$o=Xe.bound,Zo=Xe.bound,es=Xe.bound,ts=Xe.bound,ns=Xe.bound,rs=Xe.bound,as=Xe.bound,is=Xe.bound,os=Xe.bound,ss=Xe.bound,ls=Xe.bound,cs=Xe.bound,us=Xe.bound,ds=Xe.bound,ps=Xe.bound,hs=Xe.bound,fs=Xe.bound,ms=Xe.bound,_s=Xe.bound,ys=Xe.bound,gs=Xe.bound,vs=Xe.bound,bs=Xe.bound,Es=Xe.bound,ws=Xe.bound,Cs=Xe.bound,As=Xe.bound,ks=Xe.bound,Ns=hl((Ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cl(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pl(e);if(t){var a=pl(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ul(this,n)}}(a);function a(){var e,t;sl(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ol(t=r.call.apply(r,[this].concat(i)),"api_error_message",Ns,dl(t)),ol(t,"contact_info",Os,dl(t)),ol(t,"error_message",Ts,dl(t)),ol(t,"has_more_items_to_load",Is,dl(t)),ol(t,"is_loading",xs,dl(t)),ol(t,"is_submit_disabled",Ds,dl(t)),ol(t,"items",Ps,dl(t)),ol(t,"payment_info",Ms,dl(t)),ol(t,"receive_amount",Rs,dl(t)),ol(t,"search_results",Us,dl(t)),ol(t,"search_term",Ls,dl(t)),ol(t,"selected_ad_state",Fs,dl(t)),ol(t,"should_show_popup",js,dl(t)),ol(t,"should_show_verification",zs,dl(t)),ol(t,"should_use_client_limits",Hs,dl(t)),ol(t,"show_advertiser_page",Bs,dl(t)),ol(t,"sort_by",Gs,dl(t)),ol(t,"submitForm",Vs,dl(t)),ol(t,"table_type",qs,dl(t)),ol(t,"form_props",Ks,dl(t)),t.initial_values=al({amount:null===(e=t.advert)||void 0===e?void 0:e.min_order_amount_limit},t.is_sell_advert?{contact_info:t.contact_info,payment_info:t.payment_info}:{}),ol(t,"handleSubmit",Ws,dl(t)),t}return t=a,(n=[{key:"account_currency",get:function(){var e;return null===(e=this.advert)||void 0===e?void 0:e.account_currency}},{key:"advert",get:function(){var e;return null===(e=this.form_props)||void 0===e?void 0:e.advert}},{key:"has_payment_info",get:function(){return this.contact_info.length&&this.payment_info.length}},{key:"is_buy",get:function(){return this.table_type===Oa.BUY}},{key:"is_buy_advert",get:function(){var e;return(null===(e=this.advert)||void 0===e?void 0:e.counterparty_type)===Oa.BUY}},{key:"is_sell_advert",get:function(){var e;return(null===(e=this.advert)||void 0===e?void 0:e.counterparty_type)===Oa.SELL}},{key:"modal_title",get:function(){return this.is_buy_advert?Na("Buy {{ account_currency }}",{account_currency:this.account_currency}):Na("Sell {{ account_currency }}",{account_currency:this.account_currency})}},{key:"rendered_items",get:function(){return(0,Sn.isMobile)()?this.search_term?this.search_results.length?[{id:"WATCH_THIS_SPACE"}].concat(el(this.search_results)):[{id:"WATCH_THIS_SPACE"},{id:"NO_MATCH_ROW"}]:[{id:"WATCH_THIS_SPACE"}].concat(el(this.items)):this.search_term?this.search_results.length?this.search_results:[{id:"NO_MATCH_ROW"}]:this.items}},{key:"getAdvertiserInfo",value:function(){var e=this;zn({p2p_advertiser_info:1}).then((function(t){if(t.error)e.setContactInfo(""),e.setPaymentInfo("");else{var n=t.p2p_advertiser_info;e.setContactInfo(n.contact_info),e.setPaymentInfo(n.payment_info)}}))}},{key:"hideAdvertiserPage",value:function(){this.setShowAdvertiserPage(!1)}},{key:"hideVerification",value:function(){this.setShouldShowVerification(!1)}},{key:"loadMoreItems",value:function(e){var t=this,n=e.startIndex,r=this.root_store.general_store,a=this.is_buy?Oa.BUY:Oa.SELL;return this.setApiErrorMessage(""),new Promise((function(e){zn({p2p_advert_list:1,counterparty_type:a,offset:n,limit:r.list_item_limit,sort_by:t.sort_by,use_client_limits:t.should_use_client_limits?1:0}).then((function(n){if(n.error)"PermissionDenied"===n.error.code?t.root_store.general_store.setIsBlocked(!0):t.setApiErrorMessage(n.error.message);else if(n.echo_req.counterparty_type===a){var i=n.p2p_advert_list.list;t.setHasMoreItemsToLoad(i.length>=r.list_item_limit);var o=el(t.items),s=[];i.forEach((function(e){var t=o.findIndex((function(t){return t.id===e.id}));t>-1?o[t]=e:s.push(e)})),t.setItems([].concat(el(o),s));var l=[];t.search_term&&t.items.forEach((function(e){e.advertiser_details.name.toLowerCase().includes(t.search_term.toLowerCase().trim())&&l.push(e)})),l.length?t.setSearchResults(l):t.setSearchResults([])}t.setIsLoading(!1),e()}))}))}},{key:"onCancelClick",value:function(){this.setShouldShowPopup(!1)}},{key:"onChangeTableType",value:function(e){this.setTableType(e.target.value)}},{key:"onConfirmClick",value:function(e){var t=this.root_store,n=t.general_store;t.order_store.props.setOrderId(e.id),n.redirectTo("orders",{nav:{location:"buy_sell"}})}},{key:"registerIsListedReaction",value:function(){var e=this,t=this.root_store.general_store,n=tt((function(){return t.is_listed}),(function(){e.setItems([]),e.loadMoreItems({startIndex:0})}));return function(){n()}}},{key:"setApiErrorMessage",value:function(e){this.api_error_message=e}},{key:"setContactInfo",value:function(e){this.contact_info=e}},{key:"setErrorMessage",value:function(e){this.error_message=e}},{key:"setFormProps",value:function(e){this.form_props=e}},{key:"setHasMoreItemsToLoad",value:function(e){this.has_more_items_to_load=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setIsSubmitDisabled",value:function(e){this.is_submit_disabled=e}},{key:"setItems",value:function(e){this.items=e}},{key:"setPaymentInfo",value:function(e){this.payment_info=e}},{key:"setInitialReceiveAmount",value:function(){this.receive_amount=(0,Sn.getRoundedNumber)(this.advert.min_order_amount_limit*this.advert.price,this.advert.local_currency)}},{key:"setReceiveAmount",value:function(e){this.receive_amount=e}},{key:"setSearchResults",value:function(e){this.search_results=e}},{key:"setSearchTerm",value:function(e){this.search_term=e}},{key:"setSelectedAdState",value:function(e){this.selected_ad_state=e}},{key:"setShouldShowPopup",value:function(e){this.should_show_popup=e}},{key:"setShouldShowVerification",value:function(e){this.should_show_verification=e}},{key:"setShouldUseClientLimits",value:function(e){this.should_use_client_limits=e}},{key:"setShowAdvertiserPage",value:function(e){this.show_advertiser_page=e}},{key:"setSortBy",value:function(e){this.sort_by=e}},{key:"setTableType",value:function(e){this.table_type=e}},{key:"setSelectedAdvert",value:function(e){this.root_store.general_store.is_advertiser?(this.setSelectedAdState(e),this.setShouldShowPopup(!0)):this.setShouldShowVerification(!0)}},{key:"setSubmitFormFn",value:function(e){this.submitForm=e}},{key:"showAdvertiserPage",value:function(e){this.setSelectedAdState(e),this.setShowAdvertiserPage(!0)}},{key:"showVerification",value:function(){this.setShouldShowVerification(!0)}},{key:"validatePopup",value:function(e){var t=this,n={amount:[function(e){return!!e},function(e){return e>=t.advert.min_order_amount_limit},function(e){return e<=t.advert.max_order_amount_limit},function(e){return Ro(e)<=(0,Sn.getDecimalPlaces)(t.account_currency)}]};this.is_sell_advert&&(n.contact_info=[function(e){return!!e},function(e){return Xs(e)},function(e){return Js(e)}],n.payment_info=[function(e){return!!e},function(e){return Xs(e)},function(e){return Js(e)}]);var r=(0,Sn.formatMoney)(this.account_currency,this.advert.min_order_amount_limit,!0),a=(0,Sn.formatMoney)(this.account_currency,this.advert.max_order_amount_limit,!0),i=[Na("Enter a valid amount"),Na("Minimum is {{value}} {{currency}}",{currency:this.account_currency,value:r}),Na("Maximum is {{value}} {{currency}}",{currency:this.account_currency,value:a}),Na("Enter a valid amount")],o={contact_info:Na("Contact details"),payment_info:Na("Bank details")},s={};return Object.entries(n).forEach((function(t){var n,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||tl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=r[0],l=r[1].findIndex((function(t){return!t(e[a])}));if(-1!==l)switch(a){case"contact_info":case"payment_info":s[a]=(n=o[a],[Na("{{field_name}} is required",{field_name:n}),Na("{{field_name}} can only include letters, numbers, spaces, and any of these symbols: -+.,'#@():;",{field_name:n}),Na("{{field_name}} has exceeded maximum length",{field_name:n})])[l];break;default:s[a]=i[l]}})),s}},{key:"registerAdvertIntervalReaction",value:function(){var e=this,t=tt((function(){return e.selected_ad_state}),(function(){clearInterval(e.limits_interval),e.selected_ad_state&&(e.limits_interval=setInterval((function(){zn({p2p_advert_info:1,id:e.selected_ad_state.id,use_client_limits:1}).then((function(t){var n;if(!t.error){var r=t.p2p_advert_info;(null===(n=e.selected_ad_state)||void 0===n?void 0:n.id)===r.id&&e.setSelectedAdState(r)}}))}),1e4))}));return function(){return t()}}}])&&ll(t.prototype,n),a}(Bn)).prototype,"api_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Os=hl(Ss.prototype,"contact_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ts=hl(Ss.prototype,"error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Is=hl(Ss.prototype,"has_more_items_to_load",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xs=hl(Ss.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ds=hl(Ss.prototype,"is_submit_disabled",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ps=hl(Ss.prototype,"items",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ms=hl(Ss.prototype,"payment_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Rs=hl(Ss.prototype,"receive_amount",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Us=hl(Ss.prototype,"search_results",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ls=hl(Ss.prototype,"search_term",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fs=hl(Ss.prototype,"selected_ad_state",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),js=hl(Ss.prototype,"should_show_popup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zs=hl(Ss.prototype,"should_show_verification",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hs=hl(Ss.prototype,"should_use_client_limits",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bs=hl(Ss.prototype,"show_advertiser_page",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gs=hl(Ss.prototype,"sort_by",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"rate"}}),Vs=hl(Ss.prototype,"submitForm",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),qs=hl(Ss.prototype,"table_type",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oa.BUY}}),Ks=hl(Ss.prototype,"form_props",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),hl(Ss.prototype,"account_currency",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"account_currency"),Ss.prototype),hl(Ss.prototype,"advert",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"advert"),Ss.prototype),hl(Ss.prototype,"has_payment_info",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"has_payment_info"),Ss.prototype),hl(Ss.prototype,"is_buy",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"is_buy"),Ss.prototype),hl(Ss.prototype,"is_buy_advert",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"is_buy_advert"),Ss.prototype),hl(Ss.prototype,"is_sell_advert",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"is_sell_advert"),Ss.prototype),hl(Ss.prototype,"modal_title",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"modal_title"),Ss.prototype),hl(Ss.prototype,"rendered_items",[ae],Object.getOwnPropertyDescriptor(Ss.prototype,"rendered_items"),Ss.prototype),hl(Ss.prototype,"getAdvertiserInfo",[Wo],Object.getOwnPropertyDescriptor(Ss.prototype,"getAdvertiserInfo"),Ss.prototype),Ws=hl(Ss.prototype,"handleSubmit",[Yo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n=(t=regeneratorRuntime.mark((function t(n,r,a){var i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.setSubmitting,n()&&i(!0),e.form_props.setErrorMessage(null),t.next=5,zn(al({p2p_order_create:1,advert_id:e.advert.id,amount:r.amount},e.is_sell_advert?{contact_info:r.contact_info,payment_info:r.payment_info}:{}));case 5:if(!(o=t.sent).error){t.next=10;break}e.form_props.setErrorMessage(o.error.message),t.next=15;break;case 10:return t.next=12,zn({p2p_order_info:1,id:o.p2p_order_create.id});case 12:s=t.sent,e.form_props.handleConfirm(s.p2p_order_info),e.form_props.handleClose();case 15:n()&&i(!1);case 16:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){Zs(i,r,a,o,s,"next",e)}function s(e){Zs(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}()}}),hl(Ss.prototype,"hideAdvertiserPage",[Qo],Object.getOwnPropertyDescriptor(Ss.prototype,"hideAdvertiserPage"),Ss.prototype),hl(Ss.prototype,"hideVerification",[Jo],Object.getOwnPropertyDescriptor(Ss.prototype,"hideVerification"),Ss.prototype),hl(Ss.prototype,"loadMoreItems",[Xo],Object.getOwnPropertyDescriptor(Ss.prototype,"loadMoreItems"),Ss.prototype),hl(Ss.prototype,"onCancelClick",[$o],Object.getOwnPropertyDescriptor(Ss.prototype,"onCancelClick"),Ss.prototype),hl(Ss.prototype,"onChangeTableType",[Zo],Object.getOwnPropertyDescriptor(Ss.prototype,"onChangeTableType"),Ss.prototype),hl(Ss.prototype,"onConfirmClick",[es],Object.getOwnPropertyDescriptor(Ss.prototype,"onConfirmClick"),Ss.prototype),hl(Ss.prototype,"setApiErrorMessage",[ts],Object.getOwnPropertyDescriptor(Ss.prototype,"setApiErrorMessage"),Ss.prototype),hl(Ss.prototype,"setContactInfo",[ns],Object.getOwnPropertyDescriptor(Ss.prototype,"setContactInfo"),Ss.prototype),hl(Ss.prototype,"setErrorMessage",[rs],Object.getOwnPropertyDescriptor(Ss.prototype,"setErrorMessage"),Ss.prototype),hl(Ss.prototype,"setFormProps",[as],Object.getOwnPropertyDescriptor(Ss.prototype,"setFormProps"),Ss.prototype),hl(Ss.prototype,"setHasMoreItemsToLoad",[is],Object.getOwnPropertyDescriptor(Ss.prototype,"setHasMoreItemsToLoad"),Ss.prototype),hl(Ss.prototype,"setIsLoading",[os],Object.getOwnPropertyDescriptor(Ss.prototype,"setIsLoading"),Ss.prototype),hl(Ss.prototype,"setIsSubmitDisabled",[ss],Object.getOwnPropertyDescriptor(Ss.prototype,"setIsSubmitDisabled"),Ss.prototype),hl(Ss.prototype,"setItems",[ls],Object.getOwnPropertyDescriptor(Ss.prototype,"setItems"),Ss.prototype),hl(Ss.prototype,"setPaymentInfo",[cs],Object.getOwnPropertyDescriptor(Ss.prototype,"setPaymentInfo"),Ss.prototype),hl(Ss.prototype,"setInitialReceiveAmount",[us],Object.getOwnPropertyDescriptor(Ss.prototype,"setInitialReceiveAmount"),Ss.prototype),hl(Ss.prototype,"setReceiveAmount",[ds],Object.getOwnPropertyDescriptor(Ss.prototype,"setReceiveAmount"),Ss.prototype),hl(Ss.prototype,"setSearchResults",[ps],Object.getOwnPropertyDescriptor(Ss.prototype,"setSearchResults"),Ss.prototype),hl(Ss.prototype,"setSearchTerm",[hs],Object.getOwnPropertyDescriptor(Ss.prototype,"setSearchTerm"),Ss.prototype),hl(Ss.prototype,"setSelectedAdState",[fs],Object.getOwnPropertyDescriptor(Ss.prototype,"setSelectedAdState"),Ss.prototype),hl(Ss.prototype,"setShouldShowPopup",[ms],Object.getOwnPropertyDescriptor(Ss.prototype,"setShouldShowPopup"),Ss.prototype),hl(Ss.prototype,"setShouldShowVerification",[_s],Object.getOwnPropertyDescriptor(Ss.prototype,"setShouldShowVerification"),Ss.prototype),hl(Ss.prototype,"setShouldUseClientLimits",[ys],Object.getOwnPropertyDescriptor(Ss.prototype,"setShouldUseClientLimits"),Ss.prototype),hl(Ss.prototype,"setShowAdvertiserPage",[gs],Object.getOwnPropertyDescriptor(Ss.prototype,"setShowAdvertiserPage"),Ss.prototype),hl(Ss.prototype,"setSortBy",[vs],Object.getOwnPropertyDescriptor(Ss.prototype,"setSortBy"),Ss.prototype),hl(Ss.prototype,"setTableType",[bs],Object.getOwnPropertyDescriptor(Ss.prototype,"setTableType"),Ss.prototype),hl(Ss.prototype,"setSelectedAdvert",[Es],Object.getOwnPropertyDescriptor(Ss.prototype,"setSelectedAdvert"),Ss.prototype),hl(Ss.prototype,"setSubmitFormFn",[ws],Object.getOwnPropertyDescriptor(Ss.prototype,"setSubmitFormFn"),Ss.prototype),hl(Ss.prototype,"showAdvertiserPage",[Cs],Object.getOwnPropertyDescriptor(Ss.prototype,"showAdvertiserPage"),Ss.prototype),hl(Ss.prototype,"showVerification",[As],Object.getOwnPropertyDescriptor(Ss.prototype,"showVerification"),Ss.prototype),hl(Ss.prototype,"validatePopup",[ks],Object.getOwnPropertyDescriptor(Ss.prototype,"validatePopup"),Ss.prototype),Ss);function vc(e){return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ec(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Cc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sc(e,t){return!t||"object"!==vc(t)&&"function"!=typeof t?Nc(e):t}function Nc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oc(e){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tc(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ic,xc,Dc,Pc,Mc,Rc,Uc,Lc,Fc,jc,zc,Hc,Bc,Gc,Vc,qc,Kc,Wc,Yc,Qc,Jc,Xc,$c,Zc,eu,tu,nu=(fl=Xe.bound,ml=Xe.bound,_l=Xe.bound,yl=Xe.bound,gl=Xe.bound,vl=Xe.bound,bl=Xe.bound,El=Xe.bound,wl=Xe.bound,Cl=Xe.bound,Al=Xe.bound,kl=Xe.bound,Sl=Xe.bound,Nl=Xe.bound,Ol=Xe.bound,Tl=Xe.bound,Il=Xe.bound,xl=Xe.bound,Dl=Xe.bound,Pl=Xe.bound,Ml=Xe.bound,Rl=Xe.bound,Ul=Xe.bound,Ll=Xe.bound,Fl=Xe.bound,jl=Xe.bound,zl=Xe.bound,Hl=Xe.bound,Bl=Xe.bound,Gl=Xe.bound,Vl=Xe.bound,ql=Xe.bound,Kl=Xe.bound,Wl=Xe.bound,Ql=Tc((Yl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kc(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oc(e);if(t){var a=Oc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Sc(this,n)}}(a);function a(){var e;Cc(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return wc(e=r.call.apply(r,[this].concat(n)),"activate_deactivate_error_message",Ql,Nc(e)),wc(e,"adverts",Jl,Nc(e)),wc(e,"adverts_archive_period",Xl,Nc(e)),wc(e,"api_error",$l,Nc(e)),wc(e,"api_error_message",Zl,Nc(e)),wc(e,"api_table_error_message",ec,Nc(e)),wc(e,"available_balance",tc,Nc(e)),wc(e,"contact_info",nc,Nc(e)),wc(e,"default_advert_description",rc,Nc(e)),wc(e,"delete_error_message",ac,Nc(e)),wc(e,"error_message",ic,Nc(e)),wc(e,"has_more_items_to_load",oc,Nc(e)),wc(e,"is_ad_created_modal_visible",sc,Nc(e)),wc(e,"is_api_error_modal_visible",lc,Nc(e)),wc(e,"is_delete_modal_open",cc,Nc(e)),wc(e,"is_form_loading",uc,Nc(e)),wc(e,"is_table_loading",dc,Nc(e)),wc(e,"is_loading",pc,Nc(e)),wc(e,"item_offset",hc,Nc(e)),wc(e,"payment_info",fc,Nc(e)),wc(e,"selected_ad_id",mc,Nc(e)),wc(e,"show_ad_form",_c,Nc(e)),wc(e,"restrictLength",yc,Nc(e)),e}return t=a,(n=[{key:"getAccountStatus",value:function(){var e=this;this.setIsLoading(!0),this.root_store.general_store.is_advertiser?this.setIsLoading(!1):zn({get_account_status:1}).then((function(t){if(t.error)e.setErrorMessage(t.error);else{var n=t.get_account_status.authentication.identity.status;e.root_store.general_store.setPoiStatus(n)}e.setIsLoading(!1)}))}},{key:"getAdvertiserInfo",value:function(){var e=this;this.setIsFormLoading(!0),zn({p2p_advertiser_info:1}).then((function(t){if(t.error)e.setContactInfo(""),e.setDefaultAdvertDescription(""),e.setPaymentInfo("");else{var n=t.p2p_advertiser_info;e.setContactInfo(n.contact_info),e.setDefaultAdvertDescription(n.default_advert_description),e.setPaymentInfo(n.payment_info),e.setAvailableBalance(n.balance_available)}e.setIsFormLoading(!1)}))}},{key:"getWebsiteStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1?arguments[1]:void 0;zn({website_status:1}).then((function(r){if(r.error)e.setApiErrorMessage(r.error.message),n(!1);else{var a=r.website_status.p2p_config;e.setAdvertsArchivePeriod(a.adverts_archive_period),t()}}))}},{key:"handleSubmit",value:function(e,t){var n=this,r=t.setSubmitting;this.setApiErrorMessage("");var a=e.type===Oa.SELL,i=localStorage.getItem("should_not_show_auto_archive_message"),o={p2p_advert_create:1,type:e.type,amount:Number(e.offer_amount),max_order_amount:Number(e.max_transaction),min_order_amount:Number(e.min_transaction),payment_method:"bank_transfer",rate:Number(e.price_rate)};e.contact_info&&a&&(o.contact_info=e.contact_info),e.payment_info&&a&&(o.payment_info=e.payment_info),e.default_advert_description&&(o.description=e.default_advert_description);var s=function(){zn(o).then((function(e){e.error?(n.setApiErrorMessage(e.error.message),r(!1)):"true"!==i&&n.adverts_archive_period?setTimeout((function(){n.is_api_error_modal_visible||n.setIsAdCreatedModalVisible(!0)}),200):n.is_api_error_modal_visible||n.is_ad_created_modal_visible||n.setShowAdForm(!1)}))};"true"!==i?this.getWebsiteStatus(s,r):s()}},{key:"onClickActivateDeactivate",value:function(e,t,n){var r=this;zn({p2p_advert_update:1,id:e,is_active:t?0:1}).then((function(e){e.error?r.setActivateDeactivateErrorMessage(e.error.message):n(!!e.p2p_advert_update.is_active),r.setSelectedAdId("")}))}},{key:"onClickCancel",value:function(){this.setSelectedAdId(""),this.setShouldShowPopup(!1)}},{key:"onClickConfirm",value:function(e){var t=this;zn({p2p_advert_update:1,id:this.selected_ad_id,delete:1}).then((function(n){if(n.error)e({error_message:n.error.message});else{var r=t.adverts.filter((function(e){return e.id!==n.p2p_advert_update.id}));t.setAdverts(r),t.setShouldShowPopup(!1)}}))}},{key:"onClickCreate",value:function(){this.setShowAdForm(!0)}},{key:"onClickDelete",value:function(e){this.setSelectedAdId(e),this.setIsDeleteModalOpen(!0)}},{key:"loadMoreAds",value:function(e){var t=this,n=e.startIndex;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.setIsTableLoading(!0),this.setApiErrorMessage(""));var r=this.root_store.general_store.list_item_limit;return new Promise((function(e){zn({p2p_advertiser_adverts:1,offset:n,limit:r}).then((function(n){if(n.error)"PermissionDenied"===n.error.code?t.root_store.general_store.setIsBlocked(!0):t.setApiErrorMessage(n.error.message);else{var a=n.p2p_advertiser_adverts.list;t.setHasMoreItemsToLoad(a.length>=r),t.setAdverts(t.adverts.concat(a))}t.setIsTableLoading(!1),e()}))}))}},{key:"setActivateDeactivateErrorMessage",value:function(e){this.activate_deactivate_error_message=e}},{key:"setAdverts",value:function(e){this.adverts=e}},{key:"setAdvertsArchivePeriod",value:function(e){this.adverts_archive_period=e}},{key:"setApiError",value:function(e){this.api_error=e}},{key:"setApiErrorMessage",value:function(e){this.api_error_message=e}},{key:"setApiTableErrorMessage",value:function(e){this.api_table_error_message=e}},{key:"setAvailableBalance",value:function(e){this.available_balance=e}},{key:"setContactInfo",value:function(e){this.contact_info=e}},{key:"setDefaultAdvertDescription",value:function(e){this.default_advert_description=e}},{key:"setDeleteErrorMessage",value:function(e){this.delete_error_message=e}},{key:"setErrorMessage",value:function(e){this.error_message=e}},{key:"setHasMoreItemsToLoad",value:function(e){this.has_more_items_to_load=e}},{key:"setIsAdCreatedModalVisible",value:function(e){this.is_ad_created_modal_visible=e}},{key:"setIsApiErrorModalVisible",value:function(e){this.is_api_error_modal_visible=e}},{key:"setIsDeleteModalOpen",value:function(e){this.is_delete_modal_open=e}},{key:"setIsFormLoading",value:function(e){this.is_form_loading=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setIsTableLoading",value:function(e){this.is_table_loading=e}},{key:"setItemOffset",value:function(e){this.item_offset=e}},{key:"setPaymentInfo",value:function(e){this.payment_info=e}},{key:"setSelectedAdId",value:function(e){this.selected_ad_id=e}},{key:"setShowAdForm",value:function(e){this.show_ad_form=e}},{key:"validateCreateAdForm",value:function(e){var t=this,n={default_advert_description:[function(e){return!e||Js(e)},function(e){return!e||Xs(e)}],max_transaction:[function(e){return!!e},function(e){return!isNaN(e)},function(e){return e>0&&Qs(e)&&Ro(e)<=(0,Sn.getDecimalPlaces)(t.root_store.general_store.client.currency)},function(t){return!e.offer_amount||+t<=e.offer_amount},function(t){return!e.min_transaction||+t>=e.min_transaction}],min_transaction:[function(e){return!!e},function(e){return!isNaN(e)},function(e){return e>0&&Qs(e)&&Ro(e)<=(0,Sn.getDecimalPlaces)(t.root_store.general_store.client.currency)},function(t){return!e.offer_amount||+t<=e.offer_amount},function(t){return!e.max_transaction||+t<=e.max_transaction}],offer_amount:[function(e){return!!e},function(e){return!isNaN(e)},function(n){return e.type===Oa.SELL?n<=t.available_balance:!!n},function(e){return e>0&&Qs(e)&&Ro(e)<=(0,Sn.getDecimalPlaces)(t.root_store.general_store.client.currency)},function(t){return!e.min_transaction||+t>=e.min_transaction},function(t){return!e.max_transaction||+t>=e.max_transaction}],price_rate:[function(e){return!!e},function(e){return!isNaN(e)},function(e){return e>0&&Qs(e)&&Ro(e)<=t.root_store.general_store.client.local_currency_config.decimal_places}]};e.type===Oa.SELL&&(n.contact_info=[function(e){return!!e},function(e){return Xs(e)},function(e){return Js(e)}],n.payment_info=[function(e){return!!e},function(e){return Xs(e)},function(e){return Js(e)}]);var r={contact_info:Na("Contact details"),default_advert_description:Na("Instructions"),max_transaction:Na("Max limit"),min_transaction:Na("Min limit"),offer_amount:Na("Amount"),payment_info:Na("Payment instructions"),price_rate:Na("Fixed rate")},a={};return Object.entries(n).forEach((function(n){var i,o=bc(n,2),s=o[0],l=o[1].findIndex((function(t){return!t(e[s])}));if(-1!==l)switch(s){case"contact_info":case"payment_info":a[s]=(i=r[s],[Na("{{field_name}} is required",{field_name:i}),Na("{{field_name}} can only include letters, numbers, spaces, and any of these symbols: -+.,'#@():;",{field_name:i}),Na("{{field_name}} has exceeded maximum length",{field_name:i})])[l];break;case"default_advert_description":a[s]=function(e){return[Na("{{field_name}} has exceeded maximum length",{field_name:e}),Na("{{field_name}} can only include letters, numbers, spaces, and any of these symbols: -+.,'#@():;",{field_name:e})]}(r[s])[l];break;case"offer_amount":a[s]=function(e){return[Na("{{field_name}} is required",{field_name:e}),Na("Enter a valid amount"),Na("Max available amount is {{value}}",{value:t.available_balance}),Na("Enter a valid amount"),Na("{{field_name}} should not be below Min limit",{field_name:e}),Na("{{field_name}} should not be below Max limit",{field_name:e})]}(r[s])[l];break;case"max_transaction":a[s]=function(e){return[Na("{{field_name}} is required",{field_name:e}),Na("Enter a valid amount"),Na("Enter a valid amount"),Na("{{field_name}} should not exceed Amount",{field_name:e}),Na("{{field_name}} should not be below Min limit",{field_name:e})]}(r[s])[l];break;case"min_transaction":a[s]=function(e){return[Na("{{field_name}} is required",{field_name:e}),Na("Enter a valid amount"),Na("Enter a valid amount"),Na("{{field_name}} should not exceed Amount",{field_name:e}),Na("{{field_name}} should not exceed Max limit",{field_name:e})]}(r[s])[l];break;case"price_rate":a[s]=function(e){return[Na("{{field_name}} is required",{field_name:e}),Na("Enter a valid amount"),Na("Enter a valid amount")]}(r[s])[l];break;default:a[s]=function(e){return[Na("{{field_name}} is required",{field_name:e})]}(r[s])[l]}})),Object.values(a).includes("Enter a valid amount")&&Object.entries(a).forEach((function(e){var t=bc(e,2),n=t[0],r=t[1];a[n]="Enter a valid amount"===r?r:void 0})),a}}])&&Ac(t.prototype,n),a}(Bn)).prototype,"activate_deactivate_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Jl=Tc(Yl.prototype,"adverts",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xl=Tc(Yl.prototype,"adverts_archive_period",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$l=Tc(Yl.prototype,"api_error",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Zl=Tc(Yl.prototype,"api_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ec=Tc(Yl.prototype,"api_table_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tc=Tc(Yl.prototype,"available_balance",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nc=Tc(Yl.prototype,"contact_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),rc=Tc(Yl.prototype,"default_advert_description",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ac=Tc(Yl.prototype,"delete_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ic=Tc(Yl.prototype,"error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oc=Tc(Yl.prototype,"has_more_items_to_load",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sc=Tc(Yl.prototype,"is_ad_created_modal_visible",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lc=Tc(Yl.prototype,"is_api_error_modal_visible",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cc=Tc(Yl.prototype,"is_delete_modal_open",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),uc=Tc(Yl.prototype,"is_form_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dc=Tc(Yl.prototype,"is_table_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pc=Tc(Yl.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hc=Tc(Yl.prototype,"item_offset",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fc=Tc(Yl.prototype,"payment_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),mc=Tc(Yl.prototype,"selected_ad_id",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_c=Tc(Yl.prototype,"show_ad_form",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tc(Yl.prototype,"getAccountStatus",[fl],Object.getOwnPropertyDescriptor(Yl.prototype,"getAccountStatus"),Yl.prototype),Tc(Yl.prototype,"getAdvertiserInfo",[ml],Object.getOwnPropertyDescriptor(Yl.prototype,"getAdvertiserInfo"),Yl.prototype),Tc(Yl.prototype,"getWebsiteStatus",[_l],Object.getOwnPropertyDescriptor(Yl.prototype,"getWebsiteStatus"),Yl.prototype),Tc(Yl.prototype,"handleSubmit",[yl],Object.getOwnPropertyDescriptor(Yl.prototype,"handleSubmit"),Yl.prototype),Tc(Yl.prototype,"onClickActivateDeactivate",[gl],Object.getOwnPropertyDescriptor(Yl.prototype,"onClickActivateDeactivate"),Yl.prototype),Tc(Yl.prototype,"onClickCancel",[vl],Object.getOwnPropertyDescriptor(Yl.prototype,"onClickCancel"),Yl.prototype),Tc(Yl.prototype,"onClickConfirm",[bl],Object.getOwnPropertyDescriptor(Yl.prototype,"onClickConfirm"),Yl.prototype),Tc(Yl.prototype,"onClickCreate",[El],Object.getOwnPropertyDescriptor(Yl.prototype,"onClickCreate"),Yl.prototype),Tc(Yl.prototype,"onClickDelete",[wl],Object.getOwnPropertyDescriptor(Yl.prototype,"onClickDelete"),Yl.prototype),Tc(Yl.prototype,"loadMoreAds",[Cl],Object.getOwnPropertyDescriptor(Yl.prototype,"loadMoreAds"),Yl.prototype),yc=Tc(Yl.prototype,"restrictLength",[Al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e,t){e.target.value.length>15?e.target.value=e.target.value.slice(0,15):t(e)}}}),Tc(Yl.prototype,"setActivateDeactivateErrorMessage",[kl],Object.getOwnPropertyDescriptor(Yl.prototype,"setActivateDeactivateErrorMessage"),Yl.prototype),Tc(Yl.prototype,"setAdverts",[Sl],Object.getOwnPropertyDescriptor(Yl.prototype,"setAdverts"),Yl.prototype),Tc(Yl.prototype,"setAdvertsArchivePeriod",[Nl],Object.getOwnPropertyDescriptor(Yl.prototype,"setAdvertsArchivePeriod"),Yl.prototype),Tc(Yl.prototype,"setApiError",[Ol],Object.getOwnPropertyDescriptor(Yl.prototype,"setApiError"),Yl.prototype),Tc(Yl.prototype,"setApiErrorMessage",[Tl],Object.getOwnPropertyDescriptor(Yl.prototype,"setApiErrorMessage"),Yl.prototype),Tc(Yl.prototype,"setApiTableErrorMessage",[Il],Object.getOwnPropertyDescriptor(Yl.prototype,"setApiTableErrorMessage"),Yl.prototype),Tc(Yl.prototype,"setAvailableBalance",[xl],Object.getOwnPropertyDescriptor(Yl.prototype,"setAvailableBalance"),Yl.prototype),Tc(Yl.prototype,"setContactInfo",[Dl],Object.getOwnPropertyDescriptor(Yl.prototype,"setContactInfo"),Yl.prototype),Tc(Yl.prototype,"setDefaultAdvertDescription",[Pl],Object.getOwnPropertyDescriptor(Yl.prototype,"setDefaultAdvertDescription"),Yl.prototype),Tc(Yl.prototype,"setDeleteErrorMessage",[Ml],Object.getOwnPropertyDescriptor(Yl.prototype,"setDeleteErrorMessage"),Yl.prototype),Tc(Yl.prototype,"setErrorMessage",[Rl],Object.getOwnPropertyDescriptor(Yl.prototype,"setErrorMessage"),Yl.prototype),Tc(Yl.prototype,"setHasMoreItemsToLoad",[Ul],Object.getOwnPropertyDescriptor(Yl.prototype,"setHasMoreItemsToLoad"),Yl.prototype),Tc(Yl.prototype,"setIsAdCreatedModalVisible",[Ll],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsAdCreatedModalVisible"),Yl.prototype),Tc(Yl.prototype,"setIsApiErrorModalVisible",[Fl],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsApiErrorModalVisible"),Yl.prototype),Tc(Yl.prototype,"setIsDeleteModalOpen",[jl],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsDeleteModalOpen"),Yl.prototype),Tc(Yl.prototype,"setIsFormLoading",[zl],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsFormLoading"),Yl.prototype),Tc(Yl.prototype,"setIsLoading",[Hl],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsLoading"),Yl.prototype),Tc(Yl.prototype,"setIsTableLoading",[Bl],Object.getOwnPropertyDescriptor(Yl.prototype,"setIsTableLoading"),Yl.prototype),Tc(Yl.prototype,"setItemOffset",[Gl],Object.getOwnPropertyDescriptor(Yl.prototype,"setItemOffset"),Yl.prototype),Tc(Yl.prototype,"setPaymentInfo",[Vl],Object.getOwnPropertyDescriptor(Yl.prototype,"setPaymentInfo"),Yl.prototype),Tc(Yl.prototype,"setSelectedAdId",[ql],Object.getOwnPropertyDescriptor(Yl.prototype,"setSelectedAdId"),Yl.prototype),Tc(Yl.prototype,"setShowAdForm",[Kl],Object.getOwnPropertyDescriptor(Yl.prototype,"setShowAdForm"),Yl.prototype),Tc(Yl.prototype,"validateCreateAdForm",[Wl],Object.getOwnPropertyDescriptor(Yl.prototype,"validateCreateAdForm"),Yl.prototype),Yl);function ru(e){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function au(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ou(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function su(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cu(e,t){return(cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uu(e,t){return!t||"object"!==ru(t)&&"function"!=typeof t?du(e):t}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(e){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hu(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var fu,mu,_u,yu,gu,vu,bu,Eu,wu,Cu,Au,ku,Su,Nu,Ou,Tu,Iu,xu,Du,Pu,Mu,Ru,Uu,Lu,Fu,ju,zu,Hu,Bu,Gu,Vu,qu,Ku,Wu,Yu,Qu,Ju=(Ic=Xe.bound,xc=Xe.bound,Dc=Xe.bound,Pc=Xe.bound,Mc=Xe.bound,Rc=Xe.bound,Uc=Xe.bound,Lc=Xe.bound,Fc=Xe.bound,jc=Xe.bound,zc=Xe.bound,Hc=Xe.bound,Bc=Xe.bound,Vc=hu((Gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cu(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pu(e);if(t){var a=pu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return uu(this,n)}}(a);function a(){var e;su(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ou(e=r.call.apply(r,[this].concat(n)),"advertiser_info",Vc,du(e)),ou(e,"balance_available",qc,du(e)),ou(e,"contact_info",Kc,du(e)),ou(e,"default_advert_description",Wc,du(e)),ou(e,"error_message",Yc,du(e)),ou(e,"form_error",Qc,du(e)),ou(e,"full_name",Jc,du(e)),ou(e,"is_button_loading",Xc,du(e)),ou(e,"is_loading",$c,du(e)),ou(e,"is_submit_success",Zc,du(e)),ou(e,"payment_info",eu,du(e)),ou(e,"should_hide_my_profile_tab",tu,du(e)),e.handleToggle=function(){var t,n;zn({p2p_advertiser_update:1,show_name:null!==(t=e.root_store)&&void 0!==t&&null!==(n=t.general_store)&&void 0!==n&&n.should_show_real_name?0:1}).then((function(t){t.error?e.setFormError(t.error.message):e.root_store.general_store.setShouldShowRealName(!0)}))},e.validateForm=function(e){var t={contact_info:[function(e){return Xs(e)}],default_advert_description:[function(e){return Xs(e)}],payment_info:[function(e){return Xs(e)}]},n={contact_info:Na("Contact details"),default_advert_description:Na("Instructions"),payment_info:Na("Payment details")},r={},a=function(e){return[Na("{{field_name}} can only include letters, numbers, spaces, and any of these symbols: -+.,'#@():;",{field_name:e})]};return Object.entries(t).forEach((function(t){var i=au(t,2),o=i[0],s=i[1].findIndex((function(t){return!t(e[o])}));if(-1!==s)switch(o){case"contact_info":case"default_advert_description":case"payment_info":r[o]=a(n[o])[s];break;default:r[o]=a[s]}})),r},e}return t=a,(n=[{key:"getAdvertiserInfo",value:function(){var e=this;this.setIsLoading(!0),this.setErrorMessage(""),zn({p2p_advertiser_info:1}).then((function(t){if(t.error)"PermissionDenied"===t.error.code?e.root_store.general_store.setIsBlocked(!0):e.setErrorMessage(t.error.message);else{var n=t.p2p_advertiser_info;e.setAdvertiserInfo(n),e.setBalanceAvailable(n.balance_available),e.setContactInfo(n.contact_info),e.setDefaultAdvertDescription(n.default_advert_description),e.setPaymentInfo(n.payment_info)}e.setIsLoading(!1)}))}},{key:"getSettings",value:function(){var e=this;zn({get_settings:1}).then((function(t){var n=t.get_settings;t.error?e.setFormError(t.error.message):e.setFullName("".concat(n.first_name," ").concat(n.last_name))}))}},{key:"handleSubmit",value:function(e){var t=this;zn({p2p_advertiser_update:1,contact_info:e.contact_info,payment_info:e.payment_info,default_advert_description:e.default_advert_description}).then((function(e){if(e.error)t.setFormError(e.error);else{var n=e.p2p_advertiser_update;t.setBalanceAvailable(n.balance_available),t.setContactInfo(n.contact_info),t.setDefaultAdvertDescription(n.default_advert_description),t.setPaymentInfo(n.payment_info),t.setIsSubmitSuccess(!0)}setTimeout((function(){t.setIsSubmitSuccess(!1)}),3e3)}))}},{key:"setAdvertiserInfo",value:function(e){this.advertiser_info=e}},{key:"setBalanceAvailable",value:function(e){this.balance_available=e}},{key:"setContactInfo",value:function(e){this.contact_info=e}},{key:"setDefaultAdvertDescription",value:function(e){this.default_advert_description=e}},{key:"setErrorMessage",value:function(e){this.error_message=e}},{key:"setFormError",value:function(e){this.form_error=e}},{key:"setFullName",value:function(e){this.full_name=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setIsSubmitSuccess",value:function(e){this.is_submit_success=e}},{key:"setPaymentInfo",value:function(e){this.payment_info=e}},{key:"setShouldHideMyProfileTab",value:function(e){this.should_hide_my_profile_tab=e}}])&&lu(t.prototype,n),a}(Bn)).prototype,"advertiser_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),qc=hu(Gc.prototype,"balance_available",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kc=hu(Gc.prototype,"contact_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Wc=hu(Gc.prototype,"default_advert_description",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yc=hu(Gc.prototype,"error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=hu(Gc.prototype,"form_error",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Jc=hu(Gc.prototype,"full_name",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Xc=hu(Gc.prototype,"is_button_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$c=hu(Gc.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zc=hu(Gc.prototype,"is_submit_success",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eu=hu(Gc.prototype,"payment_info",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tu=hu(Gc.prototype,"should_hide_my_profile_tab",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hu(Gc.prototype,"getAdvertiserInfo",[Ic],Object.getOwnPropertyDescriptor(Gc.prototype,"getAdvertiserInfo"),Gc.prototype),hu(Gc.prototype,"handleSubmit",[xc],Object.getOwnPropertyDescriptor(Gc.prototype,"handleSubmit"),Gc.prototype),hu(Gc.prototype,"setAdvertiserInfo",[Dc],Object.getOwnPropertyDescriptor(Gc.prototype,"setAdvertiserInfo"),Gc.prototype),hu(Gc.prototype,"setBalanceAvailable",[Pc],Object.getOwnPropertyDescriptor(Gc.prototype,"setBalanceAvailable"),Gc.prototype),hu(Gc.prototype,"setContactInfo",[Mc],Object.getOwnPropertyDescriptor(Gc.prototype,"setContactInfo"),Gc.prototype),hu(Gc.prototype,"setDefaultAdvertDescription",[Rc],Object.getOwnPropertyDescriptor(Gc.prototype,"setDefaultAdvertDescription"),Gc.prototype),hu(Gc.prototype,"setErrorMessage",[Uc],Object.getOwnPropertyDescriptor(Gc.prototype,"setErrorMessage"),Gc.prototype),hu(Gc.prototype,"setFormError",[Lc],Object.getOwnPropertyDescriptor(Gc.prototype,"setFormError"),Gc.prototype),hu(Gc.prototype,"setFullName",[Fc],Object.getOwnPropertyDescriptor(Gc.prototype,"setFullName"),Gc.prototype),hu(Gc.prototype,"setIsLoading",[jc],Object.getOwnPropertyDescriptor(Gc.prototype,"setIsLoading"),Gc.prototype),hu(Gc.prototype,"setIsSubmitSuccess",[zc],Object.getOwnPropertyDescriptor(Gc.prototype,"setIsSubmitSuccess"),Gc.prototype),hu(Gc.prototype,"setPaymentInfo",[Hc],Object.getOwnPropertyDescriptor(Gc.prototype,"setPaymentInfo"),Gc.prototype),hu(Gc.prototype,"setShouldHideMyProfileTab",[Bc],Object.getOwnPropertyDescriptor(Gc.prototype,"setShouldHideMyProfileTab"),Gc.prototype),Gc);function Xu(e){return function(e){if(Array.isArray(e))return $u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zu(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var nd,rd,ad,id,od,sd,ld,cd,ud,dd,pd,hd,fd=(fu=Xe.bound,mu=Xe.bound,_u=Xe.bound,yu=Xe.bound,gu=Xe.bound,vu=Xe.bound,bu=Xe.bound,Eu=Xe.bound,wu=Xe.bound,Cu=Xe.bound,Au=Xe.bound,ku=Xe.bound,Su=Xe.bound,Nu=Xe.bound,Ou=Xe.bound,Tu=Xe.bound,Iu=Xe.bound,xu=Xe.bound,Du=Xe.bound,Pu=Xe.bound,Mu=Xe.bound,Ru=Xe.bound,Uu=Xe.bound,Lu=Xe.bound,ju=td((Fu=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zu(this,"api_error_message",ju,this),Zu(this,"cancellation_block_duration",zu,this),Zu(this,"cancellation_count_period",Hu,this),Zu(this,"cancellation_limit",Bu,this),Zu(this,"cancels_remaining",Gu,this),Zu(this,"error_message",Vu,this),Zu(this,"has_more_items_to_load",qu,this),Zu(this,"is_loading",Ku,this),Zu(this,"orders",Wu,this),Zu(this,"order_id",Yu,this),Zu(this,"order_rerender_timeout",Qu,this),this.interval=void 0,this.order_info_subscription={},this.previous_orders=[],this.root_store=t,tt((function(){return n.orders}),(function(e){n.root_store.general_store.handleNotifications(n.previous_orders,e)}))}var t,n;return t=e,(n=[{key:"order_information",get:function(){var e=this,t=this.root_store.general_store,n=this.orders.find((function(t){return t.id===e.order_id}));return n?Pi(n,t.client.loginid,t.props.server_time):null}},{key:"nav",get:function(){var e;return null===(e=this.root_store.general_store.parameters)||void 0===e?void 0:e.nav}},{key:"getAdvertiserInfo",value:function(e){var t=this;zn({p2p_advertiser_info:1}).then((function(e){e.error?t.setErrorMessage(e.error.message):t.setCancelsRemaining(e.p2p_advertiser_info.cancels_remaining)})),this.getWebsiteStatus(e)}},{key:"getWebsiteStatus",value:function(e){var t=this;zn({website_status:1}).then((function(n){if(n.error)t.setErrorMessage(n.error.message);else{var r=n.website_status.p2p_config;t.setCancellationBlockDuration(r.cancellation_block_duration),t.setCancellationCountPeriod(r.cancellation_count_period),t.setCancellationLimit(r.cancellation_limit)}"function"==typeof e&&e(!0)}))}},{key:"hideDetails",value:function(e){e&&this.nav&&this.root_store.general_store.redirectTo(this.nav.location),this.setOrderId(null)}},{key:"loadMoreOrders",value:function(e){var t=this,n=e.startIndex;return this.setApiErrorMessage(""),new Promise((function(e){var r=t.root_store.general_store,a=r.is_active_tab?1:0;zn({p2p_order_list:1,active:a,offset:n,limit:r.list_item_limit}).then((function(n){if(n.error)"PermissionDenied"===n.error.code?t.root_store.general_store.setIsBlocked(!0):t.setApiErrorMessage(n.error.message);else if(n.echo_req.active===a){var i=n.p2p_order_list.list;t.setHasMoreItemsToLoad(i.length>=r.list_item_limit);var o=Xu(t.orders),s=[];i.forEach((function(e){var t=o.findIndex((function(t){return t.id===e.id}));t>-1?o[t]=e:s.push(e)})),t.setOrders([].concat(Xu(o),s))}t.setIsLoading(!1),e()}))}))}},{key:"onOrderIdUpdate",value:function(){this.unsubscribeFromCurrentOrder(),this.order_id&&this.subscribeToCurrentOrder()}},{key:"onOrdersUpdate",value:function(){var e=this;if(this.order_id){var t=this.orders.find((function(t){return t.id===e.order_id}));t?this.setQueryDetails(t):this.root_store.general_store.redirectTo("orders")}}},{key:"onUnmount",value:function(){clearTimeout(this.order_rerender_timeout),this.unsubscribeFromCurrentOrder(),this.hideDetails(!1)}},{key:"setApiErrorMessage",value:function(e){this.api_error_message=e}},{key:"setCancellationBlockDuration",value:function(e){this.cancellation_block_duration=e}},{key:"setCancellationCountPeriod",value:function(e){this.cancellation_count_period=e}},{key:"setCancellationLimit",value:function(e){this.cancellation_limit=e}},{key:"setCancelsRemaining",value:function(e){this.cancels_remaining=e}},{key:"setErrorMessage",value:function(e){this.error_message=e}},{key:"setHasMoreItemsToLoad",value:function(e){this.has_more_items_to_load=e}},{key:"setIsLoading",value:function(e){this.is_loading=e}},{key:"setOrderDetails",value:function(e){if(e.error)this.unsubscribeFromCurrentOrder();else{var t=e.p2p_order_info;this.setQueryDetails(t)}}},{key:"setOrderId",value:function(e){this.order_id=e;var t=this.root_store.general_store;"function"==typeof t.props.setOrderId&&t.props.setOrderId(e)}},{key:"setOrders",value:function(e){this.previous_orders=(0,Sn.cloneObject)(this.orders),this.orders=e}},{key:"setOrderRendererTimeout",value:function(e){this.order_rerender_timeout=e}},{key:"setQueryDetails",value:function(e){var t=this,n=this.root_store.general_store,r=Pi(e,n.client.loginid,n.props.server_time);this.setOrderId(r.id);var a=this.root_store.general_store.getLocalStorageSettingsForLoginId().notifications;if(a.length){var i=a.find((function(e){return e.order_id===r.id}));i&&(i.is_seen=!0,this.root_store.general_store.updateP2pNotifications(a))}var o=r.remaining_seconds;o>0&&(clearTimeout(this.order_rerender_timeout),this.setOrderRendererTimeout(setTimeout((function(){"function"==typeof t.forceRerenderFn&&t.forceRerenderFn(r.id)}),1e3*(o+1))))}},{key:"setData",value:function(e){this.data=e}},{key:"subscribeToCurrentOrder",value:function(){this.order_info_subscription=Hn({p2p_order_info:1,id:this.order_id,subscribe:1},[this.setOrderDetails])}},{key:"syncOrder",value:function(e){var t=this.root_store.general_store,n=Pi(e,t.client.loginid,t.props.server_time),r=this.orders.findIndex((function(t){return t.id===e.id}));null===this.order_id?-1===r?this.orders.unshift(e):n.is_inactive_order?this.orders.splice(r,1):(n.is_disputed_order||n.is_active_order)&&Object.assign(this.orders[r],e):this.orders[r]&&Object.assign(this.orders[r],e)}},{key:"unsubscribeFromCurrentOrder",value:function(){clearTimeout(this.order_rerender_timeout),this.order_info_subscription.unsubscribe&&this.order_info_subscription.unsubscribe()}},{key:"setForceRerenderOrders",value:function(e){this.forceRerenderFn=e}}])&&ed(t.prototype,n),e}()).prototype,"api_error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zu=td(Fu.prototype,"cancellation_block_duration",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hu=td(Fu.prototype,"cancellation_count_period",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bu=td(Fu.prototype,"cancellation_limit",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gu=td(Fu.prototype,"cancels_remaining",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vu=td(Fu.prototype,"error_message",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qu=td(Fu.prototype,"has_more_items_to_load",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ku=td(Fu.prototype,"is_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wu=td(Fu.prototype,"orders",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yu=td(Fu.prototype,"order_id",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qu=td(Fu.prototype,"order_rerender_timeout",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),td(Fu.prototype,"order_information",[ae],Object.getOwnPropertyDescriptor(Fu.prototype,"order_information"),Fu.prototype),td(Fu.prototype,"nav",[ae],Object.getOwnPropertyDescriptor(Fu.prototype,"nav"),Fu.prototype),td(Fu.prototype,"getAdvertiserInfo",[fu],Object.getOwnPropertyDescriptor(Fu.prototype,"getAdvertiserInfo"),Fu.prototype),td(Fu.prototype,"getWebsiteStatus",[mu],Object.getOwnPropertyDescriptor(Fu.prototype,"getWebsiteStatus"),Fu.prototype),td(Fu.prototype,"hideDetails",[_u],Object.getOwnPropertyDescriptor(Fu.prototype,"hideDetails"),Fu.prototype),td(Fu.prototype,"loadMoreOrders",[yu],Object.getOwnPropertyDescriptor(Fu.prototype,"loadMoreOrders"),Fu.prototype),td(Fu.prototype,"onOrderIdUpdate",[gu],Object.getOwnPropertyDescriptor(Fu.prototype,"onOrderIdUpdate"),Fu.prototype),td(Fu.prototype,"onOrdersUpdate",[vu],Object.getOwnPropertyDescriptor(Fu.prototype,"onOrdersUpdate"),Fu.prototype),td(Fu.prototype,"onUnmount",[bu],Object.getOwnPropertyDescriptor(Fu.prototype,"onUnmount"),Fu.prototype),td(Fu.prototype,"setApiErrorMessage",[Eu],Object.getOwnPropertyDescriptor(Fu.prototype,"setApiErrorMessage"),Fu.prototype),td(Fu.prototype,"setCancellationBlockDuration",[wu],Object.getOwnPropertyDescriptor(Fu.prototype,"setCancellationBlockDuration"),Fu.prototype),td(Fu.prototype,"setCancellationCountPeriod",[Cu],Object.getOwnPropertyDescriptor(Fu.prototype,"setCancellationCountPeriod"),Fu.prototype),td(Fu.prototype,"setCancellationLimit",[Au],Object.getOwnPropertyDescriptor(Fu.prototype,"setCancellationLimit"),Fu.prototype),td(Fu.prototype,"setCancelsRemaining",[ku],Object.getOwnPropertyDescriptor(Fu.prototype,"setCancelsRemaining"),Fu.prototype),td(Fu.prototype,"setErrorMessage",[Su],Object.getOwnPropertyDescriptor(Fu.prototype,"setErrorMessage"),Fu.prototype),td(Fu.prototype,"setHasMoreItemsToLoad",[Nu],Object.getOwnPropertyDescriptor(Fu.prototype,"setHasMoreItemsToLoad"),Fu.prototype),td(Fu.prototype,"setIsLoading",[Ou],Object.getOwnPropertyDescriptor(Fu.prototype,"setIsLoading"),Fu.prototype),td(Fu.prototype,"setOrderDetails",[Tu],Object.getOwnPropertyDescriptor(Fu.prototype,"setOrderDetails"),Fu.prototype),td(Fu.prototype,"setOrderId",[Iu],Object.getOwnPropertyDescriptor(Fu.prototype,"setOrderId"),Fu.prototype),td(Fu.prototype,"setOrders",[xu],Object.getOwnPropertyDescriptor(Fu.prototype,"setOrders"),Fu.prototype),td(Fu.prototype,"setOrderRendererTimeout",[Du],Object.getOwnPropertyDescriptor(Fu.prototype,"setOrderRendererTimeout"),Fu.prototype),td(Fu.prototype,"setQueryDetails",[Pu],Object.getOwnPropertyDescriptor(Fu.prototype,"setQueryDetails"),Fu.prototype),td(Fu.prototype,"setData",[Mu],Object.getOwnPropertyDescriptor(Fu.prototype,"setData"),Fu.prototype),td(Fu.prototype,"subscribeToCurrentOrder",[Ru],Object.getOwnPropertyDescriptor(Fu.prototype,"subscribeToCurrentOrder"),Fu.prototype),td(Fu.prototype,"syncOrder",[Uu],Object.getOwnPropertyDescriptor(Fu.prototype,"syncOrder"),Fu.prototype),td(Fu.prototype,"unsubscribeFromCurrentOrder",[Lu],Object.getOwnPropertyDescriptor(Fu.prototype,"unsubscribeFromCurrentOrder"),Fu.prototype),Fu);function md(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function _d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yd(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var gd=(nd=Xe.bound,rd=Xe.bound,ad=Xe.bound,id=Xe.bound,od=Xe.bound,sd=Xe.bound,ld=Xe.bound,ud=yd((cd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),md(this,"interval",ud,this),md(this,"popup_options",dd,this),md(this,"remaining_time",pd,this),md(this,"should_show_popup",hd,this),this.root_store=t}var t,n;return t=e,(n=[{key:"countDownTimer",value:function(){var e=Mn(this.root_store.order_store.order_information.order_expiry_milliseconds),t=Pn(e);e<0?(this.setRemainingTime(Na("expired")),clearInterval(this.interval)):this.setRemainingTime(t)}},{key:"handleShowPopup",value:function(e){this.setPopupOptions(e),this.setShouldShowPopup(!0)}},{key:"onCancelClick",value:function(){this.setShouldShowPopup(!1)}},{key:"setIntervalState",value:function(e){this.interval=e}},{key:"setPopupOptions",value:function(e){this.popup_options=e}},{key:"setRemainingTime",value:function(e){this.remaining_time=e}},{key:"setShouldShowPopup",value:function(e){this.should_show_popup=e}}])&&_d(t.prototype,n),e}()).prototype,"interval",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dd=yd(cd.prototype,"popup_options",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),pd=yd(cd.prototype,"remaining_time",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hd=yd(cd.prototype,"should_show_popup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yd(cd.prototype,"countDownTimer",[nd],Object.getOwnPropertyDescriptor(cd.prototype,"countDownTimer"),cd.prototype),yd(cd.prototype,"handleShowPopup",[rd],Object.getOwnPropertyDescriptor(cd.prototype,"handleShowPopup"),cd.prototype),yd(cd.prototype,"onCancelClick",[ad],Object.getOwnPropertyDescriptor(cd.prototype,"onCancelClick"),cd.prototype),yd(cd.prototype,"setIntervalState",[id],Object.getOwnPropertyDescriptor(cd.prototype,"setIntervalState"),cd.prototype),yd(cd.prototype,"setPopupOptions",[od],Object.getOwnPropertyDescriptor(cd.prototype,"setPopupOptions"),cd.prototype),yd(cd.prototype,"setRemainingTime",[sd],Object.getOwnPropertyDescriptor(cd.prototype,"setRemainingTime"),cd.prototype),yd(cd.prototype,"setShouldShowPopup",[ld],Object.getOwnPropertyDescriptor(cd.prototype,"setShouldShowPopup"),cd.prototype),cd),vd=n(2165),bd=n.n(vd),Ed=function e(t){var n=t.created_at,r=t.channel_url,a=t.id,i=t.file_type,o=t.message,s=t.message_type,l=t.name,c=t.sender_user_id,u=t.status,d=t.url;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.created_at=n,this.channel_url=r,this.file_type=i,this.id=a,this.message=o,this.message_type=s,this.name=l,this.sender_user_id=c,this.status=u,this.url=d};Ed.STATUS_PENDING=0,Ed.STATUS_ERRORED=1,Ed.TYPE_USER="user",Ed.TYPE_FILE="file";var wd,Cd,Ad,kd,Sd,Nd,Od,Td,Id,xd,Dd,Pd,Md,Rd,Ud,Ld,Fd,jd,zd,Hd,Bd,Gd,Vd,qd=function(e){return new Ed({created_at:e.createdAt,channel_url:e.channelUrl,file_type:e.type,id:e.messageId,message:e.message,message_type:e.messageType,name:e.name,sender_user_id:e.sender.userId,url:e.url})};function Kd(e){return(Kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wd(Object(n),!0).forEach((function(t){Qd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xd(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function $d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ep(e,t){return(ep=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tp(e,t){return!t||"object"!==Kd(t)&&"function"!=typeof t?np(e):t}function np(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rp(e){return(rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ap(e,t,n,r,a){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ip,op=(wd=$.ref,Cd=$.ref,Ad=$.shallow,kd=Xe.bound,Sd=Xe.bound,Nd=Xe.bound,Od=Xe.bound,Td=Xe.bound,Id=Xe.bound,xd=Xe.bound,Dd=Xe.bound,Pd=Xe.bound,Md=Xe.bound,Rd=Xe.bound,Ld=ap((Ud=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ep(e,t)}(a,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rp(e);if(t){var a=rp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tp(this,n)}}(a);function a(){var e;$d(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Xd(e=r.call.apply(r,[this].concat(n)),"active_chat_channel",Ld,np(e)),Xd(e,"chat_channel_url",Fd,np(e)),Xd(e,"chat_info",jd,np(e)),Xd(e,"chat_messages",zd,np(e)),Xd(e,"has_chat_error",Hd,np(e)),Xd(e,"is_chat_loading",Bd,np(e)),Xd(e,"should_show_chat_modal",Gd,np(e)),Xd(e,"should_show_chat_on_orders",Vd,np(e)),e.messages_ref=null,e.sendbird_api=null,e.service_token_timeout=null,e.scroll_debounce=null,e}return t=a,(n=[{key:"has_chat_info",get:function(){return this.chat_info.app_id&&this.chat_info.user_id&&this.chat_info.token}},{key:"last_other_user_activity",get:function(){var e=this,t=this.chat_messages.slice().reverse().find((function(t){return t.sender_user_id!==e.chat_info.user_id}));return t?(0,Sn.epochToMoment)(Math.floor(t.created_at/1e3)).fromNow():null}},{key:"addChannelMessage",value:function(e){this.chat_messages.push(e)}},{key:"createChatForNewOrder",value:function(e){var t=this;this.chat_channel_url||zn({p2p_chat_create:1,order_id:e}).then((function(e){e.error||t.setChatChannelUrl(e.p2p_chat_create.channel_url)}))}},{key:"replaceChannelMessage",value:function(e,t,n){this.chat_messages.splice(e,t,n)}},{key:"setActiveChatChannel",value:function(e){this.active_chat_channel=e}},{key:"setChatChannelUrl",value:function(e){this.chat_channel_url=e}},{key:"setChatInfo",value:function(e){this.chat_info=e}},{key:"setHasChatError",value:function(e){this.has_chat_error=e}},{key:"setIsChatLoading",value:function(e){this.is_chat_loading=e}},{key:"setChannelMessages",value:function(e){this.chat_messages=e}},{key:"setShouldShowChatModal",value:function(e){this.should_show_chat_modal=e}},{key:"setShouldShowChatOnOrders",value:function(e){this.should_show_chat_on_orders=e}},{key:"initialiseChatWsConnection",value:function(){var e=this;this.terminateChatWsConnection(),this.setHasChatError(!1),this.setIsChatLoading(!0);var t=this.chat_info,n=t.user_id,r=t.token,a=t.app_id;this.sendbird_api=new(bd())({appId:a}),this.sendbird_api.connect(n,r,(function(t,n){if(n)console.warn(n),e.setHasChatError(!0),e.setIsChatLoading(!1);else{var r=new e.sendbird_api.ChannelHandler;r.onMessageReceived=e.onMessageReceived.bind(e),r.onReadReceiptUpdated=e.onReadReceiptUpdated.bind(e),e.sendbird_api.addChannelHandler("channel_event_handler",r),e.initialiseOrderChannel()}}))}},{key:"initialiseOrderChannel",value:function(){var e=this;this.setHasChatError(!1),this.sendbird_api.GroupChannel.getChannel(this.chat_channel_url,(function(t,n){n?(console.warn(n),e.setHasChatError(!0),e.setIsChatLoading(!1)):e.setActiveChatChannel(t)}))}},{key:"initialiseOrderMessages",value:function(){var e=this;this.setHasChatError(!1),this.getPreviousMessages((function(t,n){n?(console.warn(n),e.setHasChatError(!0)):e.setChannelMessages(t.map((function(e){return qd(e)}))),e.setIsChatLoading(!1)}))}},{key:"getPreviousMessages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1,r=50,a=!1,i="",o="";this.active_chat_channel.getPreviousMessagesByTimestamp(t||this.root_store.general_store.props.server_time.get().utc().valueOf(),n,r,a,i,o,e)}},{key:"handleP2pAdvertiserInfo",value:function(e){var t=this;if(!e.error&&!this.service_token_timeout){var n=e.p2p_advertiser_create||e.p2p_advertiser_info;!function e(){zn({service:"sendbird",service_token:1}).then((function(r){if(!r.error){var a=t.root_store.general_store.props.server_time,i=r.service_token;t.setChatInfo({app_id:i.sendbird.app_id,token:i.sendbird.token,user_id:n.chat_user_id});var o=(0,Sn.epochToMoment)(i.sendbird.expiry_time).diff(a.get().clone().subtract(1,"hour"));t.service_token_timeout=setTimeout((function(){return e()}),o)}}))}()}}},{key:"markMessagesAsRead",value:function(e){var t;if(this.active_chat_channel&&document.hasFocus())if(e&&null!==(t=this.messages_ref)&&void 0!==t&&t.current){var n=this.messages_ref.current;n.scrollHeight-n.scrollTop===n.clientHeight&&this.active_chat_channel.markAsRead()}else this.active_chat_channel.markAsRead()}},{key:"onMessageReceived",value:function(e,t){t.channelUrl===this.chat_channel_url&&this.addChannelMessage(qd(t))}},{key:"onMessagesScroll",value:function(){var e=this;this.scroll_debounce&&clearInterval(this.scroll_debounce),this.scroll_debounce=setTimeout((function(){if(e.messages_ref.current)if(0===e.messages_ref.current.scrollTop){var t=e.chat_messages.reduce((function(e,t){return t.created_at<e?t.created_at:e}),1/0);e.getPreviousMessages((function(t,n){if(n)console.warn(n);else if(t.length){var r=t.map((function(e){return qd(e)}));e.replaceChannelMessage.apply(e,[0,0].concat(function(e){return function(e){if(Array.isArray(e))return Jd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)))}}),t)}else e.markMessagesAsRead(!0)}),500)}},{key:"onReadReceiptUpdated",value:function(e){e.url===this.chat_channel_url&&this.setChannelMessages(this.chat_messages.slice())}},{key:"registerEventListeners",value:function(){var e=this,t=function(){return e.markMessagesAsRead(!0)};return window.addEventListener("focus",t),function(){return window.removeEventListener("focus",t)}}},{key:"registerMobXReactions",value:function(){var e=this;return this.disposeOrderIdReaction=tt((function(){return e.root_store.order_store.order_id}),(function(t){t||(e.setChatChannelUrl(null),e.setChannelMessages([]),e.setIsChatLoading(!0),e.setShouldShowChatModal(!1))})),this.disposeChannelUrlReaction=tt((function(){return e.chat_channel_url&&e.has_chat_info}),(function(t){t?e.initialiseChatWsConnection():e.terminateChatWsConnection()})),this.disposeActiveChatChannelReaction=tt((function(){return e.active_chat_channel}),(function(t){t?e.initialiseOrderMessages():e.setChannelMessages([])})),function(){"function"==typeof e.disposeOrderIdReaction&&e.disposeOrderIdReaction(),"function"==typeof e.disposeChannelUrlReaction&&e.disposeChannelUrlReaction(),"function"==typeof e.disposeActiveChatChannelReaction&&e.disposeActiveChatChannelReaction()}}},{key:"sendFile",value:function(e){var t=this;if(e){var n=new this.sendbird_api.FileMessageParams;n.file=e,n.fileName=e.name,n.fileSize=e.size,n.mimeType=e.type,this.active_chat_channel.sendFileMessage(n,(function(e,n){n?console.warn(n):t.addChannelMessage(qd(e))}))}}},{key:"sendMessage",value:function(e){var t=this,n=e.replace(/^[\r\n]+|[\r\n]+$/g,"");if(0!==n.length&&0!==n.trim().length){var r=new this.sendbird_api.UserMessageParams,a="".concat(Date.now()).concat(e.substring(0,9)).concat(this.chat_messages.length);r.message=n,r.data=a;var i={created_at:this.root_store.general_store.props.server_time.get().utc(),chat_channel_url:this.active_chat_channel.url,message:e,id:a,message_type:Ed.TYPE_USER,sender_user_id:this.chat_info.user_id,status:Ed.STATUS_PENDING};this.addChannelMessage(new Ed(i)),this.active_chat_channel.sendUserMessage(r,(function(e,n){var r=t.chat_messages.findIndex((function(e){return e.messageId===a}));if(n){var o=new Ed(Yd(Yd({},i),{},{status:Ed.STATUS_ERRORED}));t.replaceChannelMessage(r,1,o)}else t.replaceChannelMessage(r,1,qd(e))}))}}},{key:"setMessagesRef",value:function(e){this.messages_ref=e}},{key:"terminateChatWsConnection",value:function(){this.sendbird_api&&"function"==typeof this.sendbird_api.disconnect&&this.sendbird_api.disconnect()}}])&&Zd(t.prototype,n),a}(Bn)).prototype,"active_chat_channel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fd=ap(Ud.prototype,"chat_channel_url",[wd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jd=ap(Ud.prototype,"chat_info",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{app_id:null,user_id:null,token:null}}}),zd=ap(Ud.prototype,"chat_messages",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Hd=ap(Ud.prototype,"has_chat_error",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bd=ap(Ud.prototype,"is_chat_loading",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gd=ap(Ud.prototype,"should_show_chat_modal",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vd=ap(Ud.prototype,"should_show_chat_on_orders",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ap(Ud.prototype,"has_chat_info",[ae],Object.getOwnPropertyDescriptor(Ud.prototype,"has_chat_info"),Ud.prototype),ap(Ud.prototype,"last_other_user_activity",[ae],Object.getOwnPropertyDescriptor(Ud.prototype,"last_other_user_activity"),Ud.prototype),ap(Ud.prototype,"addChannelMessage",[kd],Object.getOwnPropertyDescriptor(Ud.prototype,"addChannelMessage"),Ud.prototype),ap(Ud.prototype,"createChatForNewOrder",[Sd],Object.getOwnPropertyDescriptor(Ud.prototype,"createChatForNewOrder"),Ud.prototype),ap(Ud.prototype,"replaceChannelMessage",[Nd],Object.getOwnPropertyDescriptor(Ud.prototype,"replaceChannelMessage"),Ud.prototype),ap(Ud.prototype,"setActiveChatChannel",[Od],Object.getOwnPropertyDescriptor(Ud.prototype,"setActiveChatChannel"),Ud.prototype),ap(Ud.prototype,"setChatChannelUrl",[Td],Object.getOwnPropertyDescriptor(Ud.prototype,"setChatChannelUrl"),Ud.prototype),ap(Ud.prototype,"setChatInfo",[Id],Object.getOwnPropertyDescriptor(Ud.prototype,"setChatInfo"),Ud.prototype),ap(Ud.prototype,"setHasChatError",[xd],Object.getOwnPropertyDescriptor(Ud.prototype,"setHasChatError"),Ud.prototype),ap(Ud.prototype,"setIsChatLoading",[Dd],Object.getOwnPropertyDescriptor(Ud.prototype,"setIsChatLoading"),Ud.prototype),ap(Ud.prototype,"setChannelMessages",[Pd],Object.getOwnPropertyDescriptor(Ud.prototype,"setChannelMessages"),Ud.prototype),ap(Ud.prototype,"setShouldShowChatModal",[Md],Object.getOwnPropertyDescriptor(Ud.prototype,"setShouldShowChatModal"),Ud.prototype),ap(Ud.prototype,"setShouldShowChatOnOrders",[Rd],Object.getOwnPropertyDescriptor(Ud.prototype,"setShouldShowChatOnOrders"),Ud.prototype),Ud),sp=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.general_store=new Mo(this),this.advertiser_page_store=new Ys(this),this.buy_sell_store=new gc(this),this.my_ads_store=new nu(this),this.my_profile_store=new Ju(this),this.order_store=new fd(this),this.order_details_store=new gd(this),this.sendbird_store=new op(this)},lp=function(){if(!ip){var e=new sp;ip=i.createContext({general_store:e.general_store,advertiser_page_store:e.advertiser_page_store,buy_sell_store:e.buy_sell_store,my_ads_store:e.my_ads_store,my_profile_store:e.my_profile_store,order_store:e.order_store,order_details_store:e.order_details_store,sendbird_store:e.sendbird_store})}return i.useContext(ip)},cp=n(8124),up=(n(2965),function(e){var t=e.message;return i.createElement(cp.Text,{as:"p",color:"loss-danger",size:"xxs",className:"dp2p-form-error"},t)});up.propTypes={message:kn().string};const dp=up;var pp=n(7717);const hp=function(){var e,t=lp().buy_sell_store;return i.createElement(i.Fragment,null,i.createElement(cp.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},null!=t&&t.is_sell_advert?i.createElement(Sa,{i18n_default_text:"You'll receive"}):i.createElement(Sa,{i18n_default_text:"You'll send"})),i.createElement(cp.Text,{as:"p",color:"general",line_height:"m",size:"xs",weight:"bold"},(0,Sn.getFormattedText)(null==t?void 0:t.receive_amount,null==t||null===(e=t.advert)||void 0===e?void 0:e.local_currency)))};function fp(){return(fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var mp=function(e){var t=(0,Sn.useIsMounted)(),n=lp(),r=n.advertiser_page_store,a=n.buy_sell_store;a.setFormProps(e);var o=e.setPageFooterParent,s=(null==a?void 0:a.advert)||{},l=s.advertiser_details,c=s.description,u=s.local_currency,d=s.max_order_amount_limit_display,p=s.min_order_amount_limit,h=s.min_order_amount_limit_display,f=s.price;return i.useEffect((function(){var e=tt((function(){return a.receive_amount}),(function(){(0,Sn.isMobile)()&&"function"==typeof o&&o(i.createElement(hp,{is_sell_advert:a.is_sell_advert,local_currency:u,receive_amount:a.receive_amount}))}));return r.setFormErrorMessage(""),a.setInitialReceiveAmount(),a.is_sell_advert&&a.getAdvertiserInfo(),function(){e()}}),[]),i.createElement(pp.Formik,{enableReinitialize:!0,validate:a.validatePopup,validateOnMount:!0,initialValues:{amount:p,contact_info:a.contact_info,payment_info:a.payment_info},initialErrors:a.is_sell_advert&&!a.has_payment_info?{contact_info:!0,payment_info:!0}:{},onSubmit:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];a.handleSubmit.apply(a,[function(){return t()}].concat(n))}},(function(e){var t=e.errors,n=e.isSubmitting,r=e.isValid,o=e.setFieldValue,s=e.submitForm,p=e.touched,m=e.values;return a.form_props.setIsSubmitDisabled(!r||n),a.form_props.setSubmitForm(s),i.createElement(i.Fragment,null,i.createElement(pp.Form,{noValidate:!0},i.createElement("div",{className:"buy-sell__modal-content"},i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(cp.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},a.is_buy_advert?i.createElement(Sa,{i18n_default_text:"Seller"}):i.createElement(Sa,{i18n_default_text:"Buyer"})),i.createElement(cp.Text,{as:"p",color:"general",line_height:"m",size:"xs"},l.name)),i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(cp.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Rate (1 {{ currency }})",values:{currency:a.account_currency}})),i.createElement(cp.Text,{as:"p",color:"general",line_height:"m",size:"xs"},(0,Sn.getFormattedText)(f,u)))),i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(cp.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},a.is_buy_advert?i.createElement(Sa,{i18n_default_text:"Seller's instructions"}):i.createElement(Sa,{i18n_default_text:"Buyer's instructions"})),c.trim().replace(/([\r\n]){2,}/g,"\n\n").split("\n").map((function(e,t){return i.createElement(cp.Text,{key:t,as:"p",color:"general",line_height:"m",size:"xs"},e||"-")})))),i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement(pp.Field,{name:"amount"},(function(e){var n=e.field;return i.createElement(cp.Input,fp({},n,{"data-lpignore":"true",type:"number",error:t.amount,label:a.is_buy_advert?Na("Buy amount"):Na("Sell amount"),hint:i.createElement(Sa,{i18n_default_text:"Limits: {{min}}–{{max}} {{currency}}",values:{min:h,max:d,currency:a.account_currency}}),is_relative_hint:!0,className:"buy-sell__modal-field",trailing_icon:i.createElement(cp.Text,{color:"less-prominet","line-height":"m",size:"xs"},a.account_currency),onChange:function(e){if(""===e.target.value)o("amount",""),a.setReceiveAmount(0);else{var t=(0,Sn.getRoundedNumber)(e.target.value,a.account_currency);o("amount",(0,Sn.getRoundedNumber)(t)),a.setReceiveAmount((0,Sn.getRoundedNumber)(t*f,a.account_currency))}},required:!0,value:m.amount}))})),(0,Sn.isDesktop)()&&i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(hp,null))),a.is_sell_advert&&i.createElement(i.Fragment,null,i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(pp.Field,{name:"payment_info"},(function(e){var n=e.field;return i.createElement(cp.Input,fp({},n,{"data-lpignore":"true",type:"textarea",error:p.payment_info&&t.payment_info,hint:Na("Bank name, account number, beneficiary name"),is_relative_hint:!0,label:Na("Your bank details"),required:!0,has_character_counter:!0,initial_character_count:a.payment_info.length,max_characters:300}))}))),i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(pp.Field,{name:"contact_info"},(function(e){var n=e.field;return i.createElement(cp.Input,fp({},n,{"data-lpignore":"true",type:"textarea",error:p.contact_info&&t.contact_info,label:Na("Your contact details"),required:!0,has_character_counter:!0,initial_character_count:a.contact_info.length,max_characters:300}))})))))))}))};mp.propTypes={advert:kn().object,contact_info:kn().string,form_props:kn().object,getAdvertiserInfo:kn().func,setIsSubmitDisabled:kn().func,setSubmitForm:kn().func,setPageFooterParent:kn().func,has_payment_info:kn().bool,is_buy_advert:kn().bool,is_sell_advert:kn().bool,payment_info:kn().string,receive_amount:kn().number,setFormProps:kn().func,setInitialReceiveAmount:kn().func,setReceiveAmount:kn().func,validatePopup:kn().func};const _p=bn(mp);var yp=function(e){var t=e.className,n=e.onClick;return i.createElement("svg",{className:a()("inline-icon",t),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",onClick:n},i.createElement("path",{className:"color1-fill",fillOpacity:"0.8",d:"M8 6.587l4.293-4.294a1 1 0 0 1 1.414 1.414L9.414 8.002l4.293 4.294a1 1 0 0 1-1.414 1.414L8 9.416 3.707 13.71a1 1 0 1 1-1.414-1.414l4.293-4.294-4.293-4.295a1 1 0 1 1 1.414-1.414L8 6.587z"}))};yp.propTypes={className:kn().string,onClick:kn().func};const gp=yp;n(5906);const vp=bn((function(e){var t=e.children,n=lp().general_store;return(0,Sn.isMobile)()?i.createElement("div",{className:"dp2p-nickname__container"},t):i.createElement(cp.Modal,{className:"dp2p-nickname__container",width:"440px",is_open:n.should_show_popup},t)}));function bp(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Ep(){return(Ep=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wp=bn((function(){var e=lp().general_store,t=(0,pp.useFormikContext)(),n=t.errors,r=t.isSubmitting,a=t.values;return i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,type:"button",onClick:e.onNicknamePopupClose,large:!0},Na("Cancel")),i.createElement(cp.Button,{type:"submit",is_disabled:!!e.nickname_error||!!n.nickname||!!r||""===a.nickname,primary:!0,large:!0},Na("Confirm")))})),Cp=bn((function(e){var t=e.field,n=lp().general_store,r=(0,pp.useFormikContext)(),a=r.errors,o=r.handleChange;return i.createElement(cp.Input,Ep({},t,{"data-lpignore":"true",error:n.nickname_error||a.nickname,label:Na("Your nickname"),className:"dp2p-nickname__form-field",onChange:function(e){o(e),n.setNicknameError(void 0)},required:!0}))}));const Ap=bn((function(){var e=lp().general_store;return i.createElement(vp,null,!(0,Sn.isMobile)()&&i.createElement("div",{className:"dp2p-nickname__form-header dp2p-nickname__form-header--no-border"},i.createElement("div",{className:"dp2p-nickname__form-header_wrapper dp2p-nickname__form-header_right"},i.createElement(gp,{className:"dp2p-nickname__form-close_icon",onClick:e.onNicknamePopupClose}))),i.createElement(pp.Formik,{validate:e.validatePopup,initialValues:{nickname:""},onSubmit:function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createAdvertiser(n.nickname);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){bp(i,r,a,o,s,"next",e)}function s(e){bp(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}()},i.createElement(pp.Form,{className:"dp2p-nickname__form-wrapper",noValidate:!0},i.createElement("div",{className:"dp2p-nickname__form-content dp2p-nickname__form-content__centre"},i.createElement(cp.Icon,{icon:"IcCashierP2pUser",width:"128",height:"128"}),i.createElement(cp.Text,{as:"h5",size:"s",weight:"bold",line_height:"unset",className:"dp2p-nickname__form-content--title"},Na("Choose a nickname")),i.createElement(cp.Text,{as:"p",size:"xs",line_height:"unset",className:"dp2p-nickname__form-content--text"},Na("You will appear to other users as")),i.createElement("div",{className:"dp2p-nickname__form-field_wrapper"},i.createElement(pp.Field,{name:"nickname"},(function(e){var t=e.field;return i.createElement(Cp,{field:t})}))),i.createElement("div",{className:"dp2p-nickname__form-content--ps"},Na("Once set, your nickname cannot be changed."))),i.createElement("div",{className:"dp2p-nickname__form-footer"},i.createElement(wp,null)))))}));function kp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(9801);var Np=function(e){var t=e.onCancel,n=e.error_message,r=e.is_submit_disabled,a=e.onSubmit;return i.createElement(i.Fragment,null,n&&i.createElement(dp,{message:n}),i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,type:"button",onClick:t,large:!0},Na("Cancel")),i.createElement(cp.Button,{is_disabled:r,primary:!0,large:!0,onClick:a},Na("Confirm"))))};Np.propTypes={onCancel:kn().func.isRequired,error_message:kn().string,is_submit_disabled:kn().bool,onSubmit:kn().func.isRequired};var Op=function(e){var t=e.table_type,n=e.selected_ad,r=e.should_show_popup,a=e.setShouldShowPopup,o=lp(),s=o.buy_sell_store,l=o.general_store,c=o.order_store,u=i.useRef((function(){})),d=kp((0,cp.useSafeState)(null),2),p=d[0],h=d[1],f=kp((0,cp.useSafeState)(!0),2),m=f[0],_=f[1],y=kp((0,cp.useSafeState)(i.createElement(hp,{is_sell_advert:s.is_sell_advert,local_currency:(null==s?void 0:s.advert)&&s.advert.local_currency,receive_amount:s.receive_amount})),2),g=y[0],v=y[1],b=function(){return a(!1)},E=function(e){c.setOrderId(e.id),l.redirectTo("orders",{nav:{location:"buy_sell"}}),a(!1)},w=function(e){return u.current=e};i.useEffect((function(){r||h(null)}),[r]);var C=l.nickname?_p:Ap,A=t===Oa.BUY?Na("Buy {{ currency }}",{currency:n.account_currency}):Na("Sell {{ currency }}",{currency:n.account_currency});return(0,Sn.isMobile)()?i.createElement(cp.MobileFullPageModal,{body_className:"buy-sell__modal-body",className:"buy-sell__modal",height_offset:"80px",is_flex:!0,is_modal_open:r,page_header_className:"buy-sell__modal-header",page_header_text:A,pageHeaderReturnFn:b,page_footer_parent:g,renderPageFooterChildren:function(){return i.createElement(Np,{error_message:p,is_submit_disabled:m,onCancel:b,onSubmit:u.current})},page_footer_className:"buy-sell__modal-footer"},i.createElement(C,{advert:n,handleClose:b,handleConfirm:E,setIsSubmitDisabled:_,setErrorMessage:h,setSubmitForm:w,setPageFooterParent:v})):i.createElement(cp.Modal,{className:"buy-sell__modal",height:t===Oa.BUY?"400px":"649px",width:"456px",is_open:r,title:A,portalId:l.props.modal_root_id,toggleModal:b},i.createElement(cp.ThemedScrollbars,{height:"calc(100% - 5.8rem - 7.4rem)"},i.createElement(cp.Modal.Body,null,i.createElement(C,{advert:n,handleClose:b,handleConfirm:E,setIsSubmitDisabled:_,setErrorMessage:h,setSubmitForm:w}))),i.createElement(cp.Modal.Footer,{has_separator:!0},i.createElement(Np,{error_message:p,is_submit_disabled:m,onCancel:b,onSubmit:u.current})))};Op.propTypes={table_type:kn().string,selected_ad:kn().object,should_show_popup:kn().bool,setShouldShowPopup:kn().func};const Tp=bn(Op);var Ip=i.memo((function(e){var t=e.className,n=e.nickname,r=e.size,o=e.text_size;return i.createElement("div",{className:a()("dp2p-avatar",t),style:{backgroundColor:Uo(n),height:"".concat(r,"px"),width:"".concat(r,"px")}},i.createElement(cp.Text,{color:"colored-background",line_height:"x",size:o},Lo(n)))}));Ip.displayName="UserAvatar",Ip.propTypes={className:kn().string,nickname:kn().string.isRequired,size:kn().number.isRequired,text_size:kn().string.isRequired};const xp=Ip;function Dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(8901);var Pp=function(){var e=lp().advertiser_page_store,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!1),2),n=t[0],r=t[1],a=e.advertiser_info,o=a.buy_completion_rate,s=a.buy_orders_count,l=a.release_time_avg,c=a.sell_orders_count,u=a.total_completion_rate,d=a.total_orders_count,p=l>60?Math.round(l/60):"< 1";return i.createElement("div",{className:"advertiser-page__stats--wrapper"},i.createElement(cp.Table,null,i.createElement(cp.ThemedScrollbars,{className:"advertiser-page__horizontal-scroll",is_bypassed:(0,Sn.isDesktop)(),width:"calc(100vw - 32px)",is_only_horizontal:!0,is_scrollbar_hidden:!0},i.createElement(cp.Table.Row,{className:"advertiser-page__stats"},i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Total orders")),i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},d||"-")),i.createElement("div",{className:"advertiser-page__stats-cell-separator"}),(0,Sn.isMobile)()?i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Buy/Sell")),i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},"".concat(s,"/").concat(c))):i.createElement(i.Fragment,null,i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Buy")),i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},s)),i.createElement("div",{className:"advertiser-page__stats-cell-separator"}),i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Sell")),i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},c))),i.createElement("div",{className:"advertiser-page__stats-cell-separator"}),i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Completion")),i.createElement("div",{className:"advertiser-page__stats-cell-completion"},i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},u?"".concat(u,"%"):"-"),i.createElement("div",{className:"advertiser-page__stats-cell-buy"},i.createElement(cp.Text,{align:"center",color:"prominent",line_height:"m",size:"xs"},Na("(Buy {{- buy_completion_rate }})",{buy_completion_rate:o?"".concat(o,"%"):Na("N/A")}))))),i.createElement("div",{className:"advertiser-page__stats-cell-separator"}),i.createElement(cp.Table.Cell,{className:"advertiser-page__stats-cell"},i.createElement(cp.Text,{align:"center",color:"less-prominent",size:"xs",line_height:"m"},Na("Avg. release time")),i.createElement(cp.Text,{align:"center",color:"prominent",size:"s",weight:"bold"},l?Na("{{- avg_release_time_in_minutes}} min",{avg_release_time_in_minutes:p}):"-"))))),i.createElement(cp.PopoverMobile,{button_text:Na("Got it"),className:"advertiser-page__popover-icon",is_open:n,message:i.createElement(cp.Text,{color:"prominent",line_height:"m",size:"xs"},i.createElement(Sa,{i18n_default_text:"These fields are based on the last 30 days' activity: Buy, Sell, Completion, and Avg. release time."})),setIsOpen:r},i.createElement(cp.Icon,{icon:"IcInfoOutline",size:16})))};Pp.propTypes={is_visible:kn().bool};const Mp=bn(Pp);n(1846);var Rp=function(e){var t=e.className,n=e.children,r=e.has_tabs,o=e.icon,s=e.title;return i.createElement("div",{className:a()(t,"p2p-empty",{"p2p-empty--no-tabs":!r})},i.createElement(cp.Icon,{icon:o,className:"p2p-empty-icon",size:128}),i.createElement("div",{className:"p2p-empty-title"},i.createElement(cp.Text,{color:"general",line_height:"m",size:"s",weight:"bold"},s)),n)};Rp.propTypes={children:kn().any,has_tabs:kn().bool,icon:kn().string,title:kn().string};const Up=Rp;var Lp=function(e){var t=e.row,n=e.showAdPopup,r=lp(),a=r.advertiser_page_store,o=r.buy_sell_store,s=r.general_store,l=s.client.currency,c=t.local_currency,u=t.max_order_amount_limit_display,d=t.min_order_amount_limit_display,p=t.price_display,h=a.counterparty_type===Oa.BUY,f=a.advertiser_details_id===s.advertiser_id,m=function(){o.setSelectedAdState(t),n(t)};return(0,Sn.isMobile)()?i.createElement(cp.Table.Row,{className:"advertiser-page__adverts-table_row"},i.createElement(cp.Table.Cell,{className:"advertiser-page__cell"},i.createElement(cp.Text,{size:"xxs",line_height:"m"},i.createElement(Sa,{i18n_default_text:"Rate (1 {{currency}})",values:{currency:l}})),i.createElement("div",{className:"advertiser-page__adverts-price"},i.createElement(cp.Text,{color:"profit-success",size:"s",weight:"bold",line_height:"m"},p," ",c)),i.createElement("div",{className:"advertiser-page__cell-limit"},i.createElement(cp.Text,{size:"xxs",line_height:"m"},i.createElement(Sa,{i18n_default_text:"Limit {{min_order_amount_limit_display}}-{{max_order_amount_limit_display}} {{currency}}",values:{min_order_amount_limit_display:d,max_order_amount_limit_display:u,currency:l}})))),f?i.createElement(cp.Table.Cell,null):i.createElement(cp.Table.Cell,{className:"advertiser-page__adverts-button"},i.createElement(cp.Button,{primary:!0,large:!0,onClick:m},Na(h?"Buy":"Sell")," ",l))):i.createElement(cp.Table.Row,{className:"advertiser-page__adverts-table_row"},i.createElement(cp.Table.Cell,null,"".concat(d,"-").concat(u," ").concat(l)),i.createElement(cp.Table.Cell,{className:"advertiser-page__adverts-price"},i.createElement(cp.Text,{color:"profit-success","line-height":"m",size:"xs",weight:"bold"},p," ",c)),f?i.createElement(cp.Table.Cell,null):i.createElement(cp.Table.Cell,{className:"advertiser-page__adverts-button"},i.createElement(cp.Button,{is_disabled:s.is_barred,onClick:m,primary:!0,small:!0},Na(h?"Buy":"Sell")," ",l)))};Lp.displayName="AdvertiserPageRow",Lp.propTypes={advert:kn().object,showAdPopup:kn().func};const Fp=bn(Lp);function jp(){return(jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const zp=bn((function(){var e=lp(),t=e.advertiser_page_store,n=e.general_store;return i.createElement("div",{className:"advertiser-page__adverts"},i.createElement(cp.Tabs,{active_index:t.active_index,className:"advertiser-page__adverts-tabs",is_full_width:(0,Sn.isMobile)(),onTabItemClick:t.handleTabItemClick,header_fit_content:!0,top:!0},i.createElement("div",{label:Na("Buy")}),i.createElement("div",{label:Na("Sell")})),t.is_loading_adverts?i.createElement("div",{className:"advertiser-page__adverts-table"},i.createElement(cp.Loading,{is_fullscreen:!1})):i.createElement(i.Fragment,null,t.adverts.length?i.createElement(cp.Table,{className:"advertiser-page__adverts-table"},(0,Sn.isDesktop)()&&i.createElement(cp.Table.Header,null,i.createElement(cp.Table.Row,{className:"advertiser-page__adverts-table_row"},i.createElement(cp.Table.Head,null,Na("Limits")),i.createElement(cp.Table.Head,null,Na("Rate (1 {{currency}})",{currency:n.client.currency})),i.createElement(cp.Table.Head,null,""))),i.createElement(cp.Table.Body,{className:"advertiser-page__adverts-table-body"},i.createElement(cp.InfiniteDataList,{data_list_className:"advertiser-page__data-list",items:t.adverts,keyMapperFn:function(e){return e.id},rowRenderer:function(e){return i.createElement(Fp,jp({},e,{showAdPopup:t.showAdPopup}))},loadMoreRowsFn:t.loadMoreAdvertiserAdverts,has_more_items_to_load:t.has_more_adverts_to_load}))):i.createElement(Up,{className:a()("",{"advertiser-page-empty":(0,Sn.isMobile)()}),icon:"IcCashierNoAds",title:Na("No ads")})))}));var Hp=function(){var e=lp().advertiser_page_store,t=e.advertiser_info,n=t.basic_verification,r=t.first_name,a=t.full_verification,o=t.last_name;return i.useEffect((function(){return e.onMount(),tt((function(){return e.active_index}),(function(){return e.onTabChange()}),{fireImmediately:!0})}),[]),e.is_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):e.error_message?i.createElement("div",{className:"advertiser-page__error"},e.error_message):i.createElement("div",{className:"advertiser-page"},i.createElement(Tp,{selected_ad:e.advert,should_show_popup:e.show_ad_popup,setShouldShowPopup:e.setShowAdPopup,table_type:e.counterparty_type===Oa.BUY?Oa.BUY:Oa.SELL}),i.createElement("div",{className:"advertiser-page__header"},i.createElement("div",{className:"advertiser-page__header-details"},i.createElement(xp,{nickname:e.advertiser_details_name,size:32,text_size:"xxs"}),i.createElement("div",{className:"advertiser-page__header-name"},i.createElement(cp.Text,{color:"prominent","line-height":"m",size:"s",weight:"bold"},e.advertiser_details_name),r&&o&&i.createElement("div",{className:"advertiser-page__header-real-name"},i.createElement(cp.Text,{color:"less-prominent",line_height:"xs",size:"xs"},"".concat(r," ").concat(o))))),i.createElement("div",{className:"advertiser-page__header-verification"},n?i.createElement("div",{className:"advertiser-page__header-verification-id"},i.createElement(cp.Text,{color:"less-prominent",size:(0,Sn.isMobile)()?"xxs":"xs",line_height:"m"},Na("ID verified")),i.createElement(cp.Icon,{className:"advertiser-page__header-verification-icon",icon:"IcCashierVerificationBadge",size:(0,Sn.isMobile)()?12:16})):null,a?i.createElement("div",{className:"advertiser-page__header-verification-status"},i.createElement(cp.Text,{color:"less-prominent",size:(0,Sn.isMobile)()?"xxs":"xs",line_height:"m"},Na("Address verified")),i.createElement(cp.Icon,{className:"advertiser-page__header-verification-icon",icon:"IcCashierVerificationBadge",size:(0,Sn.isMobile)()?12:16})):null)),i.createElement(Mp,null),i.createElement(zp,null))};Hp.propTypes={active_index:kn().number,advert:kn().object,advertiser_info:kn().object,adverts:kn().array,api_error_message:kn().string,counterparty_type:kn().string,error_message:kn().string,form_error_message:kn().string,handleTabItemClick:kn().func,height_values:kn().array,is_loading:kn().bool,is_submit_disabled:kn().bool,item_height:kn().number,modal_title:kn().string,onCancelClick:kn().func,onConfirmClick:kn().func,onMount:kn().func,onTabChange:kn().func,setFormErrorMessage:kn().func,setIsSubmitDisabled:kn().func,setSubmitForm:kn().func,show_ad_popup:kn().bool,showAdPopup:kn().func,submitForm:kn().func};const Bp=bn(Hp);n(9420);var Gp=function(e){var t=e.className,n=e.onClick,r=e.page_title;return i.createElement("div",{className:a()("page-return",t)},i.createElement("div",{onClick:n,className:"page-return__button"},i.createElement(cp.Icon,{icon:"IcArrowLeftBold",size:16})),i.createElement(cp.Text,{size:"s",color:"general",line_height:"m",weight:"bold"},r))};Gp.propTypes={onClick:kn().func,page_title:kn().string};const Vp=Gp,qp=bn((function(){var e=lp().general_store,t=e.props.history;if(e.is_high_risk_fully_authed_without_fa){var n=[{content:Na("Complete the financial assessment form"),status:"action",onClick:function(){return t.push({pathname:Sn.routes.financial_assessment})}}];return i.createElement("div",{className:"dp2p-blocked__checklist-container"},i.createElement(cp.Checklist,{className:"dp2p-blocked__checklist",items:n}))}return null})),Kp=bn((function(){var e=lp().general_store;return i.createElement(cp.Text,{className:"dp2p-blocked__description",align:"center",color:"prominent",line_height:"m",size:"xs"},e.is_high_risk_fully_authed_without_fa?i.createElement(Sa,{i18n_default_text:"To enable this feature you must complete the following:"}):i.createElement(Sa,{i18n_default_text:"Please use live chat to contact our Customer Support team for help."}))}));n(504);const Wp=function(){return i.createElement("div",{className:"dp2p-blocked"},i.createElement(cp.Icon,{icon:"IcCashierDp2pBlocked",size:128}),i.createElement(cp.Text,{className:"dp2p-blocked__title",color:"prominent",line_height:"m",size:"s",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Your DP2P cashier is blocked"})),i.createElement(Kp,null),i.createElement(qp,null))};n(3032);var Yp=function(e){var t=e.should_wrap,n=e.children;return t?i.createElement("div",{className:a()("dp2p-verification__wrapper",{"dp2p-verification__wrapper--mobile":(0,Sn.isMobile)()})},n):n},Qp=function(e){var t=e.should_wrap,n=lp().general_store;if(!n.is_advertiser&&"verified"===n.poi_status&&n.nickname)return i.createElement(Wp,null);var r=[{content:n.nickname||i.createElement(Sa,{i18n_default_text:"Choose your nickname"}),status:n.nickname?"done":"action",onClick:n.nickname?function(){}:n.toggleNicknamePopup},{content:n.poiStatusText(n.poi_status),is_disabled:"verified"!==n.poi_status&&!n.nickname,status:"verified"===n.poi_status?"done":"action",onClick:"verified"===n.poi_status?function(){}:function(){window.location.href="".concat(n.props.poi_url,"?ext_platform_url=").concat(Sn.routes.cashier_p2p)}}];return i.createElement(Yp,{should_wrap:t},i.createElement("div",{className:"dp2p-verification"},i.createElement(cp.Icon,{icon:"IcCashierSendEmail",className:"dp2p-verification__icon",size:102}),i.createElement("div",{className:"dp2p-verification__text"},i.createElement("div",{className:"dp2p-verification__text-title"},i.createElement(Sa,{i18n_default_text:"Please register with us!"})),i.createElement("div",{className:"dp2p-verification__text-description"},i.createElement(cp.Text,{as:"p",size:"xs",line_height:"s",align:"center"},i.createElement(Sa,{i18n_default_text:"To use DP2P, you need to choose a display name (a nickname) and verify your identity."})))),i.createElement(cp.Checklist,{className:"dp2p-verification__checklist",items:r})))};Qp.propTypes={should_wrap:kn().bool};const Jp=bn(Qp);n(2563);var Xp=function(e){var t=e.children;return i.createElement("div",{className:"p2p-toggle-container"},t)};Xp.propTypes={children:kn().any};const $p=Xp;var Zp=n(5371),eh=n.n(Zp);function th(){return(th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(4918);const nh=bn((function(){var e=lp().buy_sell_store,t=eh()((function(){e.loadMoreItems({startIndex:0})}),1e3);return i.createElement("div",{className:"search-box"},i.createElement(pp.Formik,{initialValues:{search:""},onSubmit:function(n){var r=n.search;e.setSearchTerm(r.trim()),r.trim()?(e.setIsLoading(!0),t()):e.setSearchResults([])}},(function(t){var n=t.submitForm,r=t.values.search,a=t.setFieldValue;return i.createElement(pp.Form,null,i.createElement(pp.Field,{name:"search"},(function(t){var o=t.field;return i.createElement(cp.Input,th({},o,{className:"search-box__field",type:"text",name:"search",placeholder:(0,Sn.isDesktop)()?Na("Search by nickname"):Na("Search"),onKeyUp:function(){return function(e){clearTimeout(t);var t=setTimeout((function(){e()}),1e3)}(n)},onFocus:n,leading_icon:i.createElement(cp.Icon,{className:"search-box__field-icon",icon:"IcSearch"}),trailing_icon:r?i.createElement(cp.Icon,{className:"search-box__cross-icon",color:"secondary",icon:"IcCloseCircle",onClick:function(){return function(t){t("search",""),e.setSearchTerm(""),e.setSearchResults([])}(a)}}):null}))})))})))}));function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(7966);const ah=bn((function(){var e=lp().buy_sell_store,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState("rate"),2),n=t[0],r=t[1];return i.createElement(cp.Dropdown,{className:"sort-dropdown",classNameLabel:"sort-dropdown--label",is_align_text_left:!0,list:[{text:Na("Exchange rate (Default)"),value:"rate"},{text:Na("Completion rate"),value:"completion"}],onChange:function(t){e.setIsLoading(!0),r(t.target.value),e.setItems([]),e.setSortBy(t.target.value),e.loadMoreItems({startIndex:0})},placeholder:Na("Sort by"),value:n})}));function ih(){return(ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Zn(e,t)}function sh(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const lh=o().createContext(null);var ch="unmounted",uh="exited",dh="entering",ph="entered",hh="exiting",fh=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=uh,r.appearStatus=dh):a=ph:a=t.unmountOnExit||t.mountOnEnter?ch:uh,r.state={status:a},r.nextCallback=null,r}oh(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ch?{status:uh}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==dh&&n!==ph&&(t=dh):n!==dh&&n!==ph||(t=hh)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===dh?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===uh&&this.setState({status:ch})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[nn().findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),l=r?s.appear:s.enter;e||n?(this.props.onEnter(i,o),this.safeSetState({status:dh},(function(){t.props.onEntering(i,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:ph},(function(){t.props.onEntered(i,o)}))}))}))):this.safeSetState({status:ph},(function(){t.props.onEntered(i)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:nn().findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:hh},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:uh},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:uh},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:nn().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ch)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,jr(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o().createElement(lh.Provider,{value:null},"function"==typeof n?n(e,r):o().cloneElement(o().Children.only(n),r))},t}(o().Component);function mh(){}fh.contextType=lh,fh.propTypes={},fh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mh,onEntering:mh,onEntered:mh,onExit:mh,onExiting:mh,onExited:mh},fh.UNMOUNTED=ch,fh.EXITED=uh,fh.ENTERING=dh,fh.ENTERED=ph,fh.EXITING=hh;const _h=fh;var yh=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=sh(n.className,r):n.setAttribute("class",sh(n.className&&n.className.baseVal||"",r)));var n,r}))},gh=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1];t.removeClasses(a,"exit"),t.addClass(a,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1]?"appear":"enter";t.addClass(a,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1]?"appear":"enter";t.removeClasses(a,i),t.addClass(a,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}oh(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(r+=" "+a),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,i=n.done;this.appliedClasses[t]={},r&&yh(e,r),a&&yh(e,a),i&&yh(e,i)},n.render=function(){var e=this.props,t=(e.classNames,jr(e,["classNames"]));return o().createElement(_h,ih({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o().Component);gh.defaultProps={classNames:""},gh.propTypes={};const vh=gh;n(209);var bh=function(e){var t=e.children,n=e.is_visible,r=e.onEntered,a=e.onExit;return(0,Sn.isMobile)()?i.createElement(vh,{in:n,timeout:250,classNames:"animation-wrapper",onExit:a,onEntered:r},t):t};bh.propTypes={children:kn().any,is_visible:kn().bool};const Eh=bh;function wh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(6939);var Ch=function(e){var t=e.is_visible,n=e.table_type,r=e.setTableType,o=lp().buy_sell_store,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!1),2),l=s[0],c=s[1];return i.useEffect((function(){return o.setSearchTerm(""),tt((function(){return o.should_use_client_limits}),(function(){o.setItems([]),o.setIsLoading(!0),o.loadMoreItems({startIndex:0})}),{fireImmediately:!0})}),[]),i.createElement("div",{className:a()("buy-sell__header",{"buy-sell__header-position-static":!!o.api_error_message})},i.createElement("div",{className:"buy-sell__header-container"},i.createElement(Eh,{is_visible:t},i.createElement($p,null,i.createElement(cp.ButtonToggle,{buttons_arr:[{text:Na("Buy"),value:Oa.BUY},{text:Na("Sell"),value:Oa.SELL}],className:"buy-sell__header-filters",is_animated:!0,name:"filter",onChange:function(e){return r(e.target.value)},value:n,has_rounded_button:!0}))),i.createElement("div",{className:"buy-sell__header-row"},i.createElement(nh,null),i.createElement(ah,null))),i.createElement("div",{className:"buy-sell__header-match-ads"},i.createElement(cp.Checkbox,{label:Na("Show the matching ads"),onChange:function(){return o.setShouldUseClientLimits(!o.should_use_client_limits)},value:o.should_use_client_limits}),i.createElement(cp.PopoverMobile,{desktop_alignment:"right",button_text:Na("Got it"),className:"buy-sell__header-match-ads__popover",is_open:l,message:Na("See the ads that match your DP2P balance and limit."),setIsOpen:c},i.createElement(cp.Icon,{icon:"IcInfoOutline",size:16}))))};Ch.propTypes={table_type:kn().string,setTableType:kn().func};const Ah=bn(Ch);n(4294);var kh=function(e){var t=e.message;return i.createElement(cp.Text,{as:"p",color:"loss-danger",size:"xs",className:"dp2p-table-error"},t)};kh.propTypes={message:kn().string},n(243);const Sh=xp;n(6206);var Nh=function(e){var t=e.row,n=lp(),r=n.buy_sell_store,o=n.general_store;if("WATCH_THIS_SPACE"===t.id)return i.createElement("div",{style:{height:"177px"}});if("NO_MATCH_ROW"===t.id)return i.createElement("div",{className:"buy-sell-row__no-match"},i.createElement(cp.Text,{color:"prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"There are no matching ads."})));var s=t.account_currency,l=t.counterparty_type,c=t.local_currency,u=t.max_order_amount_limit_display,d=t.min_order_amount_limit_display,p=t.price_display,h=t.advertiser_details.id===o.advertiser_id,f=l===Oa.BUY,m=t.advertiser_details.name;return(0,Sn.isMobile)()?i.createElement("div",{className:"buy-sell-row"},i.createElement("div",{className:"buy-sell-row__advertiser",onClick:function(){return r.showAdvertiserPage(t)}},i.createElement(Sh,{nickname:m,size:32,text_size:"s"}),i.createElement("div",{className:"buy-sell-row__advertiser-name"},i.createElement(cp.Text,{size:"xs",line_height:"m",color:"general",weight:"bold"},m),t.advertiser_details.total_completion_rate?i.createElement(cp.Text,{color:"less-prominent",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Completion rate: {{total_completion_rate}}%",values:{total_completion_rate:t.advertiser_details.total_completion_rate}})):null),i.createElement(cp.Icon,{className:"buy-sell-row__advertiser-arrow",icon:"IcChevronRightBold",size:16})),i.createElement("div",{className:"buy-sell-row__information"},i.createElement("div",{className:"buy-sell-row__rate"},i.createElement(cp.Text,{as:"div",color:"general",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Rate (1 {{currency}})",values:{currency:o.client.currency}})),i.createElement(cp.Text,{as:"div",color:"profit-success",line_height:"m",size:"s",weight:"bold"},p," ",c),i.createElement(cp.Text,{as:"div",color:"general",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Limit {{ min_order }}–{{ max_order }} {{ currency }}",values:{min_order:d,max_order:u,currency:s}}))),!h&&i.createElement(cp.Button,{primary:!0,large:!0,onClick:function(){return r.setSelectedAdvert(t)}},f?i.createElement(Sa,{i18n_default_text:"Buy {{account_currency}}",values:{account_currency:s}}):i.createElement(Sa,{i18n_default_text:"Sell {{account_currency}}",values:{account_currency:s}})))):i.createElement(cp.Table.Row,{className:"buy-sell__table-row"},i.createElement(cp.Table.Cell,null,i.createElement("div",{className:a()("buy-sell__cell",{"buy-sell__cell-hover":!o.is_barred}),onClick:function(){return o.is_barred?void 0:r.showAdvertiserPage(t)}},i.createElement(Sh,{nickname:m,size:24,text_size:"xxs"}),i.createElement("div",{className:"buy-sell__cell--container"},i.createElement("div",{className:a()({"buy-sell__name":!o.is_barred})},m),!!t.advertiser_details.total_completion_rate&&i.createElement(cp.Text,{color:"less-prominent",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Completion rate: {{total_completion_rate}}%",values:{total_completion_rate:t.advertiser_details.total_completion_rate}}))))),i.createElement(cp.Table.Cell,null,d,"–",u," ",s),i.createElement(cp.Table.Cell,null,i.createElement(cp.Text,{color:"profit-success",size:"xs","line-height":"m",weight:"bold"},p," ",c)),h?i.createElement(cp.Table.Cell,null):i.createElement(cp.Table.Cell,{className:"buy-sell__button"},i.createElement(cp.Button,{is_disabled:o.is_barred,onClick:function(){return r.setSelectedAdvert(t)},primary:!0,small:!0},Na(f?"Buy {{account_currency}}":"Sell {{account_currency}}",{account_currency:s}))))};Nh.propTypes={advert:kn().object,is_buy:kn().bool,setSelectedAdvert:kn().func,style:kn().object};const Oh=bn(Nh);function Th(){return(Th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ih=bn((function(e){var t=lp().buy_sell_store;return i.createElement(Oh,Th({},e,{is_buy:t.is_buy,setSelectedAdvert:t.setSelectedAdvert,showAdvertiserPage:t.showAdvertiserPage}))})),xh=function(e){var t=e.onScroll,n=lp(),r=n.buy_sell_store,a=n.general_store;return i.useEffect((function(){return tt((function(){return r.is_buy}),(function(){r.setItems([]),r.setIsLoading(!0),r.loadMoreItems({startIndex:0})}),{fireImmediately:!0})}),[]),r.is_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):r.api_error_message?i.createElement(kh,{message:r.api_error_message}):r.items.length?i.createElement(cp.Table,{className:"buy-sell__table"},(0,Sn.isDesktop)()&&i.createElement(cp.Table.Header,null,i.createElement(cp.Table.Row,{className:"buy-sell__table-header"},i.createElement(cp.Table.Head,null,Na("Advertisers")),i.createElement(cp.Table.Head,null,Na("Limits")),i.createElement(cp.Table.Head,null,Na("Rate (1 {{currency}})",{currency:a.client.currency})),i.createElement(cp.Table.Head,null))),i.createElement(cp.Table.Body,{className:"buy-sell__table-body"},i.createElement(cp.InfiniteDataList,{data_list_className:"buy-sell__data-list",items:r.rendered_items,rowRenderer:function(e){return i.createElement(Ih,e)},loadMoreRowsFn:r.loadMoreItems,has_filler:!0,has_more_items_to_load:r.has_more_items_to_load,keyMapperFn:function(e){return e.id},onScroll:t}))):i.createElement(Up,{className:"buy-sell__empty",has_tabs:!0,icon:"IcCashierNoAds",title:Na("There are no ads.")})};xh.displayName="BuySellTable",xh.propTypes={onScroll:kn().func};const Dh=bn(xh);function Ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(3261);var Mh=function(){var e=lp().buy_sell_store,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ph(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ph(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,cp.useSafeState)(!0),2),n=t[0],r=t[1],a=i.useRef(0);return i.useEffect((function(){var t=e.registerIsListedReaction(),n=e.registerAdvertIntervalReaction();return function(){t(),n()}}),[]),e.should_show_verification?i.createElement(i.Fragment,null,i.createElement(Vp,{onClick:e.hideVerification,page_title:Na("Verification")}),i.createElement(Jp,null)):e.show_advertiser_page&&!e.should_show_verification?i.createElement(i.Fragment,null,i.createElement(Vp,{className:"buy-sell__advertiser-page-return",onClick:e.hideAdvertiserPage,page_title:Na("Advertiser's page")}),i.createElement(Bp,null)):i.createElement("div",{className:"buy-sell"},i.createElement(Ah,{is_visible:n,table_type:e.table_type,setTableType:e.setTableType}),i.createElement(Dh,{key:e.table_type,is_buy:e.table_type===Oa.BUY,setSelectedAdvert:e.setSelectedAdvert,showAdvertiserPage:e.showAdvertiserPage,onScroll:function(t){if(!e.show_advertiser_page){if(t.target.scrollTop!==a.current){var n=t.target.scrollTop>a.current;r(!n)}a.current=t.target.scrollTop}}}),i.createElement(Tp,{selected_ad:e.selected_ad_state,should_show_popup:e.should_show_popup,setShouldShowPopup:e.setShouldShowPopup,table_type:e.table_type}))};Mh.propTypes={error_message:kn().string,hideAdvertiserPage:kn().func,hideVerification:kn().func,is_submit_disabled:kn().bool,navigate:kn().func,onCancelClick:kn().func,onChangeTableType:kn().func,onConfirmClick:kn().func,params:kn().object,selected_ad_state:kn().object,setErrorMessage:kn().func,setIsSubmitDisabled:kn().func,setSelectedAdvert:kn().func,should_show_popup:kn().bool,should_show_verification:kn().bool,show_advertiser_page:kn().bool,showAdvertiserPage:kn().func,submitForm:kn().func,table_type:kn().string};const Rh=bn(Mh);function Uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Uh(i.useState(e),2),n=t[0],r=t[1],a=(0,Sn.useIsMounted)(),o=function(){zn({p2p_advertiser_info:1}).then((function(e){a()&&e.p2p_advertiser_info&&r(e.p2p_advertiser_info.balance_available)}))};return i.useEffect((function(){e||o();var t=setInterval(o,1e4);return function(){return clearInterval(t)}}),[]),n},jh=function(e){var t=e.offer_amount,n=e.price_rate,r=e.type,a=lp().general_store.client,o=a.currency,s=a.local_currency_config,l=t?(0,Sn.formatMoney)(o,t,!0):"",c=n?(0,Sn.formatMoney)(s.currency,n,!0):"",u=t&&n?(0,Sn.formatMoney)(s.currency,t*n,!0):"";if(t){var d=[i.createElement(cp.Text,{key:0,weight:"bold",size:"xs",color:"less-prominent"})],p={target_amount:l,target_currency:o};return n?(Object.assign(p,{local_amount:u,local_currency:s.currency,price_rate:c}),r===Oa.BUY?i.createElement(Sa,{i18n_default_text:"You're creating an ad to buy <0>{{ target_amount }} {{ target_currency }}</0> for <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})",components:d,values:p}):i.createElement(Sa,{i18n_default_text:"You're creating an ad to sell <0>{{ target_amount }} {{ target_currency }}</0> for <0>{{ local_amount }} {{ local_currency }}</0> ({{ price_rate }} {{local_currency}}/{{ target_currency }})",components:d,values:p})):r===Oa.BUY?i.createElement(Sa,{i18n_default_text:"You're creating an ad to buy <0>{{ target_amount }} {{ target_currency }}</0>...",components:d,values:p}):i.createElement(Sa,{i18n_default_text:"You're creating an ad to sell <0>{{ target_amount }} {{ target_currency }}</0>...",components:d,values:p})}return r===Oa.BUY?i.createElement(Sa,{i18n_default_text:"You're creating an ad to buy..."}):i.createElement(Sa,{i18n_default_text:"You're creating an ad to sell..."})};jh.propTypes={offer_amount:kn().oneOfType([kn().number,kn().string]),price_rate:kn().oneOfType([kn().number,kn().string]),type:kn().string};const zh=bn(jh);function Hh(){return(Hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Bh=function(e){var t=e.children;return(0,Sn.isMobile)()?i.createElement(cp.Div100vhContainer,{height_offset:"auto"},t):t};const Gh=bn((function(){var e=lp(),t=e.general_store,n=e.my_ads_store,r=Fh(),o=(0,Sn.mobileOSDetect)(),s=t.client,l=s.currency,c=s.local_currency_config,u=i.useRef(!1);return i.useEffect((function(){var e=tt((function(){return n.api_error_message}),(function(){return n.setIsApiErrorModalVisible(!!n.api_error_message)}));return function(){e(),n.setApiErrorMessage("")}}),[]),i.useEffect((function(){var e=setInterval((function(){n.is_ad_created_modal_visible&&n.getWebsiteStatus()}),1e4);return function(){clearInterval(e)}}),[n.is_ad_created_modal_visible]),i.createElement(i.Fragment,null,i.createElement(pp.Formik,{initialValues:{contact_info:n.contact_info,default_advert_description:n.default_advert_description,max_transaction:"",min_transaction:"",offer_amount:"",payment_info:n.payment_info,price_rate:"",type:Oa.BUY},onSubmit:n.handleSubmit,validate:n.validateCreateAdForm,initialErrors:{offer_amount:!0}},(function(e){var t=e.errors,s=e.handleChange,u=e.isSubmitting,d=e.isValid,p=e.setFieldValue,h=e.touched,f=e.values,m=f.type===Oa.SELL;return i.createElement("div",{className:"p2p-my-ads__form"},i.createElement(pp.Form,{className:a()("p2p-my-ads__form-element",{"p2p-my-ads__form-element--ios":m&&"iOS"===o}),noValidate:!0},i.createElement(cp.ThemedScrollbars,{className:"p2p-my-ads__form-scrollbar",is_scrollbar_hidden:(0,Sn.isMobile)()},i.createElement(Bh,null,i.createElement(pp.Field,{name:"type"},(function(e){var t=e.field;return i.createElement(cp.RadioGroup,Hh({},t,{className:"p2p-my-ads__form-radio-group",name:"type",onToggle:function(e){return p("type",e.target.value)},selected:f.type,required:!0}),i.createElement(cp.RadioGroup.Item,{value:Oa.BUY,label:Na("Buy {{currency}}",{currency:l})}),i.createElement(cp.RadioGroup.Item,{value:Oa.SELL,label:Na("Sell {{currency}}",{currency:l})}))})),i.createElement("div",{className:"p2p-my-ads__form-summary"},i.createElement(zh,{offer_amount:t.offer_amount?"":f.offer_amount,price_rate:t.price_rate?"":f.price_rate,type:f.type})),i.createElement("div",{className:"p2p-my-ads__form-container"},i.createElement(pp.Field,{name:"offer_amount"},(function(e){var a=e.field;return i.createElement(cp.Input,Hh({},a,{"data-lpignore":"true",type:"text",error:h.offer_amount&&t.offer_amount,label:Na("Total amount"),className:"p2p-my-ads__form-field",trailing_icon:i.createElement(cp.Text,{color:(0,Sn.isDesktop)()?"less-prominent":"prominent",line_height:"m",size:(0,Sn.isDesktop)()?"xxs":"s"},l),onChange:function(e){n.restrictLength(e,s)},hint:m&&null!=r?Na("Your DP2P balance is {{ dp2p_balance }}",{dp2p_balance:"".concat((0,Sn.formatMoney)(l,r,!0)," ").concat(l)}):void 0,is_relative_hint:!0,required:!0}))})),i.createElement(pp.Field,{name:"price_rate"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"text",error:h.price_rate&&t.price_rate,label:Na("Fixed rate (1 {{currency}})",{currency:l}),className:"p2p-my-ads__form-field",trailing_icon:i.createElement(cp.Text,{color:(0,Sn.isDesktop)()?"less-prominent":"prominent",line_height:"m",size:(0,Sn.isDesktop)()?"xxs":"s"},c.currency),onChange:function(e){n.restrictLength(e,s)},required:!0}))}))),i.createElement("div",{className:"p2p-my-ads__form-container"},i.createElement(pp.Field,{name:"min_transaction"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"text",error:h.min_transaction&&t.min_transaction,label:Na("Min order"),className:"p2p-my-ads__form-field",trailing_icon:i.createElement(cp.Text,{color:(0,Sn.isDesktop)()?"less-prominent":"prominent",line_height:"m",size:(0,Sn.isDesktop)()?"xxs":"s"},l),onChange:function(e){n.restrictLength(e,s)},required:!0}))})),i.createElement(pp.Field,{name:"max_transaction"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"text",error:h.max_transaction&&t.max_transaction,label:Na("Max order"),className:"p2p-my-ads__form-field",trailing_icon:i.createElement(cp.Text,{color:(0,Sn.isDesktop)()?"less-prominent":"prominent",line_height:"m",size:(0,Sn.isDesktop)()?"xxs":"s"},l),onChange:function(e){n.restrictLength(e,s)},required:!0}))}))),m&&i.createElement(i.Fragment,null,i.createElement(pp.Field,{name:"payment_info"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"textarea",label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Your payment details"})),error:h.payment_info&&t.payment_info,hint:Na("e.g. your bank/e-wallet account details"),className:"p2p-my-ads__form-field p2p-my-ads__form-field--textarea",initial_character_count:n.payment_info.length,required:!0,has_character_counter:!0,max_characters:300}))})),i.createElement(pp.Field,{name:"contact_info"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"textarea",label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Your contact details"})),error:h.contact_info&&t.contact_info,className:"p2p-my-ads__form-field p2p-my-ads__form-field--textarea",initial_character_count:n.contact_info.length,required:!0,has_character_counter:!0,max_characters:300}))}))),i.createElement(pp.Field,{name:"default_advert_description"},(function(e){var r=e.field;return i.createElement(cp.Input,Hh({},r,{"data-lpignore":"true",type:"textarea",error:h.default_advert_description&&t.default_advert_description,label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Instructions (optional)"})),hint:Na("This information will be visible to everyone."),className:"p2p-my-ads__form-field p2p-my-ads__form-field--textarea",initial_character_count:n.default_advert_description.length,has_character_counter:!0,max_characters:300,required:!0}))})),i.createElement("div",{className:"p2p-my-ads__form-container p2p-my-ads__form-footer"},i.createElement(cp.Button,{className:"p2p-my-ads__form-button",secondary:!0,large:!0,onClick:function(){return n.setShowAdForm(!1)},type:"button"},i.createElement(Sa,{i18n_default_text:"Cancel"})),i.createElement(cp.Button,{className:"p2p-my-ads__form-button",primary:!0,large:!0,is_disabled:u||!d},i.createElement(Sa,{i18n_default_text:"Post ad"})))))))})),i.createElement(cp.Modal,{className:"p2p-my-ads__modal-error",is_open:n.is_api_error_modal_visible,small:!0,has_close_icon:!1,title:Na("Something’s not right")},i.createElement(cp.Modal.Body,null,i.createElement(cp.Text,{as:"p",size:"xs",color:"prominent"},n.api_error_message)),i.createElement(cp.Modal.Footer,null,i.createElement(cp.Button,{has_effect:!0,text:Na("Ok"),onClick:function(){return n.setIsApiErrorModalVisible(!1)},primary:!0,large:!0}))),i.createElement(cp.Modal,{className:"p2p-my-ads__ad-created",has_close_icon:!1,is_open:n.is_ad_created_modal_visible,small:!0,title:Na("You've created an ad")},i.createElement(cp.Modal.Body,null,i.createElement(cp.Text,{as:"p",size:"xs",color:"prominent"},i.createElement(Sa,{i18n_default_text:"If the ad doesn't receive an order for {{adverts_archive_period}} days, it will be deactivated.",values:{adverts_archive_period:n.adverts_archive_period}})),i.createElement("br",null),i.createElement(cp.Checkbox,{label:Na("Don’t show this message again."),onChange:function(){return u.current=!u.current},value:u.current})),i.createElement(cp.Modal.Footer,null,i.createElement(cp.Button,{has_effect:!0,text:Na("Ok"),onClick:function(){localStorage.setItem("should_not_show_auto_archive_message",JSON.stringify(u.current)),n.setIsAdCreatedModalVisible(!1),n.setShowAdForm(!1)},primary:!0,large:!0}))))})),Vh=bn((function(){var e=lp().my_ads_store;return i.useEffect((function(){return e.getAdvertiserInfo()}),[]),i.createElement(i.Fragment,null,i.createElement(Vp,{onClick:function(){return e.setShowAdForm(!1)},page_title:Na("Create new ad")}),e.is_form_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):i.createElement(Gh,null))}));n(2493);var qh=bn((function(){var e=lp(),t=e.general_store,n=e.my_ads_store,r=(0,Sn.useIsMounted)();return i.createElement("div",{className:a()("toggle-ads",{"toggle-ads--on":t.is_listed,"toggle-ads--off":!t.is_listed||t.is_barred})},i.createElement("div",{className:"toggle-ads__message"},!n.api_error&&!t.is_listed||t.is_barred?Na("Your ads are paused"):Na("Your ads are running")),i.createElement(cp.ToggleSwitch,{id:"toggle-my-ads",className:"toggle-ads__switch",classNameLabel:"toggle-ads__switch",is_enabled:t.is_listed&&!t.is_barred,handleToggle:function(){t.is_barred||zn({p2p_advertiser_update:1,is_listed:t.is_listed?0:1}).then((function(e){if(r())if(e.error)n.setApiError(e.error.message);else{var a=e.p2p_advertiser_update.is_listed;t.setIsListed(1===a)}}))}}))}));qh.propTypes={api_error:kn().string,handleToggle:kn().func,is_listed:kn().bool};const Kh=qh;function Wh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(6610);var Yh=function(){var e=lp().my_ads_store,t=(0,Sn.useIsMounted)(),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!1),2),r=n[0],a=n[1],o=function(){e.setDeleteErrorMessage(""),e.setSelectedAdId(""),e.setIsDeleteModalOpen(!1)};return i.createElement(i.Fragment,null,i.createElement(cp.Modal,{className:"delete-modal",is_open:e.is_delete_modal_open,toggleModal:o,has_close_icon:!0,renderTitle:function(){return i.createElement(cp.Text,{color:"prominent","line-height":"m",size:(0,Sn.isDesktop)()?"s":"xs",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Do you want to delete this ad?"}))},width:"440px"},i.createElement(cp.Modal.Body,null,i.createElement(Sa,{i18n_default_text:"You will NOT be able to restore it."})),i.createElement(cp.Modal.Footer,null,i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,type:"button",onClick:o,large:!0},i.createElement(Sa,{i18n_default_text:"Cancel"})),i.createElement(cp.Button,{primary:!0,large:!0,onClick:function(){e.setIsDeleteModalOpen(!1),zn({p2p_advert_update:1,id:e.selected_ad_id,delete:1}).then((function(n){if(t())if(n.error)e.setDeleteErrorMessage(n.error.message),a(!0);else{var r=e.adverts.filter((function(e){return e.id!==n.p2p_advert_update.id}));e.setAdverts(r),e.setIsDeleteModalOpen(!1)}}))}},i.createElement(Sa,{i18n_default_text:"Delete"}))))),i.createElement(cp.Modal,{className:"delete-modal",has_close_icon:!1,is_open:r,renderTitle:function(){return i.createElement(cp.Text,{color:"prominent","line-height":"m",size:(0,Sn.isDesktop)()?"s":"xs",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Do you want to delete this ad?"}))},width:"440px"},i.createElement(cp.Modal.Body,null,e.delete_error_message),i.createElement(cp.Modal.Footer,null,i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{primary:!0,large:!0,onClick:function(){return a(!1)}},i.createElement(Sa,{i18n_default_text:"Ok"}))))))};Yh.propTypes={is_delete_modal_open:kn().bool,setIsDeleteModalOpen:kn().func};const Qh=bn(Yh);n(7951);var Jh=function(e){return e.is_active?i.createElement(cp.Text,{className:"ad-status--active",color:"profit-success",line_height:"s",size:"xs",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Active"})):i.createElement(cp.Text,{className:"ad-status--inactive",color:"loss-danger",line_height:"s",size:"xs",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Inactive"}))};Jh.propTypes={is_active:kn().bool};const Xh=bn(Jh);function $h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ef=bn((function(e){var t=e.row,n=lp(),r=n.general_store,o=n.my_ads_store,s=t.account_currency,l=t.amount,c=t.amount_display,u=t.id,d=t.is_active,p=t.local_currency,h=t.max_order_amount_display,f=t.min_order_amount_display,m=t.price_display,_=t.remaining_amount,y=t.remaining_amount_display,g=t.type,v=$h(i.useState(d),2),b=v[0],E=v[1],w=$h(i.useState(!1),2),C=w[0],A=w[1],k=l-_,S=function(){o.onClickActivateDeactivate(u,b,E)},N=function(){return!r.is_barred&&o.onClickDelete(u)};return(0,Sn.isMobile)()?i.createElement(cp.HorizontalSwipe,{is_left_swipe:!0,right_hidden_component:i.createElement(i.Fragment,null,b?i.createElement("div",{className:"p2p-my-ads__table-popovers__unarchive"},i.createElement(cp.Icon,{icon:"IcArchive",custom_color:"var(--general-main-1)",size:14,onClick:S})):i.createElement("div",{className:"p2p-my-ads__table-popovers__archive"},i.createElement(cp.Icon,{icon:"IcUnarchive",custom_color:"var(--general-main-1)",size:14,onClick:S})),i.createElement("div",{className:"p2p-my-ads__table-popovers__delete"},i.createElement(cp.Icon,{icon:"IcDelete",custom_color:"var(--general-main-1)",size:16,onClick:N}))),right_hidden_component_width:"12rem",visible_component:i.createElement(cp.Table.Row,{className:a()("p2p-my-ads__table-row",{"p2p-my-ads__table-row-disabled":!b})},i.createElement(cp.Text,{color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Ad ID {{advert_id}} ",values:{advert_id:u}})),i.createElement("div",{className:"p2p-my-ads__table-row-details"},i.createElement(cp.Text,{line_height:"m",size:"s",weight:"bold"},g===Oa.BUY?i.createElement(Sa,{i18n_default_text:"Buy {{ account_currency }}",values:{account_currency:s}}):i.createElement(Sa,{i18n_default_text:"Sell {{ account_currency }}",values:{account_currency:s}})),i.createElement(Xh,{is_active:b})),i.createElement("div",{className:"p2p-my-ads__table-row-details"},i.createElement(cp.Text,{color:"profit-success",line_height:"m",size:"xxs"},"".concat((0,Sn.formatMoney)(s,k,!0))," ",s," ",g===Oa.BUY?Na("Bought"):Na("Sold")),i.createElement(cp.Text,{color:"less-prominent",line_height:"m",size:"xxs"},c," ",s)),i.createElement(cp.ProgressIndicator,{className:"p2p-my-ads__table-available-progress",value:k,total:l}),i.createElement("div",{className:"p2p-my-ads__table-row-details"},i.createElement(cp.Text,{color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Limits"})),i.createElement(cp.Text,{color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(Sa,{i18n_default_text:"Rate (1 {{account_currency}})",values:{account_currency:s}}))),i.createElement("div",{className:"p2p-my-ads__table-row-details"},i.createElement(cp.Text,{color:"prominent",line_height:"m",size:"xxs"},f," - ",h," ",s),i.createElement(cp.Text,{color:"profit-success",line_height:"m",size:"xs",weight:"bold"},m," ",p)))}):i.createElement("div",{onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)}},i.createElement(cp.Table.Row,{className:a()("p2p-my-ads__table-row",{"p2p-my-ads__table-row-disabled":!b})},i.createElement(cp.Table.Cell,null,g===Oa.BUY?i.createElement(Sa,{i18n_default_text:"Buy {{ id }}",values:{id:u}}):i.createElement(Sa,{i18n_default_text:"Sell {{ id }}",values:{id:u}})),i.createElement(cp.Table.Cell,null,f,"-",h," ",s),i.createElement(cp.Table.Cell,{className:"p2p-my-ads__table-price"},m," ",p),i.createElement(cp.Table.Cell,{className:"p2p-my-ads__table-available"},i.createElement(cp.ProgressIndicator,{className:"p2p-my-ads__table-available-progress",value:_,total:l}),i.createElement("div",{className:"p2p-my-ads__table-available-value"},y,"/",c," ",s)),i.createElement(cp.Table.Cell,null,i.createElement("div",{className:"p2p-my-ads__table-status"},i.createElement(Xh,{is_active:b}))),C&&i.createElement("div",{className:"p2p-my-ads__table-popovers"},b?i.createElement("div",{onClick:S},i.createElement(cp.Popover,{alignment:"bottom",className:"p2p-my-ads__table-popovers__archive",message:Na("Deactivate")},i.createElement(cp.Icon,{icon:"IcArchive",color:r.is_barred&&"disabled",size:16}))):i.createElement("div",{onClick:S},i.createElement(cp.Popover,{alignment:"bottom",className:"p2p-my-ads__table-popovers__unarchive",message:Na("Activate")},i.createElement(cp.Icon,{icon:"IcUnarchive",color:r.is_barred&&"disabled",size:16}))),i.createElement("div",{onClick:N},i.createElement(cp.Popover,{alignment:"bottom",className:"p2p-my-ads__table-popovers__delete",message:Na("Delete")},i.createElement(cp.Icon,{icon:"IcDelete",color:(r.is_barred||u===o.selected_ad_id&&o.delete_error_message)&&"disabled",size:16}))))))}));ef.displayName="MyAdsRowRenderer",ef.propTypes={advert:kn().object};const tf=ef,nf=bn((function(){var e,t=lp(),n=t.general_store,r=t.my_ads_store;return i.useEffect((function(){r.setAdverts([]),r.loadMoreAds({startIndex:0},!0)}),[]),r.is_table_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):r.api_error_message?i.createElement(kh,{message:r.api_error_message}):r.adverts.length?i.createElement(i.Fragment,null,i.createElement("div",{className:"p2p-my-ads__header"},(0,Sn.isDesktop)()&&i.createElement(cp.Button,{large:!0,primary:!0,is_disabled:n.is_barred,onClick:r.onClickCreate},Na("Create new ad")),i.createElement(Kh,null)),i.createElement(cp.Table,{className:a()("p2p-my-ads__table",{"p2p-my-ads__table--disabled":!n.is_listed||n.is_barred})},(0,Sn.isDesktop)()&&i.createElement(cp.Table.Header,null,i.createElement(cp.Table.Row,{className:"p2p-my-ads__table-row"},(e=n.client.currency,[{text:Na("Ad ID")},{text:Na("Limits")},{text:Na("Rate (1 {{ offered_currency }})",{offered_currency:e})},{text:Na("Available amount")},{text:Na("Status")},{text:""}]).map((function(e){return i.createElement(cp.Table.Head,{key:e.text},e.text)})))),i.createElement(cp.Table.Body,{className:"p2p-my-ads__table-body"},i.createElement(cp.InfiniteDataList,{data_list_className:"p2p-my-ads__data-list",items:r.adverts,rowRenderer:function(e){return i.createElement(tf,e)},has_more_items_to_load:r.has_more_items_to_load,loadMoreRowsFn:r.loadMoreAds,keyMapperFn:function(e){return e.id},getRowSize:function(){return(0,Sn.isMobile)()?151:75}}))),(0,Sn.isMobile)()&&i.createElement("div",{className:"p2p-my-ads__create-container"},i.createElement(cp.Button,{className:"p2p-my-ads__create",large:!0,primary:!0,onClick:r.onClickCreate},Na("Create new ad"))),i.createElement(Qh,null),i.createElement(cp.Modal,{className:"p2p-my-ads__modal-error",is_open:r.activate_deactivate_error_message,small:!0,has_close_icon:!1,title:Na("Something’s not right")},i.createElement(cp.Modal.Body,null,i.createElement(cp.Text,{as:"p",size:"xs",color:"prominent"},r.activate_deactivate_error_message)),i.createElement(cp.Modal.Footer,null,i.createElement(cp.Button,{has_effect:!0,text:Na("Ok"),onClick:function(){return r.setActivateDeactivateErrorMessage("")},primary:!0,large:!0})))):i.createElement(Up,{icon:"IcCashierNoAds",title:Na("You have no ads.")},i.createElement(cp.Button,{className:"p2p-empty__button",is_disabled:n.is_barred,onClick:function(){return r.onClickCreate()},large:!0,primary:!0},Na("Create new ad")))}));var rf=function(e){var t=e.message;return i.createElement("div",{className:"p2p-my-ads__state"},i.createElement(kh,{message:t}))},af=function(){var e=lp(),t=e.general_store,n=e.my_ads_store;return i.useEffect((function(){n.setIsLoading(!0),n.getAccountStatus()}),[]),n.is_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):t.is_restricted?i.createElement(rf,{message:Na("DP2P cashier is unavailable in your country.")}):n.error_message?i.createElement(rf,{message:n.error_message}):t.is_advertiser?i.createElement("div",{className:"p2p-my-ads"},n.show_ad_form?i.createElement(Vh,null):i.createElement(nf,null)):i.createElement(Jp,null)};af.propTypes={error_message:kn().string,getAccountStatus:kn().func,is_advertiser:kn().bool,is_loading:kn().bool,is_restricted:kn().bool,setIsLoading:kn().func,show_ad_form:kn().bool};const of=bn(af);var sf=function(e){var t=e.children;return i.createElement("div",{className:"my-profile-separator-container"},t)};sf.Line=function(e){var t=e.is_invisible;return i.createElement("div",{className:a()("my-profile-separator-container__line",{"my-profile-separator-container__line--invisible":t})})};const lf=sf;n(1143);const cf=lf;function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const df=bn((function(){var e=lp(),t=e.general_store,n=e.my_profile_store,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!1),2),a=r[0],o=r[1],s=Fh(n.advertiser_info.balance_available);return i.createElement("div",{className:"my-profile-balance"},i.createElement(cf,null,i.createElement(cp.Text,{color:"less-prominent",line_height:"m",size:"xs"},i.createElement(Sa,{i18n_default_text:"Available DP2P balance"})),i.createElement(cf.Line,{is_invisible:(0,Sn.isMobile)()}),i.createElement(cp.Text,{className:"my-profile-balance__amount",color:"prominent",line_height:"m",size:(0,Sn.isMobile)()?"xs":"s",weight:"bold"},i.createElement(cp.Money,{amount:s,currency:t.client.currency,show_currency:!0})),i.createElement(cp.PopoverMobile,{button_text:Na("Got it"),is_open:a,message:Na("DP2P balance = deposits that can’t be reversed (bank transfers, etc.) + a portion of deposits that might be reversed (credit card payments, etc.)"),setIsOpen:o,title:Na("Available balance")},i.createElement(cp.Icon,{icon:"IcInfoOutline",size:16}))))}));n(8946);const pf=df;function hf(){return(hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ff=bn((function(){var e=lp().my_profile_store;return i.createElement("div",{className:"my-profile-form"},i.createElement(cf,null,i.createElement(cp.Text,{size:"xs",color:"prominent",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Ad template"})),i.createElement(cf.Line,{has_single_child:!0})),i.createElement(pp.Formik,{enableReinitialize:!0,initialValues:{contact_info:e.contact_info,default_advert_description:e.default_advert_description,payment_info:e.payment_info},onSubmit:e.handleSubmit,validate:e.validateForm},(function(t){var n=t.dirty,r=t.errors,o=t.isSubmitting,s=t.isValid;return i.createElement(pp.Form,{className:"my-profile-form__form"},i.createElement(pp.Field,{name:"payment_info"},(function(t){var n=t.field;return i.createElement(cp.Input,hf({},n,{type:"textarea",label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Payment details"})),error:r.payment_info,hint:Na("e.g. your bank/e-wallet account details"),is_relative_hint:!0,className:"my-profile-form__textarea",has_character_counter:!0,initial_character_count:e.payment_info.length,max_characters:300}))})),i.createElement(pp.Field,{name:"contact_info"},(function(t){var n=t.field;return i.createElement(cp.Input,hf({},n,{type:"textarea",label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Contact details"})),error:r.contact_info,className:"my-profile-form__textarea",has_character_counter:!0,initial_character_count:e.contact_info.length,max_characters:300}))})),i.createElement(pp.Field,{name:"default_advert_description"},(function(t){var n=t.field;return i.createElement(cp.Input,hf({},n,{type:"textarea",label:i.createElement(cp.Text,{color:"less-prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"Instructions"})),error:r.default_advert_description,hint:Na("This information will be visible to everyone."),is_relative_hint:!0,className:"my-profile-form__textarea",has_character_counter:!0,initial_character_count:e.default_advert_description.length,max_characters:300}))})),i.createElement("div",{className:"my-profile-form__footer"},i.createElement(dp,{message:e.form_error}),i.createElement(wn,null,(function(){return i.createElement(cp.Button,{className:a()("my-profile-form__footer-button",{"dc-btn--green":e.is_submit_success}),is_disabled:!n||o||!s,is_submit_success:e.is_submit_success,text:Na("Save"),has_effect:!0,primary:!0,large:!0})}))))})))}));n(8684);const mf=ff,_f=bn((function(){var e=lp().general_store;return i.createElement("div",{className:"my-profile-header"},i.createElement(xp,{className:"my-profile-header__avatar",nickname:e.nickname,size:32,text_size:"xs"}),i.createElement("div",{className:"my-profile-header__name"},i.createElement(cp.Text,{color:"prominent",weight:"bold",size:"s",line_height:"m"},e.nickname)))}));n(1300);const yf=_f,gf=bn((function(){var e=lp(),t=e.general_store,n=e.my_profile_store;return i.createElement("div",{className:"my-profile-privacy"},i.createElement(cf,null,i.createElement(cp.Text,{size:"xs",color:"prominent",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Privacy setting"})),i.createElement(cf.Line,{has_single_child:!0})),i.createElement("div",{className:"my-profile-privacy__toggle-container"},i.createElement(cp.ToggleSwitch,{id:"my-profile-privacy__toggle",classNameButton:"my-profile-privacy__toggle-button",classNameLabel:"my-profile-privacy__toggle",is_enabled:t.should_show_real_name,handleToggle:n.handleToggle}),i.createElement(cp.Text,{size:"xs",line_height:"m",color:"prominent",className:"my-profile-privacy__label"},i.createElement(Sa,{i18n_default_text:"Show my real name ({{full_name}})",values:{full_name:n.full_name}}))))}));n(1085);const vf=gf;function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ef=bn((function(){var e=lp(),t=e.general_store,n=e.my_profile_store,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!1),2),a=r[0],o=r[1],s=n.advertiser_info,l=s.daily_buy,c=s.daily_buy_limit,u=s.daily_sell,d=s.daily_sell_limit,p=s.total_orders_count;return i.createElement(cp.Table,null,i.createElement(cp.Table.Row,{className:"my-profile-stats"},i.createElement(cp.Table.Cell,{className:"my-profile-stats__cell"},i.createElement(cp.Text,{size:(0,Sn.isMobile)()?"xxxs":"xs",color:"less-prominent",line_height:"m",as:"p"},i.createElement(Sa,{i18n_default_text:"Total orders"})),i.createElement(cp.Text,{color:"prominent",weight:"bold",line_height:"l",as:"p",size:(0,Sn.isMobile)()?"xs":"s"},p||"-")),(0,Sn.isMobile)()?i.createElement(cp.Table.Cell,{className:"my-profile-stats__cell"},i.createElement(cp.Text,{size:"xxxs",color:"less-prominent",line_height:"m",as:"p"},i.createElement(Sa,{i18n_default_text:"Buy / Sell ({{currency}})",values:{currency:t.client.currency}})),i.createElement(cp.Text,{color:"prominent",weight:"bold",line_height:"l",as:"p",size:"xs"},l||"-","/",u||"-")):i.createElement(i.Fragment,null,i.createElement(cp.Table.Cell,{className:"my-profile-stats__cell"},i.createElement(cp.Text,{size:"xs",color:"less-prominent",line_height:"m",as:"p"},i.createElement(Sa,{i18n_default_text:"Buy ({{currency}})",values:{currency:t.client.currency}})),i.createElement(cp.Text,{color:"prominent",weight:"bold",line_height:"l",as:"p"},l||"0")),i.createElement(cp.Table.Cell,{className:"my-profile-stats__cell"},i.createElement(cp.Text,{size:"xs",color:"less-prominent",line_height:"m",as:"p"},i.createElement(Sa,{i18n_default_text:"Sell ({{currency}})",values:{currency:t.client.currency}})),i.createElement(cp.Text,{color:"prominent",weight:"bold",line_height:"l",as:"p"},u||"-"))),i.createElement(cp.Table.Cell,{className:"my-profile-stats__cell"},i.createElement(cp.Text,{size:(0,Sn.isMobile)()?"xxxs":"xs",color:"less-prominent",line_height:"m",as:"p"},i.createElement(Sa,{i18n_default_text:"Buy / Sell limit ({{currency}})",values:{currency:t.client.currency}})),i.createElement(cp.Text,{color:"prominent",weight:"bold",line_height:"m",as:"p",size:(0,Sn.isMobile)()?"xs":"s"},c&&d?"".concat(Math.floor(c)," / ").concat(Math.floor(d)):"-")),i.createElement("div",{className:"my-profile-stats__popover"},i.createElement(cp.PopoverMobile,{className:"my-profile__stats-popover",button_text:Na("Got it"),is_open:a,message:Na("Your Buy/Sell limit resets at 00:00 GMT daily."),setIsOpen:o},i.createElement(cp.Icon,{icon:"IcInfoOutline",size:16})))))}));n(7078);const wf=Ef,Cf=bn((function(){var e=lp().my_profile_store;return i.useEffect((function(){e.getSettings(),e.getAdvertiserInfo()}),[]),e.is_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):e.error_message?i.createElement("div",{className:"my-profile__error"},i.createElement(cp.Text,{align:"center",as:"p",className:"dp2p-table-error",color:"loss-danger",size:"xs"},e.error_message)):i.createElement(cp.AutoSizer,null,(function(e){var t=e.height,n=e.width;return i.createElement(cp.ThemedScrollbars,{className:"my-profile",height:t,style:{width:n}},i.createElement("div",{className:"my-profile__content"},i.createElement(yf,null),i.createElement(pf,null),i.createElement(wf,null),i.createElement(vf,null),i.createElement(mf,null)))}))}));n(73);const Af=Cf;var kf=bn((function(){var e=lp(),t=e.order_store,n=e.sendbird_store,r=t.order_information.other_user_details,a=Uo(r.name),o=Lo(r.name);return i.createElement(i.Fragment,null,i.createElement("div",{className:"order-chat__header-icon",style:{backgroundColor:a}},i.createElement(cp.Text,{size:"xs",color:"colored-background",line_height:"m"},o)),i.createElement("div",{className:"order-chat__header-user"},i.createElement(cp.Text,{as:"p",className:"order-chat__header-user-name",color:"prominent",line_height:"m",size:"s",weight:"bold"},r.name),n.last_other_user_activity&&i.createElement(cp.Text,{as:"p",className:"order-chat__header-user-timestamp",color:"less-prominent",line_height:"m",size:(0,Sn.isMobile)()?"xxs":"xs"},n.last_other_user_activity)))})),Sf=function(){return(0,Sn.isMobile)()?null:i.createElement("div",{className:"order-chat__header"},i.createElement(kf,null))};Sf.Body=kf,Sf.displayName="ChatHeader",Sf.propTypes={order_information:kn().instanceOf(Di),last_other_user_activity:kn().string,setShouldShowChatModal:kn().func};const Nf=Sf;var Of=function(e){var t,n=e.chat_channel,r=e.message,a=e.sendbird_user_id;if(r.status===Ed.STATUS_PENDING)t="IcMessagePending";else if(r.status===Ed.STATUS_ERRORED)t="IcMessageErrored";else{var o=Object.keys(n.cachedReadReceiptStatus).find((function(e){return e!==a}));t=n.cachedReadReceiptStatus[o]>=r.created_at?"IcMessageSeen":"IcMessageDelivered"}return i.createElement(cp.Icon,{className:"order-chat__messages-item-timestamp-receipt",icon:t,size:16})};Of.propTypes={chat_channel:kn().object,message:kn().instanceOf(Ed),sendbird_user_id:kn().string};const Tf=Of;var If=i.memo((function(e){var t=e.children,n=e.colour;return i.createElement("div",{className:"order-chat__messages-item-message"},i.createElement(cp.Text,{as:"p",color:n,line_height:"m",size:"xs"},t))}));If.displayName="ChatMessageText",If.propTypes={children:kn().any,colour:kn().string};const xf=If;var Df=bn((function(){var e=lp().sendbird_store,t=i.useRef(null),n=function(e){t.current&&(t.current.scrollTop+=e.target.parentNode.clientHeight)};if(i.useEffect((function(){e.chat_messages.length>0&&t.current&&(t.current.scrollTop=t.current.scrollHeight,e.markMessagesAsRead())}),[e.chat_messages.length]),e.setMessagesRef(t),e.chat_messages.length){var r=null;return i.createElement(cp.ThemedScrollbars,{autohide:!0,className:"order-chat__messages",height:"unset",refSetter:t,onScroll:function(t){return e.onMessagesScroll(t)}},e.chat_messages.map((function(t){var o,s=t.sender_user_id===e.chat_info.user_id,l=(0,Sn.formatMilliseconds)(t.created_at,"MMMM D, YYYY"),c=s?"colored-background":"general",u=r!==l&&Boolean(r=l);return i.createElement(i.Fragment,{key:t.id},u&&i.createElement("div",{className:"order-chat__messages-date"},i.createElement(cp.Text,{align:"center",color:"less-prominent",lh:"m",size:"xs",weight:"bold"},l)),i.createElement("div",{className:a()("order-chat__messages-item","order-chat__messages-item--".concat(s?"outgoing":"incoming"))},t.message_type===Ed.TYPE_USER&&i.createElement(xf,{colour:c},t.message),t.message_type===Ed.TYPE_FILE&&(o=t.file_type,["image/jpeg","image/png","image/gif"].includes(o)?i.createElement("a",{className:"order-chat__messages-item-image",href:t.url,rel:"noopener noreferrer",target:"_blank"},i.createElement("img",{src:t.url,onLoad:n})):i.createElement(xf,{colour:c},i.createElement("a",{className:"order-chat__messages-item-file",href:t.url,rel:"noopener noreferrer",target:"_blank"},t.name))),i.createElement("div",{className:"order-chat__messages-item-timestamp"},i.createElement(cp.Text,{color:"less-prominent",line_height:"s",size:"xxxs"},(0,Sn.formatMilliseconds)(t.created_at,"HH:mm",!0)),s&&i.createElement(Tf,{message:t,chat_channel:e.active_chat_channel,sendbird_user_id:e.chat_info.user_id}))))})))}return i.createElement("div",{className:"order-chat__messages"})}));Df.displayName="ChatMessages",Df.propTypes={active_chat_channel:kn().object,chat_messages:kn().number,chat_info:kn().shape({app_id:kn().string,user_id:kn().string,token:kn().string})};const Pf=Df;var Mf=i.memo((function(e){var t=e.should_show_attachment_icon;return i.createElement(cp.Icon,{className:"order-chat__footer-icon",icon:t?"IcAttachment":"IcSendMessage",width:16})}));Mf.displayName="ChatFooterIcon",Mf.propTypes={should_show_attachment_icon:kn().bool};const Rf=Mf;function Uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lf=bn((function(){var e=lp().sendbird_store,t=i.useRef(null),n=i.useRef(null),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(0),2),o=r[0],s=r[1],l=function(){var e=n.current;e&&(e.setAttribute("style","height: auto;"),e.setAttribute("style","height: ".concat(e.scrollHeight,"px;")))},c=function(e){s(e.target.value.length),l()},u=function(){var t=n.current,r=document.activeElement===t;t&&t.value&&(e.sendMessage(t.value),t.value="",c({target:t}),r&&t.focus())};i.useEffect((function(){return l()}),[]);var d=0===o;return i.createElement(i.Fragment,null,i.createElement(cp.Text,{className:"order-chat__footer-disclaimer",color:"less-prominent",size:"xxs"},i.createElement(Sa,{i18n_default_text:"In case of a dispute, we will only consider the communication through Deriv P2P chat channel."})),i.createElement("div",{className:a()("order-chat__footer",{"order-chat__footer--empty":0===e.chat_messages.length})},i.createElement("div",{className:"order-chat__footer-input"},i.createElement(cp.Input,{has_character_counter:!0,initial_character_count:o,max_characters:5e3,onChange:c,onKeyDown:function(e){if("Enter"===e.key&&!(0,Sn.isMobile)())if(e.ctrlKey||e.metaKey){var t,n=e.target,r=n.value;if("number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd)e.target.value="".concat(r.slice(0,n.selectionStart),"\n").concat(r.slice(n.selectionEnd));else if(null!==(t=document.selection)&&void 0!==t&&t.createRange){n.focus();var a=document.selection.createRange();a.text="\r\n",a.collapse(!1),a.select()}l()}else e.preventDefault(),u()},placeholder:Na("Enter message"),ref:function(e){return n.current=e},rows:1,trailing_icon:i.createElement("div",{className:"order-chat__footer-icon-container",onClick:d?function(){return t.current.click()}:u},i.createElement(Rf,{should_show_attachment_icon:d})),type:"textarea"}),i.createElement("input",{onChange:function(t){return e.sendFile(t.target.files[0])},ref:function(e){return t.current=e},style:{display:"none"},type:"file"}))))}));Lf.displayName="ChatFooter",Lf.propTypes={chat_messages:kn().arrayOf(kn().instanceOf(Ed)),sendMessage:kn().bool,sendFile:kn().bool};const Ff=Lf;var jf=bn((function(e){var t=e.children,n=e.is_modal_open,r=lp(),a=r.sendbird_store,o=r.order_store;return(0,Sn.isMobile)()?i.createElement(cp.MobileFullPageModal,{className:"order-chat",height_offset:"80px",is_flex:!0,is_modal_open:n,page_header_className:"order-chat__header",pageHeaderReturnFn:function(){a.setShouldShowChatModal(!1),a.setShouldShowChatOnOrders(!1),o.hideDetails(!0)},renderPageHeaderText:function(){return i.createElement(Nf.Body,null)}},t):i.createElement(i.Fragment,null,t)}));jf.propTypes={children:kn().any,is_modal_open:kn().bool};const zf=jf;n(4042);var Hf=bn((function(){var e=lp().sendbird_store;return e.is_chat_loading&&e.should_show_chat_modal?i.createElement("div",{className:"order-chat"},i.createElement(cp.Loading,{is_fullscreen:!1}),";"):e.has_chat_error?i.createElement("div",{className:"order-chat"},i.createElement("div",{className:"order-chat__error"},i.createElement(cp.Text,{as:"p",color:"prominent",line_height:"m",size:"s"},i.createElement(Sa,{i18n_default_text:"Oops, something went wrong"})),i.createElement("div",{className:"order-chat__error-retry"},i.createElement(cp.Button,{has_effect:!0,large:!0,onClick:function(){return e.initialiseChatWsConnection()},primary:!0,text:Na("Retry"),type:"button"})))):i.createElement(zf,{is_modal_open:e.should_show_chat_modal},i.createElement("div",{className:"order-chat"},i.createElement(Nf,null),i.createElement(Pf,null),i.createElement(Ff,null)))}));Hf.displayName="Chat",Hf.propTypes={has_chat_error:kn().bool,is_chat_loading:kn().bool,initialiseChatWsConnection:kn().func,should_show_chat_modal:kn().bool};const Bf=Hf;n(8942);var Gf=function(e){var t=e.hideCancelOrderModal,n=e.order_id,r=e.should_show_cancel_modal,a=lp().order_store,o=(0,Sn.useIsMounted)();return i.createElement(cp.Modal,{className:"cancel-modal",has_close_icon:!1,is_open:r,toggleModal:t,renderTitle:function(){return i.createElement(cp.Text,{color:"prominent","line-height":"m",size:"s",weight:"bold"},i.createElement(Sa,{i18n_default_text:"Do you want to cancel this order?"}))},width:"440px"},i.createElement(cp.Modal.Body,null,a.cancels_remaining>1?i.createElement(cp.Text,{color:"prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"If you cancel your order {{cancellation_limit}} times in {{cancellation_period}} hours, you will be blocked from using DP2P for {{block_duration}} hours. <br /> ({{number_of_cancels_remaining}} cancellations remaining.)",values:{block_duration:a.cancellation_block_duration,cancellation_limit:a.cancellation_limit,cancellation_period:a.cancellation_count_period,number_of_cancels_remaining:a.cancels_remaining}})):i.createElement(cp.Text,{color:"prominent",size:"xs"},i.createElement(Sa,{i18n_default_text:"If you cancel this order, you’ll be blocked from using DP2P for {{block_duration}} hours.",values:{block_duration:a.cancellation_block_duration}})),i.createElement("div",{className:"cancel-modal__warning"},i.createElement(cp.Text,{color:"loss-danger",size:"xs"},i.createElement(Sa,{i18n_default_text:"Please do not cancel if you have already made payment."})))),i.createElement(cp.Modal.Footer,{className:"cancel-modal__footer"},a.error_message&&i.createElement(dp,{message:a.error_message}),i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,large:!0,onClick:function(){zn({p2p_order_cancel:1,id:n}).then((function(e){o()&&(e.error&&a.setErrorMessage(e.error.message),t())}))}},i.createElement(Sa,{i18n_default_text:"Cancel this order"})),i.createElement(cp.Button,{primary:!0,type:"button",onClick:t,large:!0},i.createElement(Sa,{i18n_default_text:"Do not cancel"})))))};Gf.propTypes={hideCancelOrderModal:kn().func,order_id:kn().string,should_show_cancel_modal:kn().bool};const Vf=Gf;n(3898);var qf=function(e){var t=e.dispute_reason,n=e.onCheckboxChange,r=e.is_buy_order_for_user;return i.createElement(cp.RadioGroup,{className:"order-details-complain-modal__radio-group",name:"reason",onToggle:function(e){return n(e.target.value)},selected:t,required:!0,should_wrap_items:(0,Sn.isMobile)()},i.createElement(cp.RadioGroup.Item,{value:r?"seller_not_released":"buyer_not_paid",label:Na(r?"I’ve made full payment, but the seller hasn’t released the funds.":"I’ve not received any payment.")}),i.createElement(cp.RadioGroup.Item,{value:"buyer_underpaid",label:Na(r?"I wasn’t able to make full payment.":"I’ve received less than the agreed amount.")}),i.createElement(cp.RadioGroup.Item,{value:"buyer_overpaid",label:Na(r?"I’ve paid more than the agreed amount.":"I’ve received more than the agreed amount.")}))};qf.propTypes={dispute_reason:kn().string,onCheckboxChange:kn().func,is_buy_order_for_user:kn().bool};const Kf=qf;function Wf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qf=function(){return i.createElement("div",{className:"order-details-complain-modal__explanation"},i.createElement(cp.Text,{size:"xxs",line_height:"m",color:"general"},i.createElement(Sa,{i18n_default_text:"If your complaint isn't listed here, please contact our Customer Support team."})))},Jf=function(e){var t=e.dispute_reason,n=e.disputeOrderRequest,r=e.error_message,a=e.hideComplainOrderModal;return i.createElement(i.Fragment,null,r&&i.createElement(dp,{message:r}),i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,type:"button",onClick:a,large:!0},i.createElement(Sa,{i18n_default_text:"Cancel"})),i.createElement(cp.Button,{is_disabled:!t,primary:!0,large:!0,onClick:n},i.createElement(Sa,{i18n_default_text:"Submit"}))))},Xf=function(e){var t=e.id,n=e.is_buy_order_for_user,r=e.hideComplainOrderModal,a=e.should_show_complain_modal,o=(0,Sn.useIsMounted)(),s=Wf(i.useState(""),2),l=s[0],c=s[1],u=Wf(i.useState(""),2),d=u[0],p=u[1],h=function(){zn({p2p_order_dispute:1,id:t,dispute_reason:l}).then((function(e){o()&&(e.error&&p(e.error.message),r())}))},f=function(e){return c(e)};return(0,Sn.isMobile)()?i.createElement(cp.MobileFullPageModal,{body_className:"order-details-complain-modal__body",className:"order-details-complain-modal",height_offset:"80px",is_flex:!0,is_modal_open:a,page_header_className:"order-details-complain-modal__header",page_header_text:Na("Complaint"),pageHeaderReturnFn:r,renderPageFooterChildren:function(){return i.createElement(Jf,{dispute_reason:l,disputeOrderRequest:h,error_message:d,hideComplainOrderModal:r})},page_footer_className:"order-details-complain-modal__footer"},i.createElement(Kf,{is_buy_order_for_user:n,dispute_reason:l,onCheckboxChange:f}),i.createElement(Qf,null)):i.createElement(cp.Modal,{className:"order-details-complain-modal",is_open:a,toggleModal:r,has_close_icon:!0,renderTitle:function(){return i.createElement(cp.Text,{color:"prominent","line-height":"m",size:"s",weight:"bold"},i.createElement(Sa,{i18n_default_text:"What's your complaint?"}))},width:"440px",height:"500px"},i.createElement(cp.Modal.Body,{className:"order-details-complain-modal__body"},i.createElement(Kf,{is_buy_order_for_user:n,dispute_reason:l,onCheckboxChange:f}),i.createElement(Qf,null)),i.createElement(cp.Modal.Footer,null,i.createElement("div",{className:"order-details-complain-modal__footer"},i.createElement(Jf,{dispute_reason:l,disputeOrderRequest:h,error_message:d,hideComplainOrderModal:r}))))};Xf.propTypes={dispute_reason:kn().string,is_buy_order_for_user:kn().bool,onCheckboxChange:kn().func};const $f=Xf;function Zf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?em(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(4934);var tm=function(e){var t=e.order_information,n=e.is_buy_order_for_user,r=e.hideConfirmOrderModal,a=e.should_show_confirm_modal,o=t.account_currency,s=t.amount_display,l=t.id,c=t.local_currency,u=t.other_user_details,d=t.price_display,p=(0,Sn.useIsMounted)(),h=Zf(i.useState(""),2),f=h[0],m=h[1],_=Zf(i.useState(!1),2),y=_[0],g=_[1];return i.createElement(cp.Modal,{className:"order-details-confirm-modal",is_open:a,toggleModal:r,has_close_icon:!0,renderTitle:function(){return i.createElement(cp.Text,{color:"prominent","line-height":"m",size:"s",weight:"bold"},n?i.createElement(Sa,{i18n_default_text:"Confirm payment?"}):i.createElement(Sa,{i18n_default_text:"Have you received payment?"}))},width:"440px"},i.createElement(cp.Modal.Body,null,i.createElement(cp.Text,{color:"general","line-height":"m",size:"xs"},n?i.createElement(Sa,{i18n_default_text:"Please make sure that you've paid {{amount}} {{currency}} to {{other_user_name}}.",values:{amount:d,currency:c,other_user_name:u.name}}):i.createElement(Sa,{i18n_default_text:"Please confirm only after checking your bank or e-wallet account to make sure you have received payment."})),i.createElement(cp.Checkbox,{className:"order-details-card__modal-checkbox",onChange:function(){return g(!y)},defaultChecked:y,label:n?i.createElement(Sa,{i18n_default_text:"I have paid {{amount}} {{currency}}",values:{amount:d,currency:c}}):i.createElement(Sa,{i18n_default_text:"I have received {{amount}} {{currency}}",values:{amount:d,currency:c}})})),i.createElement(cp.Modal.Footer,null,f&&i.createElement(dp,{message:f}),i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{secondary:!0,type:"button",onClick:r,large:!0},n?i.createElement(Sa,{i18n_default_text:"I haven't paid yet"}):i.createElement(Sa,{i18n_default_text:"Cancel"})),i.createElement(cp.Button,{is_disabled:!y,primary:!0,large:!0,onClick:function(){zn({p2p_order_confirm:1,id:l}).then((function(e){p()&&e.error&&m(e.error.message)}))}},n?i.createElement(Sa,{i18n_default_text:"I've paid"}):i.createElement(Sa,{i18n_default_text:"Release {{amount}} {{currency}}",values:{amount:s,currency:o}})))))};tm.propTypes={order_information:kn().object,is_buy_order_for_user:kn().bool,hideConfirmOrderModal:kn().func,should_show_confirm_modal:kn().bool};const nm=tm;function rm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return am(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?am(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var im=bn((function(){var e=lp().order_store,t=e.order_information,n=t.is_buy_order,r=t.is_my_ad,a=t.is_sell_order,o=t.should_show_cancel_and_paid_button,s=t.should_show_complain_and_received_button,l=t.should_show_only_received_button,c=t.should_show_only_complain_button,u=n&&!r||a&&r,d=rm(i.useState(!1),2),p=d[0],h=d[1],f=rm(i.useState(!1),2),m=f[0],_=f[1],y=rm(i.useState(!1),2),g=y[0],v=y[1];i.useEffect((function(){var t=setInterval((function(){e.getWebsiteStatus()}),1e4);return function(){clearInterval(t)}}));var b=function(){return _(!1)},E=function(){return _(!0)},w=function(){return v(!1)},C=function(){return v(!0)};return o?i.createElement(i.Fragment,null,i.createElement("div",{className:"order-details-card__footer"},i.createElement("div",{className:"order-details-card__footer--right"},i.createElement(cp.Button.Group,null,i.createElement(cp.Button,{large:!0,secondary:!0,onClick:function(){e.getAdvertiserInfo(h)}},i.createElement(Sa,{i18n_default_text:"Cancel order"})),i.createElement(cp.Button,{large:!0,primary:!0,onClick:C},i.createElement(Sa,{i18n_default_text:"I've paid"}))))),i.createElement(Vf,{hideCancelOrderModal:function(){return h(!1)},order_id:e.order_information.id,should_show_cancel_modal:p}),i.createElement(nm,{hideConfirmOrderModal:w,is_buy_order_for_user:u,order_information:e.order_information,should_show_confirm_modal:g})):s?i.createElement(i.Fragment,null,i.createElement("div",{className:"order-details-card__footer"},i.createElement("div",{className:"order-details-card__footer--left"},i.createElement(cp.Button,{large:!0,tertiary:!0,onClick:E},i.createElement(Sa,{i18n_default_text:"Complain"}))),i.createElement("div",{className:"order-details-card__footer--right"},i.createElement(cp.Button,{large:!0,primary:!0,onClick:C},i.createElement(Sa,{i18n_default_text:"I've received payment"})))),i.createElement($f,{id:e.order_information.id,is_buy_order_for_user:u,hideComplainOrderModal:b,should_show_complain_modal:m}),i.createElement(nm,{order_information:e.order_information,is_buy_order_for_user:u,hideConfirmOrderModal:w,should_show_confirm_modal:g})):c?i.createElement(i.Fragment,null,i.createElement("div",{className:"order-details-card__footer"},i.createElement("div",{className:"order-details-card__footer--left"},i.createElement(cp.Button,{large:!0,tertiary:!0,onClick:E},i.createElement(Sa,{i18n_default_text:"Complain"})))),i.createElement($f,{id:e.order_information.id,is_buy_order_for_user:u,hideComplainOrderModal:b,should_show_complain_modal:m})):l?i.createElement(i.Fragment,null,i.createElement("div",{className:"order-details-card__footer"},i.createElement("div",{className:"order-details-card__footer--right"},i.createElement(cp.Button,{large:!0,primary:!0,onClick:C},i.createElement(Sa,{i18n_default_text:"I've received payment"})))),i.createElement(nm,{order_information:e.order_information,is_buy_order_for_user:u,hideConfirmOrderModal:w,should_show_confirm_modal:g})):null}));im.propTypes={order_information:kn().object};const om=im;function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lm=bn((function(){var e=function(e){var t=Mn(e);return{distance:t,label:Pn(Math.max(0,t))}},t=lp().order_store.order_information,n=t.order_expiry_milliseconds,r=t.should_show_order_timer,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(e(n).label),2),o=a[0],s=a[1],l=i.useRef(null),c=function(){var t=e(n);t.distance<0&&clearInterval(l.current),s(t.label)};return i.useEffect((function(){return c(),l.current=setInterval(c,1e3),function(){return clearInterval(l.current)}}),[]),r?i.createElement("div",{className:"order-details-card__header-timer"},i.createElement("div",null,Na("Time left")),i.createElement("div",{className:"order-details-card__header-timer-counter"},o)):(clearInterval(l.current),null)}));lm.propTypes={order_information:kn().object};const cm=lm;var um=function(e){var t=e.label,n=e.value;return i.createElement("div",{className:"order-details-card__info-block"},i.createElement(cp.Text,{as:"p",color:"less-prominent",size:"xxs"},t),i.createElement("div",{className:"order-details-card__info-block-value"},n))};um.propTypes={label:kn().string,value:kn().any};const dm=um;var pm=function(e){var t=e.children,n=e.onPageReturn,r=e.page_title,a=lp(),o=a.order_store,s=a.sendbird_store;return(0,Sn.isMobile)()?i.createElement(cp.MobileFullPageModal,{className:"order-details",height_offset:"80px",is_flex:!0,is_modal_open:!0,pageHeaderReturnFn:n,page_header_text:r,renderPageHeaderTrailingIcon:function(){return i.createElement(cp.Icon,{icon:"IcChat",height:15,width:16,onClick:function(){return s.setShouldShowChatModal(!0)}})},renderPageFooterChildren:function(){return o.order_information.should_show_order_footer&&i.createElement(om,{order_information:o.order_information})}},t):i.createElement(i.Fragment,null,i.createElement(Vp,{onClick:n,page_title:r}),t)};pm.propTypes={children:kn().any,onPageReturn:kn().func,page_title:kn().string};const hm=pm;n(3804);var fm=bn((function(e){var t=e.onPageReturn,n=lp(),r=n.order_store,o=n.sendbird_store,s=r.order_information,l=s.account_currency,c=s.advert_details,u=s.amount_display,d=s.chat_channel_url,p=s.contact_info,h=s.has_timer_expired,f=s.id,m=s.is_buy_order,_=s.is_buyer_confirmed_order,y=s.is_my_ad,g=s.is_pending_order,v=s.is_sell_order,b=s.labels,E=s.local_currency,w=s.other_user_details,C=s.payment_info,A=s.price,k=s.purchase_time,S=s.rate,N=s.should_highlight_alert,O=s.should_highlight_danger,T=s.should_highlight_success,I=s.should_show_order_footer,x=s.status_string,D=o.chat_channel_url,P=w.first_name&&w.last_name;i.useEffect((function(){var e=o.registerEventListeners(),t=o.registerMobXReactions();return d?o.setChatChannelUrl(d):o.createChatForNewOrder(r.order_id),function(){e(),t()}}),[]);var M=Na(m&&!y||v&&y?"Buy {{offered_currency}} order":"Sell {{offered_currency}} order",{offered_currency:l});return o.should_show_chat_on_orders?i.createElement(Bf,null):i.createElement(hm,{page_title:M,onPageReturn:t},i.createElement("div",{className:"order-details"},i.createElement("div",{className:"order-details-card"},i.createElement("div",{className:"order-details-card__header"},i.createElement("div",{className:"order-details-card__header--left"},i.createElement("div",{className:a()("order-details-card__header-status","order-details-card__header-status--info",{"order-details-card__header-status--alert":N,"order-details-card__header-status--danger":O,"order-details-card__header-status--success":T})},x),T&&i.createElement("div",{className:"order-details-card__message"},b.result_string),!h&&(g||_)&&i.createElement("div",{className:"order-details-card__header-amount"},(0,Sn.getFormattedText)(A,E)),i.createElement("div",{className:"order-details-card__header-id"},i.createElement(Sa,{i18n_default_text:"Order ID {{ id }}",values:{id:f}}))),i.createElement("div",{className:"order-details-card__header--right"},i.createElement(cm,null))),i.createElement(cp.ThemedScrollbars,{height:"unset",className:"order-details-card__info"},i.createElement("div",{className:"order-details-card__info-columns"},i.createElement("div",{className:"order-details-card__info--left"},i.createElement(dm,{label:b.other_party_role,value:i.createElement(i.Fragment,null,i.createElement(cp.Text,{size:P?"s":"xs",color:"prominent",line_height:"m",weight:P&&"bold"},w.name),P&&i.createElement(cp.Text,{size:"xs",line_height:"xs"}," ".concat(w.first_name," ").concat(w.last_name)))})),i.createElement("div",{className:"order-details-card__info--right"},i.createElement(dm,{label:Na("Rate (1 {{ account_currency }})",{account_currency:l}),value:(0,Sn.getFormattedText)(S,E)}))),i.createElement("div",{className:"order-details-card__info-columns"},i.createElement("div",{className:"order-details-card__info--left"},i.createElement(dm,{label:b.left_send_or_receive,value:(0,Sn.getFormattedText)(A,E)}),i.createElement(dm,{label:Na("Time"),value:k})),i.createElement("div",{className:"order-details-card__info--right"},i.createElement(dm,{label:b.right_send_or_receive,value:"".concat(u," ").concat(l)}))),i.createElement(dm,{label:b.payment_details,value:C||"-"}),i.createElement(dm,{label:b.contact_details,value:p||"-"}),i.createElement(dm,{label:b.instructions,value:c.description.trim()||"-"})),I&&(0,Sn.isDesktop)()&&i.createElement(om,{order_information:r.order_information})),D&&i.createElement(Bf,null)))}));fm.propTypes={chat_channel_url:kn().string,chat_info:kn().object,createChatForNewOrder:kn().func,order_information:kn().object,onCancelClick:kn().func,popup_options:kn().object,setChatChannelUrl:kn().func,setShouldShowPopup:kn().func,should_show_popup:kn().bool,onPageReturn:kn().func};const mm=fm;function _m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ym(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ym(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ym(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gm=function(e){var t=e.send_amount,n=e.currency,r=e.order_purchase_datetime,a=e.order_type;return i.createElement(i.Fragment,null,i.createElement(cp.Text,{size:"sm",color:"prominent",line_height:"xxs",weight:"bold",as:"p"},a," ",(0,Sn.formatMoney)(n,t,!0)," ",n),i.createElement(cp.Text,{color:"less-prominent",as:"p",line_height:"xxs",size:"xxs",align:"left"},r))},vm=function(e){var t=e.style,n=e.row,r=function(e){var t=Mn(e);return{distance:t,label:t<0?Na("expired"):Pn(t)}},o=lp(),s=o.general_store,l=o.order_store,c=o.sendbird_store,u=_m(i.useState(n),2),d=u[0],p=u[1],h=_m(i.useState(),2),f=h[0],m=h[1],_=d.account_currency,y=d.amount_display,g=d.id,v=d.is_buy_order,b=d.is_my_ad,E=d.is_sell_order,w=d.local_currency,C=d.order_expiry_milliseconds,A=d.order_purchase_datetime,k=d.other_user_details,S=d.price_display,N=d.should_highlight_alert,O=d.should_highlight_danger,T=d.should_highlight_disabled,I=d.should_highlight_success,x=d.status_string,D=_m(i.useState(r(C).label),2),P=D[0],M=D[1],R=i.useRef(null),U=function(e){return s.getLocalStorageSettingsForLoginId().notifications.some((function(t){return t.order_id===e&&!0===t.is_seen}))};i.useEffect((function(){return R.current=setInterval((function(){var e=r(C),t=e.distance,a=e.label;if(t<0){var i=s.client,o=s.props;M(a),p(Pi(n.order_details,i.loginid,o.server_time)),clearInterval(R.current),m(!1)}else M(a),m(s.is_active_tab)}),1e3),function(){return clearInterval(R.current)}}),[]);var L="".concat(y," ").concat(_),F="".concat(S," ").concat(w),j=v&&!b||E&&b,z=Na(j?"Buy":"Sell");return(0,Sn.isMobile)()?i.createElement("div",{onClick:function(){return l.setQueryDetails(n)}},i.createElement(cp.Table.Row,{style:t,className:a()("orders__mobile",{"orders__mobile--attention":!U(g)})},i.createElement(cp.Table.Cell,{className:a()("orders__mobile-header",{"orders__table-grid--active":s.is_active_tab})},i.createElement("div",{className:a()("orders__mobile-status",{"orders__table-status--danger":O,"orders__table-status--alert":N,"orders__table-status--success":I,"orders__table-status--disabled":T})},x)),i.createElement(cp.Table.Cell,{className:"orders__mobile-header-right"},f&&i.createElement(cp.Text,{size:"xxs",color:"prominent",align:"center",line_height:"l",className:"orders__mobile-time"},P),i.createElement("div",{className:"orders__mobile-chat"},i.createElement(cp.Icon,{icon:"IcChat",height:15,width:16,onClick:function(){c.setShouldShowChatModal(!0),c.setShouldShowChatOnOrders(!0)}}))),i.createElement(cp.Table.Cell,{className:"orders__mobile-title"},i.createElement(gm,{send_amount:y,currency:_,order_purchase_datetime:A,order_type:z})))):i.createElement("div",{onClick:function(){return l.setQueryDetails(n)}},i.createElement(cp.Table.Row,{className:a()("orders__table-row orders__table-grid",{"orders__table-grid--active":s.is_active_tab,"orders__table-row--attention":!U(g)})},i.createElement(cp.Table.Cell,null,z),i.createElement(cp.Table.Cell,null,g),i.createElement(cp.Table.Cell,null,k.name),i.createElement(cp.Table.Cell,null,i.createElement("div",{className:a()("orders__table-status",{"orders__table-status--danger":O,"orders__table-status--alert":N,"orders__table-status--success":I,"orders__table-status--disabled":T})},x)),i.createElement(cp.Table.Cell,null,j?F:L),i.createElement(cp.Table.Cell,null,j?L:F),i.createElement(cp.Table.Cell,null,s.is_active_tab?i.createElement("div",{className:"orders__table-time"},P):A)))};vm.propTypes={order:kn().object};const bm=bn(vm);var Em=bn((function(e){var t=e.children,n=lp().general_store;return i.createElement(cp.Table,{className:"orders__table"},i.createElement(cp.Table.Header,null,i.createElement(cp.Table.Row,{className:a()("orders__table-grid",{"orders__table-grid--active":n.is_active_tab})},i.createElement(cp.Table.Head,null,Na("Order")),i.createElement(cp.Table.Head,null,Na("Order ID")),i.createElement(cp.Table.Head,null,Na("Counterparty")),i.createElement(cp.Table.Head,null,Na("Status")),i.createElement(cp.Table.Head,null,Na("Send")),i.createElement(cp.Table.Head,null,Na("Receive")),i.createElement(cp.Table.Head,null,Na("Time")))),i.createElement(cp.Table.Body,{className:"orders__table-body"},t))}));Em.propTypes={children:kn().any,is_active_tab:kn().bool};const wm=Em;var Cm=function(e){var t=e.children;return(0,Sn.isMobile)()?i.createElement(cp.Div100vhContainer,{height_offset:"21rem"},t):i.createElement(wm,null,t)},Am=function(){var e=lp(),t=e.general_store,n=e.order_store;if(i.useEffect((function(){return tt((function(){return t.order_table_type}),(function(){n.setIsLoading(!0),n.setOrders([]),n.loadMoreOrders({startIndex:0})}),{fireImmediately:!0})}),[]),n.is_loading)return i.createElement(cp.Loading,{is_fullscreen:!1});if(n.api_error_message)return i.createElement(kh,{message:n.api_error_message});if(n.orders.length){var r=t.client,a=t.props,o=n.orders.map((function(e){return Pi(e,r.loginid,a.server_time)})).filter((function(e){return t.is_active_tab?e.is_active_order:e.is_inactive_order}));if(o.length)return i.createElement(Cm,null,i.createElement(cp.InfiniteDataList,{data_list_className:"orders__data-list",has_more_items_to_load:n.has_more_items_to_load,items:o,keyMapperFn:function(e){return e.id},loadMoreRowsFn:n.loadMoreOrders,rowRenderer:function(e){return i.createElement(bm,e)}}))}return i.createElement(Up,{has_tabs:!0,icon:"IcNoOrder",title:Na("You have no orders.")},t.is_active_tab&&i.createElement(cp.Button,{primary:!0,large:!0,className:"p2p-empty__button",onClick:function(){return t.handleTabClick(0)}},i.createElement(Sa,{i18n_default_text:"Buy/Sell"})))};Am.propTypes={is_active:kn().bool,showDetails:kn().func};const km=bn(Am);var Sm=function(e){var t=e.showDetails,n=lp().general_store,r=[{text:Na("Active orders"),value:Mi,count:n.active_notification_count},{text:Na("Past orders"),value:"inactive",count:n.inactive_notification_count}],a=n.order_table_type===Mi;return i.createElement(i.Fragment,null,i.createElement("div",{className:"orders-tab"},i.createElement("div",{className:"orders-tab__header "},i.createElement($p,null,i.createElement(cp.ButtonToggle,{buttons_arr:r,className:"orders-tab__header-filter",is_animated:!0,name:"filter",onChange:function(e){var t=e.target.value;return n.setOrderTableType(t)},value:n.order_table_type,has_rounded_button:!0})))),i.createElement(km,{showDetails:t,is_active:a}))};Sm.propTypes={showDetails:kn().func};const Nm=bn(Sm);function Om(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(8786);var Tm=bn((function(){var e=lp().order_store,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Om(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Om(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,cp.useSafeState)(),2)[1];return e.setForceRerenderOrders(t),i.useEffect((function(){var t=tt((function(){return e.order_id}),(function(){return e.onOrderIdUpdate()}),{fireImmediately:!0}),n=tt((function(){return e.orders}),(function(){return e.onOrdersUpdate()}),{fireImmediately:!0});return function(){t(),n(),e.onUnmount()}}),[]),e.order_information?i.createElement("div",{className:"orders"},i.createElement(mm,{onPageReturn:function(){return e.hideDetails(!0)}})):i.createElement("div",{className:"orders"},i.createElement(Nm,null))}));Tm.displayName="Orders";const Im=Tm,xm=bn((function(){var e=lp().general_store;return e.is_barred?i.createElement("div",{className:"p2p-cashier__barred-user"},i.createElement(cp.HintBox,{icon:"IcAlertWarning",message:i.createElement(cp.Text,{size:"xxxs",color:"prominent",line_height:"xs"},i.createElement(Sa,{i18n_default_text:"You've been temporarily barred from using our services due to multiple cancellation attempts. Try again after {{date_time}} GMT.",values:{date_time:e.blocked_until_date_time}})),is_warn:!0})):null}));n(5694);const Dm=xm;n(7583);const Pm=function(){return i.createElement(cp.Text,{as:"h1",align:"center",size:"xs",className:"dp2p-unsupported-account"},i.createElement(Sa,{i18n_default_text:"This feature is only available for real-money USD accounts right now."}))};var Mm=["styles"];function Rm(){return(Rm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Um=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Mm);return o().createElement("svg",Rm({xmlns:"http://www.w3.org/2000/svg",width:"166",height:"48"},t),o().createElement("g",{fill:"none"},o().createElement("path",{fill:"#0E0E0E",stroke:"#999",strokeWidth:"1.2",d:"M160.8.6a4.19 4.19 0 014.2 4.2h0v38.4a4.19 4.19 0 01-4.2 4.2h0-156a4.19 4.19 0 01-2.97-1.23A4.19 4.19 0 01.6 43.2h0V4.8c0-1.16.47-2.21 1.23-2.97A4.19 4.19 0 014.8.6h156z"}),o().createElement("path",{fill:"#FFFFFE",d:"M39.36 22.64c-.03-3.3 2.7-4.91 2.83-4.99a6.08 6.08 0 00-4.8-2.58c-2.01-.22-3.96 1.2-5 1.2s-2.62-1.19-4.32-1.15a6.38 6.38 0 00-5.37 3.27c-2.32 4.02-.59 9.93 1.64 13.17 1.1 1.6 2.4 3.37 4.1 3.31 1.67-.07 2.3-1.06 4.3-1.06s2.58 1.06 4.31 1.02c1.79-.03 2.91-1.6 3.99-3.2a13.18 13.18 0 001.82-3.71 5.74 5.74 0 01-3.5-5.28m-3.28-9.71a5.85 5.85 0 001.34-4.2c-1.3.07-2.92.9-3.85 2a5.56 5.56 0 00-1.38 4.03c1.46.11 2.96-.73 3.89-1.83M55.3 28.98h4.5l-2.21-6.53h-.06l-2.23 6.53zm5.1 1.86h-5.68l-1.37 4.03h-2.4l5.38-14.9h2.5l5.38 14.9h-2.45l-1.36-4.03zm13.13-1.4c0-2.2-1.13-3.65-2.87-3.65-1.7 0-2.85 1.48-2.85 3.65 0 2.19 1.15 3.65 2.85 3.65 1.74 0 2.87-1.43 2.87-3.65zm2.3 0c0 3.37-1.81 5.54-4.54 5.54-1.55 0-2.78-.69-3.42-1.9h-.05v5.38H65.6V24.01h2.16v1.8h.04a3.86 3.86 0 013.46-1.92c2.76 0 4.58 2.18 4.58 5.55zm9.66 0c0-2.2-1.14-3.65-2.87-3.65-1.7 0-2.85 1.48-2.85 3.65 0 2.19 1.15 3.65 2.85 3.65 1.73 0 2.87-1.43 2.87-3.65zm2.3 0c0 3.37-1.81 5.54-4.54 5.54-1.55 0-2.78-.69-3.42-1.9h-.05v5.38h-2.23V24.01h2.16v1.8h.04a3.85 3.85 0 013.46-1.92c2.76 0 4.57 2.18 4.57 5.55zm7.9 1.28c.16 1.48 1.6 2.45 3.56 2.45 1.88 0 3.23-.97 3.23-2.3 0-1.16-.81-1.86-2.75-2.33l-1.93-.47c-2.73-.66-4-1.94-4-4.01 0-2.57 2.24-4.34 5.42-4.34 3.15 0 5.3 1.77 5.38 4.34h-2.25c-.14-1.49-1.37-2.39-3.16-2.39-1.8 0-3.03.91-3.03 2.23 0 1.06.79 1.68 2.7 2.15l1.65.4c3.06.73 4.33 1.95 4.33 4.14 0 2.78-2.22 4.53-5.75 4.53-3.31 0-5.54-1.7-5.68-4.4h2.28m13.96-9.28V24h2.07v1.76h-2.07v6c0 .92.41 1.36 1.32 1.36.23 0 .6-.04.73-.06v1.76c-.24.06-.74.1-1.23.1-2.2 0-3.06-.82-3.06-2.93v-6.23h-1.58v-1.76h1.58v-2.57h2.24m11.3 8c0-2.35-1.08-3.73-2.88-3.73-1.81 0-2.88 1.4-2.88 3.73 0 2.35 1.07 3.73 2.88 3.73 1.8 0 2.88-1.38 2.88-3.73zm-8.04 0c0-3.42 2.02-5.57 5.15-5.57 3.15 0 5.16 2.15 5.16 5.57 0 3.43-2 5.56-5.16 5.56s-5.15-2.13-5.15-5.56zm12.15-5.43h2.12v1.85h.06a2.59 2.59 0 012.6-1.97c.33 0 .6.04.77.09v2.08a3.14 3.14 0 00-1-.13c-1.43 0-2.32.97-2.32 2.5v6.44h-2.23V24.01m8.3 4.43h5.43c-.05-1.67-1.12-2.76-2.67-2.76-1.53 0-2.65 1.12-2.76 2.76zm7.53 3.24c-.3 1.97-2.22 3.33-4.67 3.33-3.16 0-5.13-2.12-5.13-5.52 0-3.4 1.98-5.62 5.03-5.62 3 0 4.9 2.07 4.9 5.36V30h-7.67v.13c0 1.86 1.16 3.08 2.92 3.08 1.24 0 2.2-.59 2.5-1.53h2.12zM53.55 14.9h1.35c1.5 0 2.36-.93 2.36-2.57 0-1.62-.87-2.56-2.36-2.56h-1.35v5.13zm1.48-6.15c2.12 0 3.36 1.3 3.36 3.56 0 2.29-1.23 3.6-3.37 3.6h-2.58V8.75h2.59zm8.62 4.46c0-1.17-.53-1.86-1.45-1.86-.93 0-1.45.69-1.45 1.86 0 1.18.52 1.86 1.45 1.86.92 0 1.45-.69 1.45-1.86zm-4 0c0-1.74.97-2.8 2.55-2.8 1.57 0 2.55 1.06 2.55 2.8 0 1.75-.97 2.8-2.55 2.8-1.58 0-2.55-1.05-2.55-2.8zm11.87 2.7h-1.1l-1.12-3.98h-.09l-1.1 3.98H67l-1.5-5.4h1.09l.97 4.12h.08l1.1-4.12h1.03l1.11 4.12h.09l.96-4.12H73l-1.49 5.4m2.74-5.4h1.02v.86h.08c.27-.6.8-.96 1.62-.96 1.2 0 1.87.72 1.87 2v3.5h-1.07v-3.23c0-.87-.38-1.3-1.17-1.3-.78 0-1.29.53-1.29 1.37v3.16h-1.06v-5.4m6.29 5.4h1.06V8.4h-1.06v7.51zm6.55-2.7c0-1.17-.53-1.86-1.45-1.86-.93 0-1.45.69-1.45 1.86 0 1.18.52 1.86 1.45 1.86.92 0 1.44-.69 1.44-1.86zm-4 0c0-1.74.97-2.8 2.55-2.8 1.57 0 2.54 1.06 2.54 2.8 0 1.75-.97 2.8-2.55 2.8-1.58 0-2.55-1.05-2.55-2.8zm9.69.71v-.45l-1.32.08c-.75.05-1.08.3-1.08.78 0 .5.42.77 1 .77.8 0 1.4-.5 1.4-1.18zm-3.48.46c0-.97.73-1.53 2.01-1.6l1.47-.1v-.46c0-.57-.38-.9-1.1-.9-.6 0-1.02.23-1.13.6h-1.04c.11-.92.98-1.52 2.21-1.52 1.36 0 2.12.68 2.12 1.82v3.7h-1.03v-.77h-.08c-.32.55-.91.85-1.62.85-1.05 0-1.8-.63-1.8-1.62zm7.04-1.17c0 1.14.54 1.83 1.45 1.83.9 0 1.45-.7 1.45-1.83 0-1.12-.56-1.83-1.45-1.83-.9 0-1.45.7-1.45 1.83zm-1.1 0c0-1.7.88-2.79 2.24-2.79.74 0 1.37.35 1.66.95h.08V8.4h1.07v7.51h-1.02v-.85h-.09c-.32.59-.95.94-1.7.94-1.37 0-2.24-1.08-2.24-2.8zm13.46 0c0-1.17-.53-1.86-1.45-1.86-.93 0-1.45.69-1.45 1.86 0 1.18.52 1.86 1.45 1.86.92 0 1.45-.69 1.45-1.86zm-4 0c0-1.74.97-2.8 2.55-2.8 1.57 0 2.55 1.06 2.55 2.8 0 1.75-.97 2.8-2.55 2.8-1.58 0-2.55-1.05-2.55-2.8zm6.53-2.7h1.02v.86h.08c.27-.6.8-.96 1.62-.96 1.2 0 1.87.72 1.87 2v3.5h-1.07v-3.23c0-.87-.38-1.3-1.17-1.3-.79 0-1.29.53-1.29 1.37v3.16h-1.06v-5.4m10.61-1.35v1.37h1.17v.9h-1.17v2.78c0 .57.24.81.77.81.16 0 .25 0 .4-.02v.89c-.17.03-.37.05-.58.05-1.18 0-1.65-.41-1.65-1.46v-3.05h-.86v-.9h.85V9.16h1.07m2.63-.76h1.06v2.98h.08c.26-.6.83-.97 1.65-.97 1.15 0 1.86.73 1.86 2.01v3.5h-1.07v-3.23c0-.87-.4-1.3-1.15-1.3-.88 0-1.36.55-1.36 1.37v3.15h-1.07V8.4m7.12 4.31h2.73c-.03-.85-.54-1.4-1.34-1.4-.78 0-1.34.56-1.4 1.4zm3.75 1.74c-.25.97-1.11 1.57-2.34 1.57-1.55 0-2.5-1.06-2.5-2.8 0-1.72.97-2.81 2.5-2.81 1.5 0 2.4 1.02 2.4 2.72v.37h-3.81v.06c.03.95.58 1.55 1.43 1.55.65 0 1.1-.23 1.3-.66h1.02z"})))};var Lm=["styles"];function Fm(){return(Fm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const jm=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Lm);return o().createElement("svg",Fm({xmlns:"http://www.w3.org/2000/svg",width:"165",height:"48"},t),o().createElement("g",{fill:"none"},o().createElement("path",{fill:"#000",d:"M158.89 47.89H6.1A6.05 6.05 0 010 41.78V6.1A6.05 6.05 0 016.11 0H158.9A6.05 6.05 0 01165 6.11v35.67c0 3.3-2.69 6.1-6.11 6.1z"}),o().createElement("path",{fill:"#A6A6A6",d:"M158.87 1A5.11 5.11 0 01164 6.03v35.94a5.11 5.11 0 01-5.13 5.03H6.13A5.11 5.11 0 011 41.97V6.03A5.11 5.11 0 016.13 1h152.74zM6.1 0A6 6 0 000 6v36a6 6 0 006.11 6H158.9a6 6 0 006.11-6V6c0-3.24-2.69-6-6.11-6H6.11z"}),o().createElement("path",{d:"M57.93 11.47c0 .97-.24 1.83-.85 2.44a3.6 3.6 0 01-2.7 1.1c-1.1 0-1.95-.36-2.68-1.1-.73-.73-1.1-1.59-1.1-2.69s.37-1.95 1.1-2.69a3.6 3.6 0 014.16-.73c.49.25.85.49 1.1.86l-.61.6c-.5-.6-1.1-.85-1.96-.85-.73 0-1.47.25-1.96.86-.6.49-.85 1.22-.85 2.08 0 .85.24 1.58.85 2.07.61.5 1.23.86 1.96.86.85 0 1.47-.25 2.08-.86.36-.36.6-.85.6-1.46H54.4v-.86h3.54v.37zm5.63-3.06h-3.3v2.32h3.05v.86h-3.06v2.32h3.3v.98h-4.27V7.56h4.27zm4.03 6.48h-.98V8.4h-2.08v-.85h5.14v.85h-2.08zm5.62 0V7.56h.98v7.33zm5.13 0h-.97V8.4h-2.08v-.85h5.01v.85h-2.08v6.48zm11.61-.98c-.73.74-1.58 1.1-2.68 1.1s-1.96-.36-2.7-1.1a3.6 3.6 0 01-1.1-2.69c0-1.1.37-1.95 1.1-2.69a3.6 3.6 0 012.7-1.1c1.1 0 1.95.37 2.69 1.1a3.6 3.6 0 011.1 2.7c0 1.1-.37 1.95-1.1 2.68zm-4.64-.61c.49.49 1.22.86 1.96.86.73 0 1.46-.25 1.95-.86a2.95 2.95 0 00.86-2.08c0-.85-.25-1.59-.86-2.08a2.88 2.88 0 00-1.95-.85c-.74 0-1.47.24-1.96.85a2.95 2.95 0 00-.86 2.08c0 .86.25 1.6.86 2.08zm7.09 1.59V7.56h1.1l3.54 5.74h0V7.56h.98v7.33h-.98L93.25 8.9h0v5.99z",fill:"#FFF",stroke:"#FFF",strokeWidth:".51"}),o().createElement("path",{fill:"#FFF",d:"M83.23 25.64a5.14 5.14 0 00-5.25 5.26 5.22 5.22 0 005.25 5.26c2.94 0 5.26-2.2 5.26-5.26a5.07 5.07 0 00-5.26-5.26zm0 8.32c-1.59 0-2.93-1.35-2.93-3.18 0-1.84 1.34-3.18 2.93-3.18 1.6 0 2.94 1.22 2.94 3.18 0 1.83-1.35 3.18-2.94 3.18zm-11.36-8.32a5.14 5.14 0 00-5.26 5.26 5.22 5.22 0 005.26 5.26c2.93 0 5.25-2.2 5.25-5.26a5.07 5.07 0 00-5.25-5.26zm0 8.32c-1.6 0-2.94-1.35-2.94-3.18 0-1.84 1.35-3.18 2.94-3.18 1.59 0 2.93 1.22 2.93 3.18 0 1.83-1.34 3.18-2.93 3.18zM58.3 27.23v2.2h5.26a4.62 4.62 0 01-1.23 2.81 5.4 5.4 0 01-4.03 1.6c-3.3 0-5.74-2.57-5.74-5.87s2.56-5.87 5.74-5.87c1.71 0 3.06.73 4.03 1.59l1.6-1.59a7.83 7.83 0 00-5.5-2.2c-4.4 0-8.2 3.67-8.2 8.07s3.8 8.06 8.2 8.06c2.44 0 4.15-.73 5.61-2.32A7.36 7.36 0 0066 28.58c0-.5 0-.98-.12-1.35H58.3zm55.49 1.71c-.49-1.22-1.71-3.3-4.4-3.3s-4.89 2.08-4.89 5.26c0 2.93 2.2 5.26 5.13 5.26a5.01 5.01 0 004.28-2.33l-1.71-1.22c-.61.86-1.34 1.47-2.57 1.47-1.22 0-1.95-.5-2.56-1.6l6.96-2.92-.24-.62zm-7.09 1.72c0-1.96 1.59-3.06 2.69-3.06.85 0 1.71.49 1.95 1.1l-4.64 1.96zm-5.74 5h2.32V20.4h-2.32v15.28zm-3.67-8.92a4.03 4.03 0 00-2.81-1.22 5.25 5.25 0 00-5.01 5.26 5.06 5.06 0 005 5.13c1.23 0 2.2-.61 2.7-1.22h.12v.73c0 1.96-1.1 3.06-2.81 3.06a2.72 2.72 0 01-2.57-1.84l-1.95.86a5.04 5.04 0 004.64 3.06c2.69 0 4.89-1.6 4.89-5.38v-9.3h-2.2v.86zm-2.69 7.22c-1.59 0-2.93-1.35-2.93-3.18 0-1.84 1.34-3.18 2.93-3.18s2.81 1.34 2.81 3.18c0 1.83-1.22 3.18-2.81 3.18zm29.82-13.57h-5.5v15.28h2.32v-5.75h3.18c2.57 0 5.01-1.83 5.01-4.76 0-2.94-2.44-4.77-5-4.77zm.12 7.33h-3.3v-5.25h3.3a2.68 2.68 0 012.7 2.56c-.13 1.35-1.1 2.7-2.7 2.7zm14.06-2.2c-1.71 0-3.42.74-4.03 2.32l2.07.86c.5-.86 1.23-1.1 2.08-1.1 1.22 0 2.32.73 2.45 1.96v.12a4.85 4.85 0 00-2.33-.61c-2.2 0-4.4 1.22-4.4 3.42 0 2.08 1.84 3.42 3.8 3.42 1.58 0 2.32-.73 2.93-1.47h.12v1.23h2.2V29.8c-.25-2.69-2.32-4.28-4.89-4.28zm-.24 8.44c-.74 0-1.84-.37-1.84-1.35 0-1.22 1.35-1.59 2.45-1.59.97 0 1.46.25 2.07.5a2.85 2.85 0 01-2.68 2.44zm12.83-8.07l-2.57 6.6h-.12l-2.69-6.6h-2.44l4.03 9.29-2.32 5.13h2.32l6.23-14.42h-2.44zm-20.53 9.78h2.32V20.39h-2.32v15.28z"}),o().createElement("path",{fill:"#41D5FE",d:"M12.71 8.17c-.37.36-.61.98-.61 1.7V36.9c0 .73.24 1.34.61 1.71l.12.12L28 23.57v-.25L12.71 8.17z"}),o().createElement("path",{fill:"#FBC902",d:"M33 28.7l-5.01-5.01v-.37l5.01-5 .12.11 6 3.43c1.7.97 1.7 2.56 0 3.54L33 28.7z"}),o().createElement("path",{fill:"#F63647",d:"M33.12 28.58L28 23.45 12.71 38.72c.61.61 1.47.61 2.57.13l17.84-10.27"}),o().createElement("path",{fill:"#4DEF76",d:"M33.12 18.31L15.28 8.17c-1.1-.61-1.96-.5-2.57.12l15.28 15.16 5.13-5.14z"}),o().createElement("g",{fill:"#000"},o().createElement("path",{d:"M33 28.46L15.28 38.48c-.98.61-1.84.49-2.45 0l-.12.12.12.12c.61.5 1.47.61 2.45 0L33 28.46z",opacity:".2"}),o().createElement("path",{d:"M12.71 38.48c-.37-.37-.49-.98-.49-1.71v.12c0 .73.25 1.34.61 1.71v-.12h-.12z",opacity:".12"})),o().createElement("path",{fill:"#000",d:"M39.11 25.03L33 28.46l.12.12 6-3.42c.85-.5 1.21-1.1 1.21-1.72 0 .62-.49 1.1-1.22 1.6z",opacity:".12"}),o().createElement("path",{fill:"#FFF",d:"M15.28 8.29L39.1 21.86c.73.49 1.22.97 1.22 1.59 0-.62-.36-1.23-1.22-1.72L15.28 8.17c-1.71-.98-3.06-.12-3.06 1.83v.12c0-1.95 1.35-2.8 3.06-1.83z",opacity:".25"})))};var zm=["styles"];function Hm(){return(Hm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Bm=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,zm);return o().createElement("svg",Hm({xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},t),o().createElement("defs",null,o().createElement("linearGradient",{id:"a",x1:"94.87%",x2:"43.66%",y1:".74%",y2:"60.79%"},o().createElement("stop",{offset:"0%",stopColor:"#969696"}),o().createElement("stop",{offset:"100%",stopColor:"#0E0E0E",stopOpacity:"0"})),o().createElement("linearGradient",{id:"b",x1:"80.77%",x2:"18.81%",y1:"18.73%",y2:"80.7%"},o().createElement("stop",{offset:"0%",stopColor:"#FF444F"}),o().createElement("stop",{offset:"100%",stopColor:"#FF444F",stopOpacity:"0"})),o().createElement("linearGradient",{id:"c",x1:"19.37%",x2:"81.31%",y1:"81.31%",y2:"19.36%"},o().createElement("stop",{offset:"0%",stopColor:"#FFF"}),o().createElement("stop",{offset:"100%",stopColor:"#FFF",stopOpacity:"0"})),o().createElement("linearGradient",{id:"d",x1:"-2.78%",x2:"103.57%",y1:"106.72%",y2:"-.42%"},o().createElement("stop",{offset:"0%",stopColor:"#8D8C8C"}),o().createElement("stop",{offset:"0%",stopColor:"#8D8C8C"}),o().createElement("stop",{offset:"31.38%",stopColor:"#575757",stopOpacity:".56"}),o().createElement("stop",{offset:"85.91%",stopColor:"#575757",stopOpacity:".56"}),o().createElement("stop",{offset:"100%",stopColor:"#8C8C8C",stopOpacity:"0"}))),o().createElement("g",{fill:"none",fillRule:"evenodd"},o().createElement("rect",{width:"64",height:"64",fill:"#0E0E0E",fillRule:"nonzero",rx:"8.53"}),o().createElement("rect",{width:"64",height:"64",fill:"url(#a)",fillRule:"nonzero",rx:"8.53"}),o().createElement("path",{fill:"url(#b)",fillRule:"nonzero",d:"M18.27 51.2l-2.45-2.47 4.08-4.11 2.44 2.46z"}),o().createElement("path",{fill:"#FF444F",fillRule:"nonzero",d:"M37.9 28.1l-3.04-3.07a1.75 1.75 0 00-2.47.02 1.76 1.76 0 00.02 2.45l3.05 3.07a8.67 8.67 0 01.1 12.07c-3.32 3.46-8.96 3.35-12.34-.06a.92.92 0 00-1.31 0l-1.8 1.81-.21.22 2.45 2.47.38-.38A11.94 11.94 0 0037.9 45.2a12.2 12.2 0 000-17.11z"}),o().createElement("path",{fill:"url(#c)",fillRule:"nonzero",d:"M45.74 12.8l2.44 2.47-4.07 4.12-2.45-2.47z"}),o().createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M26.1 35.9l3.04 3.07c.69.66 1.8.67 2.47-.02a1.76 1.76 0 00-.02-2.45l-3.05-3.07a8.68 8.68 0 01-.1-12.07c3.32-3.47 8.96-3.35 12.34.06a.92.92 0 001.3 0l1.8-1.81.22-.22-2.45-2.47-.38.38a11.94 11.94 0 00-15.18 1.48 12.2 12.2 0 000 17.12z"}),o().createElement("rect",{width:"63.47",height:"63.47",x:".27",y:".27",stroke:"url(#d)",strokeWidth:".53",rx:"8.27"})))};n(3291);const Gm=function(){var e="iOS"===(0,Sn.mobileOSDetect)()&&!1,t=e?"http://itunes.apple.com/lb/app/truecaller-caller-id-number/id448142450?mt=8":"https://play.app.goo.gl/?link=https://play.google.com/store/apps/details?id=com.deriv.dp2p";return i.createElement("div",{className:"p2p-verification__download"},i.createElement(Bm,null),i.createElement("div",{className:"p2p-verification__text"},i.createElement(cp.Text,{color:"prominent",size:"s",line_height:"m",weight:"bold"},i.createElement(Sa,{i18n_default_text:"DP2P is ready for you"}))),i.createElement("a",{className:"p2p-verification__app-store",href:t,rel:"noopener noreferrer"},e?i.createElement(Um,null):i.createElement(jm,null)))},Vm=bn((function(){var e=lp().general_store;return e.is_loading?i.createElement(cp.Loading,{is_fullscreen:!1}):e.is_unsupported_account?i.createElement(Pm,null):e.should_show_dp2p_blocked?i.createElement(Wp,null):e.should_show_popup?i.createElement(Ap,null):e.props.should_show_verification?e.is_advertiser?i.createElement(Gm,null):i.createElement(Jp,{should_wrap:!0}):i.createElement(cp.Tabs,{active_index:e.active_index,className:"p2p-cashier__tabs",header_fit_content:!(0,Sn.isMobile)(),is_100vw:(0,Sn.isMobile)(),is_scrollable:!0,is_overflow_hidden:!0,onTabItemClick:e.handleTabClick,top:!0},i.createElement("div",{label:Na("Buy / Sell")},i.createElement(Dm,null),i.createElement(Rh,null)),i.createElement("div",{count:e.notification_count,label:Na("Orders")},i.createElement(Im,null)),i.createElement("div",{label:Na("My ads")},i.createElement(Dm,null),i.createElement(of,null)),e.is_advertiser&&i.createElement("div",{label:Na("My profile")},i.createElement(Af,null)))}));n(1472);var qm=function(e){var t=lp(),n=t.general_store,r=t.order_store,o=e.className,s=e.history,l=e.lang,c=e.order_id,u=e.server_time,d=e.websocket_api;return i.useEffect((function(){return n.setAppProps(e),n.setWebsocketInit(d,n.client.local_currency_config.decimal_places),r.setOrderId(c),/\/verification$/.test(null==s?void 0:s.location.pathname)&&(localStorage.setItem("is_verifying_p2p",!0),s.push(Sn.routes.cashier_p2p)),function(e){Ca=e||"EN",Dr.changeLanguage(e)}(l),function(e){Tn=e}(u),window.onpageshow=function(e){e.persisted&&window.location.reload()},("authorize",Ln.wait("authorize")).then((function(){n.onMount(),localStorage.getItem("is_verifying_p2p")&&(localStorage.removeItem("is_verifying_p2p"),n.setActiveIndex(n.path.my_ads))})),function(){return n.onUnmount()}}),[]),i.useEffect((function(){c&&n.redirectTo("orders")}),[c]),i.createElement("main",{className:a()("p2p-cashier",o)},i.createElement(Vm,null))};qm.propTypes={client:kn().shape({currency:kn().string.isRequired,is_virtual:kn().bool.isRequired,local_currency_config:kn().shape({currency:kn().string.isRequired,decimal_places:kn().number}).isRequired,loginid:kn().string.isRequired,residence:kn().string.isRequired}),lang:kn().string,modal_root_id:kn().string.isRequired,order_id:kn().string,setNotificationCount:kn().func,websocket_api:kn().object.isRequired};const Km=bn(qm)},8124:e=>{"use strict";e.exports=s},3140:e=>{"use strict";e.exports=o},7717:e=>{"use strict";e.exports=l},5371:e=>{"use strict";e.exports=c},4229:e=>{"use strict";e.exports=i},9297:e=>{"use strict";e.exports=r},2268:e=>{"use strict";e.exports=a}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(659).default})())}}]);